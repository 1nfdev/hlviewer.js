/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2018 Stefan Stojković
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
(function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&'object'==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,'default',{enumerable:!0,value:e}),2&a&&'string'!=typeof e)for(var r in e)t.d(n,r,function(t){return e[t]}.bind(null,r));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(a,'a',a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=78)})([function(e,t){'use strict';var a=Array.isArray;t.a=a},function(e,t,a){'use strict';var n=a(6),r=a(57),i=a(48);t.a=function(e,t){return Object(i.a)(Object(r.a)(e,t,n.a),e+'')}},function(e,t){'use strict';t.a=function(e){var t=typeof e;return null!=e&&('object'==t||'function'==t)}},function(e,t){'use strict';t.a=function(e){return null!=e&&'object'==typeof e}},function(e,t,a){'use strict';var n=a(7),r=a(3);t.a=function(e){return Object(r.a)(e)&&Object(n.a)(e)}},function(e,t,a){'use strict';var n=a(56),r='object'==typeof self&&self&&self.Object===Object&&self,i=n.a||r||Function('return this')();t.a=i},function(e,t){'use strict';t.a=function(e){return e}},function(e,t,a){'use strict';var n=a(16),r=a(31);t.a=function(e){return null!=e&&Object(r.a)(e.length)&&!Object(n.a)(e)}},function(e,t,a){'use strict';function n(e,t,a){if(!Object(s.a)(a))return!1;var n=typeof t;return!('number'==n?!(Object(i.a)(a)&&Object(o.a)(t,a.length)):!('string'==n&&t in a))&&Object(r.a)(a[t],e)}var r=a(14),i=a(7),o=a(19),s=a(2);t.a=n},function(e,t,a){'use strict';function n(e){return null==e?void 0===e?m:f:g&&g in Object(e)?l(e):c(e)}var r=a(15),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,d=r.a?r.a.toStringTag:void 0,l=function(e){var t=o.call(e,d),a=e[d];try{e[d]=void 0}catch(t){}var n=s.call(e);return t?e[d]=a:delete e[d],n},p=Object.prototype,u=p.toString,c=function(e){return u.call(e)},f='[object Null]',m='[object Undefined]',g=r.a?r.a.toStringTag:void 0,h=t.a=n},function(e,t,a){'use strict';var n=a(62),r=a(2),i=a(33),o=function(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t},s=Object.prototype,d=s.hasOwnProperty,l=function(e){if(!Object(r.a)(e))return o(e);var t=Object(i.a)(e),a=[];for(var n in e)('constructor'!=n||!t&&d.call(e,n))&&a.push(n);return a},p=a(7),u=t.a=function(e){return Object(p.a)(e)?Object(n.a)(e,!0):l(e)}},function(e,t){'use strict';t.a=function(e,t){var a=-1,n=e.length;for(t||(t=Array(n));++a<n;)t[a]=e[a];return t}},function(e,t){'use strict';t.a=function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2]);}return e.apply(t,a)}},function(e,t){'use strict';t.a=function(e){return function(t){return e(t)}}},function(e,t){'use strict';t.a=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,a){'use strict';var n=a(5),r=n.a.Symbol;t.a=r},function(e,t,a){'use strict';var n=a(9),r=a(2);t.a=function(e){if(!Object(r.a)(e))return!1;var t=Object(n.a)(e);return t=='[object Function]'||t=='[object GeneratorFunction]'||t=='[object AsyncFunction]'||t=='[object Proxy]'}},function(e,t,a){'use strict';var n=a(32),r=a(18);t.a=function(e,t,a,i){var o=!a;a||(a={});for(var s=-1,d=t.length;++s<d;){var l=t[s],p=i?i(a[l],e[l],l,a,e):void 0;p===void 0&&(p=e[l]),o?Object(r.a)(a,l,p):Object(n.a)(a,l,p)}return a}},function(e,t,a){'use strict';var n=a(49);t.a=function(e,t,a){'__proto__'==t&&n.a?Object(n.a)(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}},function(e,t){'use strict';var a=/^(?:0|[1-9]\d*)$/;t.a=function(e,t){var n=typeof e;return t=null==t?9007199254740991:t,!!t&&('number'==n||'symbol'!=n&&a.test(e))&&-1<e&&0==e%1&&e<t}},function(e,t,a){'use strict';(function(e){var n=a(56),r='object'==typeof exports&&exports&&!exports.nodeType&&exports,i=r&&'object'==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o&&n.a.process,d=function(){try{var e=i&&i.require&&i.require('util').types;return e?e:s&&s.binding&&s.binding('util')}catch(t){}}();t.a=d}).call(this,a(65)(e))},function(e,t,a){'use strict';(function(e){var n=a(5),r=a(37),i='object'==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&'object'==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i,d=s?n.a.Buffer:void 0,l=d?d.isBuffer:void 0,p=l||r.a;t.a=p}).call(this,a(65)(e))},function(e,t,a){'use strict';function n(e,t){var a=N,n,r,o,s;for(s=arguments.length;2<s--;)C.push(arguments[s]);for(t&&null!=t.children&&(!C.length&&C.push(t.children),delete t.children);C.length;)if((r=C.pop())&&void 0!==r.pop)for(s=r.length;s--;)C.push(r[s]);else'boolean'==typeof r&&(r=null),(o='function'!=typeof e)&&(null==r?r='':'number'==typeof r?r+='':'string'!=typeof r&&(o=!1)),o&&n?a[a.length-1]+=r:a===N?a=[r]:a.push(r),n=o;var i=new P;return i.nodeName=e,i.children=a,i.attributes=null==t?void 0:t,i.key=null==t?void 0:t.key,void 0!==M.vnode&&M.vnode(i),i}function r(e,t){for(var a in t)e[a]=t[a];return e}function i(e,t){return n(e.nodeName,r(r({},e.attributes),t),2<arguments.length?[].slice.call(arguments,2):e.children)}function o(e){!e._dirty&&(e._dirty=!0)&&1==O.push(e)&&(M.debounceRendering||B)(s)}function s(){var e=O,t;for(O=[];t=e.pop();)t._dirty&&R(t)}function d(e,t,a){return'string'==typeof t||'number'==typeof t?void 0!==e.splitText:'string'==typeof t.nodeName?!e._componentConstructor&&l(e,t.nodeName):a||e._componentConstructor===t.nodeName}function l(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function p(e){var t=r({},e.attributes);t.children=e.children;var a=e.nodeName.defaultProps;if(a!==void 0)for(var n in a)void 0===t[n]&&(t[n]=a[n]);return t}function u(e,t){var a=t?document.createElementNS('http://www.w3.org/2000/svg',e):document.createElement(e);return a.normalizedNodeName=e,a}function m(e){var t=e.parentNode;t&&t.removeChild(e)}function c(e,t,a,n,r){if('className'===t&&(t='class'),'key'===t);else if('ref'===t)a&&a(null),n&&n(e);else if('class'===t&&!r)e.className=n||'';else if('style'===t){if(n&&'string'!=typeof n&&'string'!=typeof a||(e.style.cssText=n||''),n&&'object'==typeof n){if('string'!=typeof a)for(var o in a)o in n||(e.style[o]='');for(var o in n)e.style[o]='number'==typeof n[o]&&!1===D.test(o)?n[o]+'px':n[o]}}else if('dangerouslySetInnerHTML'===t)n&&(e.innerHTML=n.__html||'');else if('o'==t[0]&&'n'==t[1]){var i=t!==(t=t.replace(/Capture$/,''));t=t.toLowerCase().substring(2),n?!a&&e.addEventListener(t,f,i):e.removeEventListener(t,f,i),(e._listeners||(e._listeners={}))[t]=n}else if('list'!==t&&'type'!==t&&!r&&t in e){try{e[t]=null==n?'':n}catch(t){}(null==n||!1===n)&&'spellcheck'!=t&&e.removeAttribute(t)}else{var s=r&&t!==(t=t.replace(/^xlink:?/,''));null==n||!1===n?s?e.removeAttributeNS('http://www.w3.org/1999/xlink',t.toLowerCase()):e.removeAttribute(t):'function'!=typeof n&&(s?e.setAttributeNS('http://www.w3.org/1999/xlink',t.toLowerCase(),n):e.setAttribute(t,n))}}function f(t){return this._listeners[t.type](M.event&&M.event(t)||t)}function g(){for(var e;e=U.pop();)M.afterMount&&M.afterMount(e),e.componentDidMount&&e.componentDidMount()}function y(e,t,a,n,r,i){F++||(j=null!=r&&void 0!==r.ownerSVGElement,W=null!=e&&!('__preactattr_'in e));var o=_(e,t,a,n,i);return r&&o.parentNode!==r&&r.appendChild(o),--F||(W=!1,!i&&g()),o}function _(e,t,n,r,o){var s=e,d=j;if((null==t||'boolean'==typeof t)&&(t=''),'string'==typeof t||'number'==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(s=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(s,e),b(e,!0))),s.__preactattr_=!0,s;var p=t.nodeName;if('function'==typeof p)return A(e,t,n,r);if(j='svg'===p||'foreignObject'!==p&&j,p+='',(!e||!l(e,p))&&(s=u(p,j),e)){for(;e.firstChild;)s.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(s,e),b(e,!0)}var c=s.firstChild,f=s.__preactattr_,m=t.children;if(null==f){f=s.__preactattr_={};for(var g=s.attributes,a=g.length;a--;)f[g[a].name]=g[a].value}return!W&&m&&1===m.length&&'string'==typeof m[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=m[0]&&(c.nodeValue=m[0]):(m&&m.length||null!=c)&&x(s,m,n,r,W||null!=f.dangerouslySetInnerHTML),E(s,t.attributes,f),j=d,s}function x(e,t,a,n,r){var o=e.childNodes,s=[],l={},p=0,u=0,g=o.length,h=0,y=t?t.length:0,x,v,c,f,E;if(0!==g)for(var S=0;S<g;S++){var i=o[S],T=i.__preactattr_,k=y&&T?i._component?i._component.__key:T.key:null;null==k?(T||(void 0===i.splitText?r:!r||i.nodeValue.trim()))&&(s[h++]=i):(p++,l[k]=i)}if(0!==y)for(var S=0;S<y;S++){f=t[S],E=null;var k=f.key;if(null!=k)p&&void 0!==l[k]&&(E=l[k],l[k]=void 0,p--);else if(u<h)for(x=u;x<h;x++)if(void 0!==s[x]&&d(v=s[x],f,r)){E=v,s[x]=void 0,x===h-1&&h--,x===u&&u++;break}E=_(E,f,a,n),c=o[S],E&&E!==e&&E!==c&&(null==c?e.appendChild(E):E===c.nextSibling?m(c):e.insertBefore(E,c))}if(p)for(var S in l)void 0!==l[S]&&b(l[S],!1);for(;u<=h;)void 0!==(E=s[h--])&&b(E,!1)}function b(e,t){var a=e._component;a?w(a):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),(!1===t||null==e.__preactattr_)&&m(e),v(e))}function v(e){for(e=e.lastChild;e;){var t=e.previousSibling;b(e,!0),e=t}}function E(e,t,a){for(var n in a)t&&null!=t[n]||null==a[n]||c(e,n,a[n],a[n]=void 0,j);for(n in t)'children'===n||'innerHTML'===n||n in a&&t[n]===('value'===n||'checked'===n?e[n]:a[n])||c(e,n,a[n],a[n]=t[n],j)}function S(e,t,a){var n=V.length,r;for(e.prototype&&e.prototype.render?(r=new e(t,a),I.call(r,t,a)):(r=new I(t,a),r.constructor=e,r.render=T);n--;)if(V[n].constructor===e)return r.nextBase=V[n].nextBase,V.splice(n,1),r;return r}function T(e,t,a){return this.constructor(e,a)}function k(e,t,a,n,r){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,'undefined'==typeof e.constructor.getDerivedStateFromProps&&(!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,n)),n&&n!==e.context&&(!e.prevContext&&(e.prevContext=e.context),e.context=n),!e.prevProps&&(e.prevProps=e.props),e.props=t,e._disable=!1,0!==a&&(1!==a&&!1===M.syncComponentUpdates&&e.base?o(e):R(e,1,r)),e.__ref&&e.__ref(e))}function R(e,a,n,i){if(!e._disable){var o=e.props,s=e.state,d=e.context,l=e.prevProps||o,u=e.prevState||s,c=e.prevContext||d,f=e.base,m=e.nextBase,h=f||m,_=e._component,x=!1,v=c,E,T,A;if(e.constructor.getDerivedStateFromProps&&(s=r(r({},s),e.constructor.getDerivedStateFromProps(o,s)),e.state=s),f&&(e.props=l,e.state=u,e.context=c,2!==a&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(o,s,d)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(o,s,d),e.props=o,e.state=s,e.context=d),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!x){E=e.render(o,s,d),e.getChildContext&&(d=r(r({},d),e.getChildContext())),f&&e.getSnapshotBeforeUpdate&&(v=e.getSnapshotBeforeUpdate(l,u));var I=E&&E.nodeName,L,P;if('function'==typeof I){var C=p(E);T=_,T&&T.constructor===I&&C.key==T.__key?k(T,C,1,d,!1):(L=T,e._component=T=S(I,C,d),T.nextBase=T.nextBase||m,T._parentComponent=e,k(T,C,0,d,!1),R(T,1,n,!0)),P=T.base}else A=h,L=_,L&&(A=e._component=null),(h||1===a)&&(A&&(A._component=null),P=y(A,E,d,n||!f,h&&h.parentNode,!0));if(h&&P!==h&&T!==_){var N=h.parentNode;N&&P!==N&&(N.replaceChild(P,h),!L&&(h._component=null,b(h,!1)))}if(L&&w(L),e.base=P,P&&!i){for(var B=e,D=e;D=D._parentComponent;)(B=D).base=P;P._component=B,P._componentConstructor=B.constructor}}for(!f||n?U.unshift(e):!x&&(e.componentDidUpdate&&e.componentDidUpdate(l,u,v),M.afterUpdate&&M.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);F||i||g()}}function A(e,t,a,n){for(var r=e&&e._component,i=r,o=e,s=r&&e._componentConstructor===t.nodeName,d=s,l=p(t);r&&!d&&(r=r._parentComponent);)d=r.constructor===t.nodeName;return r&&d&&(!n||r._component)?(k(r,l,3,a,n),e=r.base):(i&&!s&&(w(i),e=o=null),r=S(t.nodeName,l,a),e&&!r.nextBase&&(r.nextBase=e,o=null),k(r,l,1,a,n),e=r.base,o&&e!==o&&(o._component=null,b(o,!1))),e}function w(e){M.beforeUnmount&&M.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var a=e._component;a?w(a):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,m(t),V.push(e),v(t)),e.__ref&&e.__ref(null)}function I(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function L(e,t,a){return y(a,e,{},!1,t,!1)}a.r(t),a.d(t,'h',function(){return n}),a.d(t,'createElement',function(){return n}),a.d(t,'cloneElement',function(){return i}),a.d(t,'Component',function(){return I}),a.d(t,'render',function(){return L}),a.d(t,'rerender',function(){return s}),a.d(t,'options',function(){return M});var P=function(){},M={},C=[],N=[],B='function'==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,D=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,O=[],U=[],F=0,j=!1,W=!1,V=[];r(I.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=r(r({},this.state),'function'==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),o(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),R(this,2)},render:function(){}});t['default']={h:n,createElement:n,cloneElement:i,Component:I,render:L,rerender:s,options:M}},function(e,t,a){'use strict';var n=a(9),r=a(3),i=function(e){return Object(r.a)(e)&&Object(n.a)(e)=='[object Arguments]'},o=Object.prototype,s=o.hasOwnProperty,d=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return Object(r.a)(e)&&s.call(e,'callee')&&!d.call(e,'callee')},p=t.a=l},function(e,t,a){'use strict';var n=a(9),r=a(31),i=a(3),o={};o['[object Float32Array]']=o['[object Float64Array]']=o['[object Int8Array]']=o['[object Int16Array]']=o['[object Int32Array]']=o['[object Uint8Array]']=o['[object Uint8ClampedArray]']=o['[object Uint16Array]']=o['[object Uint32Array]']=!0,o['[object Arguments]']=o['[object Array]']=o['[object ArrayBuffer]']=o['[object Boolean]']=o['[object DataView]']=o['[object Date]']=o['[object Error]']=o['[object Function]']=o['[object Map]']=o['[object Number]']=o['[object Object]']=o['[object RegExp]']=o['[object Set]']=o['[object String]']=o['[object WeakMap]']=!1;var s=a(13),d=a(20),l=d.a&&d.a.isTypedArray,p=l?Object(s.a)(l):function(e){return Object(i.a)(e)&&Object(r.a)(e.length)&&!!o[Object(n.a)(e)]},u=t.a=p},function(e,t,a){'use strict';var n=a(64),r=function(e,t){return null==e?void 0:e[t]},i=t.a=function(e,t){var a=r(e,t);return Object(n.a)(a)?a:void 0}},function(e,t,a){'use strict';var n=a(9),r=a(38),i=a(3),o=Function.prototype,s=Object.prototype,d=o.toString,l=s.hasOwnProperty,p=d.call(Object);t.a=function(e){if(!Object(i.a)(e)||Object(n.a)(e)!='[object Object]')return!1;var t=Object(r.a)(e);if(null===t)return!0;var a=l.call(t,'constructor')&&t.constructor;return'function'==typeof a&&a instanceof a&&d.call(a)==p}},function(e,t,a){'use strict';var n=a(2),r=Object.create,i=function(){function e(){}return function(t){if(!Object(n.a)(t))return{};if(r)return r(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}();t.a=i},function(e,t,a){'use strict';var n=a(1),r=a(8);t.a=function(e){return Object(n.a)(function(t,a){var n=-1,i=a.length,o=1<i?a[i-1]:void 0,s=2<i?a[2]:void 0;for(o=3<e.length&&'function'==typeof o?(i--,o):void 0,s&&Object(r.a)(a[0],a[1],s)&&(o=3>i?void 0:o,i=1),t=Object(t);++n<i;){var d=a[n];d&&e(t,d,n,o)}return t})}},function(e){function t(e,t){var n=e[1]||'',r=e[3];if(!r)return n;if(t&&'function'==typeof btoa){var i=a(r),o=r.sources.map(function(e){return'/*# sourceURL='+r.sourceRoot+e+' */'});return[n].concat(o).concat([i]).join('\n')}return[n].join('\n')}function a(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e))));return'/*# '+('sourceMappingURL=data:application/json;charset=utf-8;base64,'+t)+' */'}e.exports=function(e){var a=[];return a.toString=function(){return this.map(function(a){var n=t(a,e);return a[2]?'@media '+a[2]+'{'+n+'}':n}).join('')},a.i=function(e,t){'string'==typeof e&&(e=[[null,e,'']]);for(var n={},r=0,i;r<this.length;r++)i=this[r][0],'number'==typeof i&&(n[i]=!0);for(r=0;r<e.length;r++){var o=e[r];'number'==typeof o[0]&&n[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]='('+o[2]+') and ('+t+')'),a.push(o))}},a}},function(e,t,a){function n(e,t){for(var a=0;a<e.length;a++){var n=e[a],r=m[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(p(n.parts[i],t))}else{for(var o=[],i=0;i<n.parts.length;i++)o.push(p(n.parts[i],t));m[n.id]={id:n.id,refs:1,parts:o}}}}function r(e,t){for(var a=[],n={},r=0;r<e.length;r++){var i=e[r],o=t.base?i[0]+t.base:i[0],s=i[1],d=i[2],l=i[3],p={css:s,media:d,sourceMap:l};n[o]?n[o].parts.push(p):a.push(n[o]={id:o,parts:[p]})}return a}function i(e,t){var a=y(e.insertInto);if(!a)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.');var n=b[b.length-1];if('top'===e.insertAt)n?n.nextSibling?a.insertBefore(t,n.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),b.push(t);else if('bottom'===e.insertAt)a.appendChild(t);else if('object'==typeof e.insertAt&&e.insertAt.before){var r=y(e.insertInto+' '+e.insertAt.before);a.insertBefore(t,r)}else throw new Error('[Style Loader]\n\n Invalid value for parameter \'insertAt\' (\'options.insertAt\') found.\n Must be \'top\', \'bottom\', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n')}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=b.indexOf(e);0<=t&&b.splice(t,1)}function s(e){var t=document.createElement('style');return void 0===e.attrs.type&&(e.attrs.type='text/css'),l(t,e.attrs),i(e,t),t}function d(e){var t=document.createElement('link');return void 0===e.attrs.type&&(e.attrs.type='text/css'),e.attrs.rel='stylesheet',l(t,e.attrs),i(e,t),t}function l(e,t){Object.keys(t).forEach(function(a){e.setAttribute(a,t[a])})}function p(e,t){var a,n,r,i;if(t.transform&&e.css)if(i=t.transform(e.css),i)e.css=i;else return function(){};if(t.singleton){var l=x++;a=_||(_=s(t)),n=u.bind(null,a,l,!1),r=u.bind(null,a,l,!0)}else e.sourceMap&&'function'==typeof URL&&'function'==typeof URL.createObjectURL&&'function'==typeof URL.revokeObjectURL&&'function'==typeof Blob&&'function'==typeof btoa?(a=d(t),n=f.bind(null,a,t),r=function(){o(a),a.href&&URL.revokeObjectURL(a.href)}):(a=s(t),n=c.bind(null,a),r=function(){o(a)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}function u(e,t,a,n){var r=a?'':n.css;if(e.styleSheet)e.styleSheet.cssText=E(t,r);else{var i=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function c(e,t){var a=t.css,n=t.media;if(n&&e.setAttribute('media',n),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function f(e,t,a){var n=a.css,r=a.sourceMap,i=t.convertToAbsoluteUrls===void 0&&r;(t.convertToAbsoluteUrls||i)&&(n=v(n)),r&&(n+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+' */');var o=new Blob([n],{type:'text/css'}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var m={},g=function(e){var t;return function(){return'undefined'==typeof t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),h=function(e){return document.querySelector(e)},y=function(){var e={};return function(t){if('function'==typeof t)return t();if('undefined'==typeof e[t]){var a=h.call(this,t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(t){a=null}e[t]=a}return e[t]}}(),_=null,x=0,b=[],v=a(113);e.exports=function(e,t){if('undefined'!=typeof DEBUG&&DEBUG&&'object'!=typeof document)throw new Error('The style-loader cannot be used in a non-browser environment');t=t||{},t.attrs='object'==typeof t.attrs?t.attrs:{},t.singleton||'boolean'==typeof t.singleton||(t.singleton=g()),t.insertInto||(t.insertInto='head'),t.insertAt||(t.insertAt='bottom');var a=r(e,t);return n(a,t),function(e){for(var o=[],s=0;s<a.length;s++){var i=a[s],d=m[i.id];d.refs--,o.push(d)}if(e){var l=r(e,t);n(l,t)}for(var s=0,d;s<o.length;s++)if(d=o[s],0===d.refs){for(var p=0;p<d.parts.length;p++)d.parts[p]();delete m[d.id]}}};var E=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join('\n')}}()},function(e,t){'use strict';t.a=function(e){return'number'==typeof e&&-1<e&&0==e%1&&e<=9007199254740991}},function(e,t,a){'use strict';function n(e,t,a){var n=e[t];s.call(e,t)&&Object(i.a)(n,a)&&(a!==void 0||t in e)||Object(r.a)(e,t,a)}var r=a(18),i=a(14),o=Object.prototype,s=o.hasOwnProperty;t.a=n},function(e,t){'use strict';var a=Object.prototype;t.a=function(e){var t=e&&e.constructor,n='function'==typeof t&&t.prototype||a;return e===n}},function(e,t,a){'use strict';function n(e){var t=this.__data__=new r.a(e);this.size=t.size}var r=a(39),i=a(40),o=a(41);n.prototype.clear=function(){this.__data__=new r.a,this.size=0},n.prototype['delete']=function(e){var t=this.__data__,a=t['delete'](e);return this.size=t.size,a},n.prototype.get=function(e){return this.__data__.get(e)},n.prototype.has=function(e){return this.__data__.has(e)},n.prototype.set=function(e,t){var a=this.__data__;if(a instanceof r.a){var n=a.__data__;if(!i.a||n.length<200-1)return n.push([e,t]),this.size=++a.size,this;a=this.__data__=new o.a(n)}return a.set(e,t),this.size=a.size,this};t.a=n},function(e,t){'use strict';var a=Function.prototype,n=a.toString;t.a=function(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+''}catch(t){}}return''}},function(e,t){'use strict';t.a=function(e){return function(){return e}}},function(e,t){'use strict';t.a=function(){return!1}},function(e,t,a){'use strict';var n=a(61),r=Object(n.a)(Object.getPrototypeOf,Object);t.a=r},function(e,t,a){'use strict';function n(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}var r=a(14),i=function(e,t){for(var a=e.length;a--;)if(Object(r.a)(e[a][0],t))return a;return-1},o=Array.prototype,s=o.splice;n.prototype.clear=function(){this.__data__=[],this.size=0},n.prototype['delete']=function(e){var t=this.__data__,a=i(t,e);if(0>a)return!1;var n=t.length-1;return a==n?t.pop():s.call(t,a,1),--this.size,!0},n.prototype.get=function(e){var t=this.__data__,a=i(t,e);return 0>a?void 0:t[a][1]},n.prototype.has=function(e){return-1<i(this.__data__,e)},n.prototype.set=function(e,t){var a=this.__data__,n=i(a,e);return 0>n?(++this.size,a.push([e,t])):a[n][1]=t,this};t.a=n},function(e,t,a){'use strict';var n=a(25),r=a(5),i=Object(n.a)(r.a,'Map');t.a=i},function(e,t,a){'use strict';function n(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}function r(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}var i=a(25),o=Object(i.a)(Object,'create'),s=o,d=Object.prototype,l=d.hasOwnProperty,p=Object.prototype,u=p.hasOwnProperty;n.prototype.clear=function(){this.__data__=s?s(null):{},this.size=0},n.prototype['delete']=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},n.prototype.get=function(e){var t=this.__data__;if(s){var a=t[e];return a==='__lodash_hash_undefined__'?void 0:a}return l.call(t,e)?t[e]:void 0},n.prototype.has=function(e){var t=this.__data__;return s?t[e]!==void 0:u.call(t,e)},n.prototype.set=function(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=s&&void 0===t?'__lodash_hash_undefined__':t,this};var c=n,f=a(39),m=a(40),g=function(e){var t=typeof e;return'string'==t||'number'==t||'symbol'==t||'boolean'==t?'__proto__'!==e:null===e},h=function(e,t){var a=e.__data__;return g(t)?a['string'==typeof t?'string':'hash']:a.map};r.prototype.clear=function(){this.size=0,this.__data__={hash:new c,map:new(m.a||f.a),string:new c}},r.prototype['delete']=function(e){var t=h(this,e)['delete'](e);return this.size-=t?1:0,t},r.prototype.get=function(e){return h(this,e).get(e)},r.prototype.has=function(e){return h(this,e).has(e)},r.prototype.set=function(e,t){var a=h(this,e),n=a.size;return a.set(e,t),this.size+=a.size==n?0:1,this};t.a=r},function(e,t,a){'use strict';var n=a(17),r=a(10);t.a=function(e){return Object(n.a)(e,Object(r.a)(e))}},function(e,t,a){'use strict';var n=a(47),r=a(28),i=Object(r.a)(function(e,t,a,r){Object(n.a)(e,t,a,r)});t.a=i},function(e,t,a){'use strict';var n=a(58),r=Object(n.a)();t.a=r},function(e,t,a){'use strict';var n=a(51);t.a=function(e){var t=new e.constructor(e.byteLength);return new n.a(t).set(new n.a(e)),t}},function(e,t){'use strict';t.a=function(e,t){for(var a=-1,n=Array(e);++a<e;)n[a]=t(a);return n}},function(e,t,a){'use strict';function n(e,t,a){(a===void 0||Object(s.a)(e[t],a))&&(a!==void 0||t in e)||Object(o.a)(e,t,a)}function r(e,t,a,n,o){e===t||Object(l.a)(t,function(s,l){if(Object(x.a)(s))o||(o=new i.a),T(e,t,l,a,r,n,o);else{var p=n?n(E(e,l),s,l+'',e,t,o):void 0;p===void 0&&(p=s),d(e,l,p)}},k.a)}var i=a(34),o=a(18),s=a(14),d=n,l=a(44),p=a(59),u=a(60),c=a(11),f=a(63),m=a(23),g=a(0),h=a(4),y=a(21),_=a(16),x=a(2),b=a(26),v=a(24),E=function(e,t){return'__proto__'==t?void 0:e[t]},S=a(42),T=function(e,t,a,n,r,i,o){var s=E(e,a),l=E(t,a),T=o.get(l);if(T)return void d(e,a,T);var k=i?i(s,l,a+'',e,t,o):void 0,R=k===void 0;if(R){var A=Object(g.a)(l),w=!A&&Object(y.a)(l),I=!A&&!w&&Object(v.a)(l);k=l,A||w||I?Object(g.a)(s)?k=s:Object(h.a)(s)?k=Object(c.a)(s):w?(R=!1,k=Object(p.a)(l,!0)):I?(R=!1,k=Object(u.a)(l,!0)):k=[]:Object(b.a)(l)||Object(m.a)(l)?(k=s,Object(m.a)(s)?k=Object(S.a)(s):(!Object(x.a)(s)||n&&Object(_.a)(s))&&(k=Object(f.a)(l))):R=!1}R&&(o.set(l,k),r(k,l,n,i,o),o['delete'](l)),d(e,a,k)},k=a(10),R=t.a=r},function(e,t,a){'use strict';var n=a(36),r=a(49),i=a(6),o=r.a?function(e,t){return Object(r.a)(e,'toString',{configurable:!0,enumerable:!1,value:Object(n.a)(t),writable:!0})}:i.a,s=a(55),d=Object(s.a)(o),l=t.a=d},function(e,t,a){'use strict';var n=a(25),r=function(){try{var e=Object(n.a)(Object,'defineProperty');return e({},'',{}),e}catch(t){}}();t.a=r},function(e,t,a){'use strict';var n=a(5),r=n.a['__core-js_shared__'];t.a=r},function(e,t,a){'use strict';var n=a(5),r=n.a.Uint8Array;t.a=r},function(e,t){'use strict';var a=String.fromCharCode;Object.defineProperty(t,'__esModule',{value:!0});var i;(function(e){e[e.UByte=0]='UByte',e[e.Byte=1]='Byte',e[e.UShort=2]='UShort',e[e.Short=3]='Short',e[e.UInt=4]='UInt',e[e.Int=5]='Int',e[e.Float=6]='Float',e[e.Double=7]='Double',e[e.NString=8]='NString',e[e.String=9]='String'})(i=t.ReaderDataType||(t.ReaderDataType={}));t.Reader=class{constructor(e){if(0===e.byteLength)throw new Error('ArrayBuffer must have size greater than zero');this.data=new DataView(e),this.offset=0}length(){return this.data.byteLength}tell(){return this.offset}seek(e){this.offset=Math.max(0,e)}skip(e){this.seek(this.tell()+e)}b(){const e=this.data.getInt8(this.offset);return this.skip(1),e}ub(){const e=this.data.getUint8(this.offset);return this.skip(1),e}s(e=!0){const t=this.data.getInt16(this.offset,e);return this.skip(2),t}us(e=!0){const t=this.data.getUint16(this.offset,e);return this.skip(2),t}i(e=!0){const t=this.data.getInt32(this.tell(),e);return this.skip(4),t}ui(e=!0){const t=this.data.getUint32(this.tell(),e);return this.skip(4),t}f(e=!0){const t=this.data.getFloat32(this.tell(),e);return this.skip(4),t}lf(e=!0){const t=this.data.getFloat64(this.tell(),e);return this.skip(8),t}str(){let e=this.ub(),t='';for(;0!==e;)t+=a(e),e=this.ub();return t}nstr(e){if(0>e)throw new Error('Invalid string length');let t='';for(;0<e;){e-=1;const n=this.ub();if(0===n)break;t+=a(n)}return 0!==e&&this.skip(e),t}arr(e,t){t.bind(this);const a=[];for(;0<e--;)a.push(t());return a}arrx(e,t,a=0){let n;switch(t){case i.UByte:{n=new Uint8Array(this.data.buffer,this.tell(),e),this.skip(e);break}case i.Byte:{n=new Int8Array(this.data.buffer,this.tell(),e),this.skip(e);break}case i.UShort:n=new Uint16Array(this.data.buffer,this.tell(),e),this.skip(2*e);break;case i.Short:n=new Int16Array(this.data.buffer,this.tell(),e),this.skip(2*e);break;case i.UInt:n=new Uint32Array(this.data.buffer,this.tell(),e),this.skip(4*e);break;case i.Int:n=new Int32Array(this.data.buffer,this.tell(),e),this.skip(4*e);break;case i.Float:n=new Float32Array(this.data.buffer,this.tell(),e),this.skip(4*e);break;case i.Double:n=new Float64Array(this.data.buffer,this.tell(),e),this.skip(8*e);break;case i.NString:for(n=[];0<e--;)n.push(n.nstr(a));break;case i.String:for(n=[];0<e--;)n.push(n.str());}return n}}},function(e,t,a){'use strict';function n(e,t,a,r,i,d){return Object(s.a)(e)&&Object(s.a)(t)&&(d.set(t,e),Object(o.a)(e,t,void 0,n,d),d['delete'](t)),e}a.r(t);var r=a(12),i=a(1),o=a(47),s=a(2),d=a(43),l=Object(i.a)(function(e){return e.push(void 0,n),Object(r.a)(d.a,void 0,e)}),p=t['default']=l},function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return'function'==typeof e}function r(e){return'number'==typeof e}function n(e){return'object'==typeof e&&null!==e}function o(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError('n must be a positive number');return this._maxListeners=e,this},t.prototype.emit=function(e){var t,r,s,d,l,i;if(this._events||(this._events={}),'error'===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length))if(t=arguments[1],t instanceof Error)throw t;else{var p=new Error('Uncaught, unspecified "error" event. ('+t+')');throw p.context=t,p}if(r=this._events[e],o(r))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),r.apply(this,d);}else if(n(r))for(d=Array.prototype.slice.call(arguments,1),i=r.slice(),s=i.length,l=0;l<s;l++)i[l].apply(this,d);return!0},t.prototype.addListener=function(e,r){var i;if(!a(r))throw TypeError('listener must be a function');return this._events||(this._events={}),this._events.newListener&&this.emit('newListener',e,a(r.listener)?r.listener:r),this._events[e]?n(this._events[e])?this._events[e].push(r):this._events[e]=[this._events[e],r]:this._events[e]=r,n(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,i&&0<i&&this._events[e].length>i&&(this._events[e].warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',this._events[e].length),'function'==typeof console.trace&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!a(t))throw TypeError('listener must be a function');var r=!1;return n.listener=t,this.on(e,n),this},t.prototype.removeListener=function(e,t){var r,o,s,d;if(!a(t))throw TypeError('listener must be a function');if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,o=-1,r===t||a(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit('removeListener',e,t);else if(n(r)){for(d=s;0<d--;)if(r[d]===t||r[d].listener&&r[d].listener===t){o=d;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit('removeListener',e,t)}return this},t.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)'removeListener'!==t&&this.removeAllListeners(t);return this.removeAllListeners('removeListener'),this._events={},this}if(n=this._events[e],a(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[],t},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){'use strict';var a=Date.now;t.a=function(e){var t=0,n=0;return function(){var r=a(),i=16-(r-n);if(n=r,!(0<i))t=0;else if(++t>=800)return arguments[0];return e.apply(void 0,arguments)}}},function(e,t,a){'use strict';(function(e){var a='object'==typeof e&&e&&e.Object===Object&&e;t.a=a}).call(this,a(79))},function(e,t,a){'use strict';var n=a(12),r=Math.max;t.a=function(e,t,a){return t=r(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=r(i.length-t,0),d=Array(s);++o<s;)d[o]=i[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=i[o];return l[t]=a(d),Object(n.a)(e,this,l)}}},function(e,t){'use strict';t.a=function(e){return function(t,a,n){for(var r=-1,i=Object(t),o=n(t),s=o.length;s--;){var d=o[e?s:++r];if(!1===a(i[d],d,i))break}return t}}},function(e,t,a){'use strict';(function(e){var n=a(5),r='object'==typeof exports&&exports&&!exports.nodeType&&exports,i=r&&'object'==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o?n.a.Buffer:void 0,d=s?s.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var a=e.length,n=d?d(a):new e.constructor(a);return e.copy(n),n}}).call(this,a(65)(e))},function(e,t,a){'use strict';var n=a(45);t.a=function(e,t){var a=t?Object(n.a)(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}},function(e,t){'use strict';t.a=function(e,t){return function(a){return e(t(a))}}},function(e,t,a){'use strict';var n=a(46),r=a(23),i=a(0),o=a(21),s=a(19),d=a(24),l=Object.prototype,p=l.hasOwnProperty;t.a=function(e,t){var a=Object(i.a)(e),l=!a&&Object(r.a)(e),u=!a&&!l&&Object(o.a)(e),c=!a&&!l&&!u&&Object(d.a)(e),f=a||l||u||c,m=f?Object(n.a)(e.length,String):[],g=m.length;for(var h in e)(t||p.call(e,h))&&!(f&&('length'==h||u&&('offset'==h||'parent'==h)||c&&('buffer'==h||'byteLength'==h||'byteOffset'==h)||Object(s.a)(h,g)))&&m.push(h);return m}},function(e,t,a){'use strict';var n=a(27),r=a(38),i=a(33);t.a=function(e){return'function'!=typeof e.constructor||Object(i.a)(e)?{}:Object(n.a)(Object(r.a)(e))}},function(e,t,a){'use strict';function n(e){return!!o&&o in e}var r=a(16),i=a(50),o=function(){var e=/[^.]+$/.exec(i.a&&i.a.keys&&i.a.keys.IE_PROTO||'');return e?'Symbol(src)_1.'+e:''}(),s=a(2),d=a(35),l=/[\\^$.*+?()[\]{}|]/g,p=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,f=u.toString,m=c.hasOwnProperty,g=RegExp('^'+f.call(m).replace(l,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$'),h=t.a=function(e){if(!Object(s.a)(e)||n(e))return!1;var t=Object(r.a)(e)?g:p;return t.test(Object(d.a)(e))}},function(e){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,'loaded',{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,'id',{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,'exports',{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,a){'use strict';var n=Math.sin,r=Math.cos,i=Math.PI;Object.defineProperty(t,'__esModule',{value:!0});const o=a(54),s=a(70),d=a(82),l=a(83),p=a(94),u=a(72),c=a(96),f=a(97),m=a(98),g=a(99),h=a(100),y=a(77),_=a(106),x=()=>{const e={BAD_BROWSER:'Your browser does not seem to support WebGL',BAD_GPU:'Your graphics card does not seem to support WebGL'},t=window;if(!t.WebGLRenderingContext)return{hasSupport:!1,message:e.BAD_BROWSER};const a=document.createElement('canvas');try{const t=a.getContext('webgl')||a.getContext('experimental-webgl');return t?{hasSupport:!0,message:''}:{hasSupport:!1,message:e.BAD_GPU}}catch(t){return{hasSupport:!1,message:e.BAD_GPU}}};var b;(function(e){e[e.FREE=0]='FREE',e[e.REPLAY=1]='REPLAY'})(b=t.PlayerMode||(t.PlayerMode={}));t.Game=class{constructor(e){this.pauseTime=0,this.isPaused=!1,this.lastTime=0,this.accumTime=0,this.timeStep=1/60,this.pointerLocked=!1,this.entities=[],this.draw=()=>{requestAnimationFrame(this.draw);const e=this.canvas,t=e.parentElement;if(t){const a=t.clientWidth,n=t.clientHeight;(e.width!==a||e.height!==n)&&(e.width=a,e.height=n,this.camera.aspect=e.clientWidth/e.clientHeight,this.camera.updateProjectionMatrix(),this.context.gl.viewport(0,0,this.context.gl.drawingBufferWidth,this.context.gl.drawingBufferHeight)),(e.clientWidth!==e.width||e.clientHeight!==e.height)&&(e.width=e.clientWidth,e.height=e.clientHeight,this.camera.aspect=e.clientWidth/e.clientHeight,this.camera.updateProjectionMatrix(),this.context.gl.viewport(0,0,this.context.gl.drawingBufferWidth,this.context.gl.drawingBufferHeight))}const a=s.now()/1e3,n=a-this.lastTime;for(this.accumTime+=n;this.accumTime>this.timeStep;)this.update(this.timeStep),this.accumTime-=this.timeStep;this.renderer.draw(),''!==this.mapName&&(this.skyScene.draw(this.camera),this.worldScene.draw(this.camera,this.entities)),this.lastTime=a},this.mouseMove=(t)=>{this.mouse.delta.x=.5*t.movementX,this.mouse.delta.y=.5*t.movementY,this.mouse.position.x=t.pageX,this.mouse.position.y=t.pageY},this.keyDown=(t)=>(this.keyboard.keys[t.which]=1,!this.pointerLocked||(t.preventDefault(),!1)),this.keyUp=(t)=>(this.keyboard.keys[t.which]=0,!this.pointerLocked||(t.preventDefault(),!1)),this.onVisibilityChange=()=>{if(document.hidden){if(this.isPaused)return;this.pauseTime=s.now()/1e3,this.isPaused=!0}else{if(!this.isPaused)return;this.lastTime=s.now()/1e3-this.pauseTime+this.lastTime,this.isPaused=!1}};const t=x();if(!t.hasSupport)return this.error=!0,void(this.errorMessage='No WebGL support!');this.error=!1,this.errorMessage='';this.mouse=new p.Mouse,this.keyboard=new d.Keyboard,this.soundSystem=new u.SoundSystem,this.sounds=[],this.config=e,this.loader=new l.Loader(this),this.loader.events.addListener('loadall',(e)=>{if(e&&e.replay&&this.changeReplay(e.replay.data),!e.map||!e.map.data)return;const t=e.map.data,a=e.skies;let n=!0;a.forEach((e)=>{n=n&&e.isDone()}),n&&a.forEach((e)=>e.data?t.skies.push(e.data):0),Object.entries(e.sprites).forEach(([e,a])=>{a.data&&(t.sprites[e]=a.data)}),0<e.sounds.length&&e.sounds.forEach((e)=>{e.data&&this.sounds.push(e.data)}),this.changeMap(t),this.events.emit('load',e)}),document.addEventListener('mousemove',this.mouseMove,!1),window.addEventListener('keydown',this.keyDown),window.addEventListener('keyup',this.keyUp),window.addEventListener('visibilitychange',this.onVisibilityChange);const a=this.getCanvas();this.camera=f.Camera.init(a.width/a.height);const n=m.Context.init(a);if(!n)throw new Error(`contextn\'t`);this.context=n;const r=g.Renderer.init(n);if(!r)throw new Error('renderern\'t');this.renderer=r;const i=h.WorldScene.init(n);if(!i)throw new Error('worldScenen\'t');this.worldScene=i;const y=_.SkyScene.init(n);if(!y)throw new Error('skyScenen\'t');this.skyScene=y,this.mode=b.FREE,this.player=new c.ReplayPlayer(this),this.events=new o.EventEmitter,this.mapName=''}getCanvas(){return this.canvas||(this.canvas=document.createElement('canvas')),this.canvas}load(e){this.events.emit('loadstart'),this.loader.load(e)}changeMap(e){if(this.mapName.toLowerCase()!==e.name.toLowerCase()){this.mapName=e.name,this.worldScene.changeMap(e),this.skyScene.changeMap(e),this.entities=e.entities;const t=e.entities.find((t)=>'info_player_start'===t.classname);t?(this.camera.position[0]=t.origin[0],this.camera.position[1]=t.origin[1],this.camera.position[2]=t.origin[2]):(this.camera.position[0]=0,this.camera.position[1]=0,this.camera.position[2]=0),this.camera.rotation[0]=0,this.camera.rotation[1]=0,this.camera.rotation[2]=0}}changeReplay(e){this.events.emit('prereplaychange',this,e),this.player.changeReplay(e),this.events.emit('postreplaychange',this,e)}changeMode(e){this.mode=e,this.events.emit('modechange',e)}setTitle(e){this.title=e,this.events.emit('titlechange',e)}getTitle(){return this.title}update(e){this.events.emit('preupdate',this);const t=this.camera,a=this.keyboard,o=this.mouse;if(this.mode===b.REPLAY)this.player.update(e);else if(this.mode===b.FREE&&this.pointerLocked){t.rotation[0]=y.clamp(t.rotation[0]+o.delta.y/100,-i/2,i/2),t.rotation[1]-=o.delta.x/100;const s=500*e,l=d.Keyboard.KEYS.W,p=d.Keyboard.KEYS.S,u=d.Keyboard.KEYS.A,c=d.Keyboard.KEYS.D,f=d.Keyboard.KEYS.C,m=d.Keyboard.KEYS.SPACE;a.keys[l]!==a.keys[p]&&(a.keys[l]?(t.position[1]-=r(t.rotation[1]+i/2)*s,t.position[0]+=n(t.rotation[1]+i/2)*s):a.keys[p]&&(t.position[1]-=r(t.rotation[1]-i/2)*s,t.position[0]+=n(t.rotation[1]-i/2)*s)),a.keys[u]!==a.keys[c]&&(a.keys[u]?(t.position[1]+=r(t.rotation[1])*s,t.position[0]-=n(t.rotation[1])*s):a.keys[c]&&(t.position[1]-=r(t.rotation[1])*s,t.position[0]+=n(t.rotation[1])*s)),a.keys[m]!==a.keys[f]&&(a.keys[m]?t.position[2]+=s:a.keys[f]&&(t.position[2]-=s))}o.delta.x=0,o.delta.y=0,this.events.emit('postupdate',this)}on(e,t){return this.events.addListener(e,t)}off(e,t){this.events.removeListener(e,t)}}},function(e,t,a){(function(e){function a(e,t){for(var a=0,n=e.length-1,r;0<=n;n--)r=e[n],'.'===r?e.splice(n,1):'..'===r?(e.splice(n,1),a++):a&&(e.splice(n,1),a--);if(t)for(;a--;a)e.unshift('..');return e}function n(e,t){if(e.filter)return e.filter(t);for(var a=[],n=0;n<e.length;n++)t(e[n],n,e)&&a.push(e[n]);return a}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return r.exec(e).slice(1)};t.resolve=function(){for(var t='',r=!1,o=arguments.length-1,i;-1<=o&&!r;o--){if(i=0<=o?arguments[o]:e.cwd(),'string'!=typeof i)throw new TypeError('Arguments to path.resolve must be strings');else if(!i)continue;t=i+'/'+t,r='/'===i.charAt(0)}return t=a(n(t.split('/'),function(e){return!!e}),!r).join('/'),(r?'/':'')+t||'.'},t.normalize=function(e){var r=t.isAbsolute(e),i='/'===o(e,-1);return e=a(n(e.split('/'),function(e){return!!e}),!r).join('/'),e||r||(e='.'),e&&i&&(e+='/'),(r?'/':'')+e},t.isAbsolute=function(e){return'/'===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,function(e){if('string'!=typeof e)throw new TypeError('Arguments to path.join must be strings');return e}).join('/'))},t.relative=function(e,a){function n(e){for(var t=0;t<e.length&&''===e[t];t++);for(var a=e.length-1;0<=a&&''===e[a];a--);return t>a?[]:e.slice(t,a-t+1)}e=t.resolve(e).substr(1),a=t.resolve(a).substr(1);for(var r=n(e.split('/')),o=n(a.split('/')),s=Math.min(r.length,o.length),d=s,l=0;l<s;l++)if(r[l]!==o[l]){d=l;break}for(var i=[],l=d;l<r.length;l++)i.push('..');return i=i.concat(o.slice(d)),i.join('/')},t.sep='/',t.delimiter=':',t.dirname=function(e){var t=i(e),a=t[0],n=t[1];return a||n?(n&&(n=n.substr(0,n.length-1)),a+n):'.'},t.basename=function(e,t){var a=i(e)[2];return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},t.extname=function(e){return i(e)[3]};var o=function(e,t,a){return e.substr(t,a)}}).call(this,a(84))},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.paletteToRGBA=function(e,t){const a=new Uint8Array(4*e.length),n=e.length;for(let r=0;r<n;++r)a[4*r]=t[3*e[r]],a[4*r+1]=t[3*e[r]+1],a[4*r+2]=t[3*e[r]+2],a[4*r+3]=255;return a},t.paletteWithLastTransToRGBA=function(e,t){const a=new Uint8Array(4*e.length),n=e.length;for(let r=0;r<n;++r)255===e[r]?a[4*r+3]=0:(a[4*r]=t[3*e[r]],a[4*r+1]=t[3*e[r]+1],a[4*r+2]=t[3*e[r]+2],a[4*r+3]=255);return a}},function(e,t,a){'use strict';function n(e){Dr=e}function r(e){return e*Ur}function i(e,t){return xr(e-t)<=Br*Tr(1,xr(e),xr(t))}function o(){let e=new Dr(4);return Dr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function s(e){let t=new Dr(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function p(e,t,a,n){let r=new Dr(4);return r[0]=e,r[1]=t,r[2]=a,r[3]=n,r}function u(e,t,a,n,r){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e}function c(e,t){if(e===t){let a=t[1];e[1]=t[2],e[2]=a}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function f(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=a*i-r*n;return o?(o=1/o,e[0]=i*o,e[1]=-n*o,e[2]=-r*o,e[3]=a*o,e):null}function m(e,t){let a=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=a,e}function g(e){return e[0]*e[3]-e[2]*e[1]}function h(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=a[0],d=a[1],l=a[2],p=a[3];return e[0]=n*s+i*d,e[1]=r*s+o*d,e[2]=n*l+i*p,e[3]=r*l+o*p,e}function y(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],d=vr(a),l=Er(a);return e[0]=n*l+i*d,e[1]=r*l+o*d,e[2]=n*-d+i*l,e[3]=r*-d+o*l,e}function _(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=a[0],d=a[1];return e[0]=n*s,e[1]=r*s,e[2]=i*d,e[3]=o*d,e}function x(e,t){let a=vr(t),n=Er(t);return e[0]=n,e[1]=a,e[2]=-a,e[3]=n,e}function b(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function v(e){return'mat2('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+')'}function E(e){return yr(_r(e[0],2)+_r(e[1],2)+_r(e[2],2)+_r(e[3],2))}function S(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]}function T(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e}function k(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e}function R(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function A(e,t){let a=e[0],n=e[1],r=e[2],i=e[3],o=t[0],s=t[1],d=t[2],l=t[3];return xr(a-o)<=Br*Tr(1,xr(a),xr(o))&&xr(n-s)<=Br*Tr(1,xr(n),xr(s))&&xr(r-d)<=Br*Tr(1,xr(r),xr(d))&&xr(i-l)<=Br*Tr(1,xr(i),xr(l))}function w(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e}function I(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e}function L(){let e=new Dr(6);return Dr!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function P(e){let t=new Dr(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function M(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function C(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function N(e,t,a,n,r,i){let o=new Dr(6);return o[0]=e,o[1]=t,o[2]=a,o[3]=n,o[4]=r,o[5]=i,o}function B(e,t,a,n,r,i,o){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e[4]=i,e[5]=o,e}function D(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],d=a*i-n*r;return d?(d=1/d,e[0]=i*d,e[1]=-n*d,e[2]=-r*d,e[3]=a*d,e[4]=(r*s-i*o)*d,e[5]=(n*o-a*s)*d,e):null}function O(e){return e[0]*e[3]-e[1]*e[2]}function U(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],d=t[5],l=a[0],p=a[1],u=a[2],c=a[3],f=a[4],m=a[5];return e[0]=n*l+i*p,e[1]=r*l+o*p,e[2]=n*u+i*c,e[3]=r*u+o*c,e[4]=n*f+i*m+s,e[5]=r*f+o*m+d,e}function F(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],d=t[4],l=t[5],p=vr(a),u=Er(a);return e[0]=n*u+i*p,e[1]=r*u+o*p,e[2]=n*-p+i*u,e[3]=r*-p+o*u,e[4]=d,e[5]=l,e}function j(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],d=t[5],l=a[0],p=a[1];return e[0]=n*l,e[1]=r*l,e[2]=i*p,e[3]=o*p,e[4]=s,e[5]=d,e}function W(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],d=t[5],l=a[0],p=a[1];return e[0]=n,e[1]=r,e[2]=i,e[3]=o,e[4]=n*l+i*p+s,e[5]=r*l+o*p+d,e}function V(e,t){let a=vr(t),n=Er(t);return e[0]=n,e[1]=a,e[2]=-a,e[3]=n,e[4]=0,e[5]=0,e}function z(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function G(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function X(e){return'mat2d('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+')'}function q(e){return yr(_r(e[0],2)+_r(e[1],2)+_r(e[2],2)+_r(e[3],2)+_r(e[4],2)+_r(e[5],2)+1)}function H(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e}function K(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e}function Y(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e}function Z(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e[4]=t[4]+a[4]*n,e[5]=t[5]+a[5]*n,e}function Q(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function $(e,t){let a=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],d=t[0],l=t[1],p=t[2],u=t[3],c=t[4],f=t[5];return xr(a-d)<=Br*Tr(1,xr(a),xr(d))&&xr(n-l)<=Br*Tr(1,xr(n),xr(l))&&xr(r-p)<=Br*Tr(1,xr(r),xr(p))&&xr(i-u)<=Br*Tr(1,xr(i),xr(u))&&xr(o-c)<=Br*Tr(1,xr(o),xr(c))&&xr(s-f)<=Br*Tr(1,xr(s),xr(f))}function J(){let e=new Dr(9);return Dr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ee(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function te(e){let t=new Dr(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ae(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ne(e,t,a,n,r,i,o,s,d){let l=new Dr(9);return l[0]=e,l[1]=t,l[2]=a,l[3]=n,l[4]=r,l[5]=i,l[6]=o,l[7]=s,l[8]=d,l}function re(e,t,a,n,r,i,o,s,d,l){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e[4]=i,e[5]=o,e[6]=s,e[7]=d,e[8]=l,e}function ie(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function oe(e,t){if(e===t){let a=t[1],n=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=a,e[5]=t[7],e[6]=n,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function se(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],d=t[6],l=t[7],p=t[8],u=p*o-s*l,c=-p*i+s*d,f=l*i-o*d,m=a*u+n*c+r*f;return m?(m=1/m,e[0]=u*m,e[1]=(-p*n+r*l)*m,e[2]=(s*n-r*o)*m,e[3]=c*m,e[4]=(p*a-r*d)*m,e[5]=(-s*a+r*i)*m,e[6]=f*m,e[7]=(-l*a+n*d)*m,e[8]=(o*a-n*i)*m,e):null}function de(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],d=t[6],l=t[7],p=t[8];return e[0]=o*p-s*l,e[1]=r*l-n*p,e[2]=n*s-r*o,e[3]=s*d-i*p,e[4]=a*p-r*d,e[5]=r*i-a*s,e[6]=i*l-o*d,e[7]=n*d-a*l,e[8]=a*o-n*i,e}function le(e){let t=e[0],a=e[1],n=e[2],r=e[3],i=e[4],o=e[5],s=e[6],d=e[7],l=e[8];return t*(l*i-o*d)+a*(-l*r+o*s)+n*(d*r-i*s)}function pe(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],d=t[5],l=t[6],p=t[7],u=t[8],c=a[0],f=a[1],m=a[2],g=a[3],h=a[4],y=a[5],_=a[6],x=a[7],b=a[8];return e[0]=c*n+f*o+m*l,e[1]=c*r+f*s+m*p,e[2]=c*i+f*d+m*u,e[3]=g*n+h*o+y*l,e[4]=g*r+h*s+y*p,e[5]=g*i+h*d+y*u,e[6]=_*n+x*o+b*l,e[7]=_*r+x*s+b*p,e[8]=_*i+x*d+b*u,e}function ue(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],d=t[5],l=t[6],p=t[7],u=t[8],c=a[0],f=a[1];return e[0]=n,e[1]=r,e[2]=i,e[3]=o,e[4]=s,e[5]=d,e[6]=c*n+f*o+l,e[7]=c*r+f*s+p,e[8]=c*i+f*d+u,e}function ce(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],d=t[4],l=t[5],p=t[6],u=t[7],f=t[8],m=vr(a),s=Er(a);return e[0]=s*n+m*o,e[1]=s*r+m*d,e[2]=s*i+m*l,e[3]=s*o-m*n,e[4]=s*d-m*r,e[5]=s*l-m*i,e[6]=p,e[7]=u,e[8]=f,e}function fe(e,t,a){let n=a[0],r=a[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function me(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function ge(e,t){let a=vr(t),n=Er(t);return e[0]=n,e[1]=a,e[2]=0,e[3]=-a,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function he(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function _e(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=a+a,s=n+n,d=r+r,l=a*o,p=n*o,u=n*s,c=r*o,f=r*s,m=r*d,g=i*o,h=i*s,y=i*d;return e[0]=1-u-m,e[3]=p-y,e[6]=c+h,e[1]=p+y,e[4]=1-l-m,e[7]=f-g,e[2]=c-h,e[5]=f+g,e[8]=1-l-u,e}function xe(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],d=t[6],l=t[7],p=t[8],u=t[9],c=t[10],f=t[11],m=t[12],g=t[13],h=t[14],y=t[15],_=a*s-n*o,x=a*d-r*o,b=a*l-i*o,v=n*d-r*s,E=n*l-i*s,S=r*l-i*d,T=p*g-u*m,k=p*h-c*m,R=p*y-f*m,A=u*h-c*g,w=u*y-f*g,I=c*y-f*h,L=_*I-x*w+b*A+v*R-E*k+S*T;return L?(L=1/L,e[0]=(s*I-d*w+l*A)*L,e[1]=(d*R-o*I-l*k)*L,e[2]=(o*w-s*R+l*T)*L,e[3]=(r*w-n*I-i*A)*L,e[4]=(a*I-r*R+i*k)*L,e[5]=(n*R-a*w-i*T)*L,e[6]=(g*S-h*E+y*v)*L,e[7]=(h*b-m*S-y*x)*L,e[8]=(m*E-g*b+y*_)*L,e):null}function be(e,t,a){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/a,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function ve(e){return'mat3('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+', '+e[6]+', '+e[7]+', '+e[8]+')'}function Ee(e){return yr(_r(e[0],2)+_r(e[1],2)+_r(e[2],2)+_r(e[3],2)+_r(e[4],2)+_r(e[5],2)+_r(e[6],2)+_r(e[7],2)+_r(e[8],2))}function Se(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e}function Te(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e}function ke(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e}function Re(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e[4]=t[4]+a[4]*n,e[5]=t[5]+a[5]*n,e[6]=t[6]+a[6]*n,e[7]=t[7]+a[7]*n,e[8]=t[8]+a[8]*n,e}function Ae(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function we(e,t){let a=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],d=e[6],l=e[7],p=e[8],u=t[0],c=t[1],f=t[2],m=t[3],g=t[4],h=t[5],y=t[6],_=t[7],x=t[8];return xr(a-u)<=Br*Tr(1,xr(a),xr(u))&&xr(n-c)<=Br*Tr(1,xr(n),xr(c))&&xr(r-f)<=Br*Tr(1,xr(r),xr(f))&&xr(i-m)<=Br*Tr(1,xr(i),xr(m))&&xr(o-g)<=Br*Tr(1,xr(o),xr(g))&&xr(s-h)<=Br*Tr(1,xr(s),xr(h))&&xr(d-y)<=Br*Tr(1,xr(d),xr(y))&&xr(l-_)<=Br*Tr(1,xr(l),xr(_))&&xr(p-x)<=Br*Tr(1,xr(p),xr(x))}function Ie(){let e=new Dr(16);return Dr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Le(e){let t=new Dr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Pe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Me(e,t,a,n,r,i,o,s,d,l,p,u,c,f,m,g){let h=new Dr(16);return h[0]=e,h[1]=t,h[2]=a,h[3]=n,h[4]=r,h[5]=i,h[6]=o,h[7]=s,h[8]=d,h[9]=l,h[10]=p,h[11]=u,h[12]=c,h[13]=f,h[14]=m,h[15]=g,h}function Ce(e,t,a,n,r,i,o,s,d,l,p,u,c,f,m,g,h){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e[4]=i,e[5]=o,e[6]=s,e[7]=d,e[8]=l,e[9]=p,e[10]=u,e[11]=c,e[12]=f,e[13]=m,e[14]=g,e[15]=h,e}function Ne(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Be(e,t){if(e===t){let a=t[1],n=t[2],r=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=a,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=i,e[11]=t[14],e[12]=r,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function De(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],d=t[6],l=t[7],p=t[8],u=t[9],c=t[10],f=t[11],m=t[12],g=t[13],h=t[14],y=t[15],_=a*s-n*o,x=a*d-r*o,b=a*l-i*o,v=n*d-r*s,E=n*l-i*s,S=r*l-i*d,T=p*g-u*m,k=p*h-c*m,R=p*y-f*m,A=u*h-c*g,w=u*y-f*g,I=c*y-f*h,L=_*I-x*w+b*A+v*R-E*k+S*T;return L?(L=1/L,e[0]=(s*I-d*w+l*A)*L,e[1]=(r*w-n*I-i*A)*L,e[2]=(g*S-h*E+y*v)*L,e[3]=(c*E-u*S-f*v)*L,e[4]=(d*R-o*I-l*k)*L,e[5]=(a*I-r*R+i*k)*L,e[6]=(h*b-m*S-y*x)*L,e[7]=(p*S-c*b+f*x)*L,e[8]=(o*w-s*R+l*T)*L,e[9]=(n*R-a*w-i*T)*L,e[10]=(m*E-g*b+y*_)*L,e[11]=(u*b-p*E-f*_)*L,e[12]=(s*k-o*A-d*T)*L,e[13]=(a*A-n*k+r*T)*L,e[14]=(g*x-m*v-h*_)*L,e[15]=(p*v-u*x+c*_)*L,e):null}function Oe(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],d=t[6],l=t[7],p=t[8],u=t[9],c=t[10],f=t[11],m=t[12],g=t[13],h=t[14],y=t[15];return e[0]=s*(c*y-f*h)-u*(d*y-l*h)+g*(d*f-l*c),e[1]=-(n*(c*y-f*h)-u*(r*y-i*h)+g*(r*f-i*c)),e[2]=n*(d*y-l*h)-s*(r*y-i*h)+g*(r*l-i*d),e[3]=-(n*(d*f-l*c)-s*(r*f-i*c)+u*(r*l-i*d)),e[4]=-(o*(c*y-f*h)-p*(d*y-l*h)+m*(d*f-l*c)),e[5]=a*(c*y-f*h)-p*(r*y-i*h)+m*(r*f-i*c),e[6]=-(a*(d*y-l*h)-o*(r*y-i*h)+m*(r*l-i*d)),e[7]=a*(d*f-l*c)-o*(r*f-i*c)+p*(r*l-i*d),e[8]=o*(u*y-f*g)-p*(s*y-l*g)+m*(s*f-l*u),e[9]=-(a*(u*y-f*g)-p*(n*y-i*g)+m*(n*f-i*u)),e[10]=a*(s*y-l*g)-o*(n*y-i*g)+m*(n*l-i*s),e[11]=-(a*(s*f-l*u)-o*(n*f-i*u)+p*(n*l-i*s)),e[12]=-(o*(u*h-c*g)-p*(s*h-d*g)+m*(s*c-d*u)),e[13]=a*(u*h-c*g)-p*(n*h-r*g)+m*(n*c-r*u),e[14]=-(a*(s*h-d*g)-o*(n*h-r*g)+m*(n*d-r*s)),e[15]=a*(s*c-d*u)-o*(n*c-r*u)+p*(n*d-r*s),e}function Ue(e){let t=e[0],a=e[1],n=e[2],r=e[3],i=e[4],o=e[5],s=e[6],d=e[7],l=e[8],p=e[9],u=e[10],c=e[11],f=e[12],m=e[13],g=e[14],h=e[15];return(t*o-a*i)*(u*h-c*g)-(t*s-n*i)*(p*h-c*m)+(t*d-r*i)*(p*g-u*m)+(a*s-n*o)*(l*h-c*f)-(a*d-r*o)*(l*g-u*f)+(n*d-r*s)*(l*m-p*f)}function Fe(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],d=t[5],l=t[6],p=t[7],u=t[8],c=t[9],f=t[10],m=t[11],g=t[12],h=t[13],y=t[14],_=t[15],x=a[0],b=a[1],v=a[2],E=a[3];return e[0]=x*n+b*s+v*u+E*g,e[1]=x*r+b*d+v*c+E*h,e[2]=x*i+b*l+v*f+E*y,e[3]=x*o+b*p+v*m+E*_,x=a[4],b=a[5],v=a[6],E=a[7],e[4]=x*n+b*s+v*u+E*g,e[5]=x*r+b*d+v*c+E*h,e[6]=x*i+b*l+v*f+E*y,e[7]=x*o+b*p+v*m+E*_,x=a[8],b=a[9],v=a[10],E=a[11],e[8]=x*n+b*s+v*u+E*g,e[9]=x*r+b*d+v*c+E*h,e[10]=x*i+b*l+v*f+E*y,e[11]=x*o+b*p+v*m+E*_,x=a[12],b=a[13],v=a[14],E=a[15],e[12]=x*n+b*s+v*u+E*g,e[13]=x*r+b*d+v*c+E*h,e[14]=x*i+b*l+v*f+E*y,e[15]=x*o+b*p+v*m+E*_,e}function je(e,t,a){let n=a[0],r=a[1],i=a[2],o,s,d,l,p,u,c,f,m,g,h,y;return t===e?(e[12]=t[0]*n+t[4]*r+t[8]*i+t[12],e[13]=t[1]*n+t[5]*r+t[9]*i+t[13],e[14]=t[2]*n+t[6]*r+t[10]*i+t[14],e[15]=t[3]*n+t[7]*r+t[11]*i+t[15]):(o=t[0],s=t[1],d=t[2],l=t[3],p=t[4],u=t[5],c=t[6],f=t[7],m=t[8],g=t[9],h=t[10],y=t[11],e[0]=o,e[1]=s,e[2]=d,e[3]=l,e[4]=p,e[5]=u,e[6]=c,e[7]=f,e[8]=m,e[9]=g,e[10]=h,e[11]=y,e[12]=o*n+p*r+m*i+t[12],e[13]=s*n+u*r+g*i+t[13],e[14]=d*n+c*r+h*i+t[14],e[15]=l*n+f*r+y*i+t[15]),e}function We(e,t,a){let n=a[0],r=a[1],i=a[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ve(e,n,a,r){let i=r[0],o=r[1],d=r[2],l=yr(i*i+o*o+d*d),p,s,u,t,c,f,m,g,h,y,_,x,b,v,E,S,T,k,R,A,w,I,L,P;return l<Br?null:(l=1/l,i*=l,o*=l,d*=l,p=vr(a),s=Er(a),u=1-s,t=n[0],c=n[1],f=n[2],m=n[3],g=n[4],h=n[5],y=n[6],_=n[7],x=n[8],b=n[9],v=n[10],E=n[11],S=i*i*u+s,T=o*i*u+d*p,k=d*i*u-o*p,R=i*o*u-d*p,A=o*o*u+s,w=d*o*u+i*p,I=i*d*u+o*p,L=o*d*u-i*p,P=d*d*u+s,e[0]=t*S+g*T+x*k,e[1]=c*S+h*T+b*k,e[2]=f*S+y*T+v*k,e[3]=m*S+_*T+E*k,e[4]=t*R+g*A+x*w,e[5]=c*R+h*A+b*w,e[6]=f*R+y*A+v*w,e[7]=m*R+_*A+E*w,e[8]=t*I+g*L+x*P,e[9]=c*I+h*L+b*P,e[10]=f*I+y*L+v*P,e[11]=m*I+_*L+E*P,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)}function ze(e,t,a){let n=vr(a),r=Er(a),i=t[4],o=t[5],s=t[6],d=t[7],l=t[8],p=t[9],u=t[10],c=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*r+l*n,e[5]=o*r+p*n,e[6]=s*r+u*n,e[7]=d*r+c*n,e[8]=l*r-i*n,e[9]=p*r-o*n,e[10]=u*r-s*n,e[11]=c*r-d*n,e}function Ge(e,t,a){let n=vr(a),r=Er(a),i=t[0],o=t[1],s=t[2],d=t[3],l=t[8],p=t[9],u=t[10],c=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r-l*n,e[1]=o*r-p*n,e[2]=s*r-u*n,e[3]=d*r-c*n,e[8]=i*n+l*r,e[9]=o*n+p*r,e[10]=s*n+u*r,e[11]=d*n+c*r,e}function Xe(e,t,a){let n=vr(a),r=Er(a),i=t[0],o=t[1],s=t[2],d=t[3],l=t[4],p=t[5],u=t[6],c=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r+l*n,e[1]=o*r+p*n,e[2]=s*r+u*n,e[3]=d*r+c*n,e[4]=l*r-i*n,e[5]=p*r-o*n,e[6]=u*r-s*n,e[7]=c*r-d*n,e}function qe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function He(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ke(e,a,n){let r=n[0],i=n[1],o=n[2],d=yr(r*r+i*i+o*o),l,s,p;return d<Br?null:(d=1/d,r*=d,i*=d,o*=d,l=vr(a),s=Er(a),p=1-s,e[0]=r*r*p+s,e[1]=i*r*p+o*l,e[2]=o*r*p-i*l,e[3]=0,e[4]=r*i*p-o*l,e[5]=i*i*p+s,e[6]=o*i*p+r*l,e[7]=0,e[8]=r*o*p+i*l,e[9]=i*o*p-r*l,e[10]=o*o*p+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Ye(e,t){let a=vr(t),n=Er(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=a,e[7]=0,e[8]=0,e[9]=-a,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ze(e,t){let a=vr(t),n=Er(t);return e[0]=n,e[1]=0,e[2]=-a,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=a,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Qe(e,t){let a=vr(t),n=Er(t);return e[0]=n,e[1]=a,e[2]=0,e[3]=0,e[4]=-a,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $e(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=n+n,d=r+r,l=i+i,p=n*s,u=n*d,c=n*l,f=r*d,m=r*l,g=i*l,h=o*s,y=o*d,_=o*l;return e[0]=1-(f+g),e[1]=u+_,e[2]=c-y,e[3]=0,e[4]=u-_,e[5]=1-(p+g),e[6]=m+h,e[7]=0,e[8]=c+y,e[9]=m-h,e[10]=1-(p+f),e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}function Je(e,t){let a=new Dr(3),n=-t[0],r=-t[1],i=-t[2],o=t[3],s=t[4],d=t[5],l=t[6],p=t[7],u=n*n+r*r+i*i+o*o;return 0<u?(a[0]=2*(s*o+p*n+d*i-l*r)/u,a[1]=2*(d*o+p*r+l*n-s*i)/u,a[2]=2*(l*o+p*i+s*r-d*n)/u):(a[0]=2*(s*o+p*n+d*i-l*r),a[1]=2*(d*o+p*r+l*n-s*i),a[2]=2*(l*o+p*i+s*r-d*n)),$e(e,t,a),e}function et(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function tt(e,t){let a=t[0],n=t[1],r=t[2],i=t[4],o=t[5],s=t[6],d=t[8],l=t[9],p=t[10];return e[0]=yr(a*a+n*n+r*r),e[1]=yr(i*i+o*o+s*s),e[2]=yr(d*d+l*l+p*p),e}function at(e,t){let a=t[0]+t[5]+t[10],n=0;return 0<a?(n=2*yr(a+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*yr(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*yr(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*yr(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e}function nt(e,t,a,n){let r=t[0],i=t[1],o=t[2],s=t[3],d=r+r,l=i+i,p=o+o,u=r*d,c=r*l,f=r*p,m=i*l,g=i*p,h=o*p,y=s*d,_=s*l,x=s*p,b=n[0],v=n[1],E=n[2];return e[0]=(1-(m+h))*b,e[1]=(c+x)*b,e[2]=(f-_)*b,e[3]=0,e[4]=(c-x)*v,e[5]=(1-(u+h))*v,e[6]=(g+y)*v,e[7]=0,e[8]=(f+_)*E,e[9]=(g-y)*E,e[10]=(1-(u+m))*E,e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}function rt(e,t,a,n,r){let i=t[0],o=t[1],s=t[2],d=t[3],l=i+i,p=o+o,u=s+s,c=i*l,f=i*p,m=i*u,g=o*p,h=o*u,y=s*u,_=d*l,x=d*p,b=d*u,v=n[0],E=n[1],S=n[2],T=r[0],k=r[1],R=r[2],A=(1-(g+y))*v,w=(f+b)*v,I=(m-x)*v,L=(f-b)*E,P=(1-(c+y))*E,M=(h+_)*E,C=(m+x)*S,N=(h-_)*S,B=(1-(c+g))*S;return e[0]=A,e[1]=w,e[2]=I,e[3]=0,e[4]=L,e[5]=P,e[6]=M,e[7]=0,e[8]=C,e[9]=N,e[10]=B,e[11]=0,e[12]=a[0]+T-(A*T+L*k+C*R),e[13]=a[1]+k-(w*T+P*k+N*R),e[14]=a[2]+R-(I*T+M*k+B*R),e[15]=1,e}function it(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=a+a,s=n+n,d=r+r,l=a*o,p=n*o,u=n*s,c=r*o,f=r*s,m=r*d,g=i*o,h=i*s,y=i*d;return e[0]=1-u-m,e[1]=p+y,e[2]=c-h,e[3]=0,e[4]=p-y,e[5]=1-l-m,e[6]=f+g,e[7]=0,e[8]=c+h,e[9]=f-g,e[10]=1-l-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ot(e,t,a,n,r,i,o){let s=1/(a-t),d=1/(r-n),l=1/(i-o);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*d,e[6]=0,e[7]=0,e[8]=(a+t)*s,e[9]=(r+n)*d,e[10]=(o+i)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*(o*i)*l,e[15]=0,e}function st(e,t,a,n,r){let i=1/hr(t/2),o;return e[0]=i/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==Infinity?(o=1/(n-r),e[10]=(r+n)*o,e[14]=2*r*n*o):(e[10]=-1,e[14]=-2*n),e}function dt(e,t,a,n){let r=hr(t.upDegrees*Sr/180),i=hr(t.downDegrees*Sr/180),o=hr(t.leftDegrees*Sr/180),s=hr(t.rightDegrees*Sr/180),d=2/(o+s),l=2/(r+i);return e[0]=d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(.5*((o-s)*d)),e[9]=.5*((r-i)*l),e[10]=n/(a-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*a/(a-n),e[15]=0,e}function lt(e,t,a,n,r,i,o){let s=1/(t-a),d=1/(n-r),l=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+a)*s,e[13]=(r+n)*d,e[14]=(o+i)*l,e[15]=1,e}function pt(e,t,a,n){let r=t[0],i=t[1],o=t[2],s=n[0],d=n[1],l=n[2],p=a[0],u=a[1],c=a[2],f,m,g,h,y,_,x,b,v,E;return xr(r-p)<Br&&xr(i-u)<Br&&xr(o-c)<Br?Ne(e):(x=r-p,b=i-u,v=o-c,E=1/yr(x*x+b*b+v*v),x*=E,b*=E,v*=E,f=d*v-l*b,m=l*x-s*v,g=s*b-d*x,E=yr(f*f+m*m+g*g),E?(E=1/E,f*=E,m*=E,g*=E):(f=0,m=0,g=0),h=b*g-v*m,y=v*f-x*g,_=x*m-b*f,E=yr(h*h+y*y+_*_),E?(E=1/E,h*=E,y*=E,_*=E):(h=0,y=0,_=0),e[0]=f,e[1]=h,e[2]=x,e[3]=0,e[4]=m,e[5]=y,e[6]=b,e[7]=0,e[8]=g,e[9]=_,e[10]=v,e[11]=0,e[12]=-(f*r+m*i+g*o),e[13]=-(h*r+y*i+_*o),e[14]=-(x*r+b*i+v*o),e[15]=1,e)}function ut(e,t,a,n){let r=t[0],i=t[1],o=t[2],s=n[0],d=n[1],l=n[2],p=r-a[0],u=i-a[1],c=o-a[2],f=p*p+u*u+c*c;0<f&&(f=1/yr(f),p*=f,u*=f,c*=f);let m=d*c-l*u,g=l*p-s*c,h=s*u-d*p;return f=m*m+g*g+h*h,0<f&&(f=1/yr(f),m*=f,g*=f,h*=f),e[0]=m,e[1]=g,e[2]=h,e[3]=0,e[4]=u*h-c*g,e[5]=c*m-p*h,e[6]=p*g-u*m,e[7]=0,e[8]=p,e[9]=u,e[10]=c,e[11]=0,e[12]=r,e[13]=i,e[14]=o,e[15]=1,e}function ct(e){return'mat4('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+', '+e[6]+', '+e[7]+', '+e[8]+', '+e[9]+', '+e[10]+', '+e[11]+', '+e[12]+', '+e[13]+', '+e[14]+', '+e[15]+')'}function ft(e){return yr(_r(e[0],2)+_r(e[1],2)+_r(e[2],2)+_r(e[3],2)+_r(e[4],2)+_r(e[5],2)+_r(e[6],2)+_r(e[7],2)+_r(e[8],2)+_r(e[9],2)+_r(e[10],2)+_r(e[11],2)+_r(e[12],2)+_r(e[13],2)+_r(e[14],2)+_r(e[15],2))}function mt(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e[9]=t[9]+a[9],e[10]=t[10]+a[10],e[11]=t[11]+a[11],e[12]=t[12]+a[12],e[13]=t[13]+a[13],e[14]=t[14]+a[14],e[15]=t[15]+a[15],e}function gt(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e[9]=t[9]-a[9],e[10]=t[10]-a[10],e[11]=t[11]-a[11],e[12]=t[12]-a[12],e[13]=t[13]-a[13],e[14]=t[14]-a[14],e[15]=t[15]-a[15],e}function ht(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12]*a,e[13]=t[13]*a,e[14]=t[14]*a,e[15]=t[15]*a,e}function yt(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e[4]=t[4]+a[4]*n,e[5]=t[5]+a[5]*n,e[6]=t[6]+a[6]*n,e[7]=t[7]+a[7]*n,e[8]=t[8]+a[8]*n,e[9]=t[9]+a[9]*n,e[10]=t[10]+a[10]*n,e[11]=t[11]+a[11]*n,e[12]=t[12]+a[12]*n,e[13]=t[13]+a[13]*n,e[14]=t[14]+a[14]*n,e[15]=t[15]+a[15]*n,e}function _t(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function xt(e,t){let a=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],d=e[6],l=e[7],p=e[8],u=e[9],c=e[10],f=e[11],m=e[12],g=e[13],h=e[14],y=e[15],_=t[0],x=t[1],b=t[2],v=t[3],E=t[4],S=t[5],T=t[6],k=t[7],R=t[8],A=t[9],w=t[10],I=t[11],L=t[12],P=t[13],M=t[14],C=t[15];return xr(a-_)<=Br*Tr(1,xr(a),xr(_))&&xr(n-x)<=Br*Tr(1,xr(n),xr(x))&&xr(r-b)<=Br*Tr(1,xr(r),xr(b))&&xr(i-v)<=Br*Tr(1,xr(i),xr(v))&&xr(o-E)<=Br*Tr(1,xr(o),xr(E))&&xr(s-S)<=Br*Tr(1,xr(s),xr(S))&&xr(d-T)<=Br*Tr(1,xr(d),xr(T))&&xr(l-k)<=Br*Tr(1,xr(l),xr(k))&&xr(p-R)<=Br*Tr(1,xr(p),xr(R))&&xr(u-A)<=Br*Tr(1,xr(u),xr(A))&&xr(c-w)<=Br*Tr(1,xr(c),xr(w))&&xr(f-I)<=Br*Tr(1,xr(f),xr(I))&&xr(m-L)<=Br*Tr(1,xr(m),xr(L))&&xr(g-P)<=Br*Tr(1,xr(g),xr(P))&&xr(h-M)<=Br*Tr(1,xr(h),xr(M))&&xr(y-C)<=Br*Tr(1,xr(y),xr(C))}function bt(){let e=new Dr(3);return Dr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function vt(e){var t=new Dr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Et(e){let t=e[0],a=e[1],n=e[2];return yr(t*t+a*a+n*n)}function St(e,t,a){let n=new Dr(3);return n[0]=e,n[1]=t,n[2]=a,n}function Tt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function kt(e,t,a,n){return e[0]=t,e[1]=a,e[2]=n,e}function Rt(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e}function At(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e}function wt(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e}function It(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e}function Lt(e,t){return e[0]=gr(t[0]),e[1]=gr(t[1]),e[2]=gr(t[2]),e}function Pt(e,t){return e[0]=mr(t[0]),e[1]=mr(t[1]),e[2]=mr(t[2]),e}function Mt(e,t,a){return e[0]=br(t[0],a[0]),e[1]=br(t[1],a[1]),e[2]=br(t[2],a[2]),e}function Ct(e,t,a){return e[0]=Tr(t[0],a[0]),e[1]=Tr(t[1],a[1]),e[2]=Tr(t[2],a[2]),e}function Nt(e,t){return e[0]=fr(t[0]),e[1]=fr(t[1]),e[2]=fr(t[2]),e}function Bt(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function Dt(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e}function Ot(e,t){let a=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2];return yr(a*a+n*n+r*r)}function Ut(e,t){let a=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2];return a*a+n*n+r*r}function Ft(e){let t=e[0],a=e[1],n=e[2];return t*t+a*a+n*n}function jt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Wt(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Vt(e,t){let a=t[0],n=t[1],r=t[2],i=a*a+n*n+r*r;return 0<i&&(i=1/yr(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}function zt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Gt(e,t,a){let n=t[0],r=t[1],i=t[2],o=a[0],s=a[1],d=a[2];return e[0]=r*d-i*s,e[1]=i*o-n*d,e[2]=n*s-r*o,e}function Xt(e,n,a,r){let t=n[0],i=n[1],o=n[2];return e[0]=t+r*(a[0]-t),e[1]=i+r*(a[1]-i),e[2]=o+r*(a[2]-o),e}function qt(e,n,a,r,i,o){let t=o*o,s=t*(2*o-3)+1,d=t*(o-2)+o,l=t*(o-1),p=t*(3-2*o);return e[0]=n[0]*s+a[0]*d+r[0]*l+i[0]*p,e[1]=n[1]*s+a[1]*d+r[1]*l+i[1]*p,e[2]=n[2]*s+a[2]*d+r[2]*l+i[2]*p,e}function Ht(e,n,a,r,i,o){let t=1-o,s=t*t,d=o*o,l=s*t,p=3*o*s,u=3*d*t,c=d*o;return e[0]=n[0]*l+a[0]*p+r[0]*u+i[0]*c,e[1]=n[1]*l+a[1]*p+r[1]*u+i[1]*c,e[2]=n[2]*l+a[2]*p+r[2]*u+i[2]*c,e}function Kt(e,t){t=t||1;let a=2*Or()*Sr,n=2*Or()-1,r=yr(1-n*n)*t;return e[0]=Er(a)*r,e[1]=vr(a)*r,e[2]=n*t,e}function Yt(e,t,a){let n=t[0],r=t[1],i=t[2],o=a[3]*n+a[7]*r+a[11]*i+a[15];return o=o||1,e[0]=(a[0]*n+a[4]*r+a[8]*i+a[12])/o,e[1]=(a[1]*n+a[5]*r+a[9]*i+a[13])/o,e[2]=(a[2]*n+a[6]*r+a[10]*i+a[14])/o,e}function Zt(e,t,a){let n=t[0],r=t[1],i=t[2];return e[0]=n*a[0]+r*a[3]+i*a[6],e[1]=n*a[1]+r*a[4]+i*a[7],e[2]=n*a[2]+r*a[5]+i*a[8],e}function Qt(e,t,a){let n=a[0],r=a[1],i=a[2],o=a[3],s=t[0],d=t[1],l=t[2],p=r*l-i*d,u=i*s-n*l,c=n*d-r*s,f=r*c-i*u,m=i*p-n*c,g=n*u-r*p,h=2*o;return p*=h,u*=h,c*=h,f*=2,m*=2,g*=2,e[0]=s+p+f,e[1]=d+u+m,e[2]=l+c+g,e}function $t(e,t,a,n){let i=[],o=[];return i[0]=t[0]-a[0],i[1]=t[1]-a[1],i[2]=t[2]-a[2],o[0]=i[0],o[1]=i[1]*Er(n)-i[2]*vr(n),o[2]=i[1]*vr(n)+i[2]*Er(n),e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e}function Jt(e,t,a,n){let i=[],o=[];return i[0]=t[0]-a[0],i[1]=t[1]-a[1],i[2]=t[2]-a[2],o[0]=i[2]*vr(n)+i[0]*Er(n),o[1]=i[1],o[2]=i[2]*Er(n)-i[0]*vr(n),e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e}function ea(e,t,a,n){let i=[],o=[];return i[0]=t[0]-a[0],i[1]=t[1]-a[1],i[2]=t[2]-a[2],o[0]=i[0]*Er(n)-i[1]*vr(n),o[1]=i[0]*vr(n)+i[1]*Er(n),o[2]=i[2],e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e}function ta(e,t){let a=St(e[0],e[1],e[2]),n=St(t[0],t[1],t[2]);Vt(a,a),Vt(n,n);let r=zt(a,n);return 1<r?0:-1>r?Sr:cr(r)}function aa(e){return'vec3('+e[0]+', '+e[1]+', '+e[2]+')'}function na(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function ra(e,t){let a=e[0],n=e[1],r=e[2],i=t[0],o=t[1],s=t[2];return xr(a-i)<=Br*Tr(1,xr(a),xr(i))&&xr(n-o)<=Br*Tr(1,xr(n),xr(o))&&xr(r-s)<=Br*Tr(1,xr(r),xr(s))}function ia(){let e=new Dr(4);return Dr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function oa(e){let t=new Dr(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function sa(e,t,a,n){let r=new Dr(4);return r[0]=e,r[1]=t,r[2]=a,r[3]=n,r}function da(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function la(e,t,a,n,r){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e}function pa(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e}function ua(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e}function ca(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e[3]=t[3]*a[3],e}function fa(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e[3]=t[3]/a[3],e}function ma(e,t){return e[0]=gr(t[0]),e[1]=gr(t[1]),e[2]=gr(t[2]),e[3]=gr(t[3]),e}function ga(e,t){return e[0]=mr(t[0]),e[1]=mr(t[1]),e[2]=mr(t[2]),e[3]=mr(t[3]),e}function ha(e,t,a){return e[0]=br(t[0],a[0]),e[1]=br(t[1],a[1]),e[2]=br(t[2],a[2]),e[3]=br(t[3],a[3]),e}function ya(e,t,a){return e[0]=Tr(t[0],a[0]),e[1]=Tr(t[1],a[1]),e[2]=Tr(t[2],a[2]),e[3]=Tr(t[3],a[3]),e}function _a(e,t){return e[0]=fr(t[0]),e[1]=fr(t[1]),e[2]=fr(t[2]),e[3]=fr(t[3]),e}function xa(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e}function ba(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e}function va(e,t){let a=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2],i=t[3]-e[3];return yr(a*a+n*n+r*r+i*i)}function Ea(e,t){let a=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2],i=t[3]-e[3];return a*a+n*n+r*r+i*i}function Sa(e){let t=e[0],a=e[1],n=e[2],r=e[3];return yr(t*t+a*a+n*n+r*r)}function Ta(e){let t=e[0],a=e[1],n=e[2],r=e[3];return t*t+a*a+n*n+r*r}function ka(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Ra(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Aa(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=a*a+n*n+r*r+i*i;return 0<o&&(o=1/yr(o),e[0]=a*o,e[1]=n*o,e[2]=r*o,e[3]=i*o),e}function wa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Ia(e,n,a,r){let t=n[0],i=n[1],o=n[2],s=n[3];return e[0]=t+r*(a[0]-t),e[1]=i+r*(a[1]-i),e[2]=o+r*(a[2]-o),e[3]=s+r*(a[3]-s),e}function La(e,t){t=t||1;var a,n,r,i,o,s;do a=2*Or()-1,n=2*Or()-1,o=a*a+n*n;while(1<=o);do r=2*Or()-1,i=2*Or()-1,s=r*r+i*i;while(1<=s);var l=yr((1-o)/s);return e[0]=t*a,e[1]=t*n,e[2]=t*r*l,e[3]=t*i*l,e}function Pa(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3];return e[0]=a[0]*n+a[4]*r+a[8]*i+a[12]*o,e[1]=a[1]*n+a[5]*r+a[9]*i+a[13]*o,e[2]=a[2]*n+a[6]*r+a[10]*i+a[14]*o,e[3]=a[3]*n+a[7]*r+a[11]*i+a[15]*o,e}function Ma(e,t,a){let n=t[0],r=t[1],i=t[2],o=a[0],s=a[1],d=a[2],l=a[3],p=l*n+s*i-d*r,u=l*r+d*n-o*i,c=l*i+o*r-s*n,f=-o*n-s*r-d*i;return e[0]=p*l+f*-o+u*-d-c*-s,e[1]=u*l+f*-s+c*-o-p*-d,e[2]=c*l+f*-d+p*-s-u*-o,e[3]=t[3],e}function Ca(e){return'vec4('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+')'}function Na(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Ba(e,t){let a=e[0],n=e[1],r=e[2],i=e[3],o=t[0],s=t[1],d=t[2],l=t[3];return xr(a-o)<=Br*Tr(1,xr(a),xr(o))&&xr(n-s)<=Br*Tr(1,xr(n),xr(s))&&xr(r-d)<=Br*Tr(1,xr(r),xr(d))&&xr(i-l)<=Br*Tr(1,xr(i),xr(l))}function Da(){let e=new Dr(4);return Dr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Oa(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Ua(e,t,a){a*=.5;let n=vr(a);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Er(a),e}function Fa(e,t){let a=2*cr(t[3]),n=vr(a/2);return n>Br?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),a}function ja(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=a[0],d=a[1],l=a[2],p=a[3];return e[0]=n*p+o*s+r*l-i*d,e[1]=r*p+o*d+i*s-n*l,e[2]=i*p+o*l+n*d-r*s,e[3]=o*p-n*s-r*d-i*l,e}function Wa(e,t,a){a*=.5;let n=t[0],r=t[1],i=t[2],o=t[3],s=vr(a),d=Er(a);return e[0]=n*d+o*s,e[1]=r*d+i*s,e[2]=i*d-r*s,e[3]=o*d-n*s,e}function Va(e,t,a){a*=.5;let n=t[0],r=t[1],i=t[2],o=t[3],s=vr(a),d=Er(a);return e[0]=n*d-i*s,e[1]=r*d+o*s,e[2]=i*d+n*s,e[3]=o*d-r*s,e}function za(e,t,a){a*=.5;let n=t[0],r=t[1],i=t[2],o=t[3],s=vr(a),d=Er(a);return e[0]=n*d+r*s,e[1]=r*d-n*s,e[2]=i*d+o*s,e[3]=o*d-i*s,e}function Ga(e,t){let a=t[0],n=t[1],r=t[2];return e[0]=a,e[1]=n,e[2]=r,e[3]=yr(xr(1-a*a-n*n-r*r)),e}function Xa(e,n,a,r){let t=n[0],i=n[1],o=n[2],s=n[3],d=a[0],l=a[1],p=a[2],u=a[3],c,f,m,g,h;return f=t*d+i*l+o*p+s*u,0>f&&(f=-f,d=-d,l=-l,p=-p,u=-u),1-f>Br?(c=cr(f),m=vr(c),g=vr((1-r)*c)/m,h=vr(r*c)/m):(g=1-r,h=r),e[0]=g*t+h*d,e[1]=g*i+h*l,e[2]=g*o+h*p,e[3]=g*s+h*u,e}function qa(e){let t=Or(),a=Or(),n=Or(),r=yr(1-t),i=yr(t);return e[0]=r*vr(2*Sr*a),e[1]=r*Er(2*Sr*a),e[2]=i*vr(2*Sr*n),e[3]=i*Er(2*Sr*n),e}function Ha(e,t){let a=t[0],n=t[1],r=t[2],i=t[3],o=a*a+n*n+r*r+i*i,s=o?1/o:0;return e[0]=-a*s,e[1]=-n*s,e[2]=-r*s,e[3]=i*s,e}function Ka(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Ya(e,t){let a=t[0]+t[4]+t[8],n;if(0<a)n=yr(a+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);let r=(a+1)%3,i=(a+2)%3;n=yr(t[3*a+a]-t[3*r+r]-t[3*i+i]+1),e[a]=.5*n,n=.5/n,e[3]=(t[3*r+i]-t[3*i+r])*n,e[r]=(t[3*r+a]+t[3*a+r])*n,e[i]=(t[3*i+a]+t[3*a+i])*n}return e}function Za(e,t,a,n){let r=.5*Sr/180;t*=r,a*=r,n*=r;let i=vr(t),o=Er(t),s=vr(a),d=Er(a),l=vr(n),p=Er(n);return e[0]=i*d*p-o*s*l,e[1]=o*s*p+i*d*l,e[2]=o*d*l-i*s*p,e[3]=o*d*p+i*s*l,e}function Qa(e){return'quat('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+')'}function $a(){let e=new Dr(8);return Dr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function Ja(e){let t=new Dr(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function en(e,t,a,n,r,i,o,s){let d=new Dr(8);return d[0]=e,d[1]=t,d[2]=a,d[3]=n,d[4]=r,d[5]=i,d[6]=o,d[7]=s,d}function tn(e,t,a,n,r,i,o){let s=new Dr(8);s[0]=e,s[1]=t,s[2]=a,s[3]=n;let d=.5*r,l=.5*i,p=.5*o;return s[4]=d*n+l*a-p*t,s[5]=l*n+p*e-d*a,s[6]=p*n+d*t-l*e,s[7]=-d*e-l*t-p*a,s}function an(e,a,n){let t=.5*n[0],r=.5*n[1],i=.5*n[2],o=a[0],s=a[1],d=a[2],l=a[3];return e[0]=o,e[1]=s,e[2]=d,e[3]=l,e[4]=t*l+r*d-i*s,e[5]=r*l+i*o-t*d,e[6]=i*l+t*s-r*o,e[7]=-t*o-r*s-i*d,e}function nn(e,a){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*a[0],e[5]=.5*a[1],e[6]=.5*a[2],e[7]=0,e}function rn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function on(e,n){let a=Da();at(a,n);let r=new Dr(3);return et(r,n),an(e,a,r),e}function sn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function dn(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function ln(e,t,a,n,r,i,o,s,d){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e[4]=i,e[5]=o,e[6]=s,e[7]=d,e}function pn(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}function un(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function cn(e,t){let a=t[4],n=t[5],r=t[6],i=t[7],o=-t[0],s=-t[1],d=-t[2],l=t[3];return e[0]=2*(a*l+i*o+n*d-r*s),e[1]=2*(n*l+i*s+r*o-a*d),e[2]=2*(r*l+i*d+a*s-n*o),e}function fn(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=.5*a[0],d=.5*a[1],l=.5*a[2],p=t[4],u=t[5],c=t[6],f=t[7];return e[0]=n,e[1]=r,e[2]=i,e[3]=o,e[4]=o*s+r*l-i*d+p,e[5]=o*d+i*s-n*l+u,e[6]=o*l+n*d-r*s+c,e[7]=-n*s-r*d-i*l+f,e}function mn(e,t,a){let n=-t[0],r=-t[1],i=-t[2],o=t[3],s=t[4],d=t[5],l=t[6],p=t[7],u=s*o+p*n+d*i-l*r,c=d*o+p*r+l*n-s*i,f=l*o+p*i+s*r-d*n,m=p*o-s*n-d*r-l*i;return Wa(e,t,a),n=e[0],r=e[1],i=e[2],o=e[3],e[4]=u*o+m*n+c*i-f*r,e[5]=c*o+m*r+f*n-u*i,e[6]=f*o+m*i+u*r-c*n,e[7]=m*o-u*n-c*r-f*i,e}function gn(e,t,a){let n=-t[0],r=-t[1],i=-t[2],o=t[3],s=t[4],d=t[5],l=t[6],p=t[7],u=s*o+p*n+d*i-l*r,c=d*o+p*r+l*n-s*i,f=l*o+p*i+s*r-d*n,m=p*o-s*n-d*r-l*i;return Va(e,t,a),n=e[0],r=e[1],i=e[2],o=e[3],e[4]=u*o+m*n+c*i-f*r,e[5]=c*o+m*r+f*n-u*i,e[6]=f*o+m*i+u*r-c*n,e[7]=m*o-u*n-c*r-f*i,e}function hn(e,t,a){let n=-t[0],r=-t[1],i=-t[2],o=t[3],s=t[4],d=t[5],l=t[6],p=t[7],u=s*o+p*n+d*i-l*r,c=d*o+p*r+l*n-s*i,f=l*o+p*i+s*r-d*n,m=p*o-s*n-d*r-l*i;return za(e,t,a),n=e[0],r=e[1],i=e[2],o=e[3],e[4]=u*o+m*n+c*i-f*r,e[5]=c*o+m*r+f*n-u*i,e[6]=f*o+m*i+u*r-c*n,e[7]=m*o-u*n-c*r-f*i,e}function yn(e,t,a){let n=a[0],r=a[1],i=a[2],o=a[3],s=t[0],d=t[1],l=t[2],p=t[3];return e[0]=s*o+p*n+d*i-l*r,e[1]=d*o+p*r+l*n-s*i,e[2]=l*o+p*i+s*r-d*n,e[3]=p*o-s*n-d*r-l*i,s=t[4],d=t[5],l=t[6],p=t[7],e[4]=s*o+p*n+d*i-l*r,e[5]=d*o+p*r+l*n-s*i,e[6]=l*o+p*i+s*r-d*n,e[7]=p*o-s*n-d*r-l*i,e}function _n(e,t,n){let a=t[0],r=t[1],i=t[2],o=t[3],s=n[0],d=n[1],l=n[2],p=n[3];return e[0]=a*p+o*s+r*l-i*d,e[1]=r*p+o*d+i*s-a*l,e[2]=i*p+o*l+a*d-r*s,e[3]=o*p-a*s-r*d-i*l,s=n[4],d=n[5],l=n[6],p=n[7],e[4]=a*p+o*s+r*l-i*d,e[5]=r*p+o*d+i*s-a*l,e[6]=i*p+o*l+a*d-r*s,e[7]=o*p-a*s-r*d-i*l,e}function xn(e,t,a,n){if(xr(n)<Br)return sn(e,t);let r=yr(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);n*=.5;let i=vr(n),o=i*a[0]/r,s=i*a[1]/r,d=i*a[2]/r,l=Er(n),p=t[0],u=t[1],c=t[2],f=t[3];e[0]=p*l+f*o+u*d-c*s,e[1]=u*l+f*s+c*o-p*d,e[2]=c*l+f*d+p*s-u*o,e[3]=f*l-p*o-u*s-c*d;let m=t[4],g=t[5],h=t[6],y=t[7];return e[4]=m*l+y*o+g*d-h*s,e[5]=g*l+y*s+h*o-m*d,e[6]=h*l+y*d+m*s-g*o,e[7]=y*l-m*o-g*s-h*d,e}function bn(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e}function vn(e,t,a){let n=t[0],r=t[1],i=t[2],o=t[3],s=a[4],d=a[5],l=a[6],p=a[7],u=t[4],c=t[5],f=t[6],m=t[7],g=a[0],h=a[1],y=a[2],_=a[3];return e[0]=n*_+o*g+r*y-i*h,e[1]=r*_+o*h+i*g-n*y,e[2]=i*_+o*y+n*h-r*g,e[3]=o*_-n*g-r*h-i*y,e[4]=n*p+o*s+r*l-i*d+u*_+m*g+c*y-f*h,e[5]=r*p+o*d+i*s-n*l+c*_+m*h+f*g-u*y,e[6]=i*p+o*l+n*d-r*s+f*_+m*y+u*h-c*g,e[7]=o*p-n*s-r*d-i*l+m*_-u*g-c*h-f*y,e}function En(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e}function Sn(e,n,a,r){let i=1-r;return 0>Pi(n,a)&&(r=-r),e[0]=n[0]*i+a[0]*r,e[1]=n[1]*i+a[1]*r,e[2]=n[2]*i+a[2]*r,e[3]=n[3]*i+a[3]*r,e[4]=n[4]*i+a[4]*r,e[5]=n[5]*i+a[5]*r,e[6]=n[6]*i+a[6]*r,e[7]=n[7]*i+a[7]*r,e}function Tn(e,t){let a=Ni(t);return e[0]=-t[0]/a,e[1]=-t[1]/a,e[2]=-t[2]/a,e[3]=t[3]/a,e[4]=-t[4]/a,e[5]=-t[5]/a,e[6]=-t[6]/a,e[7]=t[7]/a,e}function kn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}function Rn(e,t){let a=Ni(t);if(0<a){a=yr(a);let n=t[0]/a,r=t[1]/a,i=t[2]/a,o=t[3]/a,s=t[4],d=t[5],l=t[6],p=t[7],u=n*s+r*d+i*l+o*p;e[0]=n,e[1]=r,e[2]=i,e[3]=o,e[4]=(s-n*u)/a,e[5]=(d-r*u)/a,e[6]=(l-i*u)/a,e[7]=(p-o*u)/a}return e}function An(e){return'quat2('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+', '+e[6]+', '+e[7]+')'}function wn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function In(e,t){let a=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],d=e[6],l=e[7],p=t[0],u=t[1],c=t[2],f=t[3],m=t[4],g=t[5],h=t[6],y=t[7];return xr(a-p)<=Br*Tr(1,xr(a),xr(p))&&xr(n-u)<=Br*Tr(1,xr(n),xr(u))&&xr(r-c)<=Br*Tr(1,xr(r),xr(c))&&xr(i-f)<=Br*Tr(1,xr(i),xr(f))&&xr(o-m)<=Br*Tr(1,xr(o),xr(m))&&xr(s-g)<=Br*Tr(1,xr(s),xr(g))&&xr(d-h)<=Br*Tr(1,xr(d),xr(h))&&xr(l-y)<=Br*Tr(1,xr(l),xr(y))}function Ln(){let e=new Dr(2);return Dr!=Float32Array&&(e[0]=0,e[1]=0),e}function Pn(e){let t=new Dr(2);return t[0]=e[0],t[1]=e[1],t}function Mn(e,t){let a=new Dr(2);return a[0]=e,a[1]=t,a}function Cn(e,t){return e[0]=t[0],e[1]=t[1],e}function Nn(e,t,a){return e[0]=t,e[1]=a,e}function Bn(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e}function Dn(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e}function On(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e}function Un(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e}function Fn(e,t){return e[0]=gr(t[0]),e[1]=gr(t[1]),e}function jn(e,t){return e[0]=mr(t[0]),e[1]=mr(t[1]),e}function Wn(e,t,a){return e[0]=br(t[0],a[0]),e[1]=br(t[1],a[1]),e}function Vn(e,t,a){return e[0]=Tr(t[0],a[0]),e[1]=Tr(t[1],a[1]),e}function zn(e,t){return e[0]=fr(t[0]),e[1]=fr(t[1]),e}function Gn(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e}function Xn(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e}function qn(e,t){var a=t[0]-e[0],n=t[1]-e[1];return yr(a*a+n*n)}function Hn(e,t){var a=t[0]-e[0],n=t[1]-e[1];return a*a+n*n}function Kn(e){var t=e[0],a=e[1];return yr(t*t+a*a)}function Yn(e){var t=e[0],a=e[1];return t*t+a*a}function Zn(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Qn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function $n(e,t){var a=t[0],n=t[1],r=a*a+n*n;return 0<r&&(r=1/yr(r),e[0]=t[0]*r,e[1]=t[1]*r),e}function Jn(e,t){return e[0]*t[0]+e[1]*t[1]}function er(e,t,a){var n=t[0]*a[1]-t[1]*a[0];return e[0]=e[1]=0,e[2]=n,e}function tr(e,n,a,r){var t=n[0],i=n[1];return e[0]=t+r*(a[0]-t),e[1]=i+r*(a[1]-i),e}function ar(e,t){t=t||1;var a=2*Or()*Sr;return e[0]=Er(a)*t,e[1]=vr(a)*t,e}function nr(e,t,a){var n=t[0],r=t[1];return e[0]=a[0]*n+a[2]*r,e[1]=a[1]*n+a[3]*r,e}function rr(e,t,a){var n=t[0],r=t[1];return e[0]=a[0]*n+a[2]*r+a[4],e[1]=a[1]*n+a[3]*r+a[5],e}function ir(e,t,a){var n=t[0],r=t[1];return e[0]=a[0]*n+a[3]*r+a[6],e[1]=a[1]*n+a[4]*r+a[7],e}function or(e,t,a){let n=t[0],r=t[1];return e[0]=a[0]*n+a[4]*r+a[12],e[1]=a[1]*n+a[5]*r+a[13],e}function sr(e,t,a,n){let r=t[0]-a[0],i=t[1]-a[1],o=vr(n),s=Er(n);return e[0]=r*s-i*o+a[0],e[1]=r*o+i*s+a[1],e}function dr(e,t){let a=e[0],n=e[1],r=t[0],i=t[1],o=a*a+n*n;0<o&&(o=1/yr(o));let s=r*r+i*i;0<s&&(s=1/yr(s));let d=(a*r+n*i)*o*s;return 1<d?0:-1>d?Sr:cr(d)}function lr(e){return'vec2('+e[0]+', '+e[1]+')'}function pr(e,t){return e[0]===t[0]&&e[1]===t[1]}function ur(e,t){let a=e[0],n=e[1],r=t[0],i=t[1];return xr(a-r)<=Br*Tr(1,xr(a),xr(r))&&xr(n-i)<=Br*Tr(1,xr(n),xr(i))}var cr=Math.acos,fr=Math.round,mr=Math.floor,gr=Math.ceil,hr=Math.tan,yr=Math.sqrt,_r=Math.pow,xr=Math.abs,br=Math.min,vr=Math.sin,Er=Math.cos,Sr=Math.PI,Tr=Math.max;a.r(t);var kr={};a.r(kr),a.d(kr,'EPSILON',function(){return Br}),a.d(kr,'ARRAY_TYPE',function(){return Dr}),a.d(kr,'RANDOM',function(){return Or}),a.d(kr,'setMatrixArrayType',function(){return n}),a.d(kr,'toRadian',function(){return r}),a.d(kr,'equals',function(){return i});var Rr={};a.r(Rr),a.d(Rr,'create',function(){return o}),a.d(Rr,'clone',function(){return s}),a.d(Rr,'copy',function(){return d}),a.d(Rr,'identity',function(){return l}),a.d(Rr,'fromValues',function(){return p}),a.d(Rr,'set',function(){return u}),a.d(Rr,'transpose',function(){return c}),a.d(Rr,'invert',function(){return f}),a.d(Rr,'adjoint',function(){return m}),a.d(Rr,'determinant',function(){return g}),a.d(Rr,'multiply',function(){return h}),a.d(Rr,'rotate',function(){return y}),a.d(Rr,'scale',function(){return _}),a.d(Rr,'fromRotation',function(){return x}),a.d(Rr,'fromScaling',function(){return b}),a.d(Rr,'str',function(){return v}),a.d(Rr,'frob',function(){return E}),a.d(Rr,'LDU',function(){return S}),a.d(Rr,'add',function(){return T}),a.d(Rr,'subtract',function(){return k}),a.d(Rr,'exactEquals',function(){return R}),a.d(Rr,'equals',function(){return A}),a.d(Rr,'multiplyScalar',function(){return w}),a.d(Rr,'multiplyScalarAndAdd',function(){return I}),a.d(Rr,'mul',function(){return Fr}),a.d(Rr,'sub',function(){return jr});var Ar={};a.r(Ar),a.d(Ar,'create',function(){return L}),a.d(Ar,'clone',function(){return P}),a.d(Ar,'copy',function(){return M}),a.d(Ar,'identity',function(){return C}),a.d(Ar,'fromValues',function(){return N}),a.d(Ar,'set',function(){return B}),a.d(Ar,'invert',function(){return D}),a.d(Ar,'determinant',function(){return O}),a.d(Ar,'multiply',function(){return U}),a.d(Ar,'rotate',function(){return F}),a.d(Ar,'scale',function(){return j}),a.d(Ar,'translate',function(){return W}),a.d(Ar,'fromRotation',function(){return V}),a.d(Ar,'fromScaling',function(){return z}),a.d(Ar,'fromTranslation',function(){return G}),a.d(Ar,'str',function(){return X}),a.d(Ar,'frob',function(){return q}),a.d(Ar,'add',function(){return H}),a.d(Ar,'subtract',function(){return K}),a.d(Ar,'multiplyScalar',function(){return Y}),a.d(Ar,'multiplyScalarAndAdd',function(){return Z}),a.d(Ar,'exactEquals',function(){return Q}),a.d(Ar,'equals',function(){return $}),a.d(Ar,'mul',function(){return Wr}),a.d(Ar,'sub',function(){return Vr});var wr={};a.r(wr),a.d(wr,'create',function(){return J}),a.d(wr,'fromMat4',function(){return ee}),a.d(wr,'clone',function(){return te}),a.d(wr,'copy',function(){return ae}),a.d(wr,'fromValues',function(){return ne}),a.d(wr,'set',function(){return re}),a.d(wr,'identity',function(){return ie}),a.d(wr,'transpose',function(){return oe}),a.d(wr,'invert',function(){return se}),a.d(wr,'adjoint',function(){return de}),a.d(wr,'determinant',function(){return le}),a.d(wr,'multiply',function(){return pe}),a.d(wr,'translate',function(){return ue}),a.d(wr,'rotate',function(){return ce}),a.d(wr,'scale',function(){return fe}),a.d(wr,'fromTranslation',function(){return me}),a.d(wr,'fromRotation',function(){return ge}),a.d(wr,'fromScaling',function(){return he}),a.d(wr,'fromMat2d',function(){return ye}),a.d(wr,'fromQuat',function(){return _e}),a.d(wr,'normalFromMat4',function(){return xe}),a.d(wr,'projection',function(){return be}),a.d(wr,'str',function(){return ve}),a.d(wr,'frob',function(){return Ee}),a.d(wr,'add',function(){return Se}),a.d(wr,'subtract',function(){return Te}),a.d(wr,'multiplyScalar',function(){return ke}),a.d(wr,'multiplyScalarAndAdd',function(){return Re}),a.d(wr,'exactEquals',function(){return Ae}),a.d(wr,'equals',function(){return we}),a.d(wr,'mul',function(){return zr}),a.d(wr,'sub',function(){return Gr});var Ir={};a.r(Ir),a.d(Ir,'create',function(){return Ie}),a.d(Ir,'clone',function(){return Le}),a.d(Ir,'copy',function(){return Pe}),a.d(Ir,'fromValues',function(){return Me}),a.d(Ir,'set',function(){return Ce}),a.d(Ir,'identity',function(){return Ne}),a.d(Ir,'transpose',function(){return Be}),a.d(Ir,'invert',function(){return De}),a.d(Ir,'adjoint',function(){return Oe}),a.d(Ir,'determinant',function(){return Ue}),a.d(Ir,'multiply',function(){return Fe}),a.d(Ir,'translate',function(){return je}),a.d(Ir,'scale',function(){return We}),a.d(Ir,'rotate',function(){return Ve}),a.d(Ir,'rotateX',function(){return ze}),a.d(Ir,'rotateY',function(){return Ge}),a.d(Ir,'rotateZ',function(){return Xe}),a.d(Ir,'fromTranslation',function(){return qe}),a.d(Ir,'fromScaling',function(){return He}),a.d(Ir,'fromRotation',function(){return Ke}),a.d(Ir,'fromXRotation',function(){return Ye}),a.d(Ir,'fromYRotation',function(){return Ze}),a.d(Ir,'fromZRotation',function(){return Qe}),a.d(Ir,'fromRotationTranslation',function(){return $e}),a.d(Ir,'fromQuat2',function(){return Je}),a.d(Ir,'getTranslation',function(){return et}),a.d(Ir,'getScaling',function(){return tt}),a.d(Ir,'getRotation',function(){return at}),a.d(Ir,'fromRotationTranslationScale',function(){return nt}),a.d(Ir,'fromRotationTranslationScaleOrigin',function(){return rt}),a.d(Ir,'fromQuat',function(){return it}),a.d(Ir,'frustum',function(){return ot}),a.d(Ir,'perspective',function(){return st}),a.d(Ir,'perspectiveFromFieldOfView',function(){return dt}),a.d(Ir,'ortho',function(){return lt}),a.d(Ir,'lookAt',function(){return pt}),a.d(Ir,'targetTo',function(){return ut}),a.d(Ir,'str',function(){return ct}),a.d(Ir,'frob',function(){return ft}),a.d(Ir,'add',function(){return mt}),a.d(Ir,'subtract',function(){return gt}),a.d(Ir,'multiplyScalar',function(){return ht}),a.d(Ir,'multiplyScalarAndAdd',function(){return yt}),a.d(Ir,'exactEquals',function(){return _t}),a.d(Ir,'equals',function(){return xt}),a.d(Ir,'mul',function(){return Xr}),a.d(Ir,'sub',function(){return qr});var Lr={};a.r(Lr),a.d(Lr,'create',function(){return bt}),a.d(Lr,'clone',function(){return vt}),a.d(Lr,'length',function(){return Et}),a.d(Lr,'fromValues',function(){return St}),a.d(Lr,'copy',function(){return Tt}),a.d(Lr,'set',function(){return kt}),a.d(Lr,'add',function(){return Rt}),a.d(Lr,'subtract',function(){return At}),a.d(Lr,'multiply',function(){return wt}),a.d(Lr,'divide',function(){return It}),a.d(Lr,'ceil',function(){return Lt}),a.d(Lr,'floor',function(){return Pt}),a.d(Lr,'min',function(){return Mt}),a.d(Lr,'max',function(){return Ct}),a.d(Lr,'round',function(){return Nt}),a.d(Lr,'scale',function(){return Bt}),a.d(Lr,'scaleAndAdd',function(){return Dt}),a.d(Lr,'distance',function(){return Ot}),a.d(Lr,'squaredDistance',function(){return Ut}),a.d(Lr,'squaredLength',function(){return Ft}),a.d(Lr,'negate',function(){return jt}),a.d(Lr,'inverse',function(){return Wt}),a.d(Lr,'normalize',function(){return Vt}),a.d(Lr,'dot',function(){return zt}),a.d(Lr,'cross',function(){return Gt}),a.d(Lr,'lerp',function(){return Xt}),a.d(Lr,'hermite',function(){return qt}),a.d(Lr,'bezier',function(){return Ht}),a.d(Lr,'random',function(){return Kt}),a.d(Lr,'transformMat4',function(){return Yt}),a.d(Lr,'transformMat3',function(){return Zt}),a.d(Lr,'transformQuat',function(){return Qt}),a.d(Lr,'rotateX',function(){return $t}),a.d(Lr,'rotateY',function(){return Jt}),a.d(Lr,'rotateZ',function(){return ea}),a.d(Lr,'angle',function(){return ta}),a.d(Lr,'str',function(){return aa}),a.d(Lr,'exactEquals',function(){return na}),a.d(Lr,'equals',function(){return ra}),a.d(Lr,'sub',function(){return Hr}),a.d(Lr,'mul',function(){return Kr}),a.d(Lr,'div',function(){return Yr}),a.d(Lr,'dist',function(){return Zr}),a.d(Lr,'sqrDist',function(){return Qr}),a.d(Lr,'len',function(){return $r}),a.d(Lr,'sqrLen',function(){return Jr}),a.d(Lr,'forEach',function(){return ei});var Pr={};a.r(Pr),a.d(Pr,'create',function(){return ia}),a.d(Pr,'clone',function(){return oa}),a.d(Pr,'fromValues',function(){return sa}),a.d(Pr,'copy',function(){return da}),a.d(Pr,'set',function(){return la}),a.d(Pr,'add',function(){return pa}),a.d(Pr,'subtract',function(){return ua}),a.d(Pr,'multiply',function(){return ca}),a.d(Pr,'divide',function(){return fa}),a.d(Pr,'ceil',function(){return ma}),a.d(Pr,'floor',function(){return ga}),a.d(Pr,'min',function(){return ha}),a.d(Pr,'max',function(){return ya}),a.d(Pr,'round',function(){return _a}),a.d(Pr,'scale',function(){return xa}),a.d(Pr,'scaleAndAdd',function(){return ba}),a.d(Pr,'distance',function(){return va}),a.d(Pr,'squaredDistance',function(){return Ea}),a.d(Pr,'length',function(){return Sa}),a.d(Pr,'squaredLength',function(){return Ta}),a.d(Pr,'negate',function(){return ka}),a.d(Pr,'inverse',function(){return Ra}),a.d(Pr,'normalize',function(){return Aa}),a.d(Pr,'dot',function(){return wa}),a.d(Pr,'lerp',function(){return Ia}),a.d(Pr,'random',function(){return La}),a.d(Pr,'transformMat4',function(){return Pa}),a.d(Pr,'transformQuat',function(){return Ma}),a.d(Pr,'str',function(){return Ca}),a.d(Pr,'exactEquals',function(){return Na}),a.d(Pr,'equals',function(){return Ba}),a.d(Pr,'sub',function(){return ti}),a.d(Pr,'mul',function(){return ai}),a.d(Pr,'div',function(){return ni}),a.d(Pr,'dist',function(){return ri}),a.d(Pr,'sqrDist',function(){return ii}),a.d(Pr,'len',function(){return oi}),a.d(Pr,'sqrLen',function(){return si}),a.d(Pr,'forEach',function(){return di});var Mr={};a.r(Mr),a.d(Mr,'create',function(){return Da}),a.d(Mr,'identity',function(){return Oa}),a.d(Mr,'setAxisAngle',function(){return Ua}),a.d(Mr,'getAxisAngle',function(){return Fa}),a.d(Mr,'multiply',function(){return ja}),a.d(Mr,'rotateX',function(){return Wa}),a.d(Mr,'rotateY',function(){return Va}),a.d(Mr,'rotateZ',function(){return za}),a.d(Mr,'calculateW',function(){return Ga}),a.d(Mr,'slerp',function(){return Xa}),a.d(Mr,'random',function(){return qa}),a.d(Mr,'invert',function(){return Ha}),a.d(Mr,'conjugate',function(){return Ka}),a.d(Mr,'fromMat3',function(){return Ya}),a.d(Mr,'fromEuler',function(){return Za}),a.d(Mr,'str',function(){return Qa}),a.d(Mr,'clone',function(){return li}),a.d(Mr,'fromValues',function(){return pi}),a.d(Mr,'copy',function(){return ui}),a.d(Mr,'set',function(){return ci}),a.d(Mr,'add',function(){return fi}),a.d(Mr,'mul',function(){return mi}),a.d(Mr,'scale',function(){return gi}),a.d(Mr,'dot',function(){return hi}),a.d(Mr,'lerp',function(){return yi}),a.d(Mr,'length',function(){return _i}),a.d(Mr,'len',function(){return xi}),a.d(Mr,'squaredLength',function(){return bi}),a.d(Mr,'sqrLen',function(){return vi}),a.d(Mr,'normalize',function(){return Ei}),a.d(Mr,'exactEquals',function(){return Si}),a.d(Mr,'equals',function(){return Ti}),a.d(Mr,'rotationTo',function(){return ki}),a.d(Mr,'sqlerp',function(){return Ri}),a.d(Mr,'setAxes',function(){return Ai});var Cr={};a.r(Cr),a.d(Cr,'create',function(){return $a}),a.d(Cr,'clone',function(){return Ja}),a.d(Cr,'fromValues',function(){return en}),a.d(Cr,'fromRotationTranslationValues',function(){return tn}),a.d(Cr,'fromRotationTranslation',function(){return an}),a.d(Cr,'fromTranslation',function(){return nn}),a.d(Cr,'fromRotation',function(){return rn}),a.d(Cr,'fromMat4',function(){return on}),a.d(Cr,'copy',function(){return sn}),a.d(Cr,'identity',function(){return dn}),a.d(Cr,'set',function(){return ln}),a.d(Cr,'getReal',function(){return wi}),a.d(Cr,'getDual',function(){return pn}),a.d(Cr,'setReal',function(){return Ii}),a.d(Cr,'setDual',function(){return un}),a.d(Cr,'getTranslation',function(){return cn}),a.d(Cr,'translate',function(){return fn}),a.d(Cr,'rotateX',function(){return mn}),a.d(Cr,'rotateY',function(){return gn}),a.d(Cr,'rotateZ',function(){return hn}),a.d(Cr,'rotateByQuatAppend',function(){return yn}),a.d(Cr,'rotateByQuatPrepend',function(){return _n}),a.d(Cr,'rotateAroundAxis',function(){return xn}),a.d(Cr,'add',function(){return bn}),a.d(Cr,'multiply',function(){return vn}),a.d(Cr,'mul',function(){return Li}),a.d(Cr,'scale',function(){return En}),a.d(Cr,'dot',function(){return Pi}),a.d(Cr,'lerp',function(){return Sn}),a.d(Cr,'invert',function(){return Tn}),a.d(Cr,'conjugate',function(){return kn}),a.d(Cr,'length',function(){return Mi}),a.d(Cr,'len',function(){return Ci}),a.d(Cr,'squaredLength',function(){return Ni}),a.d(Cr,'sqrLen',function(){return Bi}),a.d(Cr,'normalize',function(){return Rn}),a.d(Cr,'str',function(){return An}),a.d(Cr,'exactEquals',function(){return wn}),a.d(Cr,'equals',function(){return In});var Nr={};a.r(Nr),a.d(Nr,'create',function(){return Ln}),a.d(Nr,'clone',function(){return Pn}),a.d(Nr,'fromValues',function(){return Mn}),a.d(Nr,'copy',function(){return Cn}),a.d(Nr,'set',function(){return Nn}),a.d(Nr,'add',function(){return Bn}),a.d(Nr,'subtract',function(){return Dn}),a.d(Nr,'multiply',function(){return On}),a.d(Nr,'divide',function(){return Un}),a.d(Nr,'ceil',function(){return Fn}),a.d(Nr,'floor',function(){return jn}),a.d(Nr,'min',function(){return Wn}),a.d(Nr,'max',function(){return Vn}),a.d(Nr,'round',function(){return zn}),a.d(Nr,'scale',function(){return Gn}),a.d(Nr,'scaleAndAdd',function(){return Xn}),a.d(Nr,'distance',function(){return qn}),a.d(Nr,'squaredDistance',function(){return Hn}),a.d(Nr,'length',function(){return Kn}),a.d(Nr,'squaredLength',function(){return Yn}),a.d(Nr,'negate',function(){return Zn}),a.d(Nr,'inverse',function(){return Qn}),a.d(Nr,'normalize',function(){return $n}),a.d(Nr,'dot',function(){return Jn}),a.d(Nr,'cross',function(){return er}),a.d(Nr,'lerp',function(){return tr}),a.d(Nr,'random',function(){return ar}),a.d(Nr,'transformMat2',function(){return nr}),a.d(Nr,'transformMat2d',function(){return rr}),a.d(Nr,'transformMat3',function(){return ir}),a.d(Nr,'transformMat4',function(){return or}),a.d(Nr,'rotate',function(){return sr}),a.d(Nr,'angle',function(){return dr}),a.d(Nr,'str',function(){return lr}),a.d(Nr,'exactEquals',function(){return pr}),a.d(Nr,'equals',function(){return ur}),a.d(Nr,'len',function(){return Di}),a.d(Nr,'sub',function(){return Oi}),a.d(Nr,'mul',function(){return Ui}),a.d(Nr,'div',function(){return Fi}),a.d(Nr,'dist',function(){return ji}),a.d(Nr,'sqrDist',function(){return Wi}),a.d(Nr,'sqrLen',function(){return Vi}),a.d(Nr,'forEach',function(){return zi});const Br=1e-6;let Dr='undefined'==typeof Float32Array?Array:Float32Array;const Or=Math.random,Ur=Sr/180,Fr=h,jr=k,Wr=U,Vr=K;const zr=pe,Gr=Te;const Xr=Fe,qr=gt,Hr=At,Kr=wt,Yr=It,Zr=Ot,Qr=Ut,$r=Et,Jr=Ft,ei=function(){let e=bt();return function(t,a,n,r,o,s){let d,i;for(a||(a=3),n||(n=0),i=r?br(r*a+n,t.length):t.length,d=n;d<i;d+=a)e[0]=t[d],e[1]=t[d+1],e[2]=t[d+2],o(e,e,s),t[d]=e[0],t[d+1]=e[1],t[d+2]=e[2];return t}}(),ti=ua,ai=ca,ni=fa,ri=va,ii=Ea,oi=Sa,si=Ta,di=function(){let e=ia();return function(t,a,n,r,o,s){let d,i;for(a||(a=4),n||(n=0),i=r?br(r*a+n,t.length):t.length,d=n;d<i;d+=a)e[0]=t[d],e[1]=t[d+1],e[2]=t[d+2],e[3]=t[d+3],o(e,e,s),t[d]=e[0],t[d+1]=e[1],t[d+2]=e[2],t[d+3]=e[3];return t}}(),li=oa,pi=sa,ui=da,ci=la,fi=pa,mi=ja,gi=xa,hi=wa,yi=Ia,_i=Sa,xi=_i,bi=Ta,vi=bi,Ei=Aa,Si=Na,Ti=Ba,ki=function(){let e=bt(),t=St(1,0,0),n=St(0,1,0);return function(r,i,a){let o=zt(i,a);return-.999999>o?(Gt(e,t,i),1e-6>$r(e)&&Gt(e,n,i),Vt(e,e),Ua(r,e,Math.PI),r):.999999<o?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Gt(e,i,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+o,Ei(r,r))}}(),Ri=function(){let e=Da(),n=Da();return function(r,i,a,o,s,d){return Xa(e,i,s,d),Xa(n,a,o,d),Xa(r,e,n,2*d*(1-d)),r}}(),Ai=function(){let e=J();return function(t,a,n,r){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=r[0],e[4]=r[1],e[7]=r[2],e[2]=-a[0],e[5]=-a[1],e[8]=-a[2],Ei(t,Ya(t,e))}}(),wi=ui,Ii=ui,Li=vn,Pi=hi,Mi=_i,Ci=Mi,Ni=bi,Bi=Ni,Di=Kn,Oi=Dn,Ui=On,Fi=Un,ji=qn,Wi=Hn,Vi=Yn,zi=function(){let e=Ln();return function(t,a,n,r,o,s){let d,i;for(a||(a=2),n||(n=0),i=r?br(r*a+n,t.length):t.length,d=n;d<i;d+=a)e[0]=t[d],e[1]=t[d+1],o(e,e,s),t[d]=e[0],t[d+1]=e[1];return t}}();a.d(t,'glMatrix',function(){return kr}),a.d(t,'mat2',function(){return Rr}),a.d(t,'mat2d',function(){return Ar}),a.d(t,'mat3',function(){return wr}),a.d(t,'mat4',function(){return Ir}),a.d(t,'quat',function(){return Mr}),a.d(t,'quat2',function(){return Cr}),a.d(t,'vec2',function(){return Nr}),a.d(t,'vec3',function(){return Lr}),a.d(t,'vec4',function(){return Pr})},function(e,t){'use strict';var a=Math.floor;Object.defineProperty(t,'__esModule',{value:!0});const n=window;let r;'undefined'!=typeof performance&&(performance.now?r=()=>n.performance.now():n.performance.mozNow?r=()=>n.performance.mozNow():n.performance.msNow?r=()=>n.performance.msNow():n.performance.oNow?r=()=>n.performance.oNow():n.performance.webkitNow?r=()=>n.performance.webkitNow():Date.now&&(r=()=>Date.now())),t.now=r||(()=>new Date().getTime()),t.formatTime=(e)=>{const t=a(e/60),n=a(e-60*t),r=10>t?'0'+t:t.toString(),i=10>n?'0'+n:n.toString();return r+':'+i}},function(e,t,a){'use strict';function n(e,t){let a={},n=e.readBits(3),r=[];for(let a=0;a<n;++a)r.push(e.readBits(8));let o=!1;for(let s=0;s<n;++s){for(let n=0,i;8>n;++n){if(i=n+8*s,i===t.length){o=!0;break}if(r[s]&1<<n)if(t[i].flags&l){if(t[i].flags&y){let n=e.readBits(1)?-1:1,r=e.readBits(t[i].bits-1),o=t[i].divisor;a[t[i].name]=n*r/o}else{let n=e.readBits(t[i].bits),r=t[i].divisor;a[t[i].name]=n/r}}else if(t[i].flags&p){if(t[i].flags&y){let n=e.readBits(1)?-1:1,r=e.readBits(t[i].bits-1),o=t[i].divisor;a[t[i].name]=n*r/o}else{let n=e.readBits(t[i].bits),r=t[i].divisor;a[t[i].name]=n/r}}else if(t[i].flags&c){if(t[i].flags&y){let n=e.readBits(1)?-1:1,r=e.readBits(t[i].bits-1),o=t[i].divisor;a[t[i].name]=n*r/o}else{let n=e.readBits(t[i].bits),r=t[i].divisor;a[t[i].name]=n/r}}else if(t[i].flags&u||t[i].flags&m||t[i].flags&g){if(t[i].flags&y){let n=e.readBits(1)?-1:1,r=e.readBits(t[i].bits-1),o=t[i].divisor;a[t[i].name]=n*r/o}else{let n=e.readBits(t[i].bits),r=t[i].divisor;a[t[i].name]=n/r}}else if(t[i].flags&f){let n=e.readBits(t[i].bits),r=360/(1<<t[i].bits);a[t[i].name]=n*r}else t[i].flags&h&&(a[t[i].name]=e.readString())}if(o)break}return a}function i(e){let t=e.readBits(1),a=e.readBits(1);if(!t&&!a)return 0;let n=e.readBits(1),r=0,i=0;t&&(r=e.readBits(12)),a&&(i=e.readBits(3));let o=r+i/32;return n&&(o=-o),o}var o=Math.floor;Object.defineProperty(t,'__esModule',{value:!0});const r=a(67),s=a(89),d=a(52),l=1,p=2,u=4,c=8,f=16,m=32,g=64,h=128,y=-2147483648;class _{static bad(){throw new Error('Invalid message type')}static nop(){return null}static disconnect(e){return{reason:e.str()}}static event(e,t){let a=new s.BitStream(e.data.buffer);a.index=8*e.tell();let r=[],d=a.readBits(5);for(let o=0,i;o<d;++o){i={},i.index=a.readBits(10);let e=a.readBits(1);if(e){i.packetIndex=a.readBits(11);let e=a.readBits(1);e&&(i.delta=n(a,t.event_t))}let o=a.readBits(1);o&&(i.fireTime=a.readBits(16)),r.push(i)}return 0<a.index%8?e.seek(o(a.index/8)+1):e.seek(a.index/8),{events:r}}static version(e){return{version:e.ui()}}static setView(e){return{entityIndex:e.s()}}static sound(e){let t=new s.BitStream(e.data.buffer);t.index=8*e.tell();let a=t.readBits(9),n=1;0!=(1&a)&&(n=t.readBits(8)/255);let r=1;0!=(2&a)&&(r=t.readBits(8)/64);let d=t.readBits(3),l=t.readBits(11),p;p=0==(4&a)?t.readBits(8):t.readBits(16);let u=t.readBits(1),c=t.readBits(1),f=t.readBits(1),m,g,h;u&&(m=i(t)),c&&(g=i(t)),f&&(h=i(t));let y=1;return 0!=(8&a)&&(y=t.readBits(8)),0<t.index%8?e.seek(o(t.index/8)+1):e.seek(t.index/8),{flags:a,volume:n,attenuation:r,channel:d,entityIndex:l,soundIndex:p,xPosition:m,yPosition:g,zPosition:h,pitch:y}}static time(e){return{time:e.f()}}static print(e){return{message:e.str()}}static stuffText(e){let t=e.str(),a=t.split(';').map((e)=>{let t=e.split(/\s*("[^"]+"|[^\s"]+)/).map((e)=>e.replace(/^"(.*)"$/,'$1').trim()).filter((e)=>e),a=t[0],n=t.slice(1);return{func:a,params:n}});return{commands:a}}static setAngle(e){return{pitch:e.s(),yaw:e.s(),roll:e.s()}}static serverInfo(e){let t={protocol:e.i(),spawnCount:e.i(),mapCrc:e.i(),clientDllHash:e.arrx(16,d.ReaderDataType.UByte),maxPlayers:e.ub(),playerIndex:e.ub(),isDeathmatch:e.ub(),gameDir:e.str(),hostName:e.str(),mapFileName:e.str(),mapCycle:e.str()};return e.skip(1),t}static lightStyle(e){return{index:e.ub(),lightInfo:e.str()}}static updateUserInfo(e){return{clientIndex:e.ub(),clientUserId:e.ui(),clientUserInfo:e.str(),clientCdKeyHash:e.arrx(16,d.ReaderDataType.UByte)}}static deltaDescription(e,t){let a={name:e.str(),fields:[]},r=new s.BitStream(e.data.buffer),d=e.us();r.index=8*e.tell();for(let o=0;o<d;++o)a.fields.push(n(r,t.delta_description_t));return t[a.name]=a.fields,0<r.index%8?e.seek(o(r.index/8)+1):e.seek(r.index/8),a}static clientData(e,t){let a=new s.BitStream(e.data.buffer);a.index=8*e.tell();let r=a.readBits(1);r&&(a.index+=8);let i=t.clientdata_t,d=n(a,i),l=t.weapon_data_t;for(;a.readBits(1);)a.index+=6,n(a,l);return 0<a.index%8?e.seek(o(a.index/8)+1):e.seek(a.index/8),{clientData:d}}static stopSound(e){return{entityIndex:e.s()}}static pings(e){let t=new s.BitStream(e.data.buffer);t.index=8*e.tell();let a=[];for(;t.readBits(1);)a.push({slot:t.readBits(8),ping:t.readBits(8),loss:t.readBits(8)});return 0<t.index%8?e.seek(o(t.index/8)+1):e.seek(t.index/8),a}static particle(e){return{position:[e.s()/8,e.s()/8,e.s()/8],direction:[e.b(),e.b(),e.b()],count:e.ub(),color:e.ub()}}static damage(){return null}static spawnStatic(e){let t={modelIndex:e.s(),sequence:e.b(),frame:e.b(),colorMap:e.s(),skin:e.b(),position:[],rotation:[]};return t.position[0]=e.s()/8,t.rotation[0]=e.b()*(360/256),t.position[1]=e.s()/8,t.rotation[1]=e.b()*(360/256),t.position[2]=e.s()/8,t.rotation[2]=e.b()*(360/256),t.renderMode=e.b(),t.renderMode&&(t.renderAmt=e.b(),t.renderColor=[e.ub(),e.ub(),e.ub()],t.renderFx=e.b()),t}static eventReliable(e,t){let a=new s.BitStream(e.data.buffer);a.index=8*e.tell();let r=a.readBits(10),i=n(a,t.event_t),d=a.readBits(1),l;return d&&(l=a.readBits(16)),0<a.index%8?e.seek(o(a.index/8)+1):e.seek(a.index/8),{eventIndex:r,eventData:i,delayBit:d,delay:l}}static spawnBaseLine(e,t){let a=new s.BitStream(e.data.buffer);a.index=8*e.tell();let r=[];for(;;){let e=a.readBits(11);if(2047===e)break;let i=a.readBits(2),o;o=1&i?0<e&&32>=e?'entity_state_player_t':'entity_state_t':'custom_entity_state_t',r[e]=n(a,t[o])}let i=a.readBits(5);if(31!==i)throw new Error('Bad spawnbaseline');let d=a.readBits(6),l=[];for(let r=0;r<d;++r)l.push(n(a,t.entity_state_t));return 0<a.index%8?e.seek(o(a.index/8)+1):e.seek(a.index/8),{entities:r,extraData:l}}static tempEntity(e){let t=e.ub(),a={};switch(t){case 0:{e.skip(24);break}case 1:{e.skip(20);break}case 2:{e.skip(6);break}case 3:{e.skip(11);break}case 4:{e.skip(6);break}case 5:{e.skip(10);break}case 6:{e.skip(12);break}case 7:{e.skip(17);break}case 8:{e.skip(16);break}case 9:{e.skip(6);break}case 10:{e.skip(6);break}case 11:{e.skip(6);break}case 12:{e.skip(8);break}case 13:{e.skip(8);let t=e.s();t&&e.skip(2);break}case 14:{e.skip(9);break}case 15:{e.skip(19);break}case 17:{e.skip(10);break}case 18:{e.skip(16);break}case 19:{e.skip(24);break}case 20:{e.skip(24);break}case 21:{e.skip(24);break}case 22:{e.skip(10);break}case 23:{e.skip(11);break}case 24:{e.skip(16);break}case 25:{e.skip(19);break}case 27:{e.skip(12);break}case 28:{e.skip(16);break}case 29:{a.channel=e.b(),a.x=e.s(),a.y=e.s(),a.effect=e.b(),a.textColor=[e.ub(),e.ub(),e.ub(),e.ub()],a.effectColor=[e.ub(),e.ub(),e.ub(),e.ub()],a.fadeInTime=e.s(),a.fadeOutTime=e.s(),a.holdTime=e.s(),a.effect&&(a.effectTime=e.s()),a.message=e.str();break}case 30:{e.skip(17);break}case 31:{e.skip(17);break}case 99:{e.skip(2);break}case 100:{e.skip(10);break}case 101:{e.skip(14);break}case 102:{e.skip(12);break}case 103:{e.skip(14);break}case 104:{e.skip(9);break}case 105:{e.skip(5);break}case 106:{e.skip(17);break}case 107:{e.skip(13);break}case 108:{e.skip(24);break}case 109:{e.skip(9);break}case 110:{e.skip(17);break}case 111:{e.skip(7);break}case 112:{e.skip(10);break}case 113:{e.skip(19);break}case 114:{e.skip(19);break}case 115:{e.skip(12);break}case 116:{e.skip(7);break}case 117:{e.skip(7);break}case 118:{e.skip(9);break}case 119:{e.skip(16);break}case 120:{e.skip(18);break}case 121:{e.skip(5);break}case 122:{e.skip(10);break}case 123:{e.skip(9);break}case 124:{e.skip(7);break}case 125:{e.skip(1);break}case 126:{e.skip(18);break}case 127:{e.skip(15);break}default:throw new Error('Unknown temp entity type');}return a}static setPause(e){return{isPaused:e.b()}}static signOnNum(e){return{sign:e.b()}}static centerPrint(e){return{message:e.str()}}static killedMonster(){return null}static foundSecret(){return null}static spawnStaticSound(e){return{position:[e.s()/8,e.s()/8,e.s()/8],soundIndex:e.us(),volume:e.ub()/255,attenuation:e.ub()/64,entityIndex:e.us(),pitch:e.ub(),flags:e.ub()}}static intermission(){return null}static finale(e){return{text:e.str()}}static cdTrack(e){return{track:e.b(),loopTrack:e.b()}}static restore(e){let t=e.str(),a=e.ub(),n=[];for(let t=0;t<a;++t)n.push(e.str());return{saveName:t,maps:n}}static cutscene(e){return{text:e.str()}}static weaponAnim(e){return{sequenceNumber:e.b(),weaponModelBodyGroup:e.b()}}static decalName(e){return{positionIndex:e.ub(),decalName:e.str()}}static roomType(e){return{type:e.us()}}static addAngle(e){return{angleToAdd:e.s()/(360/65536)}}static newUserMsg(e){return{index:e.ub(),size:e.b(),name:e.nstr(16)}}static packetEntities(e,t){let a=new s.BitStream(e.data.buffer);a.index=8*e.tell();let r=[];a.readBits(16);for(let i=0,o;o=a.readBits(16),0!==o;){a.index-=16;let e=a.readBits(1);if(!e){let e=a.readBits(1);e?i=a.readBits(11):i+=a.readBits(6)}else i++;let o=a.readBits(1),s=a.readBits(1);s&&(a.index+=6);let d='entity_state_t';0<i&&32>=i?d='entity_state_player_t':o&&(d='custom_entity_state_t'),r.push(n(a,t[d]))}return 0<a.index%8?e.seek(o(a.index/8)+1):e.seek(a.index/8),{entityStates:r}}static deltaPacketEntities(e,t){let a=new s.BitStream(e.data.buffer);a.index=8*e.tell(),a.readBits(16),a.index+=8;let r=[],i=0;for(;;){let e=a.readBits(16);if(0===e)break;a.index-=16;let o=a.readBits(1),s=a.readBits(1);if(s?i=a.readBits(11):i+=a.readBits(6),o)continue;let d=a.readBits(1),l='entity_state_t';0<i&&32>i?l='entity_state_player_t':d&&(l='custom_entity_state_t'),r[i]=n(a,t[l])}return 0<a.index%8?e.seek(o(a.index/8)+1):e.seek(a.index/8),{entityStates:r}}static choke(){return null}static resourceList(e){let t=new s.BitStream(e.data.buffer);t.index=8*e.tell();let a=[],n=t.readBits(12);for(let r=0,i;r<n;++r){i={},i.type=t.readBits(4),i.name=t.readString(),i.index=t.readBits(12),i.size=t.readBits(24);let e=t.readBits(3);4&e&&(t.index+=128),t.readBits(1)&&(t.index+=256),a.push(i)}if(t.readBits(1))for(;t.readBits(1);){let e=t.readBits(1)?5:10;t.index+=e}return 0<t.index%8?e.seek(o(t.index/8)+1):e.seek(t.index/8),a}static newMoveVars(e){return{gravity:e.f(),stopSpeed:e.f(),maxSpeed:e.f(),spectatorMaxSpeed:e.f(),acceleration:e.f(),airAcceleration:e.f(),waterAcceleration:e.f(),friction:e.f(),edgeFriction:e.f(),waterFriction:e.f(),entityGravity:e.f(),bounce:e.f(),stepSize:e.f(),maxVelocity:e.f(),zMax:e.f(),waveHeight:e.f(),footsteps:e.b(),rollAngle:e.f(),rollSpeed:e.f(),skyColor:[e.f(),e.f(),e.f()],skyVec:[e.f(),e.f(),e.f()],skyName:e.str()}}static resourceRequest(e){let t={spawnCount:e.i()};return e.skip(4),t}static customization(e){let t=e.ub(),a=e.ub(),n=e.str(),r=e.us(),i=e.ui(),o=e.ub(),s;return 4&o&&(s=[e.i(),e.i(),e.i(),e.i()]),{playerIndex:t,type:a,name:n,index:r,downloadSize:i,flags:o,md5hash:s}}static crosshairAngle(e){return{pitch:e.b(),yaw:e.b()}}static soundFade(e){return{initialPercent:e.ub(),holdTime:e.ub(),fadeOutTime:e.ub(),fadeInTime:e.ub()}}static fileTxferFailed(e){return{filename:e.str()}}static hltv(e){return{mode:e.ub()}}static director(e){let t=e.ub();return{flag:e.ub(),message:e.nstr(t-1)}}static voiceInit(e){return{codecName:e.str(),quality:e.b()}}static voiceData(e){let t=e.ub(),a=e.us(),n=e.arrx(a,d.ReaderDataType.UByte);return{playerIndex:t,data:n}}static sendExtraInfo(e){return{fallbackDir:e.str(),canCheat:e.ub()}}static timeScale(e){return{timeScale:e.f()}}static resourceLocation(e){return{url:e.str()}}static sendCvarValue(e){return{name:e.str()}}static sendCvarValue2(e){return{requestId:e.ui(),name:e.str()}}static read(e,t,a){if(_.handlers[t])try{return _.handlers[t](e,a)}catch(t){return null}else return null}}_.handlers=[_.bad,_.nop,_.disconnect,_.event,_.version,_.setView,_.sound,_.time,_.print,_.stuffText,_.setAngle,_.serverInfo,_.lightStyle,_.updateUserInfo,_.deltaDescription,_.clientData,_.stopSound,_.pings,_.particle,_.damage,_.spawnStatic,_.eventReliable,_.spawnBaseLine,_.tempEntity,_.setPause,_.signOnNum,_.centerPrint,_.killedMonster,_.foundSecret,_.spawnStaticSound,_.intermission,_.finale,_.cdTrack,_.restore,_.cutscene,_.weaponAnim,_.decalName,_.roomType,_.addAngle,_.newUserMsg,_.packetEntities,_.deltaPacketEntities,_.choke,_.resourceList,_.newMoveVars,_.resourceRequest,_.customization,_.crosshairAngle,_.soundFade,_.fileTxferFailed,_.hltv,_.director,_.voiceInit,_.voiceData,_.sendExtraInfo,_.timeScale,_.resourceLocation,_.sendCvarValue,_.sendCvarValue2],t.FrameDataReader=_,function(e){let t;(function(e){e[e.BAD=0]='BAD',e[e.NOP=1]='NOP',e[e.DISCONNECT=2]='DISCONNECT',e[e.EVENT=3]='EVENT',e[e.VERSION=4]='VERSION',e[e.SETVIEW=5]='SETVIEW',e[e.SOUND=6]='SOUND',e[e.TIME=7]='TIME',e[e.PRINT=8]='PRINT',e[e.STUFFTEXT=9]='STUFFTEXT',e[e.SETANGLE=10]='SETANGLE',e[e.SERVERINFO=11]='SERVERINFO',e[e.LIGHTSTYLE=12]='LIGHTSTYLE',e[e.UPDATEUSERINFO=13]='UPDATEUSERINFO',e[e.DELTADESCRIPTION=14]='DELTADESCRIPTION',e[e.CLIENTDATA=15]='CLIENTDATA',e[e.STOPSOUND=16]='STOPSOUND',e[e.PINGS=17]='PINGS',e[e.PARTICLE=18]='PARTICLE',e[e.DAMAGE=19]='DAMAGE',e[e.SPAWNSTATIC=20]='SPAWNSTATIC',e[e.EVENT_RELIABLE=21]='EVENT_RELIABLE',e[e.SPAWNBASELINE=22]='SPAWNBASELINE',e[e.TEMPENTITY=23]='TEMPENTITY',e[e.SETPAUSE=24]='SETPAUSE',e[e.SIGNONNUM=25]='SIGNONNUM',e[e.CENTERPRINT=26]='CENTERPRINT',e[e.KILLEDMONSTER=27]='KILLEDMONSTER',e[e.FOUNDSECRET=28]='FOUNDSECRET',e[e.SPAWNSTATICSOUND=29]='SPAWNSTATICSOUND',e[e.INTERMISSION=30]='INTERMISSION',e[e.FINALE=31]='FINALE',e[e.CDTRACK=32]='CDTRACK',e[e.RESTORE=33]='RESTORE',e[e.CUTSCENE=34]='CUTSCENE',e[e.WEAPONANIM=35]='WEAPONANIM',e[e.DECALNAME=36]='DECALNAME',e[e.ROOMTYPE=37]='ROOMTYPE',e[e.ADDANGLE=38]='ADDANGLE',e[e.NEWUSERMSG=39]='NEWUSERMSG',e[e.PACKETENTITIES=40]='PACKETENTITIES',e[e.DELTAPACKETENTITIES=41]='DELTAPACKETENTITIES',e[e.CHOKE=42]='CHOKE',e[e.RESOURCELIST=43]='RESOURCELIST',e[e.NEWMOVEVARS=44]='NEWMOVEVARS',e[e.RESOURCEREQUEST=45]='RESOURCEREQUEST',e[e.CUSTOMIZATION=46]='CUSTOMIZATION',e[e.CROSSHAIRANGLE=47]='CROSSHAIRANGLE',e[e.SOUNDFADE=48]='SOUNDFADE',e[e.FILETXFERFAILED=49]='FILETXFERFAILED',e[e.HLTV=50]='HLTV',e[e.DIRECTOR=51]='DIRECTOR',e[e.VOICEINIT=52]='VOICEINIT',e[e.VOICEDATA=53]='VOICEDATA',e[e.SENDEXTRAINFO=54]='SENDEXTRAINFO',e[e.TIMESCALE=55]='TIMESCALE',e[e.RESOURCELOCATION=56]='RESOURCELOCATION',e[e.SENDCVARVALUE=57]='SENDCVARVALUE',e[e.SENDCVARVALUE2=58]='SENDCVARVALUE2'})(t=e.SVC||(e.SVC={}))}(_||(_={})),t.FrameDataReader=_;const x=(e)=>{let t=e.nstr(8);return'HLDEMO'===t},b=(e)=>({demoProtocol:e.ui(),netProtocol:e.ui(),mapName:e.nstr(260),modName:e.nstr(260),mapCrc:e.i(),dirOffset:e.ui()}),v=(e,t)=>{e.seek(t);let a=e.ui(),n=[];for(let r=0;r<a;++r)n.push({id:e.ui(),name:e.nstr(64),flags:e.ui(),cdTrack:e.i(),time:e.f(),frames:e.ui(),offset:e.ui(),length:e.ui()});return n},E=(e,t,a)=>{let n=e.ui(),r=e.tell()+n,i=[];for(;e.tell()<r;){let n=e.ub();if(1===n)continue;else if(64<=n){a[n]&&-1<a[n].size?e.skip(a[n].size):e.skip(e.ub());continue}let o=_.read(e,n,t);o?(39===n&&(a[o.index]=o),i.push({type:n,data:o})):e.seek(r)}return e.seek(r),i},S=(e,t,a)=>{let n={type:e.ub(),time:e.f(),tick:e.ui()};switch(n.type){case 0:case 1:{e.skip(4),n.camera={position:[e.f(),e.f(),e.f()],orientation:[e.f(),e.f(),e.f()]},e.skip(436),n.data=E(e,t,a);break}case 2:break;case 3:{n.command=e.nstr(64);break}case 4:{e.skip(32);break}case 5:break;case 6:{e.skip(84);break}case 7:{e.skip(8);break}case 8:{n.sound={channel:e.i(),sample:e.nstr(e.ui()),attenuation:e.f(),volume:e.f(),flags:e.ui(),pitch:e.i()};break}case 9:{e.skip(e.ui());break}default:{n.error=!0;break}}return n},T=()=>Object.assign({},{delta_description_t:[{name:'flags',bits:32,divisor:1,flags:c},{name:'name',bits:8,divisor:1,flags:h},{name:'offset',bits:16,divisor:1,flags:c},{name:'size',bits:8,divisor:1,flags:c},{name:'bits',bits:8,divisor:1,flags:c},{name:'divisor',bits:32,divisor:4e3,flags:u},{name:'preMultiplier',bits:32,divisor:4e3,flags:u}]});class k{constructor(e=null){e?(this.cameraPos=JSON.parse(JSON.stringify(e.cameraPos)),this.cameraRot=JSON.parse(JSON.stringify(e.cameraRot)),this.entities=JSON.parse(JSON.stringify(e.entities))):(this.cameraPos=[0,0,0],this.cameraRot=[0,0,0],this.entities=[])}feedFrame(e){switch(e.type){case 0:case 1:{this.cameraPos[0]=e.camera.position[0],this.cameraPos[1]=e.camera.position[1],this.cameraPos[2]=e.camera.position[2],this.cameraRot[0]=e.camera.orientation[0],this.cameraRot[1]=e.camera.orientation[1],this.cameraRot[2]=e.camera.orientation[2];break}}}clone(){return new k(this)}}t.ReplayState=k;class R{constructor(e,t){this.header=e,this.mapName=this.header.mapName,this.directories=t}static parseFromArrayBuffer(e){let t=new d.Reader(e),a=t.nstr(8);if('HLDEMO'!==a)throw new Error('Invalid replay format');let n={};n.demoProtocol=t.ui(),n.netProtocol=t.ui(),n.mapName=t.nstr(260),n.modName=t.nstr(260),n.mapCrc=t.i(),n.dirOffset=t.ui(),t.seek(n.dirOffset);let r=t.ui(),o=[];for(let a=0;a<r;++a)o.push({id:t.ui(),name:t.nstr(64),flags:t.ui(),cdTrack:t.i(),time:t.f(),frames:t.ui(),offset:t.ui(),length:t.ui(),macros:[]});for(let a=0;a<o.length;++a){t.seek(o[a].offset);for(let e=!1;!e;){let n={type:t.b(),time:t.f(),frame:t.ui()};switch(n.type){case 0:case 1:{t.skip(4),n.camera={position:[t.f(),t.f(),t.f()],orientation:[t.f(),t.f(),t.f()]},t.skip(436),t.skip(t.ui());break}case 2:break;case 3:{n.command=t.nstr(64);break}case 4:{t.skip(32);break}case 5:{e=!0;break}case 6:{t.skip(84);break}case 7:{t.skip(8);break}case 8:{t.skip(4),t.skip(t.ui()+16);break}case 9:{t.skip(t.ui());break}default:{const e=(+(t.tell()-9)).toString(16),a=[`Unexpected macro (${n.type})`,` at offset = ${e}.`].join('');throw new Error(a)}}o[a].macros.push(n)}}return new R(n,o)}static parseFullFromArrayBuffer(e){let t=new d.Reader(e),a=t.nstr(8);if('HLDEMO'!==a)throw new Error('Invalid replay format');let n={};n.demoProtocol=t.ui(),n.netProtocol=t.ui(),n.mapName=t.nstr(260),n.modName=t.nstr(260),n.mapCrc=t.i(),n.dirOffset=t.ui(),t.seek(n.dirOffset);let r=t.ui(),o=[];for(let a=0;a<r;++a)o.push({id:t.ui(),name:t.nstr(64),flags:t.ui(),cdTrack:t.i(),time:t.f(),frames:t.ui(),offset:t.ui(),length:t.ui(),macros:[]});let i={delta_description_t:[{name:'flags',bits:32,divisor:1,flags:c},{name:'name',bits:8,divisor:1,flags:h},{name:'offset',bits:16,divisor:1,flags:c},{name:'size',bits:8,divisor:1,flags:c},{name:'bits',bits:8,divisor:1,flags:c},{name:'divisor',bits:32,divisor:4e3,flags:u},{name:'preMultiplier',bits:32,divisor:4e3,flags:u}]},s=[];for(let a=0;a<o.length;++a){t.seek(o[a].offset);for(let e=!1;!e;){let n={type:t.b(),time:t.f(),frame:t.ui()};switch(n.type){case 0:case 1:{t.skip(4),n.camera={position:[t.f(),t.f(),t.f()],orientation:[t.f(),t.f(),t.f()],forward:[t.f(),t.f(),t.f()],right:[t.f(),t.f(),t.f()],up:[t.f(),t.f(),t.f()]},n.RefParams={frametime:t.f(),time:t.f(),intermission:t.i(),paused:t.i(),spectator:t.i(),onground:t.i(),waterlevel:t.i(),velocity:[t.f(),t.f(),t.f()],origin:[t.f(),t.f(),t.f()],viewHeight:[t.f(),t.f(),t.f()],idealPitch:t.f(),viewAngles:[t.f(),t.f(),t.f()],health:t.i(),crosshairAngle:[t.f(),t.f(),t.f()],viewSize:t.f(),punchAngle:[t.f(),t.f(),t.f()],maxClients:t.i(),viewEntity:t.i(),playerCount:t.i(),maxEntities:t.i(),demoPlayback:t.i(),hardware:t.i(),smoothing:t.i(),ptr_cmd:t.i(),ptr_movevars:t.i(),viewport:[t.i(),t.i(),t.i(),t.i()],nextView:t.i(),onlyClientDraw:t.i()},n.UserCmd={lerp_msec:t.s(),msec:t.ub(),UNUSED1:t.ub(),viewAngles:[t.f(),t.f(),t.f()],forwardMove:t.f(),sideMove:t.f(),upMove:t.f(),lightLevel:t.b(),UNUSED2:t.ub(),buttons:t.us(),impulse:t.b(),weaponSelect:t.b(),UNUSED:t.s(),impactIndex:t.i(),impactPosition:[t.f(),t.f(),t.f()]},n.MoveVars={gravity:t.f(),stopSpeed:t.f(),maxSpeed:t.f(),spectatorMaxSpeed:t.f(),acceleration:t.f(),airAcceleration:t.f(),waterAcceleration:t.f(),friction:t.f(),edgeFriction:t.f(),waterFriction:t.f(),entityGravity:t.f(),bounce:t.f(),stepSize:t.f(),maxVelocity:t.f(),zMax:t.f(),waveHeight:t.f(),footsteps:t.i(),skyName:t.nstr(32),rollAngle:t.f(),rollSpeed:t.f(),skyColor:[t.f(),t.f(),t.f()],skyVec:[t.f(),t.f(),t.f()]},n.view=[t.f(),t.f(),t.f()],n.viewModel=t.i(),n.incoming_sequence=t.i(),n.incoming_acknowledged=t.i(),n.incoming_reliable_acknowledged=t.i(),n.incoming_reliable_sequence=t.i(),n.outgoing_sequence=t.i(),n.reliable_sequence=t.i(),n.last_reliable_sequence=t.i();let e=t.ui(),a=e+t.tell();for(n.frameData=[];t.tell()<a;){let e=t.ub();if(1===e)continue;else if(64<=e){s[e]&&-1<s[e].size?t.skip(s[e].size):t.skip(t.ub());continue}let r=_.read(t,e,i);r?(39===e&&(s[r.index]=r),n.frameData.push({type:e,frameData:r})):t.seek(a)}t.seek(a);break}case 2:break;case 3:{n.command=t.nstr(64);break}case 4:{n.clientData={position:[t.f(),t.f(),t.f()],rotation:[t.f(),t.f(),t.f()],weaponFlags:t.ui(),fov:t.f()};break}case 5:{e=!0;break}case 6:{n.event={flags:t.ui(),index:t.ui(),delay:t.f(),args:{flags:t.ui(),entityIndex:t.ui(),position:[t.f(),t.f(),t.f()],rotation:[t.f(),t.f(),t.f()],velocity:[t.f(),t.f(),t.f()],ducking:t.ui(),fparam1:t.f(),fparam2:t.f(),iparam1:t.i(),iparam2:t.i(),bparam1:t.i(),bparam2:t.i()}};break}case 7:{n.weaponAnimation={animation:t.i(),body:t.i()};break}case 8:{n.sound={channel:t.i(),sample:t.nstr(t.ui()),attenuation:t.f(),volume:t.f(),flags:t.ui(),pitch:t.i()};break}case 9:{t.skip(t.ui());break}default:{const e=(+(t.tell()-9)).toString(16),a=[`Unexpected macro (${n.type})`,` at offset = ${e}.`].join('');throw new Error(a)}}o[a].macros.push(n)}}return new R(n,o)}static parseIntoChunks(e){let t=new d.Reader(e);if(!x(t))throw new Error('Invalid replay file format');let a=[],n=T(),i=[],o=b(t),s=v(t,o.dirOffset);class l{constructor(e,t){this.state=e.clone(),this.startTime=t,this.timeLength=10,this.data=null,this.reader=null}setData(e){this.data=new Uint8Array(e.length);for(let t=0;t<e.length;++t)this.data[t]=e[t];this.reader=new d.Reader(this.data.buffer)}}class p{constructor(e){this.name=r.basename(e,'.bsp'),this.chunks=[],this.resources={sounds:[],skins:[],models:[],decals:[],custom:[],events:[]}}setResources(e){e.forEach((e)=>{switch(e.type){case 0:{e.used=!1,this.resources.sounds.push(e);break}case 1:{this.resources.skins.push(e);break}case 2:{this.resources.models.push(e);break}case 3:{this.resources.decals.push(e);break}case 4:{this.resources.custom.push(e);break}case 5:{this.resources.events.push(e);break}}})}addChunk(e){this.chunks.push(e)}}let u=new k,c,f,m,g,h;for(h=s[0].offset+s[0].length,t.seek(s[0].offset);t.tell()<h;){let e=S(t,n,i);if(u.feedFrame(e),e.error)throw new Error('Encountered error while reading replay');if(2>e.type){let t=e.data.find((e)=>e.type===_.SVC.SERVERINFO);t&&(c=new p(t.data.mapFileName),a.push(c));let n=e.data.find((e)=>e.type===_.SVC.RESOURCELIST);n&&c&&c.setResources(n.data)}}if(!(c instanceof p))throw new Error('Error while parsing replay.');for(g=t.tell(),f=new l(u,0),c.addChunk(f),h=s[1].offset+s[1].length,t.seek(s[1].offset);;){let e=t.tell();if(e>=h){let a=m.time-f.startTime;f.timeLength=a;let n=e-g;t.seek(g),f.setData(t.arrx(n,d.ReaderDataType.UByte)),t.seek(e);break}let r=S(t,n,i);if(u.feedFrame(r),m=r,r.error)throw new Error('Encountered error while reading replay');if(2>r.type){let n=r.data.find((e)=>e.type===_.SVC.SERVERINFO);if(n){c=new p(n.data.mapFileName),a.push(c);let i=m.time-f.startTime;f.timeLength=i;let o=e-g,s=t.tell();t.seek(g),f.setData(t.arrx(o,d.ReaderDataType.UByte)),t.seek(s),g=e,f=new l(u,r.time),c.addChunk(f)}let i=r.data.find((e)=>e.type===_.SVC.RESOURCELIST);if(i&&c.setResources(i.data),n)continue;for(let e=0,t;e<r.data.length;++e)if(t=r.data[e],t.type===_.SVC.SOUND||t.type===_.SVC.SPAWNSTATICSOUND){let e=c.resources.sounds.find((e)=>e.index===t.data.soundIndex);e&&(e.used=!0)}else if(t.type===_.SVC.STUFFTEXT){let e=c.resources.sounds,a=t.data.commands;for(let t=0;t<a.length;++t){let n=a[t],r=n.func;if(('speak'===r||'spk'===r)&&1===n.params.length){let t=n.params[0]+'.wav',a=e.find((e)=>e.name===t);a&&(a.used=!0)}}}}else if(8===r.type){let e=c.resources.sounds.find((e)=>e.name===r.sound.sample);e&&(e.used=!0)}if(f.startTime+10<r.time){let a=e-g,n=t.tell();t.seek(g),f.setData(t.arrx(a,d.ReaderDataType.UByte)),t.seek(n),g=e,f=new l(u,r.time),c.addChunk(f)}}return{length:s[1].time,maps:a,deltaDecoders:n,customMessages:i}}static readHeader(e){return b(e)}static readDirectories(e,t){return v(e,t)}static readFrame(e,t,a){return S(e,t,a)}static readFrameData(e,t,a){return S(e,t,a)}}t.Replay=R},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(54),r=window,i=r.AudioContext||r.webkitAudioContext,o=new i;t.SoundSystem=class{constructor(){this.context=o,this.events=new n.EventEmitter;const e=parseFloat(localStorage.getItem('volume')||'0.3');localStorage.setItem('volume',e.toString()),this.channels=[],this.preMuteVolume=1,this.masterGain=this.context.createGain(),this.masterGain.gain.value=e,this.masterGain.connect(this.context.destination);for(let e=0;8>e;++e)this.channels.push({source:null,gain:this.context.createGain()}),this.channels[e].gain.connect(this.masterGain)}static getContext(){return o}play(e,t,a){this.stop(t);const n=this.channels[t].gain;n.gain.value=Math.max(0,Math.min(1,a));const r=this.context.createBufferSource();r.buffer=e.buffer,r.connect(n),r.start(0),this.channels[t].source=r}stop(e){const t=this.channels[e].source;t&&t.stop(0)}getVolume(){return this.masterGain.gain.value}setVolume(e){const t=this.masterGain.gain.value;0<t&&0===e&&(this.preMuteVolume=t),this.masterGain.gain.value=e,localStorage.setItem('volume',e.toString()),this.events.emit('volumeChange',e)}toggleMute(){0===this.getVolume()?this.setVolume(this.preMuteVolume):this.setVolume(0)}}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(52),i=a(68);var r;(function(e){e[e.VP_PARALLEL_UPRIGHT=0]='VP_PARALLEL_UPRIGHT',e[e.FACING_UPRIGHT=1]='FACING_UPRIGHT',e[e.VP_PARALLEL=2]='VP_PARALLEL',e[e.ORIENTED=3]='ORIENTED',e[e.VP_PARALLEL_ORIENTED=4]='VP_PARALLEL_ORIENTED'})(r=t.SpriteType||(t.SpriteType={}));var o;(function(e){e[e.SPR_NORMAL=0]='SPR_NORMAL',e[e.SPR_ADDITIVE=1]='SPR_ADDITIVE',e[e.SPR_INDEXALPHA=2]='SPR_INDEXALPHA',e[e.SPR_ALPHTEST=3]='SPR_ALPHTEST'})(o=t.SpriteAlphaType||(t.SpriteAlphaType={}));var s;(function(e){e[e.SYNCHRONIZED=0]='SYNCHRONIZED',e[e.RANDOM=1]='RANDOM'})(s=t.SpriteSyncType||(t.SpriteSyncType={}));class d{constructor(e,t){this.header=e,this.frames=t}static parse(e){const t=new n.Reader(e),a=t.nstr(4);if('IDSP'!==a)throw new Error('Invalid sprite file format');const r={version:t.i(),type:t.i(),alphaType:t.i(),radius:t.f(),width:t.i(),height:t.i(),frameCount:t.i(),beamLength:t.f(),syncType:t.i()},s=t.s(),l=t.arrx(3*s,n.ReaderDataType.UByte),p=[];for(let a=0;a<r.frameCount;++a){const e={group:t.i(),position:[t.i(),t.i()],width:t.i(),height:t.i(),data:new Uint8Array(4*(r.width*r.height))},a=t.arrx(r.width*r.height,n.ReaderDataType.UByte);e.data=r.alphaType===o.SPR_ALPHTEST?i.paletteWithLastTransToRGBA(a,l):i.paletteToRGBA(a,l),p.push(e)}return new d(r,p)}}t.Sprite=d},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22),r=a(66);a(115);class i extends n.Component{constructor(){super(...arguments),this.onFreeModeClick=()=>{this.props.game.mode===r.PlayerMode.FREE||(this.props.game.changeMode(r.PlayerMode.FREE),this.props.game.player.pause())},this.onReplayModeClick=()=>{this.props.game.mode===r.PlayerMode.REPLAY||this.props.game.changeMode(r.PlayerMode.REPLAY)},this.toggleMenu=()=>{this.setState({isOpen:!this.state.isOpen})}}render(){const e=this.state.isOpen?'settings--open':'',t=`settings ${e} ${this.props.class}`,a=!!this.props.game.player.replay;return n.h('div',{class:t},n.h('div',{class:'hlv__button settings__button controls__button',onClick:this.toggleMenu},n.h('svg',{xmlns:'http://www.w3.org/2000/svg',viewBox:'0 0 24 24'},n.h('path',{"fill-rule":'evenodd',"clip-rule":'evenodd',fill:'#ffffff',d:'M23.9 10.7c0-0.3-0.4-0.6-0.8-0.6 -1.1 0-2.1-0.6-2.5-1.6 -0.4-1-0.1-2.2 0.7-3 0.3-0.2 0.3-0.6 0.1-0.9 -0.6-0.7-1.2-1.4-1.9-1.9 -0.3-0.2-0.7-0.2-0.9 0.1 -0.7 0.8-2 1.1-3 0.7 -1-0.4-1.7-1.5-1.6-2.6 0-0.4-0.2-0.7-0.6-0.7 -0.9-0.1-1.8-0.1-2.7 0C10.4 0.1 10.1 0.4 10.1 0.8 10.1 1.9 9.5 2.9 8.5 3.3 7.5 3.7 6.2 3.4 5.5 2.6c-0.2-0.3-0.6-0.3-0.9-0.1 -0.7 0.6-1.4 1.2-1.9 1.9C2.4 4.8 2.5 5.2 2.7 5.4c0.8 0.8 1.1 2 0.7 3 -0.4 1-1.4 1.6-2.6 1.6 -0.4 0-0.7 0.2-0.7 0.6 -0.1 0.9-0.1 1.8 0 2.7 0 0.3 0.4 0.6 0.8 0.6 1 0 2 0.6 2.5 1.6 0.4 1 0.2 2.2-0.7 3 -0.3 0.2-0.3 0.6-0.1 0.9 0.6 0.7 1.2 1.4 1.9 1.9 0.3 0.2 0.7 0.2 0.9-0.1 0.7-0.8 2-1.1 3-0.7 1 0.4 1.7 1.5 1.6 2.6 0 0.4 0.2 0.7 0.6 0.7C11.1 24 11.5 24 12 24c0.4 0 0.9 0 1.3-0.1 0.3 0 0.6-0.3 0.6-0.7 0-1.1 0.6-2.1 1.6-2.6 1-0.4 2.3-0.1 3 0.7 0.2 0.3 0.6 0.3 0.9 0.1 0.7-0.6 1.4-1.2 1.9-1.9 0.2-0.3 0.2-0.7-0.1-0.9 -0.8-0.8-1.1-2-0.7-3 0.4-1 1.4-1.6 2.5-1.6l0.1 0c0.3 0 0.7-0.2 0.7-0.6C24 12.5 24 11.6 23.9 10.7zM12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6c3.3 0 6 2.7 6 6S15.3 18 12 18zM12 16'}))),n.h('div',{class:'settings__menu'},n.h('span',{class:'settings__menuitemh'},'Mode'),a?n.h('span',{class:`settings__menuitem ${this.props.game.mode===r.PlayerMode.REPLAY?'settings__menuitem--selected':''}`,onClick:this.onReplayModeClick},'Replay'):n.h('span',null),n.h('span',{class:`settings__menuitem ${this.props.game.mode===r.PlayerMode.FREE?'settings__menuitem--selected':''}`,onClick:this.onFreeModeClick},'Free')))}}t.SettingsButton=i},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22),r=a(76);a(117);class i extends n.Component{constructor(){super(...arguments),this.state={isInFullscreen:!1},this.onClick=()=>{r.Fullscreen.isInFullscreen()?r.Fullscreen.exit():r.Fullscreen.enter(this.props.root)},this.onFullscreen=()=>{this.setState({isInFullscreen:r.Fullscreen.isInFullscreen()})}}componentDidMount(){r.Fullscreen.onChange(this.onFullscreen)}componentWillUnmount(){r.Fullscreen.onChangeRemove(this.onFullscreen)}render(){return n.h('div',{class:'hlv__button fullscreen__button controls__button',onClick:this.onClick},this.state.isInFullscreen?n.h('svg',{xmlns:'http://www.w3.org/2000/svg',viewBox:'0 0 64 64',fill:'currentcolor'},n.h('path',{d:'M0 22 L22 22 L22 0 L14 0 L14 14 L0 14 M42 0 L42 22 L64 22 L64 14 L50 14 L50 0 M14 50 L0 50 L0 42 L22 42 L22 64 L14 64 M42 64 L42 42 L64 42 L64 50 L50 50 L50 64 Z'})):n.h('svg',{xmlns:'http://www.w3.org/2000/svg',viewBox:'0 0 64 64',fill:'currentcolor'},n.h('path',{d:'M0 22 L8 22 L8 8 L22 8 L22 0 L0 0 M42 0 L42 8 L56 8 L56 22 L64 22 L64 0 M0 64 L0 42 L8 42 L8 56 L22 56 L22 64 M64 64 L42 64 L42 56 L56 56 L56 42 L64 42 Z'})))}}t.FullscreenButton=i},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const a=[{enabled:'fullscreenEnabled',element:'fullscreenElement',request:'requestFullscreen',exit:'exitFullscreen',change:'fullscreenchange',error:'fullscreenerror'},{enabled:'mozFullScreenEnabled',element:'mozFullScreenElement',request:'mozRequestFullScreen',exit:'mozCancelFullScreen',change:'mozfullscreenchange',error:'mozfullscreenerror'},{enabled:'webkitFullscreenEnabled',element:'webkitCurrentFullScreenElement',request:'webkitRequestFullscreen',exit:'webkitExitFullscreen',change:'webkitfullscreenchange',error:'webkitfullscreenerror'},{enabled:'msFullscreenEnabled',element:'msFullscreenElement',request:'msRequestFullscreen',exit:'msExitFullscreen',change:'MSFullscreenChange',error:'MSFullscreenError'}];let n=0;const r=document;for(let o=0;o<a.length;++o)if('undefined'!=typeof r[a[o].enabled]){n=o;break}class i{static element(){return r[a[n].element]}static enabled(){return r[a[n].enabled]}static isInFullscreen(){return null!==i.element()}static enter(e){e[a[n].request]()}static exit(){r[a[n].exit]()}static onChange(e){return window.addEventListener(a[n].change,e)}static onChangeRemove(e){window.removeEventListener(a[n].change,e)}static onError(e){return window.addEventListener(a[n].error,e)}}t.Fullscreen=i},function(e,t,a){'use strict';function n(e){if('string'==typeof e)return e;if(Object(O.a)(e))return D(e,n)+'';if(C(e))return j?j.call(e):'';var t=e+'';return'0'==t&&1/e==-U?'-0':t}function r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function o(e){if(Object(M.a)(e)&&!Object(O.a)(e)&&!(e instanceof ve)){if(e instanceof Ie)return e;if(Ce.call(e,'__wrapped__'))return Pe(e)}return new Ie(e)}function s(e){var t=we(e),a=Ne[t];if('function'!=typeof a||!(t in ve.prototype))return!1;if(e===a)return!0;var n=Te(a);return!!n&&e===n[0]}function d(e,t,a,n,r,i,o,s,l,p){function u(){for(var _=arguments.length,x=Array(_),b=_;b--;)x[b]=arguments[b];if(g)var v=rt(u),E=_e(x,v);if(n&&(x=he(x,n,r,g)),i&&(x=ye(x,i,o,g)),_-=E,g&&_<p){var S=dt(x,v);return nt(e,t,d,u.placeholder,a,x,S,s,l,p-_)}var T=f?a:this,k=m?T[e]:e;return _=x.length,s?x=ot(x,s):h&&1<_&&x.reverse(),c&&l<_&&(x.length=l),this&&this!==ie.a&&this instanceof u&&(k=y||fe(k)),k.apply(T,x)}var c=t&mt,f=t&pt,m=t&ut,g=t&(ct|ft),h=t&ht,y=m?void 0:fe(e);return u}function l(e,t){if(Object(O.a)(e))return!1;var a=typeof e;return!!('number'==a||'symbol'==a||'boolean'==a||null==e||C(e))||ra.test(e)||!na.test(e)||null!=t&&e in Object(t)}function p(e,t){if('function'!=typeof e||null!=t&&'function'!=typeof t)throw new TypeError(sa);var a=function(){var n=arguments,r=t?t.apply(this,n):n[0],i=a.cache;if(i.has(r))return i.get(r);var o=e.apply(this,n);return a.cache=i.set(r,o)||i,o};return a.cache=new(p.Cache||oa.a),a}function u(e,t,a,n,r){var i=-1,o=e.length;for(a||(a=Ea),r||(r=[]);++i<o;){var s=e[i];0<t&&a(s)?1<t?u(s,t-1,a,n,r):xa(r,s):!n&&(r[r.length]=s)}return r}function c(e,t,a,n,r,i){var o=t&Qr,s=t&$r,d;if(a&&(d=r?a(e,n,r,i):a(e)),void 0!==d)return d;if(!Object(X.a)(e))return e;var l=Object(O.a)(e);if(!l){var p=wr(e),u=p==ti||p==ai;if(Object(Vr.a)(e))return Object(qn.a)(e,o);if(p!=ni&&p!=ei&&(!u||r)){if(!ri[p])return r?e:{};d=jr(e,p,o)}else if(d=s||u?{}:Object(Wr.a)(e),!o)return s?ir(e,Xn(d,e)):er(e,Gn(d,e))}else if(d=Pr(e),!o)return Object(Le.a)(e,d);i||(i=new zn.a);var f=i.get(e);if(f)return f;if(i.set(e,d),Zr(e))return e.forEach(function(n){d.add(c(n,t,a,n,e,i))}),d;if(Hr(e))return e.forEach(function(n,r){d.set(r,c(n,t,a,r,e,i))}),d;var m=t&Jr?s?dr:sr:s?keysIn:Xt,g=l?void 0:m(e);return Xe(g||e,function(n,r){g&&(r=n,n=e[r]),Object(Nt.a)(d,r,c(n,t,a,r,e,i))}),d}function f(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new oa.a;++t<a;)this.add(e[t])}function m(e,t,a,n,r,i){var o=a&Ti,s=sr(e),d=s.length,l=sr(t),p=l.length;if(d!=p&&!o)return!1;for(var u=d,c;u--;)if(c=s[u],o?!(c in t):!Ri.call(t,c))return!1;var f=i.get(e);if(f&&i.get(t))return f==t;var m=!0;i.set(e,t),i.set(t,e);for(var g=o;++u<d;){c=s[u];var h=e[c],y=t[c];if(n)var _=o?n(y,h,c,t,e,i):n(h,y,c,e,t,i);if(void 0===_?!(h===y||r(h,y,a,n,i)):!_){m=!1;break}g||(g='constructor'==c)}if(m&&!g){var x=e.constructor,b=t.constructor;x!=b&&'constructor'in e&&'constructor'in t&&!('function'==typeof x&&x instanceof x&&'function'==typeof b&&b instanceof b)&&(m=!1)}return i['delete'](e),i['delete'](t),m}function g(e,t,a,n,r){return!(e!==t)||(null!=e&&null!=t&&(Object(M.a)(e)||Object(M.a)(t))?Ci(e,t,a,n,g,r):e!==e&&t!==t)}function h(e,t,a,n){var r=a.length,i=r,o=!n;if(null==e)return!i;for(e=Object(e);r--;){var s=a[r];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<i;){s=a[r];var d=s[0],l=e[d],p=s[1];if(!(o&&s[2])){var u=new zn.a;if(n)var c=n(l,p,d,e,t,u);if(void 0===c?!Ni(p,l,Bi|Di,n,u):!c)return!1}else if(void 0===l&&!(d in e))return!1}return!0}function y(e,t){return null!=e&&t in Object(e)}function _(e,t,a){var n=a.length;if(null==e)return!n;for(e=Object(e);n--;){var r=a[n],i=t[r],o=e[r];if(o===void 0&&!(r in e)||!i(o))return!1}return!0}function x(e,t,a){t=a?void 0:t;var n=Mt(e,ho,void 0,void 0,void 0,void 0,void 0,t);return n.placeholder=x.placeholder,n}function b(e,t,a){t=a?void 0:t;var n=Mt(e,_o,void 0,void 0,void 0,void 0,void 0,t);return n.placeholder=b.placeholder,n}function v(e,t,a){function n(t){var a=h,n=y;return h=y=void 0,c=t,x=e.apply(n,a),x}function r(e){return c=e,b=setTimeout(s,t),f?n(e):x}function i(e){var a=e-v,n=e-c,r=t-a;return m?So(r,_-n):r}function o(e){var a=e-v,n=e-c;return void 0===v||a>=t||0>a||m&&n>=_}function s(){var e=bo();return o(e)?d(e):void(b=setTimeout(s,i(e)))}function d(e){return(b=void 0,g&&h)?n(e):(h=y=void 0,x)}function l(){void 0!==b&&clearTimeout(b),c=0,h=v=y=b=void 0}function p(){return void 0===b?x:d(bo())}function u(){var e=bo(),a=o(e);if(h=arguments,y=this,v=e,a){if(void 0===b)return r(v);if(m)return b=setTimeout(s,t),n(v)}return void 0===b&&(b=setTimeout(s,t)),x}var c=0,f=!1,m=!1,g=!0,h,y,_,x,b,v;if('function'!=typeof e)throw new TypeError(vo);return t=$(t)||0,Object(X.a)(a)&&(f=!!a.leading,m='maxWait'in a,_=m?Eo($(a.maxWait)||0,t):_,g='trailing'in a?!!a.trailing:g),u.cancel=l,u.flush=p,u}function E(e,t,a){var n=Xt(t),r=pd(t,n),i=!(Object(X.a)(a)&&'chain'in a)||!!a.chain,o=Object(ld.a)(e);return Xe(r,function(a){var n=t[a];e[a]=n,o&&(e.prototype[a]=function(){var t=this.__chain__;if(i||t){var a=e(this.__wrapped__),r=a.__actions__=Object(Le.a)(this.__actions__);return r.push({func:n,args:arguments,thisArg:e}),a.__chain__=t,a}return n.apply(e,xa([this.value()],arguments))})}),e}function S(e,t,a){var n=kf.imports._.templateSettings||kf;a&&Object(Fn.a)(e,t,a)&&(t=void 0),e=fa(e),t=ea({},t,n,_f);var r=ea({},t.imports,n.imports,_f),i=Xt(r),o=Id(r,i),s=0,d=t.interpolate||Lf,l='__p += \'',p=RegExp((t.escape||Lf).source+'|'+d.source+'|'+(d===Ef?If:Lf).source+'|'+(t.evaluate||Lf).source+'|$','g'),u='sourceURL'in t?'//# sourceURL='+t.sourceURL+'\n':'',c,f;e.replace(p,function(t,a,n,r,i,o){return n||(n=r),l+=e.slice(s,o).replace(Pf,bf),a&&(c=!0,l+='\' +\n__e('+a+') +\n\''),i&&(f=!0,l+='\';\n'+i+';\n__p += \''),n&&(l+='\' +\n((__t = ('+n+')) == null ? \'\' : __t) +\n\''),s=o+t.length,t}),l+='\';\n';var m=t.variable;m||(l='with (obj) {\n'+l+'\n}\n'),l=(f?l.replace(Rf,''):l).replace(Af,'$1').replace(wf,'$1;'),l='function('+(m||'obj')+') {\n'+(m?'':'obj || (obj = {});\n')+'var __t, __p = \'\''+(c?', __e = _.escape':'')+(f?', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, \'\') }\n':';\n')+l+'return __p\n}';var g=Ma(function(){return Function(i,u+'return '+l).apply(void 0,o)});if(g.source=l,La(g))throw g;return g}function T(e,t,a){var n=!0,r=!0;if('function'!=typeof e)throw new TypeError(Cf);return Object(X.a)(a)&&(n='leading'in a?!!a.leading:n,r='trailing'in a?!!a.trailing:r),To(e,t,{leading:n,maxWait:t,trailing:r})}function k(e,t){var a=nm,n=rm;if(Object(X.a)(t)){var r='separator'in t?t.separator:r;a='length'in t?te(t.length):a,n='omission'in t?W(t.omission):n}e=fa(e);var i=e.length;if(Ga(e)){var o=Qa(e);i=o.length}if(a>=i)return e;var s=a-fu(n);if(1>s)return n;var d=o?Va(o,0,s).join(''):e.slice(0,s);if(void 0===r)return d+n;if(o&&(s+=d.length-s),Nl(r)){if(e.slice(s).search(r)){var l=d,p;for(r.global||(r=RegExp(r.source,fa(im.exec(r))+'g')),r.lastIndex=0;p=r.exec(l);)var u=p.index;d=d.slice(0,void 0===u?s:u)}}else if(e.indexOf(W(r),s)!=s){var c=d.lastIndexOf(r);-1<c&&(d=d.slice(0,c))}return d+n}function R(e){var t=++Sm;return fa(e)+t}var A=Math.floor,w=Math.ceil,I=Math.min,L=Math.max;a.r(t);var P=a(9),M=a(3),C=function(e){return'symbol'==typeof e||Object(M.a)(e)&&Object(P.a)(e)=='[object Symbol]'},N=function(e){return'number'==typeof e?e:C(e)?0/0:+e},B=a(15),D=function(e,t){for(var a=-1,n=null==e?0:e.length,r=Array(n);++a<n;)r[a]=t(e[a],a,e);return r},O=a(0),U=1/0,F=B.a?B.a.prototype:void 0,j=F?F.toString:void 0,W=n,V=function(e,t){return function(a,n){var r;if(void 0===a&&void 0===n)return t;if(void 0!==a&&(r=a),void 0!==n){if(void 0===r)return n;'string'==typeof a||'string'==typeof n?(a=W(a),n=W(n)):(a=N(a),n=N(n)),r=e(a,n)}return r}},z=V(function(e,t){return e+t},0),G=z,X=a(2),q=0/0,H=/^\s+|\s+$/g,K=/^[-+]0x[0-9a-f]+$/i,Y=/^0b[01]+$/i,Z=/^0o[0-7]+$/i,Q=parseInt,$=function(e){if('number'==typeof e)return e;if(C(e))return q;if(Object(X.a)(e)){var t='function'==typeof e.valueOf?e.valueOf():e;e=Object(X.a)(t)?t+'':t}if('string'!=typeof e)return 0===e?e:+e;e=e.replace(H,'');var a=Y.test(e);return a||Z.test(e)?Q(e.slice(2),a?2:8):K.test(e)?q:+e},J=1/0,ee=function(e){if(!e)return 0===e?e:0;if(e=$(e),e===J||e===-J){var t=0>e?-1:1;return t*17976931348623157e292}return e===e?e:0},te=function(e){var t=ee(e),a=t%1;return t===t?a?t-a:t:0},ae=function(e,t){if('function'!=typeof t)throw new TypeError('Expected a function');return e=te(e),function(){if(1>--e)return t.apply(this,arguments)}},ne=a(6),re=a(25),ie=a(5),oe=Object(re.a)(ie.a,'WeakMap'),se=oe,de=se&&new se,le=de,pe=le?function(e,t){return le.set(e,t),e}:ne.a,ue=pe,ce=a(27),fe=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);}var a=Object(ce.a)(e.prototype),n=e.apply(a,t);return Object(X.a)(n)?n:a}},me=function(e,t,a){function n(){var t=this&&this!==ie.a&&this instanceof n?i:e;return t.apply(r?a:this,arguments)}var r=t&1,i=fe(e);return n},ge=a(12),he=function(e,t,a,n){for(var r=-1,i=e.length,o=a.length,s=-1,d=t.length,l=L(i-o,0),p=Array(d+l),u=!n;++s<d;)p[s]=t[s];for(;++r<o;)(u||r<i)&&(p[a[r]]=e[r]);for(;l--;)p[s++]=e[r++];return p},ye=function(e,t,a,n){for(var r=-1,i=e.length,o=-1,s=a.length,d=-1,l=t.length,p=L(i-s,0),u=Array(p+l),c=!n;++r<p;)u[r]=e[r];for(var f=r;++d<l;)u[f+d]=t[d];for(;++o<s;)(c||r<i)&&(u[f+a[o]]=e[r++]);return u},_e=function(e,t){for(var a=e.length,n=0;a--;)e[a]===t&&++n;return n},xe=function(){},be=4294967295;r.prototype=Object(ce.a)(xe.prototype),r.prototype.constructor=r;var ve=r,Ee=function(){},Se=le?function(e){return le.get(e)}:Ee,Te=Se,ke={},Re=Object.prototype,Ae=Re.hasOwnProperty,we=function(e){for(var t=e.name+'',a=ke[t],n=Ae.call(ke,t)?a.length:0;n--;){var r=a[n],i=r.func;if(null==i||i==e)return r.name}return t};i.prototype=Object(ce.a)(xe.prototype),i.prototype.constructor=i;var Ie=i,Le=a(11),Pe=function(e){if(e instanceof ve)return e.clone();var t=new Ie(e.__wrapped__,e.__chain__);return t.__actions__=Object(Le.a)(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},Me=Object.prototype,Ce=Me.hasOwnProperty;o.prototype=xe.prototype,o.prototype.constructor=o;var Ne=o,Be=s,De=a(55),Oe=Object(De.a)(ue),Ue=Oe,Fe=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,We=function(e){var t=e.match(Fe);return t?t[1].split(je):[]},Ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ze=function(e,t){var a=t.length;if(!a)return e;var n=a-1;return t[n]=(1<a?'& ':'')+t[n],t=t.join(2<a?', ':' '),e.replace(Ve,'{\n/* [wrapped with '+t+'] */\n')},Ge=a(48),Xe=function(e,t){for(var a=-1,n=null==e?0:e.length;++a<n&&!(!1===t(e[a],a,e)););return e},qe=function(e,t,a,n){for(var r=e.length,i=a+(n?1:-1);n?i--:++i<r;)if(t(e[i],i,e))return i;return-1},He=function(e){return e!==e},Ke=function(e,t,a){for(var n=a-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1},Ye=function(e,t,a){return t===t?Ke(e,t,a):qe(e,He,a)},Ze=function(e,t){var a=null==e?0:e.length;return!!a&&-1<Ye(e,t,0)},Qe=[['ary',128],['bind',1],['bindKey',2],['curry',8],['curryRight',16],['flip',512],['partial',32],['partialRight',64],['rearg',256]],$e=function(e,t){return Xe(Qe,function(a){var n='_.'+a[0];t&a[1]&&!Ze(e,n)&&e.push(n)}),e.sort()},Je=function(e,t,a){var n=t+'';return Object(Ge.a)(e,ze(n,$e(We(n),a)))},et=32,tt=64,nt=function(e,t,a,n,r,i,o,s,d,l){var p=t&8,u=p?o:void 0,c=p?void 0:o,f=p?i:void 0,m=p?void 0:i;t|=p?et:tt,t&=~(p?tt:et),t&4||(t&=~(1|2));var g=[e,t,r,f,u,m,c,s,d,l],h=a.apply(void 0,g);return Be(e)&&Ue(h,g),h.placeholder=n,Je(h,e,t)},rt=function(e){return e.placeholder},it=a(19),ot=function(e,t){for(var a=e.length,n=I(t.length,a),r=Object(Le.a)(e);n--;){var i=t[n];e[n]=Object(it.a)(i,a)?r[i]:void 0}return e},st='__lodash_placeholder__',dt=function(e,t){for(var a=-1,n=e.length,r=0,i=[];++a<n;){var o=e[a];(o===t||o===st)&&(e[a]=st,i[r++]=a)}return i},pt=1,ut=2,ct=8,ft=16,mt=128,ht=512,yt=d,_t=function(e,t,a){function n(){for(var i=arguments.length,o=Array(i),s=i,d=rt(n);s--;)o[s]=arguments[s];var l=3>i&&o[0]!==d&&o[i-1]!==d?[]:dt(o,d);if(i-=l.length,i<a)return nt(e,t,yt,n.placeholder,void 0,o,l,void 0,void 0,a-i);var p=this&&this!==ie.a&&this instanceof n?r:e;return Object(ge.a)(p,this,o)}var r=fe(e);return n},xt=function(e,t,a,n){function r(){for(var t=-1,s=arguments.length,d=-1,l=n.length,p=Array(l+s),u=this&&this!==ie.a&&this instanceof r?o:e;++d<l;)p[d]=n[d];for(;s--;)p[d++]=arguments[++t];return Object(ge.a)(u,i?a:this,p)}var i=t&1,o=fe(e);return r},bt='__lodash_placeholder__',vt=1,Et=8,St=128,Tt=256,kt=function(e,t){var a=e[1],n=t[1],r=a|n,i=r<(vt|2|St),o=n==St&&a==Et||n==St&&a==Tt&&e[7].length<=t[8]||n==(St|Tt)&&t[7].length<=t[8]&&a==Et;if(!(i||o))return e;n&vt&&(e[2]=t[2],r|=a&vt?0:4);var s=t[3];if(s){var d=e[3];e[3]=d?he(d,s,t[4]):s,e[4]=d?dt(e[3],bt):t[4]}return s=t[5],s&&(d=e[5],e[5]=d?ye(d,s,t[6]):s,e[6]=d?dt(e[5],bt):t[6]),s=t[7],s&&(e[7]=s),n&St&&(e[8]=null==e[8]?t[8]:I(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e},Rt=1,At=8,wt=16,It=32,Lt=64,Pt=L,Mt=function(e,t,a,n,r,i,o,s){var d=t&2;if(!d&&'function'!=typeof e)throw new TypeError('Expected a function');var l=n?n.length:0;if(l||(t&=~(It|Lt),n=r=void 0),o=void 0===o?o:Pt(te(o),0),s=void 0===s?s:te(s),l-=r?r.length:0,t&Lt){var p=n,u=r;n=r=void 0}var c=d?void 0:Te(e),f=[e,t,a,n,r,p,u,i,o,s];if(c&&kt(f,c),e=f[0],t=f[1],a=f[2],n=f[3],r=f[4],s=f[9]=void 0===f[9]?d?0:e.length:Pt(f[9]-l,0),!s&&t&(At|wt)&&(t&=~(At|wt)),!t||t==Rt)var m=me(e,t,a);else m=t==At||t==wt?_t(e,t,s):t!=It&&t!=(Rt|It)||r.length?yt.apply(void 0,f):xt(e,t,a,n);var g=c?ue:Ue;return Je(g(m,f),e,t)},Ct=function(e,t,a){return t=a?void 0:t,t=e&&null==t?e.length:t,Mt(e,128,void 0,void 0,void 0,void 0,t)},Nt=a(32),Bt=a(17),Dt=a(28),Ot=a(7),Ut=a(33),Ft=a(62),jt=a(61),Wt=Object(jt.a)(Object.keys,Object),Vt=Object.prototype,zt=Vt.hasOwnProperty,Gt=function(e){if(!Object(Ut.a)(e))return Wt(e);var t=[];for(var a in Object(e))zt.call(e,a)&&'constructor'!=a&&t.push(a);return t},Xt=function(e){return Object(Ot.a)(e)?Object(Ft.a)(e):Gt(e)},qt=Object.prototype,Ht=qt.hasOwnProperty,Kt=Object(Dt.a)(function(e,t){if(Object(Ut.a)(t)||Object(Ot.a)(t))return void Object(Bt.a)(t,Xt(t),e);for(var a in t)Ht.call(t,a)&&Object(Nt.a)(e,a,t[a])}),Yt=Kt,Zt=a(10),Qt=Object(Dt.a)(function(e,t){Object(Bt.a)(t,Object(Zt.a)(t),e)}),$t=Qt,Jt=Object(Dt.a)(function(e,t,a,n){Object(Bt.a)(t,Object(Zt.a)(t),e,n)}),ea=Jt,ta=Object(Dt.a)(function(e,t,a,n){Object(Bt.a)(t,Xt(t),e,n)}),aa=ta,na=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ra=/^\w*$/,ia=l,oa=a(41),sa='Expected a function';p.Cache=oa.a;var da=p,la=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pa=/\\(\\)?/g,ua=function(e){var t=da(e,function(e){return a.size===500&&a.clear(),e}),a=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(''),e.replace(la,function(e,a,n,r){t.push(n?r.replace(pa,'$1'):a||e)}),t}),ca=ua,fa=function(e){return null==e?'':W(e)},ma=function(e,t){return Object(O.a)(e)?e:ia(e,t)?[e]:ca(fa(e))},ga=function(e){if('string'==typeof e||C(e))return e;var t=e+'';return'0'==t&&1/e==-(1/0)?'-0':t},ha=function(e,t){t=ma(t,e);for(var a=0,n=t.length;null!=e&&a<n;)e=e[ga(t[a++])];return a&&a==n?e:void 0},ya=function(e,t,a){var n=null==e?void 0:ha(e,t);return n===void 0?a:n},_a=function(e,t){for(var a=-1,n=t.length,r=Array(n);++a<n;)r[a]=null==e?void 0:ya(e,t[a]);return r},xa=function(e,t){for(var a=-1,n=t.length,r=e.length;++a<n;)e[r+a]=t[a];return e},ba=a(23),va=B.a?B.a.isConcatSpreadable:void 0,Ea=function(e){return Object(O.a)(e)||Object(ba.a)(e)||!!(va&&e&&e[va])},Sa=u,Ta=function(e){var t=null==e?0:e.length;return t?Sa(e,1):[]},ka=a(57),Ra=function(e){return Object(Ge.a)(Object(ka.a)(e,void 0,Ta),e+'')},Aa=Ra(_a),at=Aa,wa=a(1),Ia=a(26),La=function(e){if(!Object(M.a)(e))return!1;var t=Object(P.a)(e);return t=='[object Error]'||t=='[object DOMException]'||'string'==typeof e.message&&'string'==typeof e.name&&!Object(Ia.a)(e)},Pa=Object(wa.a)(function(e,t){try{return Object(ge.a)(e,void 0,t)}catch(t){return La(t)?t:new Error(t)}}),Ma=Pa,Ca=function(e,t){var a;if('function'!=typeof t)throw new TypeError('Expected a function');return e=te(e),function(){return 0<--e&&(a=t.apply(this,arguments)),1>=e&&(t=void 0),a}},Na=Object(wa.a)(function(e,t,a){var n=1;if(a.length){var r=dt(a,rt(Na));n|=32}return Mt(e,n,t,a,r)});Na.placeholder={};var Ba=Na,Da=a(18),Oa=Ra(function(e,t){return Xe(t,function(t){t=ga(t),Object(Da.a)(e,t,Ba(e[t],e))}),e}),Ua=Oa,Fa=Object(wa.a)(function(e,t,a){var n=1|2;if(a.length){var r=dt(a,rt(Fa));n|=32}return Mt(t,n,e,a,r)});Fa.placeholder={};var ja=Fa,Wa=function(e,t,a){var n=-1,r=e.length;0>t&&(t=-t>r?0:r+t),a=a>r?r:a,0>a&&(a+=r),r=t>a?0:a-t>>>0,t>>>=0;for(var i=Array(r);++n<r;)i[n]=e[n+t];return i},Va=function(e,t,a){var n=e.length;return a=void 0===a?n:a,!t&&a>=n?e:Wa(e,t,a)},za=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff\ufe0e\ufe0f]/,Ga=function(e){return za.test(e)},Xa=function(e){return e.split('')},qa='\\ud800-\\udfff',Ha='(?:'+('['+('\\u0300-\\u036f'+'\\ufe20-\\ufe2f'+'\\u20d0-\\u20ff')+']')+'|'+'\\ud83c[\\udffb-\\udfff]'+')'+'?',Ka='['+'\\ufe0e\\ufe0f'+']?',Ya=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Za=function(e){return e.match(Ya)||[]},Qa=function(e){return Ga(e)?Za(e):Xa(e)},$a=function(e){return function(t){t=fa(t);var a=Ga(t)?Qa(t):void 0,n=a?a[0]:t.charAt(0),r=a?Va(a,1).join(''):t.slice(1);return n[e]()+r}},Ja=$a('toUpperCase'),en=Ja,tn=function(e){return en(fa(e).toLowerCase())},an=function(e,t,a,n){var r=-1,i=null==e?0:e.length;for(n&&i&&(a=e[++r]);++r<i;)a=t(a,e[r],r,e);return a},nn=function(e){return function(t){return null==e?void 0:e[t]}},rn=nn({À:'A',Á:'A',Â:'A',Ã:'A',Ä:'A',Å:'A',à:'a',á:'a',â:'a',ã:'a',ä:'a',å:'a',Ç:'C',ç:'c',Ð:'D',ð:'d',È:'E',É:'E',Ê:'E',Ë:'E',è:'e',é:'e',ê:'e',ë:'e',Ì:'I',Í:'I',Î:'I',Ï:'I',ì:'i',í:'i',î:'i',ï:'i',Ñ:'N',ñ:'n',Ò:'O',Ó:'O',Ô:'O',Õ:'O',Ö:'O',Ø:'O',ò:'o',ó:'o',ô:'o',õ:'o',ö:'o',ø:'o',Ù:'U',Ú:'U',Û:'U',Ü:'U',ù:'u',ú:'u',û:'u',ü:'u',Ý:'Y',ý:'y',ÿ:'y',Æ:'Ae',æ:'ae',Þ:'Th',þ:'th',ß:'ss',Ā:'A',Ă:'A',Ą:'A',ā:'a',ă:'a',ą:'a',Ć:'C',Ĉ:'C',Ċ:'C',Č:'C',ć:'c',ĉ:'c',ċ:'c',č:'c',Ď:'D',Đ:'D',ď:'d',đ:'d',Ē:'E',Ĕ:'E',Ė:'E',Ę:'E',Ě:'E',ē:'e',ĕ:'e',ė:'e',ę:'e',ě:'e',Ĝ:'G',Ğ:'G',Ġ:'G',Ģ:'G',ĝ:'g',ğ:'g',ġ:'g',ģ:'g',Ĥ:'H',Ħ:'H',ĥ:'h',ħ:'h',Ĩ:'I',Ī:'I',Ĭ:'I',Į:'I',İ:'I',ĩ:'i',ī:'i',ĭ:'i',į:'i',ı:'i',Ĵ:'J',ĵ:'j',Ķ:'K',ķ:'k',ĸ:'k',Ĺ:'L',Ļ:'L',Ľ:'L',Ŀ:'L',Ł:'L',ĺ:'l',ļ:'l',ľ:'l',ŀ:'l',ł:'l',Ń:'N',Ņ:'N',Ň:'N',Ŋ:'N',ń:'n',ņ:'n',ň:'n',ŋ:'n',Ō:'O',Ŏ:'O',Ő:'O',ō:'o',ŏ:'o',ő:'o',Ŕ:'R',Ŗ:'R',Ř:'R',ŕ:'r',ŗ:'r',ř:'r',Ś:'S',Ŝ:'S',Ş:'S',Š:'S',ś:'s',ŝ:'s',ş:'s',š:'s',Ţ:'T',Ť:'T',Ŧ:'T',ţ:'t',ť:'t',ŧ:'t',Ũ:'U',Ū:'U',Ŭ:'U',Ů:'U',Ű:'U',Ų:'U',ũ:'u',ū:'u',ŭ:'u',ů:'u',ű:'u',ų:'u',Ŵ:'W',ŵ:'w',Ŷ:'Y',ŷ:'y',Ÿ:'Y',Ź:'Z',Ż:'Z',Ž:'Z',ź:'z',ż:'z',ž:'z',Ĳ:'IJ',ĳ:'ij',Œ:'Oe',œ:'oe',ŉ:'\'n',ſ:'s'}),on=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sn=/[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]/g,dn=function(e){return e=fa(e),e&&e.replace(on,rn).replace(sn,'')},ln=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pn=function(e){return e.match(ln)||[]},un=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cn=function(e){return un.test(e)},fn='\\ud800-\\udfff',mn='\\u2700-\\u27bf',gn='a-z\\xdf-\\xf6\\xf8-\\xff',hn='A-Z\\xc0-\\xd6\\xd8-\\xde',yn='\\xac\\xb1\\xd7\\xf7'+'\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf'+'\\u2000-\\u206f'+' \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000',_n='[\'\u2019]',xn='\\d+',bn='['+gn+']',vn='[^'+fn+yn+xn+mn+gn+hn+']',En='['+hn+']',Sn='(?:'+_n+'(?:d|ll|m|re|s|t|ve))?',Tn='(?:'+_n+'(?:D|LL|M|RE|S|T|VE))?',kn='(?:'+('['+('\\u0300-\\u036f'+'\\ufe20-\\ufe2f'+'\\u20d0-\\u20ff')+']')+'|'+'\\ud83c[\\udffb-\\udfff]'+')'+'?',Rn='['+'\\ufe0e\\ufe0f'+']?',An=RegExp([En+'?'+bn+'+'+Sn+'(?='+'[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$'+')','(?:'+En+'|'+vn+')'+'+'+Tn+'(?='+'[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$'+')',En+'?'+('(?:'+bn+'|'+vn+')')+'+'+Sn,En+'+'+Tn,'\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])','\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])',xn,'(?:'+'[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]'+')'+(Rn+kn+('(?:'+'\\u200d'+'(?:'+'[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]'+')'+Rn+kn+')*'))].join('|'),'g'),wn=function(e){return e.match(An)||[]},In=function(e,t,a){return e=fa(e),t=a?void 0:t,void 0===t?cn(e)?wn(e):pn(e):e.match(t)||[]},Ln=/['’]/g,Pn=function(e){return function(t){return an(In(dn(t).replace(Ln,'')),e,'')}},Mn=Pn(function(e,t,a){return t=t.toLowerCase(),e+(a?tn(t):t)}),Cn=Mn,Nn=function(){if(!arguments.length)return[];var e=arguments[0];return Object(O.a)(e)?e:[e]},Bn=function(e){var t=Math[e];return function(e,a){if(e=$(e),a=null==a?0:I(te(a),292),a){var n=(fa(e)+'e').split('e'),r=t(n[0]+'e'+(+n[1]+a));return n=(fa(r)+'e').split('e'),+(n[0]+'e'+(+n[1]-a))}return t(e)}},Dn=Bn('ceil'),On=Dn,Un=function(e){var t=Ne(e);return t.__chain__=!0,t},Fn=a(8),jn=function(e,t,a){t=(a?Object(Fn.a)(e,t,a):void 0===t)?1:L(te(t),0);var n=null==e?0:e.length;if(!n||1>t)return[];for(var r=0,i=0,o=Array(w(n/t));r<n;)o[i++]=Wa(e,r,r+=t);return o},Wn=function(e,t,a){return e===e&&(void 0!==a&&(e=e<=a?e:a),void 0!==t&&(e=e>=t?e:t)),e},Vn=function(e,t,a){return void 0===a&&(a=t,t=void 0),void 0!==a&&(a=$(a),a=a===a?a:0),void 0!==t&&(t=$(t),t=t===t?t:0),Wn($(e),t,a)},zn=a(34),Gn=function(e,t){return e&&Object(Bt.a)(t,Xt(t),e)},Xn=function(e,t){return e&&Object(Bt.a)(t,Object(Zt.a)(t),e)},qn=a(59),Hn=function(e,t){for(var a=-1,n=null==e?0:e.length,r=0,i=[];++a<n;){var o=e[a];t(o,a,e)&&(i[r++]=o)}return i},Kn=function(){return[]},Yn=Object.prototype,Zn=Yn.propertyIsEnumerable,Qn=Object.getOwnPropertySymbols,$n=Qn?function(e){return null==e?[]:(e=Object(e),Hn(Qn(e),function(t){return Zn.call(e,t)}))}:Kn,Jn=$n,er=function(e,t){return Object(Bt.a)(e,Jn(e),t)},tr=a(38),ar=Object.getOwnPropertySymbols,nr=ar?function(e){for(var t=[];e;)xa(t,Jn(e)),e=Object(tr.a)(e);return t}:Kn,rr=nr,ir=function(e,t){return Object(Bt.a)(e,rr(e),t)},or=function(e,t,a){var n=t(e);return Object(O.a)(e)?n:xa(n,a(e))},sr=function(e){return or(e,Xt,Jn)},dr=function(e){return or(e,Zt.a,rr)},lr=Object(re.a)(ie.a,'DataView'),pr=lr,ur=a(40),cr=Object(re.a)(ie.a,'Promise'),fr=cr,mr=Object(re.a)(ie.a,'Set'),gr=mr,hr=a(35),yr='[object Map]',_r='[object Promise]',xr='[object Set]',br='[object WeakMap]',vr='[object DataView]',Er=Object(hr.a)(pr),Sr=Object(hr.a)(ur.a),Tr=Object(hr.a)(fr),kr=Object(hr.a)(gr),Rr=Object(hr.a)(se),Ar=P.a;(pr&&Ar(new pr(new ArrayBuffer(1)))!=vr||ur.a&&Ar(new ur.a)!=yr||fr&&Ar(fr.resolve())!=_r||gr&&Ar(new gr)!=xr||se&&Ar(new se)!=br)&&(Ar=function(e){var t=Object(P.a)(e),a=t=='[object Object]'?e.constructor:void 0,n=a?Object(hr.a)(a):'';if(n)switch(n){case Er:return vr;case Sr:return yr;case Tr:return _r;case kr:return xr;case Rr:return br;}return t});var wr=Ar,Ir=Object.prototype,Lr=Ir.hasOwnProperty,Pr=function(e){var t=e.length,a=new e.constructor(t);return t&&'string'==typeof e[0]&&Lr.call(e,'index')&&(a.index=e.index,a.input=e.input),a},Mr=a(45),Cr=function(e,t){var a=t?Object(Mr.a)(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)},Nr=/\w*$/,Br=function(e){var t=new e.constructor(e.source,Nr.exec(e));return t.lastIndex=e.lastIndex,t},Dr=B.a?B.a.prototype:void 0,Or=Dr?Dr.valueOf:void 0,Ur=function(e){return Or?Object(Or.call(e)):{}},Fr=a(60),jr=function(e,t,a){var n=e.constructor;return t==='[object ArrayBuffer]'?Object(Mr.a)(e):t==='[object Boolean]'||t==='[object Date]'?new n(+e):t==='[object DataView]'?Cr(e,a):t==='[object Float32Array]'||t==='[object Float64Array]'||t==='[object Int8Array]'||t==='[object Int16Array]'||t==='[object Int32Array]'||t==='[object Uint8Array]'||t==='[object Uint8ClampedArray]'||t==='[object Uint16Array]'||t==='[object Uint32Array]'?Object(Fr.a)(e,a):t==='[object Map]'?new n:t==='[object Number]'||t==='[object String]'?new n(e):t==='[object RegExp]'?Br(e):t==='[object Set]'?new n:t==='[object Symbol]'?Ur(e):void 0},Wr=a(63),Vr=a(21),zr=a(13),Gr=a(20),Xr=Gr.a&&Gr.a.isMap,qr=Xr?Object(zr.a)(Xr):function(e){return Object(M.a)(e)&&wr(e)=='[object Map]'},Hr=qr,Kr=Gr.a&&Gr.a.isSet,Yr=Kr?Object(zr.a)(Kr):function(e){return Object(M.a)(e)&&wr(e)=='[object Set]'},Zr=Yr,Qr=1,$r=2,Jr=4,ei='[object Arguments]',ti='[object Function]',ai='[object GeneratorFunction]',ni='[object Object]',ri={};ri[ei]=ri['[object Array]']=ri['[object ArrayBuffer]']=ri['[object DataView]']=ri['[object Boolean]']=ri['[object Date]']=ri['[object Float32Array]']=ri['[object Float64Array]']=ri['[object Int8Array]']=ri['[object Int16Array]']=ri['[object Int32Array]']=ri['[object Map]']=ri['[object Number]']=ri[ni]=ri['[object RegExp]']=ri['[object Set]']=ri['[object String]']=ri['[object Symbol]']=ri['[object Uint8Array]']=ri['[object Uint8ClampedArray]']=ri['[object Uint16Array]']=ri['[object Uint32Array]']=!0,ri['[object Error]']=ri[ti]=ri['[object WeakMap]']=!1;var ii=c,oi=function(e){return ii(e,4)},si=function(e){return ii(e,1|4)},di=function(e,t){return t='function'==typeof t?t:void 0,ii(e,1|4,t)},li=function(e,t){return t='function'==typeof t?t:void 0,ii(e,4,t)},pi=function(){return new Ie(this.value(),this.__chain__)},ui=function(e){for(var t=-1,a=null==e?0:e.length,n=0,r=[];++t<a;){var i=e[t];i&&(r[n++]=i)}return r},ci=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),a=arguments[0],n=e;n--;)t[n-1]=arguments[n];return xa(Object(O.a)(a)?Object(Le.a)(a):[a],Sa(t,1))};f.prototype.add=f.prototype.push=function(e){return this.__data__.set(e,'__lodash_hash_undefined__'),this},f.prototype.has=function(e){return this.__data__.has(e)};var fi=f,mi=function(e,t){for(var a=-1,n=null==e?0:e.length;++a<n;)if(t(e[a],a,e))return!0;return!1},gi=function(e,t){return e.has(t)},hi=function(e,t,a,n,r,i){var o=a&1,s=e.length,d=t.length;if(s!=d&&!(o&&d>s))return!1;var l=i.get(e);if(l&&i.get(t))return l==t;var p=-1,u=!0,c=a&2?new fi:void 0;for(i.set(e,t),i.set(t,e);++p<s;){var f=e[p],m=t[p];if(n)var g=o?n(m,f,p,t,e,i):n(f,m,p,e,t,i);if(void 0!==g){if(g)continue;u=!1;break}if(c){if(!mi(t,function(e,t){if(!gi(c,t)&&(f===e||r(f,e,a,n,i)))return c.push(t)})){u=!1;break}}else if(!(f===m||r(f,m,a,n,i))){u=!1;break}}return i['delete'](e),i['delete'](t),u},yi=a(51),_i=a(14),xi=function(e){var t=-1,a=Array(e.size);return e.forEach(function(e,n){a[++t]=[n,e]}),a},bi=function(e){var t=-1,a=Array(e.size);return e.forEach(function(e){a[++t]=e}),a},vi=B.a?B.a.prototype:void 0,Ei=vi?vi.valueOf:void 0,Si=function(e,t,a,n,r,i,o){switch(a){case'[object DataView]':if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case'[object ArrayBuffer]':return!!(e.byteLength==t.byteLength&&i(new yi.a(e),new yi.a(t)));case'[object Boolean]':case'[object Date]':case'[object Number]':return Object(_i.a)(+e,+t);case'[object Error]':return e.name==t.name&&e.message==t.message;case'[object RegExp]':case'[object String]':return e==t+'';case'[object Map]':var s=xi;case'[object Set]':var d=n&1;if(s||(s=bi),e.size!=t.size&&!d)return!1;var l=o.get(e);if(l)return l==t;n|=2,o.set(e,t);var p=hi(s(e),s(t),n,r,i,o);return o['delete'](e),p;case'[object Symbol]':if(Ei)return Ei.call(e)==Ei.call(t);}return!1},Ti=1,ki=Object.prototype,Ri=ki.hasOwnProperty,Ai=a(24),wi='[object Arguments]',Ii='[object Array]',Li='[object Object]',Pi=Object.prototype,Mi=Pi.hasOwnProperty,Ci=function(e,t,a,n,r,i){var o=Object(O.a)(e),s=Object(O.a)(t),d=o?Ii:wr(e),l=s?Ii:wr(t);d=d==wi?Li:d,l=l==wi?Li:l;var p=d==Li,u=l==Li,c=d==l;if(c&&Object(Vr.a)(e)){if(!Object(Vr.a)(t))return!1;o=!0,p=!1}if(c&&!p)return i||(i=new zn.a),o||Object(Ai.a)(e)?hi(e,t,a,n,r,i):Si(e,t,d,a,n,r,i);if(!(a&1)){var f=p&&Mi.call(e,'__wrapped__'),g=u&&Mi.call(t,'__wrapped__');if(f||g){var h=f?e.value():e,y=g?t.value():t;return i||(i=new zn.a),r(h,y,a,n,i)}}return!!c&&(i||(i=new zn.a),m(e,t,a,n,r,i))},Ni=g,Bi=1,Di=2,Oi=h,Ui=function(e){return e===e&&!Object(X.a)(e)},Fi=function(e){for(var t=Xt(e),a=t.length;a--;){var n=t[a],r=e[n];t[a]=[n,r,Ui(r)]}return t},ji=function(e,t){return function(a){return null!=a&&a[e]===t&&(t!==void 0||e in Object(a))}},Wi=function(e){var t=Fi(e);return 1==t.length&&t[0][2]?ji(t[0][0],t[0][1]):function(a){return a===e||Oi(a,e,t)}},Vi=a(31),zi=function(e,t,a){t=ma(t,e);for(var n=-1,r=t.length,i=!1,o;++n<r&&(o=ga(t[n]),!!(i=null!=e&&a(e,o)));)e=e[o];return i||++n!=r?i:(r=null==e?0:e.length,!!r&&Object(Vi.a)(r)&&Object(it.a)(o,r)&&(Object(O.a)(e)||Object(ba.a)(e)))},Gi=function(e,t){return null!=e&&zi(e,t,y)},Xi=function(e,t){return ia(e)&&Ui(t)?ji(ga(e),t):function(a){var n=ya(a,e);return n===void 0&&n===t?Gi(a,e):Ni(t,n,1|2)}},qi=function(e){return function(t){return null==t?void 0:t[e]}},Hi=function(e){return function(t){return ha(t,e)}},Ki=function(e){return ia(e)?qi(ga(e)):Hi(e)},Yi=function(e){return'function'==typeof e?e:null==e?ne.a:'object'==typeof e?Object(O.a)(e)?Xi(e[0],e[1]):Wi(e):Ki(e)},Zi=function(e){var t=null==e?0:e.length;return e=t?D(e,function(e){if('function'!=typeof e[1])throw new TypeError('Expected a function');return[Yi(e[0]),e[1]]}):[],Object(wa.a)(function(a){for(var n=-1,r;++n<t;)if(r=e[n],Object(ge.a)(r[0],this,a))return Object(ge.a)(r[1],this,a)})},Qi=_,$i=function(e){var t=Xt(e);return function(a){return Qi(a,e,t)}},Ji=function(e){return $i(ii(e,1))},eo=function(e,t){return null==t||Qi(e,t,Xt(t))},to=a(36),ao=function(e,t,a,n){for(var r=-1,i=null==e?0:e.length;++r<i;){var o=e[r];t(n,o,a(o),e)}return n},no=a(44),ro=function(e,t){return e&&Object(no.a)(e,t,Xt)},io=function(e,t){return function(a,n){if(null==a)return a;if(!Object(Ot.a)(a))return e(a,n);for(var r=a.length,i=t?r:-1,o=Object(a);(t?i--:++i<r)&&!(!1===n(o[i],i,o)););return a}},oo=io(ro),so=oo,lo=function(e,t,a,n){return so(e,function(e,r,i){t(n,e,a(e),i)}),n},po=function(e,t){return function(a,n){var r=Object(O.a)(a)?ao:lo,i=t?t():{};return r(a,e,Yi(n,2),i)}},uo=Object.prototype,co=uo.hasOwnProperty,fo=po(function(e,t,a){co.call(e,a)?++e[a]:Object(Da.a)(e,a,1)}),mo=fo,go=function(e,t){var a=Object(ce.a)(e);return null==t?a:Gn(a,t)},ho=8;x.placeholder={};var yo=x,_o=16;b.placeholder={};var xo=b,bo=function(){return ie.a.Date.now()},vo='Expected a function',Eo=L,So=I,To=v,ko=function(e,t){return null==e||e!==e?t:e},Ro=Object.prototype,Ao=Ro.hasOwnProperty,wo=Object(wa.a)(function(e,t){e=Object(e);var a=-1,n=t.length,r=2<n?t[2]:void 0;for(r&&Object(Fn.a)(t[0],t[1],r)&&(n=1);++a<n;)for(var i=t[a],o=Object(Zt.a)(i),s=-1,d=o.length;++s<d;){var l=o[s],p=e[l];(void 0===p||Object(_i.a)(p,Ro[l])&&!Ao.call(e,l))&&(e[l]=i[l])}return e}),Io=wo,Lo=a(53),Po=function(e,t,a){if('function'!=typeof e)throw new TypeError('Expected a function');return setTimeout(function(){e.apply(void 0,a)},t)},Mo=Object(wa.a)(function(e,t){return Po(e,1,t)}),Co=Mo,No=Object(wa.a)(function(e,t,a){return Po(e,$(t)||0,a)}),Bo=No,Do=function(e,t,a){for(var n=-1,r=null==e?0:e.length;++n<r;)if(a(t,e[n]))return!0;return!1},Oo=function(e,t,a,n){var r=-1,i=Ze,o=!0,s=e.length,d=[],l=t.length;if(!s)return d;a&&(t=D(t,Object(zr.a)(a))),n?(i=Do,o=!1):t.length>=200&&(i=gi,o=!1,t=new fi(t));outer:for(;++r<s;){var p=e[r],u=null==a?p:a(p);if(p=n||0!==p?p:0,o&&u===u){for(var c=l;c--;)if(t[c]===u)continue outer;d.push(p)}else i(t,u,n)||d.push(p)}return d},Uo=a(4),Fo=Object(wa.a)(function(e,t){return Object(Uo.a)(e)?Oo(e,Sa(t,1,Uo.a,!0)):[]}),jo=Fo,Wo=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},Vo=Object(wa.a)(function(e,t){var a=Wo(t);return Object(Uo.a)(a)&&(a=void 0),Object(Uo.a)(e)?Oo(e,Sa(t,1,Uo.a,!0),Yi(a,2)):[]}),zo=Vo,Go=Object(wa.a)(function(e,t){var a=Wo(t);return Object(Uo.a)(a)&&(a=void 0),Object(Uo.a)(e)?Oo(e,Sa(t,1,Uo.a,!0),void 0,a):[]}),Xo=Go,qo=V(function(e,t){return e/t},1),Ho=qo,Ko=function(e,t,a){var n=null==e?0:e.length;return n?(t=a||void 0===t?1:te(t),Wa(e,0>t?0:t,n)):[]},Yo=function(e,t,a){var n=null==e?0:e.length;return n?(t=a||void 0===t?1:te(t),t=n-t,Wa(e,0,0>t?0:t)):[]},Zo=function(e,t,a,n){for(var r=e.length,i=n?r:-1;(n?i--:++i<r)&&t(e[i],i,e););return a?Wa(e,n?0:i,n?i+1:r):Wa(e,n?i+1:0,n?r:i)},Qo=function(e,t){return e&&e.length?Zo(e,Yi(t,3),!0,!0):[]},$o=function(e,t){return e&&e.length?Zo(e,Yi(t,3),!0):[]},Jo=function(e){return'function'==typeof e?e:ne.a},es=function(e,t){var a=Object(O.a)(e)?Xe:so;return a(e,Jo(t))},ts=function(e,t){for(var a=null==e?0:e.length;a--&&!(!1===t(e[a],a,e)););return e},as=a(58),ns=Object(as.a)(!0),rs=ns,is=function(e,t){return e&&rs(e,t,Xt)},os=io(is,!0),ss=os,ds=function(e,t){var a=Object(O.a)(e)?ts:ss;return a(e,Jo(t))},ls=function(e,t,a){e=fa(e),t=W(t);var n=e.length;a=void 0===a?n:Wn(te(a),0,n);var r=a;return a-=t.length,0<=a&&e.slice(a,r)==t},ps=function(e,t){return D(t,function(t){return[t,e[t]]})},us=function(e){var t=-1,a=Array(e.size);return e.forEach(function(e){a[++t]=[e,e]}),a},cs=function(e){return function(t){var a=wr(t);return a=='[object Map]'?xi(t):a=='[object Set]'?us(t):ps(t,e(t))}},fs=cs(Xt),ms=fs,gs=cs(Zt.a),hs=gs,ys=nn({"&":'&amp;',"<":'&lt;',">":'&gt;','"':'&quot;',"'":'&#39;'}),_s=/[&<>"']/g,xs=RegExp(_s.source),bs=function(e){return e=fa(e),e&&xs.test(e)?e.replace(_s,ys):e},vs=/[\\^$.*+?()[\]{}|]/g,Es=RegExp(vs.source),Ss=function(e){return e=fa(e),e&&Es.test(e)?e.replace(vs,'\\$&'):e},Ts=function(e,t){for(var a=-1,n=null==e?0:e.length;++a<n;)if(!t(e[a],a,e))return!1;return!0},ks=function(e,t){var a=!0;return so(e,function(e,n,r){return a=!!t(e,n,r),a}),a},Rs=function(e,t,a){var n=Object(O.a)(e)?Ts:ks;return a&&Object(Fn.a)(e,t,a)&&(t=void 0),n(e,Yi(t,3))},As=function(e){return e?Wn(te(e),0,4294967295):0},ws=function(e,t,a,n){var r=e.length;for(a=te(a),0>a&&(a=-a>r?0:r+a),n=void 0===n||n>r?r:te(n),0>n&&(n+=r),n=a>n?0:As(n);a<n;)e[a++]=t;return e},Is=function(e,t,a,n){var r=null==e?0:e.length;return r?(a&&'number'!=typeof a&&Object(Fn.a)(e,t,a)&&(a=0,n=r),ws(e,t,a,n)):[]},Ls=function(e,t){var a=[];return so(e,function(e,n,r){t(e,n,r)&&a.push(e)}),a},Ps=function(e,t){var a=Object(O.a)(e)?Hn:Ls;return a(e,Yi(t,3))},Ms=function(e){return function(t,a,n){var r=Object(t);if(!Object(Ot.a)(t)){var i=Yi(a,3);t=Xt(t),a=function(e){return i(r[e],e,r)}}var o=e(t,a,n);return-1<o?r[i?t[o]:o]:void 0}},Cs=function(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var r=null==a?0:te(a);return 0>r&&(r=L(n+r,0)),qe(e,Yi(t,3),r)},Ns=Ms(Cs),Bs=Ns,Ds=function(e,t,a){var n;return a(e,function(e,a,r){if(t(e,a,r))return n=a,!1}),n},Os=function(e,t){return Ds(e,Yi(t,3),ro)},Us=function(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var r=n-1;return void 0!==a&&(r=te(a),r=0>a?L(n+r,0):I(r,n-1)),qe(e,Yi(t,3),r,!0)},Fs=Ms(Us),js=Fs,Ws=function(e,t){return Ds(e,Yi(t,3),is)},Vs=function(e){return e&&e.length?e[0]:void 0},zs=function(e,t){var a=-1,n=Object(Ot.a)(e)?Array(e.length):[];return so(e,function(e,r,i){n[++a]=t(e,r,i)}),n},Gs=function(e,t){var a=Object(O.a)(e)?D:zs;return a(e,Yi(t,3))},Xs=function(e,t){return Sa(Gs(e,t),1)},qs=function(e,t){return Sa(Gs(e,t),1/0)},Hs=function(e,t,a){return a=void 0===a?1:te(a),Sa(Gs(e,t),a)},Ks=function(e){var t=null==e?0:e.length;return t?Sa(e,1/0):[]},Ys=function(e,t){var a=null==e?0:e.length;return a?(t=void 0===t?1:te(t),Sa(e,t)):[]},Zs=function(e){return Mt(e,512)},Qs=Bn('floor'),$s=Qs,Js=function(e){return Ra(function(t){var a=t.length,n=a,r=Ie.prototype.thru;for(e&&t.reverse();n--;){var i=t[n];if('function'!=typeof i)throw new TypeError('Expected a function');if(r&&!o&&'wrapper'==we(i))var o=new Ie([],!0)}for(n=o?n:a;++n<a;){i=t[n];var s=we(i),d='wrapper'==s?Te(i):void 0;o=d&&Be(d[0])&&d[1]==(128|8|32|256)&&!d[4].length&&1==d[9]?o[we(d[0])].apply(o,d[3]):1==i.length&&Be(i)?o[s]():o.thru(i)}return function(){var e=arguments,n=e[0];if(o&&1==e.length&&Object(O.a)(n))return o.plant(n).value();for(var r=0,i=a?t[r].apply(this,e):n;++r<a;)i=t[r].call(this,i);return i}})},ed=Js(),td=ed,ad=Js(!0),nd=ad,rd=function(e,t){return null==e?e:Object(no.a)(e,Jo(t),Zt.a)},id=function(e,t){return null==e?e:rs(e,Jo(t),Zt.a)},od=function(e,t){return e&&ro(e,Jo(t))},sd=function(e,t){return e&&is(e,Jo(t))},dd=function(e){for(var t=-1,a=null==e?0:e.length,n={};++t<a;){var r=e[t];n[r[0]]=r[1]}return n},ld=a(16),pd=function(e,t){return Hn(t,function(t){return Object(ld.a)(e[t])})},ud=function(e){return null==e?[]:pd(e,Xt(e))},cd=function(e){return null==e?[]:pd(e,Object(Zt.a)(e))},fd=Object.prototype,md=fd.hasOwnProperty,gd=po(function(e,t,a){md.call(e,a)?e[a].push(t):Object(Da.a)(e,a,[t])}),hd=gd,yd=function(e,t){return e>t},_d=function(e){return function(t,a){return'string'==typeof t&&'string'==typeof a||(t=$(t),a=$(a)),e(t,a)}},xd=_d(yd),gt=xd,bd=_d(function(e,t){return e>=t}),vd=bd,Ed=Object.prototype,Sd=Ed.hasOwnProperty,Td=function(e,t){return null!=e&&Sd.call(e,t)},kd=function(e,t){return null!=e&&zi(e,t,Td)},Rd=function(e,t,a){return e>=I(t,a)&&e<L(t,a)},Ad=function(e,t,a){return t=ee(t),void 0===a?(a=t,t=0):a=ee(a),e=$(e),Rd(e,t,a)},wd=function(e){return'string'==typeof e||!Object(O.a)(e)&&Object(M.a)(e)&&Object(P.a)(e)=='[object String]'},Id=function(e,t){return D(t,function(t){return e[t]})},Ld=function(e){return null==e?[]:Id(e,Xt(e))},Pd=function(e,t,a,n){e=Object(Ot.a)(e)?e:Ld(e),a=a&&!n?te(a):0;var r=e.length;return 0>a&&(a=L(r+a,0)),wd(e)?a<=r&&-1<e.indexOf(t,a):!!r&&-1<Ye(e,t,a)},Md=function(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var r=null==a?0:te(a);return 0>r&&(r=L(n+r,0)),Ye(e,t,r)},Cd=function(e){var t=null==e?0:e.length;return t?Wa(e,0,-1):[]},Nd=function(e,t,a){for(var n=a?Do:Ze,r=e[0].length,i=e.length,o=i,s=Array(i),d=Infinity,l=[];o--;){var p=e[o];o&&t&&(p=D(p,Object(zr.a)(t))),d=I(p.length,d),s[o]=!a&&(t||120<=r&&120<=p.length)?new fi(o&&p):void 0}p=e[0];var u=-1,c=s[0];outer:for(;++u<r&&l.length<d;){var f=p[u],m=t?t(f):f;if(f=a||0!==f?f:0,c?!gi(c,m):!n(l,m,a)){for(o=i;--o;){var g=s[o];if(g?!gi(g,m):!n(e[o],m,a))continue outer}c&&c.push(m),l.push(f)}}return l},Bd=function(e){return Object(Uo.a)(e)?e:[]},Dd=Object(wa.a)(function(e){var t=D(e,Bd);return t.length&&t[0]===e[0]?Nd(t):[]}),Od=Dd,Ud=Object(wa.a)(function(e){var t=Wo(e),a=D(e,Bd);return t===Wo(a)?t=void 0:a.pop(),a.length&&a[0]===e[0]?Nd(a,Yi(t,2)):[]}),Fd=Ud,jd=Object(wa.a)(function(e){var t=Wo(e),a=D(e,Bd);return t='function'==typeof t?t:void 0,t&&a.pop(),a.length&&a[0]===e[0]?Nd(a,void 0,t):[]}),Wd=jd,Vd=function(e,t,a,n){return ro(e,function(e,r,i){t(n,a(e),r,i)}),n},zd=function(e,t){return function(a,n){return Vd(a,e,t(n),{})}},Gd=Object.prototype,Xd=Gd.toString,qd=zd(function(e,t,a){null!=t&&'function'!=typeof t.toString&&(t=Xd.call(t)),e[t]=a},Object(to.a)(ne.a)),Hd=qd,Kd=Object.prototype,Yd=Kd.hasOwnProperty,Zd=Kd.toString,Qd=zd(function(e,t,a){null!=t&&'function'!=typeof t.toString&&(t=Zd.call(t)),Yd.call(e,t)?e[t].push(a):e[t]=[a]},Yi),$d=Qd,Jd=function(e,t){return 2>t.length?e:ha(e,Wa(t,0,-1))},el=function(e,t,a){t=ma(t,e),e=Jd(e,t);var n=null==e?e:e[ga(Wo(t))];return null==n?void 0:Object(ge.a)(n,e,a)},tl=Object(wa.a)(el),al=tl,nl=Object(wa.a)(function(e,t,a){var n=-1,r=Object(Ot.a)(e)?Array(e.length):[];return so(e,function(e){r[++n]='function'==typeof t?Object(ge.a)(t,e,a):el(e,t,a)}),r}),rl=nl,il=Gr.a&&Gr.a.isArrayBuffer,ol=il?Object(zr.a)(il):function(e){return Object(M.a)(e)&&Object(P.a)(e)=='[object ArrayBuffer]'},sl=ol,dl=function(e){return!0===e||!1===e||Object(M.a)(e)&&Object(P.a)(e)=='[object Boolean]'},ll=Gr.a&&Gr.a.isDate,pl=ll?Object(zr.a)(ll):function(e){return Object(M.a)(e)&&Object(P.a)(e)=='[object Date]'},ul=pl,cl=function(e){return Object(M.a)(e)&&1===e.nodeType&&!Object(Ia.a)(e)},fl=Object.prototype,ml=fl.hasOwnProperty,gl=function(e){if(null==e)return!0;if(Object(Ot.a)(e)&&(Object(O.a)(e)||'string'==typeof e||'function'==typeof e.splice||Object(Vr.a)(e)||Object(Ai.a)(e)||Object(ba.a)(e)))return!e.length;var t=wr(e);if(t=='[object Map]'||t=='[object Set]')return!e.size;if(Object(Ut.a)(e))return!Gt(e).length;for(var a in e)if(ml.call(e,a))return!1;return!0},hl=function(e,t){return Ni(e,t)},yl=function(e,t,a){a='function'==typeof a?a:void 0;var n=a?a(e,t):void 0;return n===void 0?Ni(e,t,void 0,a):!!n},_l=ie.a.isFinite,xl=function(e){return'number'==typeof e&&_l(e)},bl=function(e){return'number'==typeof e&&e==te(e)},vl=function(e,t){return e===t||Oi(e,t,Fi(t))},El=function(e,t,a){return a='function'==typeof a?a:void 0,Oi(e,t,Fi(t),a)},Sl=function(e){return'number'==typeof e||Object(M.a)(e)&&Object(P.a)(e)=='[object Number]'},Tl=function(e){return Sl(e)&&e!=+e},kl=a(64),Rl=a(50),Al=a(37),wl=Rl.a?ld.a:Al.a,Il=function(e){if(wl(e))throw new Error('Unsupported core-js use. Try https://npms.io/search?q=ponyfill.');return Object(kl.a)(e)},Ll=function(e){return null==e},Pl=function(e){return null===e},Ml=Gr.a&&Gr.a.isRegExp,Cl=Ml?Object(zr.a)(Ml):function(e){return Object(M.a)(e)&&Object(P.a)(e)=='[object RegExp]'},Nl=Cl,Bl=9007199254740991,Dl=function(e){return bl(e)&&e>=-Bl&&e<=Bl},Ol=function(e){return e===void 0},Ul=function(e){return Object(M.a)(e)&&wr(e)=='[object WeakMap]'},Fl=function(e){return Object(M.a)(e)&&Object(P.a)(e)=='[object WeakSet]'},jl=function(e){return Yi('function'==typeof e?e:ii(e,1))},Wl=Array.prototype,Vl=Wl.join,zl=function(e,t){return null==e?'':Vl.call(e,t)},Gl=Pn(function(e,t,a){return e+(a?'-':'')+t.toLowerCase()}),Xl=Gl,ql=po(function(e,t,a){Object(Da.a)(e,a,t)}),Hl=ql,Kl=function(e,t,a){for(var n=a+1;n--;)if(e[n]===t)return n;return n},Yl=function(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var r=n;return void 0!==a&&(r=te(a),r=0>r?L(n+r,0):I(r,n-1)),t===t?Kl(e,t,r):qe(e,He,r,!0)},Zl=Pn(function(e,t,a){return e+(a?' ':'')+t.toLowerCase()}),Ql=Zl,$l=$a('toLowerCase'),Jl=$l,ep=function(e,t){return e<t},tp=_d(ep),lt=tp,ap=_d(function(e,t){return e<=t}),np=ap,rp=function(e,t){var a={};return t=Yi(t,3),ro(e,function(e,n,r){Object(Da.a)(a,t(e,n,r),e)}),a},ip=function(e,t){var a={};return t=Yi(t,3),ro(e,function(e,n,r){Object(Da.a)(a,n,t(e,n,r))}),a},op=function(e){return Wi(ii(e,1))},sp=function(e,t){return Xi(e,ii(t,1))},dp=function(e,t,a){for(var n=-1,r=e.length;++n<r;){var i=e[n],o=t(i);if(null!=o&&(s===void 0?o===o&&!C(o):a(o,s)))var s=o,d=i}return d},lp=function(e){return e&&e.length?dp(e,ne.a,yd):void 0},pp=function(e,t){return e&&e.length?dp(e,Yi(t,2),yd):void 0},up=function(e,t){for(var a=-1,n=e.length,r;++a<n;){var i=t(e[a]);i!==void 0&&(r=r===void 0?i:r+i)}return r},cp=function(e,t){var a=null==e?0:e.length;return a?up(e,t)/a:0/0},fp=function(e){return cp(e,ne.a)},mp=function(e,t){return cp(e,Yi(t,2))},gp=a(47),hp=Object(Dt.a)(function(e,t,a){Object(gp.a)(e,t,a)}),yp=hp,_p=a(43),xp=Object(wa.a)(function(e,t){return function(a){return el(a,e,t)}}),bp=xp,vp=Object(wa.a)(function(e,t){return function(a){return el(e,a,t)}}),Ep=vp,Sp=function(e){return e&&e.length?dp(e,ne.a,ep):void 0},Tp=function(e,t){return e&&e.length?dp(e,Yi(t,2),ep):void 0},kp=E,Rp=V(function(e,t){return e*t},1),Ap=Rp,wp=function(e){if('function'!=typeof e)throw new TypeError('Expected a function');return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2]);}return!e.apply(this,t)}},Ip=function(e){for(var t=[],a;!(a=e.next()).done;)t.push(a.value);return t},Lp=B.a?B.a.iterator:void 0,Pp=function(e){if(!e)return[];if(Object(Ot.a)(e))return wd(e)?Qa(e):Object(Le.a)(e);if(Lp&&e[Lp])return Ip(e[Lp]());var t=wr(e),a=t=='[object Map]'?xi:t=='[object Set]'?bi:Ld;return a(e)},Mp=function(){this.__values__===void 0&&(this.__values__=Pp(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}},Cp=function(e,t){var a=e.length;if(a)return t+=0>t?a:0,Object(it.a)(t,a)?e[t]:void 0},Np=function(e,t){return e&&e.length?Cp(e,te(t)):void 0},Bp=function(e){return e=te(e),Object(wa.a)(function(t){return Cp(t,e)})},Dp=function(e,t){return t=ma(t,e),e=Jd(e,t),null==e||delete e[ga(Wo(t))]},Op=function(e){return Object(Ia.a)(e)?void 0:e},Up=Ra(function(e,t){var a={};if(null==e)return a;var n=!1;t=D(t,function(t){return t=ma(t,e),n||(n=1<t.length),t}),Object(Bt.a)(e,dr(e),a),n&&(a=ii(a,1|2|4,Op));for(var r=t.length;r--;)Dp(a,t[r]);return a}),Fp=Up,jp=function(e,t,a,n){if(!Object(X.a)(e))return e;t=ma(t,e);for(var r=-1,i=t.length,o=e;null!=o&&++r<i;){var s=ga(t[r]),d=a;if(r!=i-1){var l=o[s];d=n?n(l,s,o):void 0,d===void 0&&(d=Object(X.a)(l)?l:Object(it.a)(t[r+1])?[]:{})}Object(Nt.a)(o,s,d),o=o[s]}return e},Wp=function(e,t,a){for(var n=-1,r=t.length,i={};++n<r;){var o=t[n],s=ha(e,o);a(s,o)&&jp(i,ma(o,e),s)}return i},Vp=function(e,t){if(null==e)return{};var a=D(dr(e),function(e){return[e]});return t=Yi(t),Wp(e,a,function(e,a){return t(e,a[0])})},zp=function(e,t){return Vp(e,wp(Yi(t)))},Gp=function(e){return Ca(2,e)},Xp=function(e,t){var a=e.length;for(e.sort(t);a--;)e[a]=e[a].value;return e},qp=function(e,t){if(e!==t){var a=e!==void 0,n=null===e,r=e===e,i=C(e),o=t!==void 0,s=null===t,d=t===t,l=C(t);if(!s&&!l&&!i&&e>t||i&&o&&d&&!s&&!l||n&&o&&d||!a&&d||!r)return 1;if(!n&&!i&&!l&&e<t||l&&a&&r&&!n&&!i||s&&a&&r||!o&&r||!d)return-1}return 0},Hp=function(e,t,a){for(var n=-1,r=e.criteria,i=t.criteria,o=r.length,s=a.length;++n<o;){var d=qp(r[n],i[n]);if(d){if(n>=s)return d;var l=a[n];return d*('desc'==l?-1:1)}}return e.index-t.index},Kp=function(e,t,a){var n=-1;t=D(t.length?t:[ne.a],Object(zr.a)(Yi));var r=zs(e,function(e){var a=D(t,function(t){return t(e)});return{criteria:a,index:++n,value:e}});return Xp(r,function(e,t){return Hp(e,t,a)})},Yp=function(e,t,a,n){return null==e?[]:(Object(O.a)(t)||(t=null==t?[]:[t]),a=n?void 0:a,Object(O.a)(a)||(a=null==a?[]:[a]),Kp(e,t,a))},Zp=function(e){return Ra(function(t){return t=D(t,Object(zr.a)(Yi)),Object(wa.a)(function(a){var n=this;return e(t,function(e){return Object(ge.a)(e,n,a)})})})},Qp=Zp(D),$p=Qp,Jp=wa.a,eu=Jp(function(e,t){t=1==t.length&&Object(O.a)(t[0])?D(t[0],Object(zr.a)(Yi)):D(Sa(t,1),Object(zr.a)(Yi));var a=t.length;return Object(wa.a)(function(n){for(var r=-1,i=I(n.length,a);++r<i;)n[r]=t[r].call(this,n[r]);return Object(ge.a)(e,this,n)})}),tu=eu,au=Zp(Ts),nu=au,ru=Zp(mi),iu=ru,ou=function(e,t){var a='';if(!e||1>t||t>9007199254740991)return a;do t%2&&(a+=e),t=A(t/2),t&&(e+=e);while(t);return a},su=qi('length'),du='\\ud800-\\udfff',lu='(?:'+('['+('\\u0300-\\u036f'+'\\ufe20-\\ufe2f'+'\\u20d0-\\u20ff')+']')+'|'+'\\ud83c[\\udffb-\\udfff]'+')'+'?',pu='['+'\\ufe0e\\ufe0f'+']?',uu=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,cu=function(e){for(var t=uu.lastIndex=0;uu.test(e);)++t;return t},fu=function(e){return Ga(e)?cu(e):su(e)},mu=function(e,t){t=t===void 0?' ':W(t);var a=t.length;if(2>a)return a?ou(t,e):t;var n=ou(t,w(e/fu(t)));return Ga(t)?Va(Qa(n),0,e).join(''):n.slice(0,e)},gu=function(e,t,a){e=fa(e),t=te(t);var n=t?fu(e):0;if(!t||n>=t)return e;var r=(t-n)/2;return mu(A(r),a)+e+mu(w(r),a)},hu=function(e,t,a){e=fa(e),t=te(t);var n=t?fu(e):0;return t&&n<t?e+mu(t-n,a):e},yu=function(e,t,a){e=fa(e),t=te(t);var n=t?fu(e):0;return t&&n<t?mu(t-n,a)+e:e},_u=/^\s+/,xu=ie.a.parseInt,bu=function(e,t,a){return a||null==t?t=0:t&&(t=+t),xu(fa(e).replace(_u,''),t||0)},vu=Object(wa.a)(function(e,t){var a=dt(t,rt(vu));return Mt(e,32,void 0,t,a)});vu.placeholder={};var Eu=vu,Su=Object(wa.a)(function(e,t){var a=dt(t,rt(Su));return Mt(e,64,void 0,t,a)});Su.placeholder={};var Tu=Su,ku=po(function(e,t,a){e[a?0:1].push(t)},function(){return[[],[]]}),Ru=ku,Au=function(e,t){return Wp(e,t,function(t,a){return Gi(e,a)})},wu=Ra(function(e,t){return null==e?{}:Au(e,t)}),Iu=wu,Lu=function(e){for(var t=this,a,n;t instanceof xe;){n=Pe(t),n.__index__=0,n.__values__=void 0,a?r.__wrapped__=n:a=n;var r=n;t=t.__wrapped__}return r.__wrapped__=e,a},Pu=function(e){return function(t){return null==e?void 0:ha(e,t)}},Mu=function(e,t,a,n){for(var r=a-1,i=e.length;++r<i;)if(n(e[r],t))return r;return-1},Cu=Array.prototype,Nu=Cu.splice,Bu=function(e,t,a,n){var r=n?Mu:Ye,i=-1,o=t.length,s=e;for(e===t&&(t=Object(Le.a)(t)),a&&(s=D(e,Object(zr.a)(a)));++i<o;)for(var d=0,l=t[i],p=a?a(l):l;-1<(d=r(s,p,d,n));)s!==e&&Nu.call(s,d,1),Nu.call(e,d,1);return e},Du=function(e,t){return e&&e.length&&t&&t.length?Bu(e,t):e},Ou=Object(wa.a)(Du),Uu=Ou,Fu=function(e,t,a){return e&&e.length&&t&&t.length?Bu(e,t,Yi(a,2)):e},ju=function(e,t,a){return e&&e.length&&t&&t.length?Bu(e,t,void 0,a):e},Wu=Array.prototype,Vu=Wu.splice,zu=function(e,t){for(var a=e?t.length:0,n=a-1;a--;){var r=t[a];if(a==n||r!==i){var i=r;Object(it.a)(r)?Vu.call(e,r,1):Dp(e,r)}}return e},Gu=Ra(function(e,t){var a=null==e?0:e.length,n=_a(e,t);return zu(e,D(t,function(e){return Object(it.a)(e,a)?+e:e}).sort(qp)),n}),Xu=Gu,qu=Math.random,Hu=function(e,t){return e+A(qu()*(t-e+1))},Ku=parseFloat,Yu=Math.random,Zu=function(e,t,a){if(a&&'boolean'!=typeof a&&Object(Fn.a)(e,t,a)&&(t=a=void 0),void 0===a&&('boolean'==typeof t?(a=t,t=void 0):'boolean'==typeof e&&(a=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ee(e),void 0===t?(t=e,e=0):t=ee(t)),e>t){var n=e;e=t,t=n}if(a||e%1||t%1){var r=Yu();return I(e+r*(t-e+Ku('1e-'+((r+'').length-1))),t)}return Hu(e,t)},Qu=function(e,t,a,n){for(var r=-1,i=L(w((t-e)/(a||1)),0),o=Array(i);i--;)o[n?i:++r]=e,e+=a;return o},$u=function(e){return function(t,a,n){return n&&'number'!=typeof n&&Object(Fn.a)(t,a,n)&&(a=n=void 0),t=ee(t),void 0===a?(a=t,t=0):a=ee(a),n=void 0===n?t<a?1:-1:ee(n),Qu(t,a,n,e)}},Ju=$u(),ec=Ju,tc=$u(!0),ac=tc,nc=Ra(function(e,t){return Mt(e,256,void 0,void 0,void 0,t)}),rc=nc,ic=function(e,t,a,n,r){return r(e,function(e,r,i){a=n?(n=!1,e):t(a,e,r,i)}),a},oc=function(e,t,a){var n=Object(O.a)(e)?an:ic,r=3>arguments.length;return n(e,Yi(t,4),a,r,so)},sc=function(e,t,a,n){var r=null==e?0:e.length;for(n&&r&&(a=e[--r]);r--;)a=t(a,e[r],r,e);return a},dc=function(e,t,a){var n=Object(O.a)(e)?sc:ic,r=3>arguments.length;return n(e,Yi(t,4),a,r,ss)},lc=function(e,t){var a=Object(O.a)(e)?Hn:Ls;return a(e,wp(Yi(t,3)))},pc=function(e,t){var a=[];if(!(e&&e.length))return a;var n=-1,r=[],i=e.length;for(t=Yi(t,3);++n<i;){var o=e[n];t(o,n,e)&&(a.push(o),r.push(n))}return zu(e,r),a},uc=function(e,t,a){return t=(a?Object(Fn.a)(e,t,a):void 0===t)?1:te(t),ou(fa(e),t)},cc=function(){var e=arguments,t=fa(e[0]);return 3>e.length?t:t.replace(e[1],e[2])},fc=function(e,t){if('function'!=typeof e)throw new TypeError('Expected a function');return t=void 0===t?t:te(t),Object(wa.a)(e,t)},mc=function(e,t,a){t=ma(t,e);var n=-1,r=t.length;for(r||(r=1,e=void 0);++n<r;){var i=null==e?void 0:e[ga(t[n])];i===void 0&&(n=r,i=a),e=Object(ld.a)(i)?i.call(e):i}return e},gc=Array.prototype,hc=gc.reverse,yc=function(e){return null==e?e:hc.call(e)},_c=Bn('round'),xc=_c,bc=function(e){var t=e.length;return t?e[Hu(0,t-1)]:void 0},vc=function(e){return bc(Ld(e))},Ec=function(e){var t=Object(O.a)(e)?bc:vc;return t(e)},Sc=function(e,t){var a=-1,n=e.length;for(t=void 0===t?n:t;++a<t;){var r=Hu(a,n-1),i=e[r];e[r]=e[a],e[a]=i}return e.length=t,e},Tc=function(e,t){return Sc(Object(Le.a)(e),Wn(t,0,e.length))},kc=function(e,t){var a=Ld(e);return Sc(a,Wn(t,0,a.length))},Rc=function(e,t,a){t=(a?Object(Fn.a)(e,t,a):void 0===t)?1:te(t);var n=Object(O.a)(e)?Tc:kc;return n(e,t)},Ac=function(e,t,a){return null==e?e:jp(e,t,a)},wc=function(e,t,a,n){return n='function'==typeof n?n:void 0,null==e?e:jp(e,t,a,n)},Ic=function(e){return Sc(Object(Le.a)(e))},Lc=function(e){return Sc(Ld(e))},Pc=function(e){var t=Object(O.a)(e)?Ic:Lc;return t(e)},Mc=function(e){if(null==e)return 0;if(Object(Ot.a)(e))return wd(e)?fu(e):e.length;var t=wr(e);return t=='[object Map]'||t=='[object Set]'?e.size:Gt(e).length},Cc=function(e,t,a){var n=null==e?0:e.length;return n?(a&&'number'!=typeof a&&Object(Fn.a)(e,t,a)?(t=0,a=n):(t=null==t?0:te(t),a=void 0===a?n:te(a)),Wa(e,t,a)):[]},Nc=Pn(function(e,t,a){return e+(a?'_':'')+t.toLowerCase()}),Bc=Nc,Dc=function(e,t){var a;return so(e,function(e,n,r){return a=t(e,n,r),!a}),!!a},Oc=function(e,t,a){var n=Object(O.a)(e)?mi:Dc;return a&&Object(Fn.a)(e,t,a)&&(t=void 0),n(e,Yi(t,3))},Uc=Object(wa.a)(function(e,t){if(null==e)return[];var a=t.length;return 1<a&&Object(Fn.a)(e,t[0],t[1])?t=[]:2<a&&Object(Fn.a)(t[0],t[1],t[2])&&(t=[t[0]]),Kp(e,Sa(t,1),[])}),Fc=Uc,jc=function(e,t,a,n){t=a(t);for(var r=0,i=null==e?0:e.length,o=t!==t,s=null===t,d=C(t),l=void 0===t;r<i;){var p=A((r+i)/2),u=a(e[p]),c=u!==void 0,f=null===u,m=u===u,g=C(u);if(o)var h=n||m;else h=l?m&&(n||c):s?m&&c&&(n||!f):d?m&&c&&!f&&(n||!g):!(f||g)&&(n?u<=t:u<t);h?r=p+1:i=p}return I(i,4294967295-1)},Wc=function(e,t,a){var n=0,r=null==e?n:e.length;if('number'==typeof t&&t===t&&r<=4294967295>>>1){for(;n<r;){var i=n+r>>>1,o=e[i];null!==o&&!C(o)&&(a?o<=t:o<t)?n=i+1:r=i}return r}return jc(e,t,ne.a,a)},Vc=function(e,t){return Wc(e,t)},zc=function(e,t,a){return jc(e,t,Yi(a,2))},Gc=function(e,t){var a=null==e?0:e.length;if(a){var n=Wc(e,t);if(n<a&&Object(_i.a)(e[n],t))return n}return-1},Xc=function(e,t){return Wc(e,t,!0)},qc=function(e,t,a){return jc(e,t,Yi(a,2),!0)},Hc=function(e,t){var a=null==e?0:e.length;if(a){var n=Wc(e,t,!0)-1;if(Object(_i.a)(e[n],t))return n}return-1},Kc=function(e,t){for(var a=-1,n=e.length,r=0,i=[];++a<n;){var o=e[a],s=t?t(o):o;if(!a||!Object(_i.a)(s,d)){var d=s;i[r++]=0===o?0:o}}return i},Yc=function(e){return e&&e.length?Kc(e):[]},Zc=function(e,t){return e&&e.length?Kc(e,Yi(t,2)):[]},Qc=function(e,t,a){return(a&&'number'!=typeof a&&Object(Fn.a)(e,t,a)&&(t=a=void 0),a=void 0===a?4294967295:a>>>0,!a)?[]:(e=fa(e),e&&('string'==typeof t||null!=t&&!Nl(t))&&(t=W(t),!t&&Ga(e))?Va(Qa(e),0,a):e.split(t,a))},$c=function(e,t){if('function'!=typeof e)throw new TypeError('Expected a function');return t=null==t?0:L(te(t),0),Object(wa.a)(function(a){var n=a[t],r=Va(a,0,t);return n&&xa(r,n),Object(ge.a)(e,this,r)})},Jc=Pn(function(e,t,a){return e+(a?' ':'')+en(t)}),ef=Jc,tf=function(e,t,a){return e=fa(e),a=null==a?0:Wn(te(a),0,e.length),t=W(t),e.slice(a,a+t.length)==t},af=function(){return{}},nf=function(){return''},rf=function(){return!0},of=V(function(e,t){return e-t},0),sf=of,df=function(e){return e&&e.length?up(e,ne.a):0},lf=function(e,t){return e&&e.length?up(e,Yi(t,2)):0},pf=function(e){var t=null==e?0:e.length;return t?Wa(e,1,t):[]},uf=function(e,t,a){return e&&e.length?(t=a||void 0===t?1:te(t),Wa(e,0,0>t?0:t)):[]},cf=function(e,t,a){var n=null==e?0:e.length;return n?(t=a||void 0===t?1:te(t),t=n-t,Wa(e,0>t?0:t,n)):[]},ff=function(e,t){return e&&e.length?Zo(e,Yi(t,3),!1,!0):[]},mf=function(e,t){return e&&e.length?Zo(e,Yi(t,3)):[]},gf=function(e,t){return t(e),e},hf=Object.prototype,yf=hf.hasOwnProperty,_f=function(e,t,a,n){return void 0===e||Object(_i.a)(e,hf[a])&&!yf.call(n,a)?t:e},xf={"\\":'\\',"'":'\'',"\n":'n',"\r":'r',"\u2028":'u2028',"\u2029":'u2029'},bf=function(e){return'\\'+xf[e]},vf=/<%=([\s\S]+?)%>/g,Ef=vf,Sf=/<%-([\s\S]+?)%>/g,Tf=/<%([\s\S]+?)%>/g,kf={escape:Sf,evaluate:Tf,interpolate:Ef,variable:'',imports:{_:{escape:bs}}},Rf=/\b__p \+= '';/g,Af=/\b(__p \+=) '' \+/g,wf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,If=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lf=/($^)/,Pf=/['\n\r\u2028\u2029\\]/g,Mf=S,Cf='Expected a function',Nf=T,Bf=function(e,t){return t(e)},Df=a(46),Of=4294967295,Uf=function(e,t){if(e=te(e),1>e||e>9007199254740991)return[];var a=Of,n=I(e,Of);t=Jo(t),e-=Of;for(var r=Object(Df.a)(n,t);++a<e;)t(a);return r},Ff=function(){return this},jf=function(e,t){var a=e;return a instanceof ve&&(a=a.value()),an(t,function(e,t){return t.func.apply(t.thisArg,xa([e],t.args))},a)},Wf=function(){return jf(this.__wrapped__,this.__actions__)},Vf=function(e){return fa(e).toLowerCase()},zf=function(e){return Object(O.a)(e)?D(e,ga):C(e)?[e]:Object(Le.a)(ca(fa(e)))},Gf=a(42),Xf=9007199254740991,qf=function(e){return e?Wn(te(e),-Xf,Xf):0===e?e:0},Hf=function(e){return fa(e).toUpperCase()},Kf=function(e,t,a){var n=Object(O.a)(e),r=n||Object(Vr.a)(e)||Object(Ai.a)(e);if(t=Yi(t,4),null==a){var i=e&&e.constructor;a=r?n?new i:[]:Object(X.a)(e)?Object(ld.a)(i)?Object(ce.a)(Object(tr.a)(e)):{}:{}}return(r?Xe:ro)(e,function(e,n,r){return t(a,e,n,r)}),a},Yf=function(e,t){for(var a=e.length;a--&&-1<Ye(t,e[a],0););return a},Zf=function(e,t){for(var a=-1,n=e.length;++a<n&&-1<Ye(t,e[a],0););return a},Qf=/^\s+|\s+$/g,$f=function(e,t,a){if(e=fa(e),e&&(a||void 0===t))return e.replace(Qf,'');if(!e||!(t=W(t)))return e;var n=Qa(e),r=Qa(t),i=Zf(n,r),o=Yf(n,r)+1;return Va(n,i,o).join('')},Jf=/\s+$/,em=function(e,t,a){if(e=fa(e),e&&(a||void 0===t))return e.replace(Jf,'');if(!e||!(t=W(t)))return e;var n=Qa(e),r=Yf(n,Qa(t))+1;return Va(n,0,r).join('')},tm=/^\s+/,am=function(e,t,a){if(e=fa(e),e&&(a||void 0===t))return e.replace(tm,'');if(!e||!(t=W(t)))return e;var n=Qa(e),r=Zf(n,Qa(t));return Va(n,r).join('')},nm=30,rm='...',im=/\w*$/,om=k,sm=function(e){return Ct(e,1)},dm=nn({"&amp;":'&',"&lt;":'<',"&gt;":'>',"&quot;":'"',"&#39;":'\''}),lm=/&(?:amp|lt|gt|quot|#39);/g,pm=RegExp(lm.source),um=function(e){return e=fa(e),e&&pm.test(e)?e.replace(lm,dm):e},cm=gr&&1/bi(new gr([,-0]))[1]==1/0?function(e){return new gr(e)}:Ee,fm=function(e,t,a){var n=-1,r=Ze,i=e.length,o=!0,s=[],d=s;if(a)o=!1,r=Do;else if(i>=200){var l=t?null:cm(e);if(l)return bi(l);o=!1,r=gi,d=new fi}else d=t?[]:s;outer:for(;++n<i;){var p=e[n],u=t?t(p):p;if(p=a||0!==p?p:0,o&&u===u){for(var c=d.length;c--;)if(d[c]===u)continue outer;t&&d.push(u),s.push(p)}else r(d,u,a)||(d!==s&&d.push(u),s.push(p))}return s},mm=Object(wa.a)(function(e){return fm(Sa(e,1,Uo.a,!0))}),gm=mm,hm=Object(wa.a)(function(e){var t=Wo(e);return Object(Uo.a)(t)&&(t=void 0),fm(Sa(e,1,Uo.a,!0),Yi(t,2))}),ym=hm,_m=Object(wa.a)(function(e){var t=Wo(e);return t='function'==typeof t?t:void 0,fm(Sa(e,1,Uo.a,!0),void 0,t)}),xm=_m,bm=function(e){return e&&e.length?fm(e):[]},vm=function(e,t){return e&&e.length?fm(e,Yi(t,2)):[]},Em=function(e,t){return t='function'==typeof t?t:void 0,e&&e.length?fm(e,void 0,t):[]},Sm=0,Tm=R,km=function(e,t){return!(null!=e)||Dp(e,t)},Rm=function(e){if(!(e&&e.length))return[];var t=0;return e=Hn(e,function(e){if(Object(Uo.a)(e))return t=L(e.length,t),!0}),Object(Df.a)(t,function(t){return D(e,qi(t))})},Am=function(e,t){if(!(e&&e.length))return[];var a=Rm(e);return null==t?a:D(a,function(e){return Object(ge.a)(t,void 0,e)})},wm=function(e,t,a,n){return jp(e,t,a(ha(e,t)),n)},Im=function(e,t,a){return null==e?e:wm(e,t,Jo(a))},Lm=function(e,t,a,n){return n='function'==typeof n?n:void 0,null==e?e:wm(e,t,Jo(a),n)},Pm=Pn(function(e,t,a){return e+(a?' ':'')+t.toUpperCase()}),Mm=Pm,Cm=function(e){return null==e?[]:Id(e,Object(Zt.a)(e))},Nm=Object(wa.a)(function(e,t){return Object(Uo.a)(e)?Oo(e,t):[]}),Bm=Nm,Dm=function(e,t){return Eu(Jo(t),e)},Om=Ra(function(e){var t=e.length,a=t?e[0]:0,n=this.__wrapped__,r=function(t){return _a(t,e)};return 1<t||this.__actions__.length||!(n instanceof ve)||!Object(it.a)(a)?this.thru(r):(n=n.slice(a,+a+(t?1:0)),n.__actions__.push({func:Bf,args:[r],thisArg:void 0}),new Ie(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e}))}),Um=Om,Fm=function(){return Un(this)},jm=function(){var e=this.__wrapped__;if(e instanceof ve){var t=e;return this.__actions__.length&&(t=new ve(this)),t=t.reverse(),t.__actions__.push({func:Bf,args:[yc],thisArg:void 0}),new Ie(t,this.__chain__)}return this.thru(yc)},Wm=function(e,t,a){var n=e.length;if(2>n)return n?fm(e[0]):[];for(var r=-1,i=Array(n);++r<n;)for(var o=e[r],s=-1;++s<n;)s!=r&&(i[r]=Oo(i[r]||o,e[s],t,a));return fm(Sa(i,1),t,a)},Vm=Object(wa.a)(function(e){return Wm(Hn(e,Uo.a))}),zm=Vm,Gm=Object(wa.a)(function(e){var t=Wo(e);return Object(Uo.a)(t)&&(t=void 0),Wm(Hn(e,Uo.a),Yi(t,2))}),Xm=Gm,qm=Object(wa.a)(function(e){var t=Wo(e);return t='function'==typeof t?t:void 0,Wm(Hn(e,Uo.a),void 0,t)}),Hm=qm,Km=Object(wa.a)(Rm),Ym=Km,Zm=function(e,t,a){for(var n=-1,r=e.length,i=t.length,o={};++n<r;){var s=n<i?t[n]:void 0;a(o,e[n],s)}return o},Qm=function(e,t){return Zm(e||[],t||[],Nt.a)},$m=function(e,t){return Zm(e||[],t||[],jp)},Jm=Object(wa.a)(function(e){var t=e.length,a=1<t?e[t-1]:void 0;return a='function'==typeof a?(e.pop(),a):void 0,Am(e,a)}),eg=Jm,tg={chunk:jn,compact:ui,concat:ci,difference:jo,differenceBy:zo,differenceWith:Xo,drop:Ko,dropRight:Yo,dropRightWhile:Qo,dropWhile:$o,fill:Is,findIndex:Cs,findLastIndex:Us,first:Vs,flatten:Ta,flattenDeep:Ks,flattenDepth:Ys,fromPairs:dd,head:Vs,indexOf:Md,initial:Cd,intersection:Od,intersectionBy:Fd,intersectionWith:Wd,join:zl,last:Wo,lastIndexOf:Yl,nth:Np,pull:Uu,pullAll:Du,pullAllBy:Fu,pullAllWith:ju,pullAt:Xu,remove:pc,reverse:yc,slice:Cc,sortedIndex:Vc,sortedIndexBy:zc,sortedIndexOf:Gc,sortedLastIndex:Xc,sortedLastIndexBy:qc,sortedLastIndexOf:Hc,sortedUniq:Yc,sortedUniqBy:Zc,tail:pf,take:uf,takeRight:cf,takeRightWhile:ff,takeWhile:mf,union:gm,unionBy:ym,unionWith:xm,uniq:bm,uniqBy:vm,uniqWith:Em,unzip:Rm,unzipWith:Am,without:Bm,xor:zm,xorBy:Xm,xorWith:Hm,zip:Ym,zipObject:Qm,zipObjectDeep:$m,zipWith:eg},ag={countBy:mo,each:es,eachRight:ds,every:Rs,filter:Ps,find:Bs,findLast:js,flatMap:Xs,flatMapDeep:qs,flatMapDepth:Hs,forEach:es,forEachRight:ds,groupBy:hd,includes:Pd,invokeMap:rl,keyBy:Hl,map:Gs,orderBy:Yp,partition:Ru,reduce:oc,reduceRight:dc,reject:lc,sample:Ec,sampleSize:Rc,shuffle:Pc,size:Mc,some:Oc,sortBy:Fc},ng={after:ae,ary:Ct,before:Ca,bind:Ba,bindKey:ja,curry:yo,curryRight:xo,debounce:To,defer:Co,delay:Bo,flip:Zs,memoize:da,negate:wp,once:Gp,overArgs:tu,partial:Eu,partialRight:Tu,rearg:rc,rest:fc,spread:$c,throttle:Nf,unary:sm,wrap:Dm},rg={castArray:Nn,clone:oi,cloneDeep:si,cloneDeepWith:di,cloneWith:li,conformsTo:eo,eq:_i.a,gt:gt,gte:vd,isArguments:ba.a,isArray:O.a,isArrayBuffer:sl,isArrayLike:Ot.a,isArrayLikeObject:Uo.a,isBoolean:dl,isBuffer:Vr.a,isDate:ul,isElement:cl,isEmpty:gl,isEqual:hl,isEqualWith:yl,isError:La,isFinite:xl,isFunction:ld.a,isInteger:bl,isLength:Vi.a,isMap:Hr,isMatch:vl,isMatchWith:El,isNaN:Tl,isNative:Il,isNil:Ll,isNull:Pl,isNumber:Sl,isObject:X.a,isObjectLike:M.a,isPlainObject:Ia.a,isRegExp:Nl,isSafeInteger:Dl,isSet:Zr,isString:wd,isSymbol:C,isTypedArray:Ai.a,isUndefined:Ol,isWeakMap:Ul,isWeakSet:Fl,lt:lt,lte:np,toArray:Pp,toFinite:ee,toInteger:te,toLength:As,toNumber:$,toPlainObject:Gf.a,toSafeInteger:qf,toString:fa},ig={add:G,ceil:On,divide:Ho,floor:$s,max:lp,maxBy:pp,mean:fp,meanBy:mp,min:Sp,minBy:Tp,multiply:Ap,round:xc,subtract:sf,sum:df,sumBy:lf},og={clamp:Vn,inRange:Ad,random:Zu},sg={assign:Yt,assignIn:$t,assignInWith:ea,assignWith:aa,at:at,create:go,defaults:Io,defaultsDeep:Lo['default'],entries:ms,entriesIn:hs,extend:$t,extendWith:ea,findKey:Os,findLastKey:Ws,forIn:rd,forInRight:id,forOwn:od,forOwnRight:sd,functions:ud,functionsIn:cd,get:ya,has:kd,hasIn:Gi,invert:Hd,invertBy:$d,invoke:al,keys:Xt,keysIn:Zt.a,mapKeys:rp,mapValues:ip,merge:yp,mergeWith:_p.a,omit:Fp,omitBy:zp,pick:Iu,pickBy:Vp,result:mc,set:Ac,setWith:wc,toPairs:ms,toPairsIn:hs,transform:Kf,unset:km,update:Im,updateWith:Lm,values:Ld,valuesIn:Cm},dg={at:Um,chain:Un,commit:pi,lodash:Ne,next:Mp,plant:Lu,reverse:jm,tap:gf,thru:Bf,toIterator:Ff,toJSON:Wf,value:Wf,valueOf:Wf,wrapperChain:Fm},lg={camelCase:Cn,capitalize:tn,deburr:dn,endsWith:ls,escape:bs,escapeRegExp:Ss,kebabCase:Xl,lowerCase:Ql,lowerFirst:Jl,pad:gu,padEnd:hu,padStart:yu,parseInt:bu,repeat:uc,replace:cc,snakeCase:Bc,split:Qc,startCase:ef,startsWith:tf,template:Mf,templateSettings:kf,toLower:Vf,toUpper:Hf,trim:$f,trimEnd:em,trimStart:am,truncate:om,unescape:um,upperCase:Mm,upperFirst:en,words:In},pg={attempt:Ma,bindAll:Ua,cond:Zi,conforms:Ji,constant:to.a,defaultTo:ko,flow:td,flowRight:nd,identity:ne.a,iteratee:jl,matches:op,matchesProperty:sp,method:bp,methodOf:Ep,mixin:kp,noop:Ee,nthArg:Bp,over:$p,overEvery:nu,overSome:iu,property:Ki,propertyOf:Pu,range:ec,rangeRight:ac,stubArray:Kn,stubFalse:Al.a,stubObject:af,stubString:nf,stubTrue:rf,times:Uf,toPath:zf,uniqueId:Tm},ug=function(e,t,a){for(var n=-1,r=a.length;++n<r;){var i=a[n],o=i.size;switch(i.type){case'drop':e+=o;break;case'dropRight':t-=o;break;case'take':t=I(t,e+o);break;case'takeRight':e=L(e,t-o);}}return{start:e,end:t}},cg=4294967295,fg=Array.prototype,mg=Object.prototype,gg=mg.hasOwnProperty,hg=B.a?B.a.iterator:void 0,yg=I,_g=function(e){return function(t,a,n){if(null==n){var r=Object(X.a)(a),i=r&&Xt(a),o=i&&i.length&&pd(a,i);(o?o.length:r)||(n=a,a=t,t=this)}return e(t,a,n)}}(kp);/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ne.after=ng.after,Ne.ary=ng.ary,Ne.assign=sg.assign,Ne.assignIn=sg.assignIn,Ne.assignInWith=sg.assignInWith,Ne.assignWith=sg.assignWith,Ne.at=sg.at,Ne.before=ng.before,Ne.bind=ng.bind,Ne.bindAll=pg.bindAll,Ne.bindKey=ng.bindKey,Ne.castArray=rg.castArray,Ne.chain=dg.chain,Ne.chunk=tg.chunk,Ne.compact=tg.compact,Ne.concat=tg.concat,Ne.cond=pg.cond,Ne.conforms=pg.conforms,Ne.constant=pg.constant,Ne.countBy=ag.countBy,Ne.create=sg.create,Ne.curry=ng.curry,Ne.curryRight=ng.curryRight,Ne.debounce=ng.debounce,Ne.defaults=sg.defaults,Ne.defaultsDeep=sg.defaultsDeep,Ne.defer=ng.defer,Ne.delay=ng.delay,Ne.difference=tg.difference,Ne.differenceBy=tg.differenceBy,Ne.differenceWith=tg.differenceWith,Ne.drop=tg.drop,Ne.dropRight=tg.dropRight,Ne.dropRightWhile=tg.dropRightWhile,Ne.dropWhile=tg.dropWhile,Ne.fill=tg.fill,Ne.filter=ag.filter,Ne.flatMap=ag.flatMap,Ne.flatMapDeep=ag.flatMapDeep,Ne.flatMapDepth=ag.flatMapDepth,Ne.flatten=tg.flatten,Ne.flattenDeep=tg.flattenDeep,Ne.flattenDepth=tg.flattenDepth,Ne.flip=ng.flip,Ne.flow=pg.flow,Ne.flowRight=pg.flowRight,Ne.fromPairs=tg.fromPairs,Ne.functions=sg.functions,Ne.functionsIn=sg.functionsIn,Ne.groupBy=ag.groupBy,Ne.initial=tg.initial,Ne.intersection=tg.intersection,Ne.intersectionBy=tg.intersectionBy,Ne.intersectionWith=tg.intersectionWith,Ne.invert=sg.invert,Ne.invertBy=sg.invertBy,Ne.invokeMap=ag.invokeMap,Ne.iteratee=pg.iteratee,Ne.keyBy=ag.keyBy,Ne.keys=Xt,Ne.keysIn=sg.keysIn,Ne.map=ag.map,Ne.mapKeys=sg.mapKeys,Ne.mapValues=sg.mapValues,Ne.matches=pg.matches,Ne.matchesProperty=pg.matchesProperty,Ne.memoize=ng.memoize,Ne.merge=sg.merge,Ne.mergeWith=sg.mergeWith,Ne.method=pg.method,Ne.methodOf=pg.methodOf,Ne.mixin=_g,Ne.negate=wp,Ne.nthArg=pg.nthArg,Ne.omit=sg.omit,Ne.omitBy=sg.omitBy,Ne.once=ng.once,Ne.orderBy=ag.orderBy,Ne.over=pg.over,Ne.overArgs=ng.overArgs,Ne.overEvery=pg.overEvery,Ne.overSome=pg.overSome,Ne.partial=ng.partial,Ne.partialRight=ng.partialRight,Ne.partition=ag.partition,Ne.pick=sg.pick,Ne.pickBy=sg.pickBy,Ne.property=pg.property,Ne.propertyOf=pg.propertyOf,Ne.pull=tg.pull,Ne.pullAll=tg.pullAll,Ne.pullAllBy=tg.pullAllBy,Ne.pullAllWith=tg.pullAllWith,Ne.pullAt=tg.pullAt,Ne.range=pg.range,Ne.rangeRight=pg.rangeRight,Ne.rearg=ng.rearg,Ne.reject=ag.reject,Ne.remove=tg.remove,Ne.rest=ng.rest,Ne.reverse=tg.reverse,Ne.sampleSize=ag.sampleSize,Ne.set=sg.set,Ne.setWith=sg.setWith,Ne.shuffle=ag.shuffle,Ne.slice=tg.slice,Ne.sortBy=ag.sortBy,Ne.sortedUniq=tg.sortedUniq,Ne.sortedUniqBy=tg.sortedUniqBy,Ne.split=lg.split,Ne.spread=ng.spread,Ne.tail=tg.tail,Ne.take=tg.take,Ne.takeRight=tg.takeRight,Ne.takeRightWhile=tg.takeRightWhile,Ne.takeWhile=tg.takeWhile,Ne.tap=dg.tap,Ne.throttle=ng.throttle,Ne.thru=Bf,Ne.toArray=rg.toArray,Ne.toPairs=sg.toPairs,Ne.toPairsIn=sg.toPairsIn,Ne.toPath=pg.toPath,Ne.toPlainObject=rg.toPlainObject,Ne.transform=sg.transform,Ne.unary=ng.unary,Ne.union=tg.union,Ne.unionBy=tg.unionBy,Ne.unionWith=tg.unionWith,Ne.uniq=tg.uniq,Ne.uniqBy=tg.uniqBy,Ne.uniqWith=tg.uniqWith,Ne.unset=sg.unset,Ne.unzip=tg.unzip,Ne.unzipWith=tg.unzipWith,Ne.update=sg.update,Ne.updateWith=sg.updateWith,Ne.values=sg.values,Ne.valuesIn=sg.valuesIn,Ne.without=tg.without,Ne.words=lg.words,Ne.wrap=ng.wrap,Ne.xor=tg.xor,Ne.xorBy=tg.xorBy,Ne.xorWith=tg.xorWith,Ne.zip=tg.zip,Ne.zipObject=tg.zipObject,Ne.zipObjectDeep=tg.zipObjectDeep,Ne.zipWith=tg.zipWith,Ne.entries=sg.toPairs,Ne.entriesIn=sg.toPairsIn,Ne.extend=sg.assignIn,Ne.extendWith=sg.assignInWith,_g(Ne,Ne),Ne.add=ig.add,Ne.attempt=pg.attempt,Ne.camelCase=lg.camelCase,Ne.capitalize=lg.capitalize,Ne.ceil=ig.ceil,Ne.clamp=og.clamp,Ne.clone=rg.clone,Ne.cloneDeep=rg.cloneDeep,Ne.cloneDeepWith=rg.cloneDeepWith,Ne.cloneWith=rg.cloneWith,Ne.conformsTo=rg.conformsTo,Ne.deburr=lg.deburr,Ne.defaultTo=pg.defaultTo,Ne.divide=ig.divide,Ne.endsWith=lg.endsWith,Ne.eq=rg.eq,Ne.escape=lg.escape,Ne.escapeRegExp=lg.escapeRegExp,Ne.every=ag.every,Ne.find=ag.find,Ne.findIndex=tg.findIndex,Ne.findKey=sg.findKey,Ne.findLast=ag.findLast,Ne.findLastIndex=tg.findLastIndex,Ne.findLastKey=sg.findLastKey,Ne.floor=ig.floor,Ne.forEach=ag.forEach,Ne.forEachRight=ag.forEachRight,Ne.forIn=sg.forIn,Ne.forInRight=sg.forInRight,Ne.forOwn=sg.forOwn,Ne.forOwnRight=sg.forOwnRight,Ne.get=sg.get,Ne.gt=rg.gt,Ne.gte=rg.gte,Ne.has=sg.has,Ne.hasIn=sg.hasIn,Ne.head=tg.head,Ne.identity=ne.a,Ne.includes=ag.includes,Ne.indexOf=tg.indexOf,Ne.inRange=og.inRange,Ne.invoke=sg.invoke,Ne.isArguments=rg.isArguments,Ne.isArray=O.a,Ne.isArrayBuffer=rg.isArrayBuffer,Ne.isArrayLike=rg.isArrayLike,Ne.isArrayLikeObject=rg.isArrayLikeObject,Ne.isBoolean=rg.isBoolean,Ne.isBuffer=rg.isBuffer,Ne.isDate=rg.isDate,Ne.isElement=rg.isElement,Ne.isEmpty=rg.isEmpty,Ne.isEqual=rg.isEqual,Ne.isEqualWith=rg.isEqualWith,Ne.isError=rg.isError,Ne.isFinite=rg.isFinite,Ne.isFunction=rg.isFunction,Ne.isInteger=rg.isInteger,Ne.isLength=rg.isLength,Ne.isMap=rg.isMap,Ne.isMatch=rg.isMatch,Ne.isMatchWith=rg.isMatchWith,Ne.isNaN=rg.isNaN,Ne.isNative=rg.isNative,Ne.isNil=rg.isNil,Ne.isNull=rg.isNull,Ne.isNumber=rg.isNumber,Ne.isObject=X.a,Ne.isObjectLike=rg.isObjectLike,Ne.isPlainObject=rg.isPlainObject,Ne.isRegExp=rg.isRegExp,Ne.isSafeInteger=rg.isSafeInteger,Ne.isSet=rg.isSet,Ne.isString=rg.isString,Ne.isSymbol=rg.isSymbol,Ne.isTypedArray=rg.isTypedArray,Ne.isUndefined=rg.isUndefined,Ne.isWeakMap=rg.isWeakMap,Ne.isWeakSet=rg.isWeakSet,Ne.join=tg.join,Ne.kebabCase=lg.kebabCase,Ne.last=Wo,Ne.lastIndexOf=tg.lastIndexOf,Ne.lowerCase=lg.lowerCase,Ne.lowerFirst=lg.lowerFirst,Ne.lt=rg.lt,Ne.lte=rg.lte,Ne.max=ig.max,Ne.maxBy=ig.maxBy,Ne.mean=ig.mean,Ne.meanBy=ig.meanBy,Ne.min=ig.min,Ne.minBy=ig.minBy,Ne.stubArray=pg.stubArray,Ne.stubFalse=pg.stubFalse,Ne.stubObject=pg.stubObject,Ne.stubString=pg.stubString,Ne.stubTrue=pg.stubTrue,Ne.multiply=ig.multiply,Ne.nth=tg.nth,Ne.noop=pg.noop,Ne.now={now:bo}.now,Ne.pad=lg.pad,Ne.padEnd=lg.padEnd,Ne.padStart=lg.padStart,Ne.parseInt=lg.parseInt,Ne.random=og.random,Ne.reduce=ag.reduce,Ne.reduceRight=ag.reduceRight,Ne.repeat=lg.repeat,Ne.replace=lg.replace,Ne.result=sg.result,Ne.round=ig.round,Ne.sample=ag.sample,Ne.size=ag.size,Ne.snakeCase=lg.snakeCase,Ne.some=ag.some,Ne.sortedIndex=tg.sortedIndex,Ne.sortedIndexBy=tg.sortedIndexBy,Ne.sortedIndexOf=tg.sortedIndexOf,Ne.sortedLastIndex=tg.sortedLastIndex,Ne.sortedLastIndexBy=tg.sortedLastIndexBy,Ne.sortedLastIndexOf=tg.sortedLastIndexOf,Ne.startCase=lg.startCase,Ne.startsWith=lg.startsWith,Ne.subtract=ig.subtract,Ne.sum=ig.sum,Ne.sumBy=ig.sumBy,Ne.template=lg.template,Ne.times=pg.times,Ne.toFinite=rg.toFinite,Ne.toInteger=te,Ne.toLength=rg.toLength,Ne.toLower=lg.toLower,Ne.toNumber=rg.toNumber,Ne.toSafeInteger=rg.toSafeInteger,Ne.toString=rg.toString,Ne.toUpper=lg.toUpper,Ne.trim=lg.trim,Ne.trimEnd=lg.trimEnd,Ne.trimStart=lg.trimStart,Ne.truncate=lg.truncate,Ne.unescape=lg.unescape,Ne.uniqueId=pg.uniqueId,Ne.upperCase=lg.upperCase,Ne.upperFirst=lg.upperFirst,Ne.each=ag.forEach,Ne.eachRight=ag.forEachRight,Ne.first=tg.head,_g(Ne,function(){var e={};return ro(Ne,function(t,a){gg.call(Ne.prototype,a)||(e[a]=t)}),e}(),{chain:!1}),Ne.VERSION='4.17.10',(Ne.templateSettings=lg.templateSettings).imports._=Ne,Xe(['bind','bindKey','curry','curryRight','partial','partialRight'],function(e){Ne[e].placeholder=Ne}),Xe(['drop','take'],function(e,t){ve.prototype[e]=function(a){a=void 0===a?1:L(te(a),0);var n=this.__filtered__&&!t?new ve(this):this.clone();return n.__filtered__?n.__takeCount__=yg(a,n.__takeCount__):n.__views__.push({size:yg(a,cg),type:e+(0>n.__dir__?'Right':'')}),n},ve.prototype[e+'Right']=function(t){return this.reverse()[e](t).reverse()}}),Xe(['filter','map','takeWhile'],function(e,t){var a=t+1;ve.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yi(e,3),type:a}),t.__filtered__=t.__filtered__||a==1||a==3,t}}),Xe(['head','last'],function(e,t){var a='take'+(t?'Right':'');ve.prototype[e]=function(){return this[a](1).value()[0]}}),Xe(['initial','tail'],function(e,t){var a='drop'+(t?'':'Right');ve.prototype[e]=function(){return this.__filtered__?new ve(this):this[a](1)}}),ve.prototype.compact=function(){return this.filter(ne.a)},ve.prototype.find=function(e){return this.filter(e).head()},ve.prototype.findLast=function(e){return this.reverse().find(e)},ve.prototype.invokeMap=Object(wa.a)(function(e,t){return'function'==typeof e?new ve(this):this.map(function(a){return el(a,e,t)})}),ve.prototype.reject=function(e){return this.filter(wp(Yi(e)))},ve.prototype.slice=function(e,t){e=te(e);var a=this;return a.__filtered__&&(0<e||0>t)?new ve(a):(0>e?a=a.takeRight(-e):e&&(a=a.drop(e)),void 0!==t&&(t=te(t),a=0>t?a.dropRight(-t):a.take(t-e)),a)},ve.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ve.prototype.toArray=function(){return this.take(cg)},ro(ve.prototype,function(e,t){var a=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),r=Ne[n?'take'+('last'==t?'Right':''):t],i=n||/^find/.test(t);r&&(Ne.prototype[t]=function(){var t=this.__wrapped__,o=n?[1]:arguments,s=t instanceof ve,d=o[0],l=s||Object(O.a)(t),p=function(e){var t=r.apply(Ne,xa([e],o));return n&&u?t[0]:t};l&&a&&'function'==typeof d&&1!=d.length&&(s=l=!1);var u=this.__chain__,c=!!this.__actions__.length,f=i&&!u,m=s&&!c;if(!i&&l){t=m?t:new ve(this);var g=e.apply(t,o);return g.__actions__.push({func:Bf,args:[p],thisArg:void 0}),new Ie(g,u)}return f&&m?e.apply(this,o):(g=this.thru(p),f?n?g.value()[0]:g.value():g)})}),Xe(['pop','push','shift','sort','splice','unshift'],function(e){var t=fg[e],a=/^(?:push|sort|unshift)$/.test(e)?'tap':'thru',n=/^(?:pop|shift)$/.test(e);Ne.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var r=this.value();return t.apply(Object(O.a)(r)?r:[],e)}return this[a](function(a){return t.apply(Object(O.a)(a)?a:[],e)})}}),ro(ve.prototype,function(e,t){var a=Ne[t];if(a){var n=a.name+'',r=ke[n]||(ke[n]=[]);r.push({name:t,func:a})}}),ke[yt(void 0,2).name]=[{name:'wrapper',func:void 0}],ve.prototype.clone=function(){var e=new ve(this.__wrapped__);return e.__actions__=Object(Le.a)(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Object(Le.a)(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Object(Le.a)(this.__views__),e},ve.prototype.reverse=function(){if(this.__filtered__){var e=new ve(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},ve.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,a=Object(O.a)(e),n=0>t,r=a?e.length:0,i=ug(0,r,this.__views__),o=i.start,s=i.end,d=s-o,l=n?s:o-1,p=this.__iteratees__,u=p.length,c=0,f=I(d,this.__takeCount__);if(!a||!n&&r==d&&f==d)return jf(e,this.__actions__);var m=[];outer:for(;d--&&c<f;){l+=t;for(var g=-1,h=e[l];++g<u;){var y=p[g],_=y.iteratee,x=y.type,b=_(h);if(x==2)h=b;else if(!b)if(x==1)continue outer;else break outer}m[c++]=h}return m},Ne.prototype.at=dg.at,Ne.prototype.chain=dg.wrapperChain,Ne.prototype.commit=dg.commit,Ne.prototype.next=dg.next,Ne.prototype.plant=dg.plant,Ne.prototype.reverse=dg.reverse,Ne.prototype.toJSON=Ne.prototype.valueOf=Ne.prototype.value=dg.value,Ne.prototype.first=Ne.prototype.head,hg&&(Ne.prototype[hg]=dg.toIterator);a.d(t,'add',function(){return G}),a.d(t,'after',function(){return ae}),a.d(t,'ary',function(){return Ct}),a.d(t,'assign',function(){return Yt}),a.d(t,'assignIn',function(){return $t}),a.d(t,'assignInWith',function(){return ea}),a.d(t,'assignWith',function(){return aa}),a.d(t,'at',function(){return at}),a.d(t,'attempt',function(){return Ma}),a.d(t,'before',function(){return Ca}),a.d(t,'bind',function(){return Ba}),a.d(t,'bindAll',function(){return Ua}),a.d(t,'bindKey',function(){return ja}),a.d(t,'camelCase',function(){return Cn}),a.d(t,'capitalize',function(){return tn}),a.d(t,'castArray',function(){return Nn}),a.d(t,'ceil',function(){return On}),a.d(t,'chain',function(){return Un}),a.d(t,'chunk',function(){return jn}),a.d(t,'clamp',function(){return Vn}),a.d(t,'clone',function(){return oi}),a.d(t,'cloneDeep',function(){return si}),a.d(t,'cloneDeepWith',function(){return di}),a.d(t,'cloneWith',function(){return li}),a.d(t,'commit',function(){return pi}),a.d(t,'compact',function(){return ui}),a.d(t,'concat',function(){return ci}),a.d(t,'cond',function(){return Zi}),a.d(t,'conforms',function(){return Ji}),a.d(t,'conformsTo',function(){return eo}),a.d(t,'constant',function(){return to.a}),a.d(t,'countBy',function(){return mo}),a.d(t,'create',function(){return go}),a.d(t,'curry',function(){return yo}),a.d(t,'curryRight',function(){return xo}),a.d(t,'debounce',function(){return To}),a.d(t,'deburr',function(){return dn}),a.d(t,'defaultTo',function(){return ko}),a.d(t,'defaults',function(){return Io}),a.d(t,'defaultsDeep',function(){return Lo['default']}),a.d(t,'defer',function(){return Co}),a.d(t,'delay',function(){return Bo}),a.d(t,'difference',function(){return jo}),a.d(t,'differenceBy',function(){return zo}),a.d(t,'differenceWith',function(){return Xo}),a.d(t,'divide',function(){return Ho}),a.d(t,'drop',function(){return Ko}),a.d(t,'dropRight',function(){return Yo}),a.d(t,'dropRightWhile',function(){return Qo}),a.d(t,'dropWhile',function(){return $o}),a.d(t,'each',function(){return es}),a.d(t,'eachRight',function(){return ds}),a.d(t,'endsWith',function(){return ls}),a.d(t,'entries',function(){return ms}),a.d(t,'entriesIn',function(){return hs}),a.d(t,'eq',function(){return _i.a}),a.d(t,'escape',function(){return bs}),a.d(t,'escapeRegExp',function(){return Ss}),a.d(t,'every',function(){return Rs}),a.d(t,'extend',function(){return $t}),a.d(t,'extendWith',function(){return ea}),a.d(t,'fill',function(){return Is}),a.d(t,'filter',function(){return Ps}),a.d(t,'find',function(){return Bs}),a.d(t,'findIndex',function(){return Cs}),a.d(t,'findKey',function(){return Os}),a.d(t,'findLast',function(){return js}),a.d(t,'findLastIndex',function(){return Us}),a.d(t,'findLastKey',function(){return Ws}),a.d(t,'first',function(){return Vs}),a.d(t,'flatMap',function(){return Xs}),a.d(t,'flatMapDeep',function(){return qs}),a.d(t,'flatMapDepth',function(){return Hs}),a.d(t,'flatten',function(){return Ta}),a.d(t,'flattenDeep',function(){return Ks}),a.d(t,'flattenDepth',function(){return Ys}),a.d(t,'flip',function(){return Zs}),a.d(t,'floor',function(){return $s}),a.d(t,'flow',function(){return td}),a.d(t,'flowRight',function(){return nd}),a.d(t,'forEach',function(){return es}),a.d(t,'forEachRight',function(){return ds}),a.d(t,'forIn',function(){return rd}),a.d(t,'forInRight',function(){return id}),a.d(t,'forOwn',function(){return od}),a.d(t,'forOwnRight',function(){return sd}),a.d(t,'fromPairs',function(){return dd}),a.d(t,'functions',function(){return ud}),a.d(t,'functionsIn',function(){return cd}),a.d(t,'get',function(){return ya}),a.d(t,'groupBy',function(){return hd}),a.d(t,'gt',function(){return gt}),a.d(t,'gte',function(){return vd}),a.d(t,'has',function(){return kd}),a.d(t,'hasIn',function(){return Gi}),a.d(t,'head',function(){return Vs}),a.d(t,'identity',function(){return ne.a}),a.d(t,'inRange',function(){return Ad}),a.d(t,'includes',function(){return Pd}),a.d(t,'indexOf',function(){return Md}),a.d(t,'initial',function(){return Cd}),a.d(t,'intersection',function(){return Od}),a.d(t,'intersectionBy',function(){return Fd}),a.d(t,'intersectionWith',function(){return Wd}),a.d(t,'invert',function(){return Hd}),a.d(t,'invertBy',function(){return $d}),a.d(t,'invoke',function(){return al}),a.d(t,'invokeMap',function(){return rl}),a.d(t,'isArguments',function(){return ba.a}),a.d(t,'isArray',function(){return O.a}),a.d(t,'isArrayBuffer',function(){return sl}),a.d(t,'isArrayLike',function(){return Ot.a}),a.d(t,'isArrayLikeObject',function(){return Uo.a}),a.d(t,'isBoolean',function(){return dl}),a.d(t,'isBuffer',function(){return Vr.a}),a.d(t,'isDate',function(){return ul}),a.d(t,'isElement',function(){return cl}),a.d(t,'isEmpty',function(){return gl}),a.d(t,'isEqual',function(){return hl}),a.d(t,'isEqualWith',function(){return yl}),a.d(t,'isError',function(){return La}),a.d(t,'isFinite',function(){return xl}),a.d(t,'isFunction',function(){return ld.a}),a.d(t,'isInteger',function(){return bl}),a.d(t,'isLength',function(){return Vi.a}),a.d(t,'isMap',function(){return Hr}),a.d(t,'isMatch',function(){return vl}),a.d(t,'isMatchWith',function(){return El}),a.d(t,'isNaN',function(){return Tl}),a.d(t,'isNative',function(){return Il}),a.d(t,'isNil',function(){return Ll}),a.d(t,'isNull',function(){return Pl}),a.d(t,'isNumber',function(){return Sl}),a.d(t,'isObject',function(){return X.a}),a.d(t,'isObjectLike',function(){return M.a}),a.d(t,'isPlainObject',function(){return Ia.a}),a.d(t,'isRegExp',function(){return Nl}),a.d(t,'isSafeInteger',function(){return Dl}),a.d(t,'isSet',function(){return Zr}),a.d(t,'isString',function(){return wd}),a.d(t,'isSymbol',function(){return C}),a.d(t,'isTypedArray',function(){return Ai.a}),a.d(t,'isUndefined',function(){return Ol}),a.d(t,'isWeakMap',function(){return Ul}),a.d(t,'isWeakSet',function(){return Fl}),a.d(t,'iteratee',function(){return jl}),a.d(t,'join',function(){return zl}),a.d(t,'kebabCase',function(){return Xl}),a.d(t,'keyBy',function(){return Hl}),a.d(t,'keys',function(){return Xt}),a.d(t,'keysIn',function(){return Zt.a}),a.d(t,'last',function(){return Wo}),a.d(t,'lastIndexOf',function(){return Yl}),a.d(t,'lodash',function(){return Ne}),a.d(t,'lowerCase',function(){return Ql}),a.d(t,'lowerFirst',function(){return Jl}),a.d(t,'lt',function(){return lt}),a.d(t,'lte',function(){return np}),a.d(t,'map',function(){return Gs}),a.d(t,'mapKeys',function(){return rp}),a.d(t,'mapValues',function(){return ip}),a.d(t,'matches',function(){return op}),a.d(t,'matchesProperty',function(){return sp}),a.d(t,'max',function(){return lp}),a.d(t,'maxBy',function(){return pp}),a.d(t,'mean',function(){return fp}),a.d(t,'meanBy',function(){return mp}),a.d(t,'memoize',function(){return da}),a.d(t,'merge',function(){return yp}),a.d(t,'mergeWith',function(){return _p.a}),a.d(t,'method',function(){return bp}),a.d(t,'methodOf',function(){return Ep}),a.d(t,'min',function(){return Sp}),a.d(t,'minBy',function(){return Tp}),a.d(t,'mixin',function(){return kp}),a.d(t,'multiply',function(){return Ap}),a.d(t,'negate',function(){return wp}),a.d(t,'next',function(){return Mp}),a.d(t,'noop',function(){return Ee}),a.d(t,'now',function(){return bo}),a.d(t,'nth',function(){return Np}),a.d(t,'nthArg',function(){return Bp}),a.d(t,'omit',function(){return Fp}),a.d(t,'omitBy',function(){return zp}),a.d(t,'once',function(){return Gp}),a.d(t,'orderBy',function(){return Yp}),a.d(t,'over',function(){return $p}),a.d(t,'overArgs',function(){return tu}),a.d(t,'overEvery',function(){return nu}),a.d(t,'overSome',function(){return iu}),a.d(t,'pad',function(){return gu}),a.d(t,'padEnd',function(){return hu}),a.d(t,'padStart',function(){return yu}),a.d(t,'parseInt',function(){return bu}),a.d(t,'partial',function(){return Eu}),a.d(t,'partialRight',function(){return Tu}),a.d(t,'partition',function(){return Ru}),a.d(t,'pick',function(){return Iu}),a.d(t,'pickBy',function(){return Vp}),a.d(t,'plant',function(){return Lu}),a.d(t,'property',function(){return Ki}),a.d(t,'propertyOf',function(){return Pu}),a.d(t,'pull',function(){return Uu}),a.d(t,'pullAll',function(){return Du}),a.d(t,'pullAllBy',function(){return Fu}),a.d(t,'pullAllWith',function(){return ju}),a.d(t,'pullAt',function(){return Xu}),a.d(t,'random',function(){return Zu}),a.d(t,'range',function(){return ec}),a.d(t,'rangeRight',function(){return ac}),a.d(t,'rearg',function(){return rc}),a.d(t,'reduce',function(){return oc}),a.d(t,'reduceRight',function(){return dc}),a.d(t,'reject',function(){return lc}),a.d(t,'remove',function(){return pc}),a.d(t,'repeat',function(){return uc}),a.d(t,'replace',function(){return cc}),a.d(t,'rest',function(){return fc}),a.d(t,'result',function(){return mc}),a.d(t,'reverse',function(){return yc}),a.d(t,'round',function(){return xc}),a.d(t,'sample',function(){return Ec}),a.d(t,'sampleSize',function(){return Rc}),a.d(t,'set',function(){return Ac}),a.d(t,'setWith',function(){return wc}),a.d(t,'shuffle',function(){return Pc}),a.d(t,'size',function(){return Mc}),a.d(t,'slice',function(){return Cc}),a.d(t,'snakeCase',function(){return Bc}),a.d(t,'some',function(){return Oc}),a.d(t,'sortBy',function(){return Fc}),a.d(t,'sortedIndex',function(){return Vc}),a.d(t,'sortedIndexBy',function(){return zc}),a.d(t,'sortedIndexOf',function(){return Gc}),a.d(t,'sortedLastIndex',function(){return Xc}),a.d(t,'sortedLastIndexBy',function(){return qc}),a.d(t,'sortedLastIndexOf',function(){return Hc}),a.d(t,'sortedUniq',function(){return Yc}),a.d(t,'sortedUniqBy',function(){return Zc}),a.d(t,'split',function(){return Qc}),a.d(t,'spread',function(){return $c}),a.d(t,'startCase',function(){return ef}),a.d(t,'startsWith',function(){return tf}),a.d(t,'stubArray',function(){return Kn}),a.d(t,'stubFalse',function(){return Al.a}),a.d(t,'stubObject',function(){return af}),a.d(t,'stubString',function(){return nf}),a.d(t,'stubTrue',function(){return rf}),a.d(t,'subtract',function(){return sf}),a.d(t,'sum',function(){return df}),a.d(t,'sumBy',function(){return lf}),a.d(t,'tail',function(){return pf}),a.d(t,'take',function(){return uf}),a.d(t,'takeRight',function(){return cf}),a.d(t,'takeRightWhile',function(){return ff}),a.d(t,'takeWhile',function(){return mf}),a.d(t,'tap',function(){return gf}),a.d(t,'template',function(){return Mf}),a.d(t,'templateSettings',function(){return kf}),a.d(t,'throttle',function(){return Nf}),a.d(t,'thru',function(){return Bf}),a.d(t,'times',function(){return Uf}),a.d(t,'toArray',function(){return Pp}),a.d(t,'toFinite',function(){return ee}),a.d(t,'toInteger',function(){return te}),a.d(t,'toIterator',function(){return Ff}),a.d(t,'toJSON',function(){return Wf}),a.d(t,'toLength',function(){return As}),a.d(t,'toLower',function(){return Vf}),a.d(t,'toNumber',function(){return $}),a.d(t,'toPairs',function(){return ms}),a.d(t,'toPairsIn',function(){return hs}),a.d(t,'toPath',function(){return zf}),a.d(t,'toPlainObject',function(){return Gf.a}),a.d(t,'toSafeInteger',function(){return qf}),a.d(t,'toString',function(){return fa}),a.d(t,'toUpper',function(){return Hf}),a.d(t,'transform',function(){return Kf}),a.d(t,'trim',function(){return $f}),a.d(t,'trimEnd',function(){return em}),a.d(t,'trimStart',function(){return am}),a.d(t,'truncate',function(){return om}),a.d(t,'unary',function(){return sm}),a.d(t,'unescape',function(){return um}),a.d(t,'union',function(){return gm}),a.d(t,'unionBy',function(){return ym}),a.d(t,'unionWith',function(){return xm}),a.d(t,'uniq',function(){return bm}),a.d(t,'uniqBy',function(){return vm}),a.d(t,'uniqWith',function(){return Em}),a.d(t,'uniqueId',function(){return Tm}),a.d(t,'unset',function(){return km}),a.d(t,'unzip',function(){return Rm}),a.d(t,'unzipWith',function(){return Am}),a.d(t,'update',function(){return Im}),a.d(t,'updateWith',function(){return Lm}),a.d(t,'upperCase',function(){return Mm}),a.d(t,'upperFirst',function(){return en}),a.d(t,'value',function(){return Wf}),a.d(t,'valueOf',function(){return Wf}),a.d(t,'values',function(){return Ld}),a.d(t,'valuesIn',function(){return Cm}),a.d(t,'without',function(){return Bm}),a.d(t,'words',function(){return In}),a.d(t,'wrap',function(){return Dm}),a.d(t,'wrapperAt',function(){return Um}),a.d(t,'wrapperChain',function(){return Fm}),a.d(t,'wrapperCommit',function(){return pi}),a.d(t,'wrapperLodash',function(){return Ne}),a.d(t,'wrapperNext',function(){return Mp}),a.d(t,'wrapperPlant',function(){return Lu}),a.d(t,'wrapperReverse',function(){return jm}),a.d(t,'wrapperToIterator',function(){return Ff}),a.d(t,'wrapperValue',function(){return Wf}),a.d(t,'xor',function(){return zm}),a.d(t,'xorBy',function(){return Xm}),a.d(t,'xorWith',function(){return Hm}),a.d(t,'zip',function(){return Ym}),a.d(t,'zipObject',function(){return Qm}),a.d(t,'zipObjectDeep',function(){return $m}),a.d(t,'zipWith',function(){return eg}),a.d(t,'default',function(){return Ne})},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(53),r=a(80),i=a(66);class o{constructor(e,t){const a='string'==typeof t?t:'',o=n.default({paths:{base:`${a}`,replays:`${a}/replays`,maps:`${a}/maps`,wads:`${a}/wads`,skies:`${a}/skies`,sounds:`${a}/sounds`}},t);this.game=new i.Game(o),this.interface=new r.PlayerInterface(this.game),this.interface.draw(e),this.game.draw()}load(e){this.game.load(e)}setTitle(e){this.game.setTitle(e)}getTitle(){return this.game.getTitle()}}o.VERSION='0.6.0';let s=window;s.HLViewer=o},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(a){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22),r=a(81);t.PlayerInterface=class{constructor(e){this.game=e}getRootNode(){return this.rootNode}draw(e){const t=document.querySelector(e);t&&(this.rootNode=t,n.render(n.h(r.Root,{game:this.game,root:this.rootNode}),t))}}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22),r=a(66),i=a(110),o=a(114),s=a(121);a(142);const d=a(76);class l extends n.Component{constructor(e){super(e),this.fadeOut=0,this.onPointerLockChange=()=>{this.props.game.pointerLocked=!(document.pointerLockElement!==this.props.root)},this.onContextMenu=(t)=>{t.preventDefault()},this.onWindowClick=()=>{this.setState({isActive:!1})},this.onRootClick=(t)=>{t.stopPropagation(),this.setState({isActive:!0}),this.fadeReset()},this.onKeyDown=(t)=>{if(this.state.isActive){const e=this.props.game;switch(t.which){case 70:{d.Fullscreen.isInFullscreen()?d.Fullscreen.exit():d.Fullscreen.enter(this.props.root),this.fadeReset();break}case 77:{e.soundSystem.toggleMute(),this.fadeReset();break}case 38:{e.soundSystem.setVolume(e.soundSystem.getVolume()+.05),this.fadeReset();break}case 40:{e.soundSystem.setVolume(e.soundSystem.getVolume()-.05),this.fadeReset();break}case 74:case 37:{e.player.seek(e.player.currentTime-5),this.fadeReset();break}case 76:case 39:{e.player.seek(e.player.currentTime+5),this.fadeReset();break}case 75:case 32:{if(this.props.game.mode!==r.PlayerMode.REPLAY)return;!e.player.isPlaying||e.player.isPaused?e.player.play():e.player.pause();break}}}},this.onModeChange=()=>{this.forceUpdate()},this.onLoadStart=()=>{this.setState({isLoading:!0})},this.onLoadEnd=()=>{this.setState({isLoading:!1})},this.onTitleChange=(e)=>{this.setState({title:e})},this.onMouseEnter=()=>{this.setState({isMouseOver:!0}),this.fadeReset()},this.onMouseMove=()=>{this.state.isMouseOver&&!d.Fullscreen.isInFullscreen()&&this.fadeReset()},this.onMouseLeave=()=>{this.setState({isMouseOver:!1,isVisible:!1}),clearTimeout(this.fadeOut),this.fadeOut=0},this.fadeReset=()=>{this.state.isVisible||this.setState({isVisible:!0}),clearTimeout(this.fadeOut),this.fadeOut=setTimeout(()=>{this.setState({isVisible:!1}),this.fadeOut=0},5e3)},this.onScreenClick=()=>{switch(this.props.game.mode){case r.PlayerMode.REPLAY:{const e=this.props.game.player;!e.isPlaying||e.isPaused?e.play():e.pause();break}case r.PlayerMode.FREE:{this.props.root.requestPointerLock();break}}},this.onScreenDblClick=()=>{d.Fullscreen.isInFullscreen()?d.Fullscreen.exit():d.Fullscreen.enter(this.props.root)},this.state={title:e.game.title,isActive:!1,isLoading:!1,isMouseOver:!1,isVisible:!1}}componentDidMount(){if(this.node){const e=this.props.game,t=this.props.root;this.node.appendChild(e.getCanvas()),e.on('loadstart',this.onLoadStart),e.on('load',this.onLoadEnd),e.on('modechange',this.onModeChange),e.on('titlechange',this.onTitleChange),t.addEventListener('click',this.onRootClick),window.addEventListener('click',this.onWindowClick),window.addEventListener('keydown',this.onKeyDown),document.addEventListener('pointerlockchange',this.onPointerLockChange,!1),t.addEventListener('mouseover',this.onMouseEnter),t.addEventListener('mousemove',this.onMouseMove),t.addEventListener('mouseout',this.onMouseLeave),t.addEventListener('contextmenu',this.onContextMenu)}}componentWillUnmount(){const e=this.props.game,t=this.props.root;e.off('loadstart',this.onLoadStart),e.off('load',this.onLoadEnd),e.off('modechange',this.onModeChange),e.off('titlechange',this.onTitleChange),t.removeEventListener('click',this.onRootClick),window.removeEventListener('click',this.onWindowClick),window.removeEventListener('keydown',this.onKeyDown),document.removeEventListener('pointerlockchange',this.onPointerLockChange,!1),t.removeEventListener('mouseover',this.onMouseEnter),t.removeEventListener('mousemove',this.onMouseMove),t.removeEventListener('mouseout',this.onMouseLeave),t.removeEventListener('contextmenu',this.onContextMenu)}render(){const e=this.props.game,t=this.state.isVisible?' hlv--visible':'',a=this.state.isVisible?' hlv__title--visible':'',d=this.state.isVisible?' hlv__controls--visible':'';return n.h('div',{class:`hlv${t}`},n.h('div',{class:`hlv__title${a}`},this.state.title),n.h(i.Loading,{game:e,visible:this.state.isLoading}),n.h('div',{class:'hlv__screen',ref:(e)=>this.node=e,onClick:this.onScreenClick,onDblClick:this.onScreenDblClick}),e.mode===r.PlayerMode.FREE?n.h(o.FreeMode,{class:`hlv__controls${d}`,game:e,root:this.props.root,visible:this.state.isMouseOver}):n.h(s.ReplayMode,{class:`hlv__controls${d}`,game:e,root:this.props.root,visible:this.state.isMouseOver}))}}t.Root=l},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});class a{constructor(){this.keys=new Uint8Array(256);for(let e=0;256>e;++e)this.keys[0]=0}}t.Keyboard=a,function(e){let t;(function(e){e[e.A=65]='A',e[e.B=66]='B',e[e.C=67]='C',e[e.D=68]='D',e[e.E=69]='E',e[e.F=70]='F',e[e.G=71]='G',e[e.H=72]='H',e[e.I=73]='I',e[e.J=74]='J',e[e.K=75]='K',e[e.L=76]='L',e[e.M=77]='M',e[e.N=78]='N',e[e.O=79]='O',e[e.P=80]='P',e[e.Q=81]='Q',e[e.R=82]='R',e[e.S=83]='S',e[e.T=84]='T',e[e.U=85]='U',e[e.V=86]='V',e[e.W=87]='W',e[e.X=88]='X',e[e.Y=89]='Y',e[e.Z=90]='Z',e[e.CTRL=17]='CTRL',e[e.ALT=18]='ALT',e[e.SPACE=32]='SPACE'})(t=e.KEYS||(e.KEYS={}))}(a||(a={})),t.Keyboard=a},function(e,t,a){'use strict';var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(r,i){function o(e){try{d(n.next(e))}catch(t){i(t)}}function s(e){try{d(n['throw'](e))}catch(t){i(t)}}function d(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(o,s)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,'__esModule',{value:!0});const r=a(54),i=a(67),o=a(85),s=a(71),d=a(90),l=a(91),p=a(92),u=a(93),c=a(73);var f;(function(e){e[e.Loading=1]='Loading',e[e.Skipped=2]='Skipped',e[e.Error=3]='Error',e[e.Done=4]='Done'})(f||(f={}));class m{constructor(e){this.name=e,this.progress=0,this.status=f.Loading,this.data=null}isLoading(){return this.status===f.Loading}skip(){this.status=f.Skipped}isSkipped(){return this.status===f.Skipped}error(){this.status=f.Error}isError(){return this.status===f.Error}done(e){this.status=f.Done,this.data=e}isDone(){return this.status===f.Done}}class g extends m{constructor(){super(...arguments),this.type='replay'}}class h extends m{constructor(){super(...arguments),this.type='bsp'}}class y extends m{constructor(){super(...arguments),this.type='sky'}}class _ extends m{constructor(){super(...arguments),this.type='wad'}}class x extends m{constructor(){super(...arguments),this.type='sound'}}class b extends m{constructor(){super(...arguments),this.type='sprite'}}t.Loader=class{constructor(e){this.sprites={},this.game=e,this.replay=void 0,this.map=void 0,this.skies=[],this.wads=[],this.sounds=[],this.events=new r.EventEmitter,this.events.addListener('error',(e)=>{console.error(e)})}clear(){this.replay=void 0,this.map=void 0,this.skies.length=0,this.wads.length=0,this.sounds.length=0,this.sprites={}}checkStatus(){if((!this.replay||this.replay.isDone())&&(!this.map||this.map.isDone())){for(let e=0;e<this.skies.length;++e)if(this.skies[e].isLoading())return;for(let e=0;e<this.wads.length;++e)if(this.wads[e].isLoading())return;for(let e=0;e<this.sounds.length;++e)if(this.sounds[e].isLoading())return;const e=Object.entries(this.sprites);for(let t=0;t<e.length;++t)if(e[t][1].isLoading())return;this.events.emit('loadall',this)}}load(e){const t=i.extname(e);'.dem'===t?this.loadReplay(e):'.bsp'===t?this.loadMap(e):this.events.emit('error','Invalid file extension',e)}loadReplay(e){return n(this,void 0,void 0,function*(){this.replay=new g(e),this.events.emit('loadstart',this.replay);const t=this.game.config.paths.replays,a=yield u.xhr(`${t}/${e}`,{method:'GET',isBinary:!0,progressCallback:(e,t)=>{this.replay&&(this.replay.progress=t),this.events.emit('progress',this.replay)}}).catch((e)=>{this.replay&&this.replay.error(),this.events.emit('error',e,this.replay)});if(!this.replay.isError()){const e=yield s.Replay.parseIntoChunks(a);this.replay.done(e),this.loadMap(e.maps[0].name+'.bsp');const t=e.maps[0].resources.sounds;t.forEach((e)=>{e.used&&this.loadSound(e.name,e.index)}),this.events.emit('load',this.replay),this.checkStatus()}})}loadMap(e){return n(this,void 0,void 0,function*(){this.map=new h(e),this.events.emit('loadstart',this.map);const t=this.game.config.paths.maps,a=yield u.xhr(`${t}/${e}`,{method:'GET',isBinary:!0,progressCallback:(e,t)=>{this.map&&(this.map.progress=t),this.events.emit('progress',this.map)}}).catch((e)=>{this.map&&this.map.error(),this.events.emit('error',e,this.map)});if(this.map.isError())return;const n=yield o.BspParser.parse(e,a);this.map.done(n),n.entities.map((t)=>'string'==typeof t.model&&-1<t.model.indexOf('.spr')?t.model:void 0).filter((e,t,a)=>e&&a.indexOf(e)===t).forEach((e)=>this.loadSprite(e));const r=n.entities[0].skyname;if(r){['bk','dn','ft','lf','rt','up'].map((e)=>`${r}${e}`).forEach((e)=>this.loadSky(e))}if(n.textures.find((e)=>e.isExternal)){const e=n.entities[0].wad,t=e.map((e)=>this.loadWad(e));yield Promise.all(t)}this.events.emit('load',this.map),this.checkStatus()})}loadSprite(e){return n(this,void 0,void 0,function*(){const t=new b(e);this.sprites[e]=t,this.events.emit('loadstart',t);const a=yield u.xhr(`${this.game.config.paths.base}/${e}`,{method:'GET',isBinary:!0,progressCallback:(e,a)=>{t.progress=a,this.events.emit('progress',t)}}).catch((e)=>{t.error(),this.events.emit('error',e,t),this.checkStatus()});if(!t.isError()){const e=c.Sprite.parse(a);t.done(e),this.events.emit('load',t),this.checkStatus()}})}loadSky(e){return n(this,void 0,void 0,function*(){const t=new y(e);this.skies.push(t),this.events.emit('loadstart',t);const a=this.game.config.paths.skies,n=yield u.xhr(`${a}/${e}.tga`,{method:'GET',isBinary:!0,progressCallback:(e,a)=>{t.progress=a,this.events.emit('progress',t)}}).catch((e)=>{t.error(),this.events.emit('error',e,t),this.checkStatus()});if(!t.isError()){const a=l.Tga.parse(n,e);t.done(a),this.events.emit('load',t),this.checkStatus()}})}loadWad(e){return n(this,void 0,void 0,function*(){const t=new _(e);this.wads.push(t),this.events.emit('loadstart',t);const a=this.game.config.paths.wads,n=yield u.xhr(`${a}/${e}`,{method:'GET',isBinary:!0,progressCallback:(e,a)=>{t.progress=a,this.events.emit('progress',t)}}).catch((e)=>{t.error(),this.events.emit('error',e,t),this.checkStatus()});if(t.isError())return;const r=yield p.Wad.parse(n);if(t.done(r),!this.map||!this.map.data)return;const i=this.map.data,o=(e,t)=>e.toLowerCase()===t.toLowerCase();r.entries.forEach((e)=>{'texture'!==e.type||i.textures.forEach((t)=>{o(e.name,t.name)&&(t.width=e.width,t.height=e.height,t.data=e.data)})}),this.events.emit('load',t),this.checkStatus()})}loadSound(e,t){return n(this,void 0,void 0,function*(){const a=new x(e);this.sounds.push(a),this.events.emit('loadstart',a);const n=this.game.config.paths.sounds,r=yield u.xhr(`${n}/${e}`,{method:'GET',isBinary:!0,progressCallback:(e,t)=>{a.progress=t,this.events.emit('progress',a)}}).catch((e)=>{a.error(),this.events.emit('error',e,a),this.checkStatus()});if(!a.isError()){const n=yield d.Sound.create(r).catch((e)=>{a.error(),this.events.emit('error',e,a),this.checkStatus()});!n||a.isError()||(n.index=t,n.name=e,a.done(n),this.events.emit('load',a),this.checkStatus())}})}addLoadStartListener(e){this.events.addListener('loadstart',e)}removeLoadStartListener(e){this.events.removeListener('loadstart',e)}addProgressListener(e){this.events.addListener('progress',e)}removeProgressListener(e){this.events.removeListener('progress',e)}}},function(e){function t(){throw new Error('setTimeout has not been defined')}function a(){throw new Error('clearTimeout has not been defined')}function n(e){if(p===setTimeout)return setTimeout(e,0);if((p===t||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function r(e){if(u===clearTimeout)return clearTimeout(e);if((u===a||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function i(){f&&g&&(f=!1,g.length?c=g.concat(c):m=-1,c.length&&o())}function o(){if(!f){var e=n(i);f=!0;for(var t=c.length;t;){for(g=c,c=[];++m<t;)g&&g[m].run();m=-1,t=c.length}g=null,f=!1,r(e)}}function s(e,t){this.fun=e,this.array=t}function d(){}var l=e.exports={},p,u;(function(){try{p='function'==typeof setTimeout?setTimeout:t}catch(a){p=t}try{u='function'==typeof clearTimeout?clearTimeout:a}catch(t){u=a}})();var c=[],f=!1,m=-1,g;l.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new s(e,t)),1!==c.length||f||n(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=d,l.addListener=d,l.once=d,l.off=d,l.removeListener=d,l.removeAllListeners=d,l.emit=d,l.prependListener=d,l.prependOnceListener=d,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(e,t,a){'use strict';function n(e,t,a,n,o,s,d,l){const p=[];for(let u=0;u<e.length;++u){const c=e[u],f=[],m=new Float32Array(3),g=new Float32Array(3),i=new Float32Array(3),h=new Float32Array(2),y=new Float32Array(2),_=new Float32Array(2),x=new Float32Array(2),b=new Float32Array(2),v=new Float32Array(2);let E=0===u?[0,0,0]:[0,0,0].map((e,t)=>(c.maxs[t]-c.mins[t])/2+c.mins[t]);for(let e=c.firstFace;e<c.firstFace+c.faceCount;++e){const p={buffer:new Float32Array(21*(t[e].edgeCount-2)),textureIndex:-1},u=s[t[e].textureInfo],c=d[u.textureIndex],S=n.slice(t[e].firstEdge,t[e].firstEdge+t[e].edgeCount),T=a[r(S[0])][0<S[0]?0:1];m[0]=o[T][0],m[1]=o[T][1],m[2]=o[T][2],h[0]=m[0]*u.s[0]+m[1]*u.s[1]+m[2]*u.s[2]+u.sShift,h[1]=m[0]*u.t[0]+m[1]*u.t[1]+m[2]*u.t[2]+u.tShift,x[0]=0,x[1]=0;const k=a[r(S[1])][0<S[1]?0:1];g[0]=o[k][0],g[1]=o[k][1],g[2]=o[k][2],y[0]=g[0]*u.s[0]+g[1]*u.s[1]+g[2]*u.s[2]+u.sShift,y[1]=g[0]*u.t[0]+g[1]*u.t[1]+g[2]*u.t[2]+u.tShift,b[0]=0,b[1]=.999;let R=0;for(let n=2;n<t[e].edgeCount;++n){const e=a[r(S[n])][0<S[n]?0:1];i[0]=o[e][0],i[1]=o[e][1],i[2]=o[e][2],_[0]=i[0]*u.s[0]+i[1]*u.s[1]+i[2]*u.s[2]+u.sShift,_[1]=i[0]*u.t[0]+i[1]*u.t[1]+i[2]*u.t[2]+u.tShift,v[0]=.999,v[1]=.999,p.buffer[R++]=m[0],p.buffer[R++]=m[1],p.buffer[R++]=m[2],p.buffer[R++]=h[0],p.buffer[R++]=h[1],p.buffer[R++]=x[0],p.buffer[R++]=x[1],p.buffer[R++]=g[0],p.buffer[R++]=g[1],p.buffer[R++]=g[2],p.buffer[R++]=y[0],p.buffer[R++]=y[1],p.buffer[R++]=b[0],p.buffer[R++]=b[1],p.buffer[R++]=i[0],p.buffer[R++]=i[1],p.buffer[R++]=i[2],p.buffer[R++]=_[0],p.buffer[R++]=_[1],p.buffer[R++]=v[0],p.buffer[R++]=v[1],g[0]=i[0],g[1]=i[1],g[2]=i[2],y[0]=_[0],y[1]=_[1],b[0]=v[0],b[1]=v[1]}(0===u.flags||-65536===u.flags)&&l.processFace(p.buffer,u,t[e].lightmapOffset),p.textureIndex=u.textureIndex;for(let e=0;e<p.buffer.length/7;++e)p.buffer[7*e]-=E[0],p.buffer[7*e+1]-=E[1],p.buffer[7*e+2]-=E[2],p.buffer[7*e+3]/=c.width,p.buffer[7*e+4]/=c.height;f.push(p)}p.push({origin:E,faces:f})}return p}var r=Math.abs;Object.defineProperty(t,'__esModule',{value:!0});const i=a(67),o=a(86),s=a(52),d=a(87),l=a(68),p=a(88);t.parseModels=n;var u;(function(e){e[e.Entities=0]='Entities',e[e.Planes=1]='Planes',e[e.Textures=2]='Textures',e[e.Vertices=3]='Vertices',e[e.Visibility=4]='Visibility',e[e.Nodes=5]='Nodes',e[e.TexInfo=6]='TexInfo',e[e.Faces=7]='Faces',e[e.Lighting=8]='Lighting',e[e.ClipNodes=9]='ClipNodes',e[e.Leaves=10]='Leaves',e[e.MarkSurfaces=11]='MarkSurfaces',e[e.Edges=12]='Edges',e[e.SurfEdges=13]='SurfEdges',e[e.Models=14]='Models'})(u=t.BspLumpIndex||(t.BspLumpIndex={}));t.BspParser=class{static parse(e,t){const a=new s.Reader(t),r=a.ui();if(30!==r)throw new Error('Invalid map version');const o=[];for(let n=0;15>n;++n)o.push({offset:a.ui(),length:a.ui()});const i=this.loadEntities(a,o[u.Entities].offset,o[u.Entities].length),l=this.loadTextures(a,o[u.Textures].offset),c=this.loadModels(a,o[u.Models].offset,o[u.Models].length),f=this.loadFaces(a,o[u.Faces].offset,o[u.Faces].length),m=this.loadEdges(a,o[u.Edges].offset,o[u.Edges].length),g=this.loadSurfEdges(a,o[u.SurfEdges].offset,o[u.SurfEdges].length),h=this.loadVertices(a,o[u.Vertices].offset,o[u.Vertices].length),y=this.loadTexInfo(a,o[u.TexInfo].offset,o[u.TexInfo].length),_=this.loadLightmap(a,o[u.Lighting].offset,o[u.Lighting].length),x=d.BspLightmapParser.init(_),b=n(c,f,m,g,h,y,l,x);return new p.Bsp(e,i,l,b,{width:d.BspLightmapParser.TEXTURE_SIZE,height:d.BspLightmapParser.TEXTURE_SIZE,data:x.getTexture()})}static loadFaces(e,t,a){e.seek(t);const n=[];for(let r=0;r<a/20;++r)n.push({plane:e.us(),planeSide:e.us(),firstEdge:e.ui(),edgeCount:e.us(),textureInfo:e.us(),styles:[e.ub(),e.ub(),e.ub(),e.ub()],lightmapOffset:e.ui()});return n}static loadModels(e,t,a){e.seek(t);const n=[];for(let r=0;r<a/64;++r)n.push({mins:[e.f(),e.f(),e.f()],maxs:[e.f(),e.f(),e.f()],origin:[e.f(),e.f(),e.f()],headNodes:[e.i(),e.i(),e.i(),e.i()],visLeaves:e.i(),firstFace:e.i(),faceCount:e.i()});return n}static loadEdges(e,t,a){e.seek(t);const n=[];for(let r=0;r<a/4;++r)n.push([e.us(),e.us()]);return n}static loadSurfEdges(e,t,a){e.seek(t);const n=[];for(let r=0;r<a/4;++r)n.push(e.i());return n}static loadVertices(e,t,a){e.seek(t);const n=[];for(let r=0;r<a/12;++r)n.push([e.f(),e.f(),e.f()]);return n}static loadTexInfo(e,t,a){e.seek(t);const n=[];for(let r=0;r<a/40;++r)n.push({s:[e.f(),e.f(),e.f()],sShift:e.f(),t:[e.f(),e.f(),e.f()],tShift:e.f(),textureIndex:e.i(),flags:e.i()});return n}static loadLightmap(e,t,a){return e.seek(t),e.arrx(a,s.ReaderDataType.UByte)}static loadTextureData(e){const t=e.nstr(16),a=e.ui(),n=e.ui(),r=!e.ui();if(r){const e=new Uint8Array(4);return e[0]=e[1]=e[2]=e[3]=255,{name:t,width:a,height:n,data:e,isExternal:r}}else{e.skip(12);const i=a*n,o=e.arrx(i,s.ReaderDataType.UByte);e.skip(21*(i/64)),e.skip(2);const d=e.arrx(768,s.ReaderDataType.UByte),p='{'===t[0]?l.paletteWithLastTransToRGBA(o,d):l.paletteToRGBA(o,d);return{name:t,width:a,height:n,data:p,isExternal:r}}}static loadTextures(e,t){e.seek(t);const a=e.ui(),n=[];for(let r=0;r<a;++r)n.push(e.ui());const r=[];for(let o=0;o<a;++o)4294967295===n[o]?r.push({name:'ERROR404',width:1,height:1,data:new Uint8Array([0,255,0,255]),isExternal:!1}):(e.seek(t+n[o]),r.push(this.loadTextureData(e)));return r}static loadEntities(e,t,a){e.seek(t);const n=o.vdf(e.nstr(a)),r=['origin','angles','_diffuse_light','_light','rendercolor','avelocity'],s=['renderamt','rendermode','scale'],d=n[0];return'worldspawn'===d.classname&&(d.model='*0',d.wad=d.wad||'',d.wad=d.wad.split(';').filter((e)=>e.length).map((e)=>e.replace(/\\/g,'/')).map((e)=>i.basename(e))),n.forEach((t)=>{var e=Number.parseFloat;t.model&&('undefined'==typeof t.renderamt&&(t.renderamt=0),'undefined'==typeof t.rendermode&&(t.rendermode=0),'undefined'==typeof t.renderfx&&(t.renderfx=0),'undefined'==typeof t.rendercolor&&(t.rendercolor='0 0 0')),r.forEach((a)=>{t[a]&&(t[a]=t[a].split(' ').map((t)=>e(t)))}),s.forEach((a)=>{t[a]&&(t[a]=e(t[a]))})}),n}}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.vdf=function(e){let t=0,a='',n='';const r=[];for(let o=0;o<e.length;++o){const i=e[o];switch(t){case 0:{if(/\s/.test(i))continue;else if('{'===i)r.push({}),t=1;else return[];break}case 1:{if(/\s/.test(i))continue;else if('}'===i)t=0;else if('"'===i)a='',t=2;else return[];break}case 2:{'"'===i?t=3:a+=i;break}case 3:{if(/\s/.test(i))continue;else'"'===i&&(n='',t=4);break}case 4:{'"'===i?(r[r.length-1][a]=n,t=1):n+=i;break}}}return r}},function(e,t){'use strict';var a=Math.floor,n=Math.ceil,r=Math.min;Object.defineProperty(t,'__esModule',{value:!0});class l{constructor(e){this.block=new Uint16Array(l.TEXTURE_SIZE),this.lightmap=e,this.texture=new Uint8Array(4*(l.TEXTURE_SIZE*l.TEXTURE_SIZE)),this.texture[this.texture.length-4]=255,this.texture[this.texture.length-3]=255,this.texture[this.texture.length-2]=255,this.texture[this.texture.length-1]=255}static init(e){return new l(e)}getTexture(){return this.texture}processFace(e,t,a){const n=this.getDimensions(e),r=this.readLightmap(a,n.width,n.height);if(r)for(let a=0,i;a<e.length/7;++a){i=e[7*a]*t.s[0]+e[7*a+1]*t.s[1]+e[7*a+2]*t.s[2]+t.sShift-n.minU,i+=16*r.x+8,i/=16*l.TEXTURE_SIZE;let o=e[7*a]*t.t[0]+e[7*a+1]*t.t[1]+e[7*a+2]*t.t[2]+t.tShift-n.minV;o+=16*r.y+8,o/=16*l.TEXTURE_SIZE,e[7*a+5]=i,e[7*a+6]=o}}getDimensions(e){let t=a(e[3]),r=a(e[4]),o=a(e[3]),s=a(e[4]);for(let n=1;n<e.length/7;++n)a(e[7*n+3])<t&&(t=a(e[7*n+3])),a(e[7*n+4])<r&&(r=a(e[7*n+4])),a(e[7*n+3])>o&&(o=a(e[7*n+3])),a(e[7*n+4])>s&&(s=a(e[7*n+4]));return{width:n(o/16)-a(t/16)+1,height:n(s/16)-a(r/16)+1,minU:a(t),minV:a(r)}}readLightmap(e,t,n){if(0>=n||0>=t)return null;const i=this.findFreeSpace(t,n);if(i){const u=[i.x,i.y],o=[t,n],s=[l.TEXTURE_SIZE,l.TEXTURE_SIZE];for(let d=0;d<t*n;++d){const t=u[1]*s[0]+u[0]+s[0]*a(d/o[0])+d%o[0];this.texture[4*t]=r(255,2*this.lightmap[e+3*d]),this.texture[4*t+1]=r(255,2*this.lightmap[e+3*d+1]),this.texture[4*t+2]=r(255,2*this.lightmap[e+3*d+2]),this.texture[4*t+3]=255}}return i}findFreeSpace(e,t){let a=0,n=0,r=l.TEXTURE_SIZE;for(let o=0;o<this.block.length-e;++o){let t=0,i;for(i=0;i<e&&!(this.block[o+i]>=r);++i)this.block[o+i]>t&&(t=this.block[o+i]);i===e&&(a=o,n=r=t)}if(r+t>l.TEXTURE_SIZE)return null;for(let n=0;n<e;++n)this.block[a+n]=r+t;return{x:a,y:n}}}l.TEXTURE_SIZE=1024,t.BspLightmapParser=l},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});t.Bsp=class{constructor(e,t,a,n,r){this.skies=[],this.sprites={},this.name=e,this.entities=t,this.textures=a,this.models=n,this.lightmap=r}}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});class a{constructor(e){this.view=new Uint8Array(e,0,e.byteLength)}getBits(e,t,a=!1){const n=8*this.view.length-e;if(t>n)throw new Error('Bits out of bounds');let r=0;for(let n=0;n<t;){const a=t-n,i=7&e,o=this.view[e>>3],s=Math.min(a,8-i);r|=(o>>i&(1<<s)-1)<<n,e+=s,n+=s}return a?(32!==t&&r&1<<t-1&&(r|=-1^(1<<t)-1),r):r>>>0}getInt8(e){return this.getBits(e,8,!0)}getUint8(e){return this.getBits(e,8,!1)}getInt16(e){return this.getBits(e,16,!0)}getUint16(e){return this.getBits(e,16,!1)}getInt32(e){return this.getBits(e,32,!0)}getUint32(e){return this.getBits(e,32,!1)}getFloat32(e){return a.scratch.setUint32(0,this.getUint32(e)),a.scratch.getFloat32(0)}getFloat64(e){return a.scratch.setUint32(0,this.getUint32(e)),a.scratch.setUint32(4,this.getUint32(e+32)),a.scratch.getFloat64(0)}}a.scratch=new DataView(new ArrayBuffer(8)),t.BitView=a;t.BitStream=class{constructor(e){this.view=new a(e),this.index=0}readBits(e,t=!1){const a=this.view.getBits(this.index,e,t);return this.index+=e,a}readInt8(){const e=this.view.getInt8(this.index);return this.index+=8,e}readUint8(){const e=this.view.getUint8(this.index);return this.index+=8,e}readInt16(){const e=this.view.getInt16(this.index);return this.index+=16,e}readUint16(){const e=this.view.getUint16(this.index);return this.index+=16,e}readInt32(){const e=this.view.getInt32(this.index);return this.index+=32,e}readUint32(){const e=this.view.getUint32(this.index);return this.index+=32,e}readFloat32(){const e=this.view.getFloat32(this.index);return this.index+=32,e}readFloat64(){const e=this.view.getFloat64(this.index);return this.index+=64,e}readString(e=0,t=!1){let a=0;const n=[];for(let r=!0;!e||e&&a<e;){const t=this.readUint8();if(0===t&&(r=!1,!e))break;r&&n.push(t),a++}const r=String.fromCharCode.apply(null,n);if(t)try{return decodeURIComponent(r)}catch(t){return r}else return r}}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(72);class r{constructor(e){this.index=-1,this.name='',this.buffer=e}static create(e){return new Promise((t,a)=>{n.SoundSystem.getContext().decodeAudioData(e,(e)=>{t(new r(e))},(e)=>{a(e)})})}}t.Sound=r},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(52);class i{constructor(e,t,a,n){this.name=e,this.width=t,this.height=a,this.data=n}static parse(e,t){let a=new n.Reader(e),r={idLength:a.ub(),colorMapType:a.ub(),imageType:a.ub(),colorMap:{firstEntryIndex:a.us(),length:a.us(),size:a.ub()},image:{xOrigin:a.us(),yOrigin:a.us(),width:a.us(),height:a.us(),depth:a.ub(),descriptor:a.ub()}};if(r.idLength&&a.arrx(r.idLength,n.ReaderDataType.UByte),r.colorMapType)throw new Error('Not implemented');let o=r.image.width,s=r.image.height,d=o*s,l;if(2===r.imageType){let e=d*r.image.depth/8;if(l=a.arrx(e,n.ReaderDataType.UByte),24===r.image.depth){let e=new Uint8Array(4*d);for(let t=0;t<s;++t)for(let a=0,n;a<o;++a)n=(s-1-t)*o+a,e[4*n]=l[3*(t*o+a)+2],e[4*n+1]=l[3*(t*o+a)+1],e[4*n+2]=l[3*(t*o+a)],e[4*n+3]=255;l=e}else if(32===r.image.depth){let e=new Uint8Array(4*d);for(let t=0;t<s;++t)for(let a=0,n;a<o;++a)n=(s-1-t)*o+a,e[4*n]=l[4*(t*o+a)+2],e[4*n+1]=l[4*(t*o+a)+1],e[4*n+2]=l[4*(t*o+a)],e[4*n+3]=255;l=e}}else if(10===r.imageType&&(l=new Uint8Array(4*d),24===r.image.depth))for(let e=0;e<s;++e)for(let t=0,n;t<o;)if(n=a.ub(),128&n){n=(127&n)+1;for(let r=a.ub(),i=a.ub(),d=a.ub(),p;t<o&&n;)p=(s-1-e)*o+t,l[4*p]=d,l[4*p+1]=i,l[4*p+2]=r,l[4*p+3]=255,++t,--n}else for(n=(127&n)+1;t<o&&n;){let r=(s-1-e)*o+t;l[4*r+2]=a.ub(),l[4*r+1]=a.ub(),l[4*r]=a.ub(),l[4*r+3]=255,++t,--n}return new i(t,r.image.width,r.image.height,l)}}t.Tga=i},function(e,t,a){'use strict';function n(e){const t=e.nstr(16),a=e.ui(),n=e.ui();e.skip(16);const r=a*n,i=e.arrx(r,p.ReaderDataType.UByte);e.skip(21*(r/64)),e.skip(2);const o=e.arrx(768,p.ReaderDataType.UByte),s='{'===t[0]?u.paletteWithLastTransToRGBA(i,o):u.paletteToRGBA(i,o);return{type:'decal',name:t,width:a,height:n,data:s}}function i(e,t){return{type:'cache',name:t.name}}function o(e){const t=e.nstr(16),a=e.ui(),n=e.ui();e.skip(16);const r=a*n,i=e.arrx(r,p.ReaderDataType.UByte);e.skip(21*(r/64)),e.skip(2);const o=e.arrx(768,p.ReaderDataType.UByte),s='{'===t[0]?u.paletteWithLastTransToRGBA(i,o):u.paletteToRGBA(i,o);return{type:'texture',name:t,width:a,height:n,data:s}}function s(e,t){const a=e.ui(),n=e.ui(),r=e.ui(),i=e.ui(),o=[];for(let a=0;256>a;++a)o.push({offset:e.us(),width:e.us()});const s=e.arrx(a*n,p.ReaderDataType.UByte);e.skip(2);const d=e.arrx(768,p.ReaderDataType.UByte);return{type:'font',name:t.name,width:a,height:n,rowCount:r,rowHeight:i,glyphs:o,data:u.paletteToRGBA(s,d)}}function d(e,t){return{type:'unknown',name:t.name,data:e.arrx(t.length,e.ub.bind(e))}}function l(e,t){switch(e.seek(t.offset),t.type){case 64:return n(e);case 66:return i(e,t);case 67:return o(e);case 70:return s(e,t);default:return d(e,t);}}Object.defineProperty(t,'__esModule',{value:!0});const p=a(52),u=a(68);class c{constructor(e){this.entries=e}static parse(e){const t=new p.Reader(e),a=t.nstr(4);if('WAD3'!==a)throw new Error('Invalid WAD file format');const n=t.ui(),r=t.ui();t.seek(r);const i=[];for(let a=0;a<n;++a){const e={offset:t.ui(),diskLength:t.ui(),length:t.ui(),type:t.b(),isCompressed:t.b(),name:''};t.skip(2),e.name=t.nstr(16),i.push(e)}const o=i.map((a)=>l(t,a));return new c(o)}}t.Wad=c},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.xhr=function(e,t){let a=t.method||'GET',n=t.isBinary,r=t.progressCallback;if(!e)throw new Error('Url parameter missing');return new Promise((t,i)=>{let o=new XMLHttpRequest;n&&(o.responseType='arraybuffer'),n&&r&&o.addEventListener('progress',(e)=>{if(e.lengthComputable)r(o,e.loaded/e.total);else{let t=o.getResponseHeader('content-length'),a=0;t&&(a=parseFloat(t));let n=o.getResponseHeader('content-encoding');if(a&&n&&-1<n.indexOf('gzip')){a*=4;let t=Math.min(.99,e.loaded/a);r(o,t)}else r(o,0)}}),o.addEventListener('readystatechange',(e)=>{4!==e.target.readyState||(200===e.target.status?(r&&r(o,1),t(e.target.response)):i({status:e.target.status}))}),o.open(a,e,!0),o.send()})}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(95);t.Mouse=class{constructor(){this.click=!1,this.leftClick=!1,this.rightClick=!1,this.position=new n.Vector2,this.delta=new n.Vector2}}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});t.Vector2=class{constructor(){this.x=0,this.y=0}};t.Vector3=class{constructor(){this.x=0,this.y=0,this.z=0}}},function(e,t,a){'use strict';var n=Math.min,r=Math.max;Object.defineProperty(t,'__esModule',{value:!0});const i=a(69),o=a(54),s=a(71),d=(e,t)=>{e.camera.position[0]=t.cameraPos[0],e.camera.position[1]=t.cameraPos[1],e.camera.position[2]=t.cameraPos[2],e.camera.rotation[0]=i.glMatrix.toRadian(t.cameraRot[0]),e.camera.rotation[1]=i.glMatrix.toRadian(t.cameraRot[1]),e.camera.rotation[2]=i.glMatrix.toRadian(t.cameraRot[2])};t.ReplayPlayer=class{constructor(e){this.reset(),this.game=e,this.state=new s.ReplayState,this.replay=null,this.events=new o.EventEmitter}reset(){if(this.currentMap=0,this.currentChunk=0,this.currentTime=0,this.currentTick=0,this.isPlaying=!1,this.isPaused=!1,this.speed=1,this.replay){let e=this.replay.maps[0].chunks[0];e.reader.seek(0),this.state=e.state.clone()}}on(e,t){return this.events.on(e,t)}off(e,t){this.events.removeListener(e,t)}changeReplay(e){this.replay=e,this.reset()}play(){this.isPlaying?this.isPaused&&(this.isPaused=!1):this.isPlaying=!0,this.events.emit('play')}pause(){this.isPlaying&&(this.isPaused=!0),this.events.emit('pause')}stop(){this.reset(),this.events.emit('stop')}speedUp(){this.speed=n(2*this.speed,4)}speedDown(){this.speed=r(this.speed/2,.25)}seek(e){let a=r(0,n(this.replay.length,e)),t=this.replay.maps;for(let n=0,r;n<t.length;++n){r=t[n].chunks;for(let e=0;e<r.length;++e){let t=r[e],i=t.startTime,o=i+t.timeLength;if(a>=i&&a<o){this.currentMap=n,this.currentChunk=e,this.currentTime=a,this.state=t.state.clone();let i=this.replay.deltaDecoders,o=this.replay.customMessages,l=t.reader;for(l.seek(0);;){let e=l.tell(),t=s.Replay.readFrame(l,i,o);if(t.time<=a)this.state.feedFrame(t),this.currentTick=t.tick;else{l.seek(e);break}}return void d(this.game,this.state)}}}}seekByPercent(e){e=r(0,n(e,100))/100,e*=this.replay.length,this.seek(e)}update(e){if(!this.isPlaying||this.isPaused)return;let t=this.replay.deltaDecoders,a=this.replay.customMessages,n=this.replay.maps[this.currentMap],i=n.chunks[this.currentChunk],o=i.reader,r=this.currentTime+e*this.speed,l=!1;for(;;){let e=o.tell();if(e>=i.data.length){if(!(this.currentChunk===n.chunks.length-1))this.currentChunk++,i=n.chunks[this.currentChunk];else if(this.currentMap===this.replay.maps.length-1){l=!0;break}else this.currentChunk=0,this.currentMap++,n=this.replay.maps[this.currentMap],i=n.chunks[this.currentChunk];o=i.reader,o.seek(0),e=0;continue}let d=this.game.sounds,p=s.Replay.readFrame(o,t,a);if(2>p.type){for(let e=0,t;e<p.data.length;++e)if(t=p.data[e],6===t.type){let e=t.data,a=d.find((t)=>t.index===e.soundIndex);if(a&&'common/null.wav'!==a.name){let t=e.channel,n=e.volume;this.game.soundSystem.play(a,t,n)}}else if(29===t.type){let e=t.data,a=d.find((t)=>t.index===e.soundIndex);a&&'common/null.wav'!==a.name}else 9===t.type&&t.data.commands.forEach((e)=>{switch(e.func){case'speak':case'spk':case'play':{let t=e.params[0]+'.wav',a=d.find((e)=>e.name===t);if(!a)return;this.game.soundSystem.play(a,1,.7);break}case'playvol':{let t=e.params[0]+'.wav',a;a=isNaN(e.params[1])?1:parseFloat(e.params[1]);let n=d.find((e)=>e.name===t);if(!n)return;this.game.soundSystem.play(n,1,a);break}}});}else if(8===p.type){let e=p.sound.sample,t=d.find((t)=>t.name===e);if(t&&'common/null.wav'!==t.name){let e=p.sound.channel,a=p.sound.volume;this.game.soundSystem.play(t,e,a)}}if(p.time<=r)this.state.feedFrame(p),this.currentTick=p.tick;else{o.seek(e);break}}d(this.game,this.state),this.currentTime=r,l&&this.stop()}}},function(e,t,a){'use strict';var n=Math.PI;Object.defineProperty(t,'__esModule',{value:!0});const r=a(69);class i{constructor(e){this.projectionMatrix=r.mat4.create(),this.fov=r.glMatrix.toRadian(60),this.near=1,this.far=8192,this.viewMatrix=r.mat4.create(),this.position=r.vec3.create(),this.rotation=r.vec3.create(),this.aspect=e,this.updateProjectionMatrix()}static init(e){return new i(e)}updateProjectionMatrix(){r.mat4.perspective(this.projectionMatrix,this.fov,this.aspect,this.near,this.far)}updateViewMatrix(){r.mat4.identity(this.viewMatrix),r.mat4.rotateX(this.viewMatrix,this.viewMatrix,this.rotation[0]-n/2),r.mat4.rotateZ(this.viewMatrix,this.viewMatrix,n/2-this.rotation[1]),r.mat4.translate(this.viewMatrix,this.viewMatrix,[-this.position[0],-this.position[1],-this.position[2]])}}t.Camera=i},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a;(function(e){e[e.VERTEX=0]='VERTEX',e[e.FRAGMENT=1]='FRAGMENT'})(a=t.ShaderType||(t.ShaderType={}));class n{static init(e){const t=e.getContext('webgl',{alpha:!1});return t?new n(t):(console.log('contextn\'t'),null)}constructor(e){this.gl=e}createProgram(e){const t=this.gl;var n=t.createProgram();if(!n)return console.error('gl.createProgramn\'t'),null;const r=this.createShader({source:e.vertexShaderSrc,type:a.VERTEX}),i=this.createShader({source:e.fragmentShaderSrc,type:a.FRAGMENT});if(t.attachShader(n,r),t.attachShader(n,i),t.linkProgram(n),t.validateProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){t.deleteProgram(n),t.deleteShader(r),t.deleteShader(i);const e=t.getProgramInfoLog(n);return console.debug(`Could not initialize shader: ${e}`),null}if(!t.getProgramParameter(n,t.VALIDATE_STATUS)){t.deleteProgram(n),t.deleteShader(r),t.deleteShader(i);const e=t.getProgramInfoLog(n);return console.debug(`Could not initialize shader: ${e}`),null}t.useProgram(n);const o={};for(let a=0;a<e.attributeNames.length;++a){const r=e.attributeNames[a],i=t.getAttribLocation(n,r);if(-1===i)return console.error(`gl.getAttribLocation't named "${r}"`),t.deleteProgram(n),null;o[r]=i}const s={};for(let a=0;a<e.uniformNames.length;++a){const r=e.uniformNames[a],i=t.getUniformLocation(n,r);if(null===i)return console.error(`gl.getUniformLocation't named "${r}"`),t.deleteProgram(n),null;s[r]=i}return{handle:n,attributes:o,uniforms:s}}createShader(e){const t=this.gl,n=e.type===a.VERTEX?t.createShader(t.VERTEX_SHADER):t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,e.source),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.debug(t.getShaderInfoLog(n)),t.deleteShader(n),null)}getAnisotropyExtension(){return this.gl.getExtension('EXT_texture_filter_anisotropic')||this.gl.getExtension('MOZ_EXT_texture_filter_anisotropic')||this.gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic')}getMaxAnisotropy(e){return this.gl.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}}t.Context=n},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});class a{constructor(e){this.draw=()=>{const e=this.context.gl;e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},this.context=e.context}static init(e){const t=e.gl;return t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.CULL_FACE),t.cullFace(t.FRONT),new a({context:e})}}t.Renderer=a},function(e,t,a){'use strict';var n=Math.atan2,r=Math.sqrt,i=Math.pow,o=Math.PI;Object.defineProperty(t,'__esModule',{value:!0});const s=a(69),d=a(77),l=a(101),p=a(104),u=a(73),c=a(105);class f{constructor(e){this.modelMatrix=s.mat4.create(),this.sceneInfo={length:0,data:new Float32Array(0),models:[]},this.textures=[],this.sprites={},this.lightmap=null,this.buffer=e.buffer,this.context=e.context,this.shader=e.shader}static init(e){const t=l.MainShader.init(e);if(!t)return console.error('shadern\'t'),null;t.useProgram(e.gl);const a=e.gl.createBuffer();return a?new f({buffer:a,context:e,shader:t}):(console.error('buffern\'t'),null)}changeMap(e){this.fillBuffer(e),this.loadTextures(e),this.loadSpriteTextures(e),this.loadLightmap(e),this.bsp=e}fillBuffer(e){const t=this.context.gl,a=e.models,n=['aaatrigger','clip','null','hint','nodraw','invisible','skip','trigger','sky','fog'];let r=0;for(let t=0;t<a.length;++t){const i=a[t];for(let t=0;t<i.faces.length;++t){const a=e.textures[i.faces[t].textureIndex];-1<n.indexOf(a.name)||(r+=i.faces[t].buffer.length)}}r+=42;const o={length:r,data:new Float32Array(r),models:[]};let s=0;for(let t=0;t<e.models.length;++t){const a=e.models[t],r={origin:a.origin,offset:s,length:0,isTransparent:!1,faces:[]};for(let t=0;t<a.faces.length;++t){const i=e.textures[a.faces[t].textureIndex];if(-1<n.indexOf(i.name))continue;const d={offset:s,length:0,textureIndex:-1};for(let e=0;e<a.faces[t].buffer.length;++e)o.data[s++]=a.faces[t].buffer[e];r.isTransparent||'{'!==e.textures[a.faces[t].textureIndex].name[0]||(r.isTransparent=!0),d.textureIndex=a.faces[t].textureIndex,d.length=s-d.offset,r.faces.push(d)}r.length=s-r.offset,o.models.push(r)}o.models.push({origin:[0,0,0],offset:s,length:4,isTransparent:!1,faces:[{offset:s,length:4,textureIndex:0}]}),o.data[s++]=-.5,o.data[s++]=0,o.data[s++]=-.5,o.data[s++]=1,o.data[s++]=1,o.data[s++]=0,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=0,o.data[s++]=0,o.data[s++]=0,o.data[s++]=0,o.data[s++]=-.5,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=1,o.data[s++]=0,o.data[s++]=0,o.data[s++]=0,o.data[s++]=-.5,o.data[s++]=0,o.data[s++]=-.5,o.data[s++]=1,o.data[s++]=1,o.data[s++]=0,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=0,o.data[s++]=-.5,o.data[s++]=0,o.data[s++]=1,o.data[s++]=0,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=0,o.data[s++]=0,o.data[s++]=0,o.data[s++]=0,s=0;const l=d.cloneDeep(o);for(let t=0;t<l.models.length;++t){const e=l.models[t];e.faces.sort((e,t)=>e.textureIndex-t.textureIndex);for(let t=0;t<e.faces.length;++t){const a=e.faces[t],n=s;for(let e=0;e<a.length;++e)l.data[s]=o.data[a.offset+e],s+=1;a.offset=n}const a=[];let n=-1;for(let t=0;t<e.faces.length;++t){const r=e.faces[t];r.textureIndex===n?a[a.length-1].length+=r.length:(a.push({offset:r.offset,length:r.length,textureIndex:r.textureIndex}),n=r.textureIndex)}e.faces=a}this.sceneInfo=l,t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.sceneInfo.data,t.STATIC_DRAW)}loadTextures(e){const t=this.context.gl;for(let a=0;a<e.textures.length;++a){const n=t.createTexture();if(!n)throw new Error('fatal error');const r=e.textures[a];if(!c.isPowerOfTwo(r.width)||!c.isPowerOfTwo(r.height)){const e=r.width,t=r.height,a=c.nextPowerOfTwo(r.width),n=c.nextPowerOfTwo(r.height);r.data=c.resizeTexture(r.data,e,t,a,n),r.width=a,r.height=n}t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.generateMipmap(t.TEXTURE_2D);const i=this.context.getAnisotropyExtension();i&&t.texParameteri(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,this.context.getMaxAnisotropy(i)),this.textures.push({name:r.name,width:r.width,height:r.height,data:r.data,handle:n})}}loadSpriteTextures(e){const t=this.context.gl;for(const[a,n]of Object.entries(e.sprites)){const e=t.createTexture();if(!e)throw new Error('fatal error');const r=n.frames[0];if(!c.isPowerOfTwo(r.width)||!c.isPowerOfTwo(r.height)){const e=r.width,t=r.height,a=c.nextPowerOfTwo(r.width),n=c.nextPowerOfTwo(r.height);r.data=c.resizeTexture(r.data,e,t,a,n),r.width=a,r.height=n}t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.generateMipmap(t.TEXTURE_2D);const i=this.context.getAnisotropyExtension();i&&t.texParameteri(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,this.context.getMaxAnisotropy(i)),this.textures.push({name:a,width:r.width,height:r.height,data:r.data,handle:e}),this.sprites[a]=n}}loadLightmap(e){const t=this.context.gl,a=t.createTexture();if(!a)throw new Error('fatal error');t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.lightmap.width,e.lightmap.height,0,t.RGBA,t.UNSIGNED_BYTE,e.lightmap.data),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),this.lightmap={data:e.lightmap.data,handle:a}}draw(e,t){if(this.bsp&&this.lightmap){const a=this.context.gl,n=this.shader;n.useProgram(a),e.updateProjectionMatrix(),e.updateViewMatrix(),n.setViewMatrix(a,e.viewMatrix),n.setProjectionMatrix(a,e.projectionMatrix),a.bindBuffer(a.ARRAY_BUFFER,this.buffer),n.enableVertexAttribs(a),n.setVertexAttribPointers(a),n.setDiffuse(a,0),n.setLightmap(a,1),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.lightmap.handle),a.activeTexture(a.TEXTURE0);const r=[],o=[];for(let a=1;a<t.length;++a){const n=t[a];if(n.model)if(!n.rendermode||n.rendermode==p.RenderMode.Normal||n.rendermode==p.RenderMode.Solid){if('*'===n.model[0]){const e=this.sceneInfo.models[parseInt(n.model.substr(1))];if(e.isTransparent){o.push(n);continue}}else if(-1<n.model.indexOf('.spr')){o.push(n);continue}r.push(n)}else n.rendermode==p.RenderMode.Additive?o.push(n):o.push(n)}n.setOpacity(a,1),this.renderWorldSpawn(),this.renderOpaqueEntities(e,r),o.length&&(a.depthMask(!1),this.renderTransparentEntities(o,e),a.depthMask(!0))}}renderWorldSpawn(){const e=this.sceneInfo.models[0],t=this.context.gl;s.mat4.identity(this.modelMatrix),this.shader.setModelMatrix(t,this.modelMatrix);for(let a=0;a<e.faces.length;++a){const n=e.faces[a];t.bindTexture(t.TEXTURE_2D,this.textures[n.textureIndex].handle),t.drawArrays(t.TRIANGLES,n.offset/7,n.length/7)}}renderOpaqueEntities(e,t){const a=this.context.gl,d=this.shader,l=this.modelMatrix;for(let c=0;c<t.length;++c){const f=t[c],m=parseInt(f.model.substr(1)),g=this.sceneInfo.models[m];if(g){const e=f.angles||[0,0,0],t=f.origin?s.vec3.fromValues(f.origin[0],f.origin[1],f.origin[2]):s.vec3.create();s.vec3.add(t,t,g.origin),s.mat4.identity(l),s.mat4.translate(l,l,t),s.mat4.rotateZ(l,l,e[1]*o/180),s.mat4.rotateX(this.modelMatrix,this.modelMatrix,e[2]*o/180),d.setModelMatrix(a,this.modelMatrix);for(let e=0;e<g.faces.length;++e){const t=g.faces[e];a.bindTexture(a.TEXTURE_2D,this.textures[t.textureIndex].handle),a.drawArrays(a.TRIANGLES,t.offset/7,t.length/7)}}else if(-1<f.model.indexOf('.spr')){const t=this.textures.find((e)=>e.name===f.model),c=this.sprites[f.model];if(t&&c){const m=f.origin?s.vec3.fromValues(f.origin[0],f.origin[1],f.origin[2]):s.vec3.create(),g=s.vec3.fromValues(t.width,1,t.height),h=f.angles?s.vec3.fromValues(f.angles[0],f.angles[2],f.angles[1]):s.vec3.create();switch(s.vec3.scale(g,g,f.scale||1),s.mat4.identity(l),s.mat4.translate(l,l,m),c.header.type){case u.SpriteType.VP_PARALLEL_UPRIGHT:{s.mat4.rotateZ(l,l,e.rotation[1]+o/2);break}case u.SpriteType.FACING_UPRIGHT:{s.mat4.rotateZ(l,l,e.rotation[1]+o/2);break}case u.SpriteType.VP_PARALLEL:{s.mat4.rotateZ(l,l,n(m[1]-e.position[1],m[0]-e.position[0])+o/2),s.mat4.rotateX(l,l,n(e.position[2]-m[2],r(i(e.position[0]-m[0],2)+i(e.position[1]-m[1],2))));break}case u.SpriteType.ORIENTED:{s.mat4.rotateY(l,l,h[0]*o/180+o),s.mat4.rotateZ(l,l,h[1]*o/180+o),s.mat4.rotateX(l,l,h[2]*o/180-o/2);break}case u.SpriteType.VP_PARALLEL_ORIENTED:{s.mat4.rotateY(l,l,h[0]*o/180+o),s.mat4.rotateZ(l,l,h[1]*o/180+o);break}default:throw new Error('Invalid sprite type');}s.mat4.scale(l,l,g),d.setModelMatrix(a,l),d.setOpacity(a,(f.renderamt||255)/255);const y=f.rendermode||p.RenderMode.Normal;switch(y){case p.RenderMode.Normal:{d.setOpacity(a,1),a.bindTexture(a.TEXTURE_2D,t.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break}case p.RenderMode.Color:{d.setOpacity(a,(f.renderamt||255)/255),a.bindTexture(a.TEXTURE_2D,t.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break}case p.RenderMode.Texture:{d.setOpacity(a,(f.renderamt||255)/255),a.bindTexture(a.TEXTURE_2D,t.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break}case p.RenderMode.Glow:{a.blendFunc(a.SRC_ALPHA,a.DST_ALPHA),d.setOpacity(a,(f.renderamt||255)/255),a.bindTexture(a.TEXTURE_2D,t.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);break}case p.RenderMode.Solid:{d.setOpacity(a,(f.renderamt||255)/255),a.bindTexture(a.TEXTURE_2D,t.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break}case p.RenderMode.Additive:{a.blendFunc(a.SRC_ALPHA,a.DST_ALPHA),d.setOpacity(a,(f.renderamt||255)/255),a.bindTexture(a.TEXTURE_2D,t.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);break}}}}}}renderTransparentEntities(e,t){const a=this.context.gl,d=this.shader,l=this.modelMatrix,c=e.map((a,e)=>({index:e,distance:s.vec3.dist(t.position,a.origin||[0,0,0])})).sort((e,t)=>e.distance-t.distance);for(let f=0;f<c.length;++f){const m=e[c[f].index],g=parseInt(m.model.substr(1)),h=this.sceneInfo.models[g];if(h){const e=m.angles||[0,0,0],t=m.origin||[0,0,0];t[0]+=h.origin[0],t[1]+=h.origin[1],t[2]+=h.origin[2],s.mat4.identity(l),s.mat4.translate(l,l,t),s.mat4.rotateZ(l,l,e[1]*o/180),s.mat4.rotateX(this.modelMatrix,this.modelMatrix,e[2]*o/180),d.setModelMatrix(a,this.modelMatrix);const n=m.rendermode||p.RenderMode.Normal;switch(n){case p.RenderMode.Normal:{d.setOpacity(a,1);for(let e=0;e<h.faces.length;++e){const t=h.faces[e];a.bindTexture(a.TEXTURE_2D,this.textures[t.textureIndex].handle),a.drawArrays(a.TRIANGLES,t.offset/7,t.length/7)}break}case p.RenderMode.Color:{d.setOpacity(a,(m.renderamt||255)/255);for(let e=0;e<h.faces.length;++e){const t=h.faces[e];a.bindTexture(a.TEXTURE_2D,this.textures[t.textureIndex].handle),a.drawArrays(a.TRIANGLES,t.offset/7,t.length/7)}break}case p.RenderMode.Texture:{d.setOpacity(a,(m.renderamt||255)/255);for(let e=0;e<h.faces.length;++e){const t=h.faces[e];a.bindTexture(a.TEXTURE_2D,this.textures[t.textureIndex].handle),a.drawArrays(a.TRIANGLES,t.offset/7,t.length/7)}break}case p.RenderMode.Glow:{d.setOpacity(a,(m.renderamt||255)/255);for(let e=0;e<h.faces.length;++e){const t=h.faces[e];a.bindTexture(a.TEXTURE_2D,this.textures[t.textureIndex].handle),a.drawArrays(a.TRIANGLES,t.offset/7,t.length/7)}break}case p.RenderMode.Solid:{d.setOpacity(a,(m.renderamt||255)/255);for(let e=0;e<h.faces.length;++e){const t=h.faces[e];a.bindTexture(a.TEXTURE_2D,this.textures[t.textureIndex].handle),a.drawArrays(a.TRIANGLES,t.offset/7,t.length/7)}break}case p.RenderMode.Additive:{a.blendFunc(a.SRC_ALPHA,a.DST_ALPHA),d.setOpacity(a,(m.renderamt||255)/255);for(let e=0;e<h.faces.length;++e){const t=h.faces[e];a.bindTexture(a.TEXTURE_2D,this.textures[t.textureIndex].handle),a.drawArrays(a.TRIANGLES,t.offset/7,t.length/7)}a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);break}}}else if(-1<m.model.indexOf('.spr')){const e=this.textures.find((e)=>e.name===m.model),c=this.sprites[m.model];if(e&&c){const f=m.origin?s.vec3.fromValues(m.origin[0],m.origin[1],m.origin[2]):s.vec3.create(),g=s.vec3.fromValues(e.width,1,e.height),h=m.angles?s.vec3.fromValues(m.angles[0],m.angles[2],m.angles[1]):s.vec3.create();switch(s.vec3.scale(g,g,m.scale||1),s.mat4.identity(l),s.mat4.translate(l,l,f),c.header.type){case u.SpriteType.VP_PARALLEL_UPRIGHT:{s.mat4.rotateZ(l,l,t.rotation[1]+o/2);break}case u.SpriteType.FACING_UPRIGHT:{s.mat4.rotateZ(l,l,t.rotation[1]+o/2);break}case u.SpriteType.VP_PARALLEL:{s.mat4.rotateZ(l,l,n(f[1]-t.position[1],f[0]-t.position[0])+o/2),s.mat4.rotateX(l,l,n(t.position[2]-f[2],r(i(t.position[0]-f[0],2)+i(t.position[1]-f[1],2))));break}case u.SpriteType.ORIENTED:{s.mat4.rotateY(l,l,h[0]*o/180+o),s.mat4.rotateZ(l,l,h[1]*o/180+o),s.mat4.rotateX(l,l,h[2]*o/180-o/2);break}case u.SpriteType.VP_PARALLEL_ORIENTED:{s.mat4.rotateY(l,l,h[0]*o/180+o),s.mat4.rotateZ(l,l,h[1]*o/180+o);break}default:throw new Error('Invalid sprite type');}s.mat4.scale(l,l,g),d.setModelMatrix(a,l),d.setOpacity(a,(m.renderamt||255)/255);const y=m.rendermode||p.RenderMode.Normal;switch(y){case p.RenderMode.Normal:{d.setOpacity(a,1),a.bindTexture(a.TEXTURE_2D,e.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break}case p.RenderMode.Color:{d.setOpacity(a,(m.renderamt||255)/255),a.bindTexture(a.TEXTURE_2D,e.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break}case p.RenderMode.Texture:{d.setOpacity(a,(m.renderamt||255)/255),a.bindTexture(a.TEXTURE_2D,e.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break}case p.RenderMode.Glow:{a.blendFunc(a.SRC_ALPHA,a.DST_ALPHA),d.setOpacity(a,(m.renderamt||255)/255),a.bindTexture(a.TEXTURE_2D,e.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);break}case p.RenderMode.Solid:{d.setOpacity(a,(m.renderamt||255)/255),a.bindTexture(a.TEXTURE_2D,e.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break}case p.RenderMode.Additive:{a.blendFunc(a.SRC_ALPHA,a.DST_ALPHA),d.setOpacity(a,(m.renderamt||255)/255),a.bindTexture(a.TEXTURE_2D,e.handle),a.drawArrays(a.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);break}}}}}}}t.WorldScene=f},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});class n{static init(e){const t=a(102),r=a(103),i=e.createProgram({vertexShaderSrc:t,fragmentShaderSrc:r,attributeNames:['position','texCoord','texCoord2'],uniformNames:['modelMatrix','viewMatrix','projectionMatrix','diffuse','lightmap','opacity']});return i?new n(i):(console.log(`programn't`),null)}constructor(e){this.program=e.handle,this.aPosition=e.attributes.position,this.aTexCoord=e.attributes.texCoord,this.aTexCoord2=e.attributes.texCoord2,this.uModelMx=e.uniforms.modelMatrix,this.uViewMx=e.uniforms.viewMatrix,this.uProjectionMx=e.uniforms.projectionMatrix,this.uDiffuse=e.uniforms.diffuse,this.uLightmap=e.uniforms.lightmap,this.uOpacity=e.uniforms.opacity}useProgram(e){e.useProgram(this.program)}setModelMatrix(e,t){e.uniformMatrix4fv(this.uModelMx,!1,t)}setViewMatrix(e,t){e.uniformMatrix4fv(this.uViewMx,!1,t)}setProjectionMatrix(e,t){e.uniformMatrix4fv(this.uProjectionMx,!1,t)}setDiffuse(e,t){e.uniform1i(this.uDiffuse,t)}setLightmap(e,t){e.uniform1i(this.uLightmap,t)}setOpacity(e,t){e.uniform1f(this.uOpacity,t)}enableVertexAttribs(e){e.enableVertexAttribArray(this.aPosition),e.enableVertexAttribArray(this.aTexCoord),e.enableVertexAttribArray(this.aTexCoord2)}setVertexAttribPointers(e){e.vertexAttribPointer(this.aPosition,3,e.FLOAT,!1,28,0),e.vertexAttribPointer(this.aTexCoord,2,e.FLOAT,!1,28,12),e.vertexAttribPointer(this.aTexCoord2,2,e.FLOAT,!1,28,20)}}t.MainShader=n},function(e){e.exports='#ifdef GL_ES\nprecision highp float;\n#endif\n\nattribute vec3 position;\nattribute vec2 texCoord;\nattribute vec2 texCoord2;\n\nvarying vec2 vTexCoord;\nvarying vec2 vLightmapCoord;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n  vTexCoord = texCoord;\n  vLightmapCoord = texCoord2;\n\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1);\n}'},function(e){e.exports='#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D diffuse;\nuniform sampler2D lightmap;\nuniform float opacity;\n\nvarying vec2 vTexCoord;\nvarying vec2 vLightmapCoord;\n\nvoid main(void) {\n  vec4 diffuseColor = texture2D(diffuse, vTexCoord);\n  vec4 lightColor = texture2D(lightmap, vLightmapCoord);\n\n  gl_FragColor = vec4(diffuseColor.rgb * lightColor.rgb, diffuseColor.a * opacity);\n}'},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a;(function(e){e[e.No=0]='No',e[e.Yes=1]='Yes'})(a=t.WorldSpawnStartDark||(t.WorldSpawnStartDark={}));var n;(function(e){e[e.No=0]='No',e[e.Yes=1]='Yes'})(n=t.WorldSpawnGameTitle||(t.WorldSpawnGameTitle={}));var r;(function(e){e[e.No=0]='No',e[e.Yes=1]='Yes'})(r=t.WorldSpawnNewUnit||(t.WorldSpawnNewUnit={}));var i;(function(e){e[e.FewestPlayers=0]='FewestPlayers',e[e.FirstTeam=1]='FirstTeam'})(i=t.WorldSpawnDefaultTeam||(t.WorldSpawnDefaultTeam={}));var o;(function(e){e[e.No=0]='No',e[e.Walk=1]='Walk',e[e.Run=2]='Run',e[e.Instantaneous=4]='Instantaneous',e[e.No_TurnToFace=5]='No_TurnToFace'})(o=t.AiScriptedSequenceMoveTo||(t.AiScriptedSequenceMoveTo={}));var s;(function(e){e[e.DefaultAI=0]='DefaultAI',e[e.Ambush=1]='Ambush'})(s=t.AiScriptedSequenceFinishSchedule||(t.AiScriptedSequenceFinishSchedule={}));var d;(function(e){e[e.Repeatable=4]='Repeatable',e[e.LeaveCorpse=8]='LeaveCorpse'})(d=t.AiScriptedSequenceSpawnflags||(t.AiScriptedSequenceSpawnflags={}));var l;(function(e){e[e.None=0]='None',e[e.HugeMachine=1]='HugeMachine',e[e.BigMachine=2]='BigMachine',e[e.Machine=3]='Machine',e[e.SlowFadeIn=4]='SlowFadeIn',e[e.FadeIn=5]='FadeIn',e[e.QuickFadeIn=6]='QuickFadeIn',e[e.SlowPulse=7]='SlowPulse',e[e.Pulse=8]='Pulse',e[e.QuickPulse=9]='QuickPulse',e[e.SlowOscillator=10]='SlowOscillator',e[e.Oscillator=11]='Oscillator',e[e.QuickOscillator=12]='QuickOscillator',e[e.GrungePitch=13]='GrungePitch',e[e.VeryLowPitch=14]='VeryLowPitch',e[e.LowPitch=15]='LowPitch',e[e.HighPitch=16]='HighPitch',e[e.VeryHighPitch=17]='VeryHighPitch',e[e.ScreamingPitch=18]='ScreamingPitch',e[e.OscillateSpinUpDown=19]='OscillateSpinUpDown',e[e.PulseSpinUpDown=20]='PulseSpinUpDown',e[e.RandomPitch=21]='RandomPitch',e[e.RandomPitchFast=22]='RandomPitchFast',e[e.IncrementalSpinup=23]='IncrementalSpinup',e[e.Alien=24]='Alien',e[e.Bizzare=25]='Bizzare',e[e.PlanetX=26]='PlanetX',e[e.Haunted=27]='Haunted'})(l=t.AmbientGenericPreset||(t.AmbientGenericPreset={}));var p;(function(e){e[e.PlayEverywhere=1]='PlayEverywhere',e[e.SmallRadius=2]='SmallRadius',e[e.MediumRadius=4]='MediumRadius',e[e.LargeRadius=8]='LargeRadius',e[e.StartSilent=16]='StartSilent',e[e.NotToggled=32]='NotToggled'})(p=t.AmbientGenericSpawnFlags||(t.AmbientGenericSpawnFlags={}));var u;(function(e){e[e.UseActivates=1]='UseActivates',e[e.StartOn=2]='StartOn'})(u=t.ButtonTargetSpawnFlags||(t.ButtonTargetSpawnFlags={}));var c;(function(e){e[e.NoTrigger=0]='NoTrigger',e[e.SeePlayerMadAtPlayer=1]='SeePlayerMadAtPlayer',e[e.TakeDamage=2]='TakeDamage',e[e.HalfHealthRemaining=3]='HalfHealthRemaining',e[e.Death=4]='Death',e[e.HearWorld=7]='HearWorld',e[e.HearPlayer=8]='HearPlayer',e[e.HearCombat=9]='HearCombat',e[e.SeePlayerUnconditional=10]='SeePlayerUnconditional',e[e.SeePlayerNotInCombat=11]='SeePlayerNotInCombat'})(c=t.CyclerWeaponTriggerCondition||(t.CyclerWeaponTriggerCondition={}));var f;(function(e){e[e.StartOn=1]='StartOn',e[e.Toggle=2]='Toggle',e[e.RandomStrike=4]='RandomStrike',e[e.Ring=8]='Ring',e[e.StartSparks=16]='StartSparks',e[e.EndSparks=32]='EndSparks',e[e.DecalEnd=64]='DecalEnd',e[e.FadeStart=128]='FadeStart',e[e.FadeEnd=256]='FadeEnd'})(f=t.EnvBeamSpawnFlags||(t.EnvBeamSpawnFlags={}));var m;(function(e){e[e.Normal=0]='Normal',e[e.EmbeddedFix=1]='EmbeddedFix',e[e.OpaqueBlockLight=2]='OpaqueBlockLight',e[e.OpaqueEmbeddedFix=3]='OpaqueEmbeddedFix',e[e.OpaqueConcaveFix=6]='OpaqueConcaveFix'})(m=t.ZHLTLightFlags||(t.ZHLTLightFlags={}));var g;(function(e){e[e.Normal=0]='Normal',e[e.SlowPulse=1]='SlowPulse',e[e.FastPulse=2]='FastPulse',e[e.SlowWidePulse=3]='SlowWidePulse',e[e.FastWidePulse=4]='FastWidePulse',e[e.SlowFadeAway=5]='SlowFadeAway',e[e.FastFadeAway=6]='FastFadeAway',e[e.SlowBecomeSolid=7]='SlowBecomeSolid',e[e.FastBecomeSolid=8]='FastBecomeSolid',e[e.SlowStrobe=9]='SlowStrobe',e[e.FastStrobe=10]='FastStrobe',e[e.FasterStrobe=11]='FasterStrobe',e[e.SlowFlicker=12]='SlowFlicker',e[e.FastFlicker=13]='FastFlicker',e[e.ConstantGlow=14]='ConstantGlow',e[e.DistortModels=15]='DistortModels',e[e.HologramDistort=16]='HologramDistort'})(g=t.RenderEffect||(t.RenderEffect={}));var h;(function(e){e[e.Normal=0]='Normal',e[e.Color=1]='Color',e[e.Texture=2]='Texture',e[e.Glow=3]='Glow',e[e.Solid=4]='Solid',e[e.Additive=5]='Additive'})(h=t.RenderMode||(t.RenderMode={}));const y=(e)=>e.split(' ').map((e)=>parseFloat(e)),_={worldspawn:(t)=>({classname:'worldspawn',wad:t.wad.split(';').filter((e)=>e.length).map((e)=>e.replace(/\\/g,'/')),mapversion:parseInt(t.mapversion),skyname:t.skyname,maxRange:parseFloat(t.MaxRange)||8192,message:t.message||'',sounds:parseInt(t.sounds)||0,light:parseInt(t.light)||0,waveHeight:parseFloat(t.WaveHeight)||0,startDark:parseInt(t.startdark)||0,newUnit:parseInt(t.newunit)||0,defaultTeam:parseInt(t.defaultteam)||0,gameTitle:parseInt(t.gametitle)||0}),aiscripted_sequence:(t)=>({classname:'aiscripted_sequence',spawnflags:parseInt(t.spawnflags),m_iszEntity:t.m_iszEntity,m_iszPlay:t.m_iszPlay||'',m_flRadius:parseInt(t.m_flRadius)||512,m_flRepeat:parseInt(t.m_flRepeat)||0,m_fMoveTo:parseInt(t.m_fMoveTo)||0,m_iFinishSchedule:parseInt(t.m_iFinishSchedule)||0}),ambient_generic:(t)=>({classname:'ambient_generic',origin:y(t.origin),targetName:t.targetname,message:t.message,health:parseInt(t.health)||10,preset:parseInt(t.preset)||0,startVolume:parseInt(t.volstart)||0,fadeIn:parseInt(t.fadein),fadeOut:parseInt(t.fadeout),pitch:parseInt(t.pitch),pitchStart:parseInt(t.pitchstart),spinUp:parseInt(t.spinup),spinDown:parseInt(t.spindown),lfoType:parseInt(t.lfotype),lfoRate:parseInt(t.lforate),lfoModPitch:parseInt(t.lfomodpitch),lfoModVolume:parseInt(t.lfomodvolume),cSpinUp:parseInt(t.cspinup),spawnFlags:parseInt(t.spawnflags)}),ammo_357:(t)=>({classname:'ammo_357',origin:y(t.origin),angles:y(t.angles),target:t.target,targetName:t.targetname||'',delay:parseInt(t.delay)||0,killTarget:t.killtarget||'',spawnFlags:t.spawnflags||0}),ammo_9mmAR:(t)=>({classname:'ammo_9mmAR',origin:y(t.origin),angles:y(t.angles),target:t.target,targetName:t.targetname||'',delay:parseInt(t.delay)||0,killTarget:t.killtarget||'',spawnFlags:t.spawnflags||0}),ammo_9mmbox:(t)=>({classname:'ammo_9mmbox',origin:y(t.origin),angles:y(t.angles),target:t.target,targetName:t.targetname||'',delay:parseInt(t.delay)||0,killTarget:t.killtarget||'',spawnFlags:t.spawnflags||0}),ammo_9mmclip:(t)=>({classname:'ammo_9mmclip',origin:y(t.origin),angles:y(t.angles),target:t.target,targetName:t.targetname||'',delay:parseInt(t.delay)||0,killTarget:t.killtarget||'',spawnFlags:t.spawnflags||0}),ammo_ARgrenades:(t)=>({classname:'ammo_ARgrenades',origin:y(t.origin),angles:y(t.angles),target:t.target,targetName:t.targetname||'',delay:parseInt(t.delay)||0,killTarget:t.killtarget||'',spawnFlags:t.spawnflags||0}),ammo_buckshot:(t)=>({classname:'ammo_buckshot',origin:y(t.origin),angles:y(t.angles),target:t.target,targetName:t.targetname||'',delay:parseInt(t.delay)||0,killTarget:t.killtarget||'',spawnFlags:t.spawnflags||0}),ammo_crossbow:(t)=>({classname:'ammo_crossbow',origin:y(t.origin),angles:y(t.angles),target:t.target,targetName:t.targetname||'',delay:parseInt(t.delay)||0,killTarget:t.killtarget||'',spawnFlags:t.spawnflags||0}),ammo_gaussclip:(t)=>({classname:'ammo_gaussclip',origin:y(t.origin),angles:y(t.angles),target:t.target,targetName:t.targetname||'',delay:parseInt(t.delay)||0,killTarget:t.killtarget||'',spawnFlags:t.spawnflags||0}),ammo_rpgclip:(t)=>({classname:'ammo_rpgclip',origin:y(t.origin),angles:y(t.angles),target:t.target,targetName:t.targetname||'',delay:parseInt(t.delay)||0,killTarget:t.killtarget||'',spawnFlags:t.spawnflags||0}),button_target:(t)=>({classname:'button_target',target:t.target,master:t.master,renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:y(t.rendercolor||'0 0 0'),zhltLightFlags:parseInt(t.zhlt_lightflags)||0,lightOrigin:t.light_origin,spawnFlags:parseInt(t.spawnflags)||1}),cycler:(t)=>({classname:'cycler',origin:y(t.origin),angles:y(t.angles),targetName:t.targetname,model:t.model,sequence:t.sequence||'',renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:y(t.rendercolor||'0 0 0')}),cycler_sprite:(t)=>({classname:'cycler_sprite',origin:y(t.origin),angles:y(t.angles),targetName:t.targetname,model:t.model,framerate:parseInt(t.framerate||'10'),renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:y(t.rendercolor||'0 0 0')}),cyclear_weapon:(t)=>({classname:'cycler_weapon',origin:y(t.origin),angles:y(t.angles),target:t.target,targetName:t.targetname,triggerTarget:t.TriggerTarget||'',triggerCondition:parseInt(t.TriggerCondition)||0,model:t.model,sequence:t.sequence,renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:y(t.rendercolor||'0 0 0')}),cyclear_wreckage:(t)=>({classname:'cycler_wreckage',origin:y(t.origin),angles:y(t.angles),targetName:t.targetname,model:t.model,framerate:parseInt(t.framerate)||10,scale:parseFloat(t.scale)||1,renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:y(t.rendercolor||'0 0 0')}),env_beam:(t)=>({classname:'env_beam',renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:y(t.rendercolor||'0 0 0'),radius:parseFloat(t.Radius)||256,life:parseInt(t.life)||1,boltWidth:parseInt(t.BoltWidth)||20,noiseAmplitude:parseInt(t.NoiseAmplitude)||0,texture:t.texture||'sprites/laserbeam.spr',textureScroll:parseInt(t.TextureScroll)||35,frameRate:parseInt(t.framerate)||0,frameStart:parseInt(t.framestart)||0,strikeTime:parseInt(t.StrikeTime)||1,damage:parseInt(t.damage)||1,spawnFlags:parseInt(t.spawnflags)})};t.BspEntityParser=class{static parse(t){const a=[];for(let n=0;n<t.length;++n){const r=t[n];r.classname||a.push({classname:'!',data:r}),_[r.classname]?a.push(_[r.classname](r)):a.push({classname:'?',originalClassname:r.classname,data:r})}return a}}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.resizeTexture=(e,t,a,n,r)=>{const i=document.createElement('canvas'),o=i.getContext('2d');if(!o)throw new Error('Runtime error.');i.width=t,i.height=a;const s=document.createElement('canvas'),d=s.getContext('2d');if(!d)throw new Error('Runtime error.');s.width=n,s.height=r;const l=o.createImageData(t,a);for(let o=0;o<4*(t*a);o+=4)l.data[o]=e[o],l.data[o+1]=e[o+1],l.data[o+2]=e[o+2],l.data[o+3]=e[o+3];return o.putImageData(l,0,0),d.drawImage(i,0,0,n,r),new Uint8Array(d.getImageData(0,0,n,r).data)},t.isPowerOfTwo=(e)=>0==(e&e-1),t.nextPowerOfTwo=(e)=>{--e;for(let t=1;32>t;t<<=1)e|=e>>t;return e+1}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(107);class r{constructor(e){this.isReady=!1,this.context=e.context,this.shader=e.shader}static init(e){const t=n.SkyShader.init(e);return t?new r({context:e,shader:t}):(console.error('skyscenen\'t'),null)}changeMap(e){if(6!==e.skies.length)return void(this.isReady=!1);const t=this.context.gl,a=t.createBuffer(),n=t.createBuffer(),r=t.createTexture();if(!a||!n||!r)throw new Error('shouldnt happen');const i=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),o=new Float32Array([-1,-1,1,.499,.001,1,-1,1,.499,.249,1,1,1,.001,.249,-1,1,1,.001,.001,-1,-1,-1,.499,.749,-1,1,-1,.001,.749,1,1,-1,.001,.501,1,-1,-1,.499,.501,-1,1,-1,.501,.749,-1,1,1,.501,.501,1,1,1,.999,.501,1,1,-1,.999,.749,-1,-1,-1,.999,.249,1,-1,-1,.501,.249,1,-1,1,.501,.001,-1,-1,1,.999,.001,1,-1,-1,.499,.499,1,1,-1,.001,.499,1,1,1,.001,.251,1,-1,1,.499,.251,-1,-1,-1,.501,.499,-1,-1,1,.501,.251,-1,1,1,.999,.251,-1,1,-1,.999,.499].map((e,t)=>3>t%5?4096*e:e));t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW),t.enableVertexAttribArray(0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW);const s=document.createElement('canvas');s.width=512,s.height=1024;const d=s.getContext('2d');if(!d)throw new Error('sky ctx fail');const l={up:[0,0],rt:[0,256],dn:[0,512],ft:[256,0],lf:[256,256],bk:[256,512]};e.skies.forEach((e)=>{const t=document.createElement('canvas'),a=t.getContext('2d');if(!a)throw new Error('Runtime error.');t.width=e.width,t.height=e.height;const n=a.getImageData(0,0,t.width,t.height);for(let t=0;t<e.data.length;++t)n.data[t]=e.data[t];a.putImageData(n,0,0);const r=e.name.slice(-2),i=l[r]?l[r]:[];if(!d)throw new Error('Runtime error.');d.drawImage(t,i[0],i[1])});const p=d.getImageData(0,0,512,1024).data;t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,512,1024,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(p)),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);const u=this.context.getAnisotropyExtension();u&&t.texParameteri(t.TEXTURE_2D,u.TEXTURE_MAX_ANISOTROPY_EXT,this.context.getMaxAnisotropy(u)),this.vertexBuffer=a,this.indexBuffer=n,this.texture=r,this.isReady=!0}draw(e){if(this.isReady){const t=this.context.gl,a=this.shader;a.useProgram(t),t.bindTexture(t.TEXTURE_2D,this.texture),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.enableVertexAttribs(t),a.setVertexAttribPointers(t),a.setDiffuse(t,0);const n=e.position[0],r=e.position[1],i=e.position[2];e.position[0]=0,e.position[1]=0,e.position[2]=0,e.updateViewMatrix(),e.position[0]=n,e.position[1]=r,e.position[2]=i,a.setViewMatrix(t,e.viewMatrix),a.setProjectionMatrix(t,e.projectionMatrix),t.drawElements(t.TRIANGLES,36,t.UNSIGNED_BYTE,0),t.clear(t.DEPTH_BUFFER_BIT)}}}t.SkyScene=r},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});class n{static init(e){const t=a(108),r=a(109),i=e.createProgram({vertexShaderSrc:t,fragmentShaderSrc:r,attributeNames:['position','texCoord'],uniformNames:['viewMatrix','projectionMatrix','diffuse']});return i?new n(i):(console.log(`programn't`),null)}constructor(e){this.program=e.handle,this.aPosition=e.attributes.position,this.aTexCoord=e.attributes.texCoord,this.uViewMx=e.uniforms.viewMatrix,this.uProjectionMx=e.uniforms.projectionMatrix,this.uDiffuse=e.uniforms.diffuse}useProgram(e){e.useProgram(this.program)}setViewMatrix(e,t){e.uniformMatrix4fv(this.uViewMx,!1,t)}setProjectionMatrix(e,t){e.uniformMatrix4fv(this.uProjectionMx,!1,t)}setDiffuse(e,t){e.uniform1i(this.uDiffuse,t)}enableVertexAttribs(e){e.enableVertexAttribArray(this.aPosition),e.enableVertexAttribArray(this.aTexCoord)}setVertexAttribPointers(e){e.vertexAttribPointer(this.aPosition,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(this.aTexCoord,2,e.FLOAT,!1,20,12)}}t.SkyShader=n},function(e){e.exports='#ifdef GL_ES\nprecision highp float;\n#endif\n\nattribute vec3 position;\nattribute vec2 texCoord;\n\nvarying vec2 vTexCoord;\n\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n  vTexCoord = texCoord;\n  gl_Position = projectionMatrix * viewMatrix * vec4(position, 1);\n}'},function(e){e.exports='#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D diffuse;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  vec4 diffuseColor = texture2D(diffuse, vTexCoord);\n  gl_FragColor = vec4(diffuseColor.rgb, 1.0);\n}'},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22);a(111);const r={replay:'Replay',bsp:'Map',sound:'Sounds',sky:'Skybox',sprite:'Sprites',wad:'Wads'};class i extends n.Component{constructor(){super(...arguments),this.state={items:{}},this.onItemLoad=(e)=>{const t=this.state.items[e.type]?this.state.items[e.type]:[];for(let a=0;a<t.length;++a)if(t[a]===e)return;t.push({name:e.name,progress:0}),this.setState({items:Object.assign({},this.state.items,{[e.type]:t})})},this.onItemProgress=(e)=>{if(this.state.items[e.type]){const t=this.state.items[e.type];for(let a=0;a<t.length;++a)if(t[a].name===e.name){t[a].progress=e.progress;break}this.forceUpdate()}}}componentDidMount(){const e=this.props.game.loader;e.addLoadStartListener(this.onItemLoad),e.addProgressListener(this.onItemProgress)}componentWillUnmount(){const e=this.props.game.loader;e.removeLoadStartListener(this.onItemLoad),e.removeProgressListener(this.onItemProgress)}formatItem(e,t){e=r[e];const a=Math.round(100*t)+'%';let n=29-e.length-a.length;2>n&&(n=9-a.length);const i=Array(n).join('.');return`${e}${i}${a}`}render(){const e=`loading${this.props.visible?'':' loading--hidden'}`;return n.h('div',{class:e},n.h('div',{class:'spinner'},n.h('svg',{xmlns:'http://www.w3.org/2000/svg',x:'0px',y:'0px',width:'80px',height:'80px',viewBox:'0 0 80 80',xmlSpace:'preserve'},n.h('path',{fill:'#ffffff',width:'10px',d:'M40,72C22.4,72,8,57.6,8,40C8,22.4,22.4,8,40,8c17.6,0,32,14.4,32,32c0,1.1-0.9,2-2,2s-2-0.9-2-2c0-15.4-12.6-28-28-28S12,24.6,12,40s12.6,28,28,28c1.1,0,2,0.9,2,2S41.1,72,40,72z'}))),n.h('ul',{class:'log'},Object.entries(this.state.items).map(([e,t])=>n.h('li',{key:e},this.formatItem(e,t.reduce((e,t)=>e+t.progress,0)/t.length)))))}}t.Loading=i},function(e,t,a){var n=a(112);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.loading {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  z-index: 20;\n  opacity: 1;\n  transition: opacity 2s ease, z-index 1s linear;\n  z-index: 30; }\n  .loading--hidden {\n    opacity: 0;\n    user-select: none;\n    z-index: 0; }\n  .loading .spinner {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -40px;\n    margin-top: -40px;\n    animation: rotate 1s linear 0s infinite;\n    height: 80px;\n    width: 80px; }\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg); }\n  to {\n    transform: rotate(360deg); } }\n  .loading .log {\n    position: absolute;\n    background: rgba(0, 0, 0, 0.4);\n    padding: 10px;\n    font-family: monospace;\n    margin: 0;\n    top: 16px;\n    right: 0;\n    padding-left: 16px;\n    list-style: none; }\n    .loading .log > li {\n      display: block; }\n',''])},function(e){e.exports=function(e){var t='undefined'!=typeof window&&window.location;if(!t)throw new Error('fixUrls requires window.location');if(!e||'string'!=typeof e)return e;var a=t.protocol+'//'+t.host,n=a+t.pathname.replace(/\/[^\/]*$/,'/'),r=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r))return e;var i;return i=0===r.indexOf('//')?r:0===r.indexOf('/')?a+r:n+r.replace(/^\.\//,''),'url('+JSON.stringify(i)+')'});return r}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22),r=a(74),i=a(75);a(119);class o extends n.Component{render(){return n.h('div',{class:`freemode__controls ${this.props.class}`},n.h('div',{class:'controls__buttons'},n.h('div',{class:'controls__left'}),n.h('div',{class:'controls__right'},n.h(r.SettingsButton,{class:'freemode__settings',game:this.props.game}),n.h(i.FullscreenButton,{active:!1,root:this.props.root}))))}}t.FreeMode=o},function(e,t,a){var n=a(116);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.settings {\n  position: relative; }\n  .settings .settings__button {\n    width: 32px;\n    height: 32px;\n    padding: 5px; }\n  .settings .settings__menu {\n    display: none;\n    position: absolute;\n    left: -38px;\n    bottom: 48px;\n    padding: 2px 6px;\n    font-size: 14px;\n    background-color: rgba(0, 0, 0, 0.4);\n    flex-flow: column;\n    min-width: 100px; }\n  .settings--open > .settings__menu {\n    display: flex; }\n  .settings .settings__menuitemh {\n    padding: 6px 4px;\n    border-bottom: 1px solid white;\n    font-weight: bold; }\n  .settings .settings__menuitem {\n    cursor: pointer;\n    margin: 4px 0;\n    padding: 4px; }\n    .settings .settings__menuitem:last-child {\n      margin-top: 0; }\n    .settings .settings__menuitem:hover {\n      background-color: rgba(255, 255, 255, 0.1); }\n    .settings .settings__menuitem.settings__menuitem--selected {\n      background-color: rgba(255, 255, 255, 0.2); }\n',''])},function(e,t,a){var n=a(118);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.hlv__button.fullscreen__button {\n  width: 30px;\n  min-width: 30px;\n  height: 30px;\n  padding: 5px; }\n',''])},function(e,t,a){var n=a(120);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.freemode__controls {\n  height: 44px; }\n',''])},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22),r=a(122),i=a(125),o=a(128),s=a(131),d=a(132),l=a(133),p=a(136),u=a(137),c=a(74),f=a(75);a(140);class m extends n.Component{constructor(){super(...arguments),this.onPlayClick=()=>{this.props.game.player.play()},this.onPauseClick=()=>{this.props.game.player.pause()},this.onSpeedDown=()=>{this.props.game.player.speedDown()},this.onSpeedUp=()=>{this.props.game.player.speedUp()},this.onVolumeClick=()=>{this.props.game.soundSystem.toggleMute()},this.onPlayStateChange=()=>{this.forceUpdate()}}componentDidMount(){this.props.game.player.on('play',this.onPlayStateChange),this.props.game.player.on('pause',this.onPlayStateChange),this.props.game.player.on('stop',this.onPlayStateChange)}componentWillUnmount(){this.props.game.player.off('play',this.onPlayStateChange),this.props.game.player.off('pause',this.onPlayStateChange),this.props.game.player.off('stop',this.onPlayStateChange)}render(){const e=this.props.game,t=e.player,a=t.isPlaying,m=t.isPaused;return n.h('div',{class:`replaymode__controls ${this.props.class}`},n.h(i.TimeLine,{game:e}),n.h('div',{class:'replaymode__buttons controls__buttons'},n.h('div',{class:'replaymode__left controls__left'},n.h(u.SpeedDownButton,{onClick:this.onSpeedDown}),m||!a?n.h(s.PlayButton,{onClick:this.onPlayClick}):n.h(d.PauseButton,{onClick:this.onPauseClick}),n.h(p.SpeedUpButton,{onClick:this.onSpeedUp}),n.h(l.VolumeButton,{onClick:this.onVolumeClick}),n.h(o.VolumeControl,{game:e}),n.h(r.Time,{player:t})),n.h('div',{class:'replaymode__right controls__right'},n.h(c.SettingsButton,{class:'replaymode__settings',game:e}),n.h(f.FullscreenButton,{active:!0,root:this.props.root}))))}}t.ReplayMode=m},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22),r=a(70);a(123);class i extends n.Component{constructor(){super(...arguments),this.onPlay=()=>{this.setState({isPlaying:!0},this.update)},this.onPauseOrStop=()=>{this.setState({isPlaying:!1})},this.update=()=>{this.state.isPlaying&&(this.forceUpdate(),setTimeout(this.update,100))}}componentDidMount(){this.props.player.events.on('play',this.onPlay),this.props.player.events.on('pause',this.onPauseOrStop),this.props.player.events.on('stop',this.onPauseOrStop)}componentWillUnmount(){this.props.player.events.removeListener('play',this.onPlay),this.props.player.events.removeListener('pause',this.onPauseOrStop),this.props.player.events.removeListener('stop',this.onPauseOrStop)}render(){const e=r.formatTime(this.props.player.currentTime),t=r.formatTime(this.props.player.replay.length);return n.h('div',{class:'time'},e,' / ',t)}}t.Time=i},function(e,t,a){var n=a(124);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.time {\n  font-family: \'Roboto\', Arial, Helvetica, sans-serif;\n  font-size: 10pt; }\n',''])},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22);a(126);class r extends n.Component{constructor(e){super(e),this.onPostUpdate=()=>{const e=this.props.game.player;this.setState({progress:e.currentTime/e.replay.length})},this.onClick=(t)=>{const e=t.currentTarget.getClientRects()[0],a=1-(e.right-t.pageX)/(e.right-e.left);this.props.game.player.seekByPercent(100*a),this.props.game.player.pause()},this.onMouseEnter=()=>{this.setState({ghostKnobActive:!0})},this.onMouseMove=(t)=>{if(this.state.ghostKnobActive){const e=t.currentTarget.getClientRects()[0],a=1-(e.right-t.pageX)/(e.right-e.left);this.setState({ghostKnobPos:100*a+'%'})}},this.onMouseLeave=()=>{this.setState({ghostKnobActive:!1})},this.state={progress:0,ghostKnobActive:!1,ghostKnobPos:'0%'}}componentDidMount(){this.props.game.on('postupdate',this.onPostUpdate)}componentWillUnmount(){this.props.game.off('postupdate',this.onPostUpdate)}render(){const e=100*this.state.progress;return n.h('div',{class:'timeline',onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},n.h('div',{class:'timeline__ghostline'}),n.h('div',{class:'timeline__line',style:{right:100-e+'%'}}),n.h('div',{class:'timeline__knob',style:{left:e+'%'}}),n.h('div',{class:'timeline__ghostknob',style:{left:this.state.ghostKnobPos}}))}}t.TimeLine=r},function(e,t,a){var n=a(127);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.timeline {\n  display: flex;\n  align-items: center;\n  position: relative;\n  height: 26px;\n  cursor: pointer; }\n\n.timeline__ghostline {\n  height: 4px;\n  background-color: rgba(255, 255, 255, 0.5);\n  position: absolute;\n  left: 0;\n  right: 0;\n  border-radius: 2px; }\n\n.timeline__line {\n  height: 4px;\n  background-color: #fff;\n  position: absolute;\n  left: 0;\n  right: 0;\n  border-radius: 2px; }\n\n.timeline__knob {\n  position: absolute;\n  width: 12px;\n  height: 12px;\n  background-color: #fff;\n  border-radius: 6px;\n  left: 100%;\n  margin-left: -6px; }\n\n.timeline__ghostknob {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  background-color: #fff;\n  box-sizing: border-box;\n  border-radius: 8px;\n  left: 0;\n  margin-left: -4px;\n  display: none; }\n\n.timeline:hover .timeline__ghostknob {\n  display: block; }\n',''])},function(e,t,a){'use strict';var n=Math.min,r=Math.max;Object.defineProperty(t,'__esModule',{value:!0});const i=a(22);a(129);class o extends i.Component{constructor(e){super(e),this.onVolumeChange=()=>{this.setState({volume:this.props.game.soundSystem.getVolume()})},this.onClick=(t)=>{const e=t.currentTarget.getClientRects()[0],a=1-(e.right-t.pageX)/(e.right-e.left);this.props.game.soundSystem.setVolume(a)},this.onMouseEnter=()=>{this.setState({ghostKnobActive:!0})},this.onMouseMove=(t)=>{if(this.state.ghostKnobActive){const e=t.currentTarget.getClientRects()[0],a=1-(e.right-t.pageX)/(e.right-e.left),i=n(95,r(5,100*a))+'%';this.setState({ghostKnobPos:i})}},this.onMouseLeave=()=>{this.setState({ghostKnobActive:!1})},this.state={volume:e.game.soundSystem.getVolume(),ghostKnobActive:!1,ghostKnobPos:'5%'}}componentDidMount(){this.props.game.soundSystem.events.on('volumeChange',this.onVolumeChange)}componentWillUnmount(){this.props.game.soundSystem.events.removeListener('volumeChange',this.onVolumeChange)}render(){const e=100*this.state.volume,t=n(95,r(5,e))+'%',a=n(95,r(5,100-e))+'%';return i.h('div',{class:'volumecontrol',onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},i.h('div',{class:'volumecontrol__ghostline'}),i.h('div',{class:'volumecontrol__line',style:{right:a}}),i.h('div',{class:'volumecontrol__knob',style:{left:t}}),i.h('div',{class:'volumecontrol__ghostknob',style:{left:this.state.ghostKnobPos}}))}}t.VolumeControl=o},function(e,t,a){var n=a(130);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.volumecontrol {\n  display: flex;\n  align-items: center;\n  position: relative;\n  width: 80px;\n  height: 26px;\n  margin-left: 6px;\n  margin-right: 14px;\n  cursor: pointer; }\n\n.volumecontrol__ghostline {\n  height: 4px;\n  background-color: rgba(255, 255, 255, 0.5);\n  position: absolute;\n  left: 0;\n  right: 0;\n  border-radius: 2px; }\n\n.volumecontrol__line {\n  height: 4px;\n  background-color: #fff;\n  position: absolute;\n  left: 0;\n  right: 0;\n  border-radius: 2px; }\n\n.volumecontrol__knob {\n  position: absolute;\n  width: 12px;\n  height: 12px;\n  background-color: #fff;\n  border-radius: 6px;\n  left: 100%;\n  margin-left: -6px; }\n\n.volumecontrol__ghostknob {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  background-color: #fff;\n  box-sizing: border-box;\n  border-radius: 8px;\n  left: 0;\n  margin-left: -4px;\n  display: none; }\n\n.volumecontrol:hover .volumecontrol__ghostknob {\n  display: block; }\n',''])},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22);class r extends n.Component{render(){return n.h('div',{class:'hlv__button button__play',onClick:this.props.onClick},n.h('svg',{xmlns:'http://www.w3.org/2000/svg',viewBox:'0 0 64 64',fill:'currentcolor'},n.h('path',{d:'M0 0 L0 64 L64 32 Z'})))}}t.PlayButton=r},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22);class r extends n.Component{render(){return n.h('div',{class:'hlv__button button__pause',onClick:this.props.onClick},n.h('svg',{xmlns:'http://www.w3.org/2000/svg',viewBox:'0 0 64 64',fill:'currentcolor'},n.h('path',{d:'M0 0 L0 64 L20 64 L20 0 M44 0 L64 0 L64 64 L44 64 Z'})))}}t.PauseButton=r},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22);a(134);class r extends n.Component{render(){return n.h('div',{class:'hlv__button button__volume',onClick:this.props.onClick},n.h('svg',{xmlns:'http://www.w3.org/2000/svg',viewBox:'0 0 48 48',fill:'currentcolor'},n.h('path',{d:'M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z'})))}}t.VolumeButton=r},function(e,t,a){var n=a(135);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.hlv__button.button__volume {\n  width: 28px;\n  height: 28px;\n  padding: 2px;\n  margin-right: 5px; }\n',''])},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22);class r extends n.Component{render(){return n.h('div',{class:'hlv__button button__speedup',onClick:this.props.onClick},n.h('svg',{xmlns:'http://www.w3.org/2000/svg',viewBox:'0 0 64 64',fill:'currentcolor'},n.h('path',{d:'M0 0 L0 64 L32 32 L32 64 L64 32 L32 0 L32 32 Z'})))}}t.SpeedUpButton=r},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=a(22);a(138);class r extends n.Component{render(){return n.h('div',{class:'hlv__button button__speeddown',onClick:this.props.onClick},n.h('svg',{xmlns:'http://www.w3.org/2000/svg',viewBox:'0 0 64 64',fill:'currentcolor'},n.h('path',{d:'M0 0 L0 64 L32 32 L32 64 L64 32 L32 0 L32 32 Z'})))}}t.SpeedDownButton=r},function(e,t,a){var n=a(139);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.button__speeddown {\n  transform: rotate(180deg); }\n',''])},function(e,t,a){var n=a(141);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.settings.replaymode__settings .settings__menu {\n  bottom: 70px; }\n',''])},function(e,t,a){var n=a(143);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(30)(n,r);n.locals&&(e.exports=n.locals),!1},function(e,t,a){t=e.exports=a(29)(!1),t.push([e.i,'.hlv {\n  position: relative;\n  color: white;\n  width: 100%;\n  height: 100%;\n  cursor: none;\n  user-select: none; }\n\n.hlv.hlv--visible {\n  cursor: default; }\n\n.hlv__title {\n  position: absolute;\n  top: 20px;\n  left: 0;\n  z-index: 20;\n  padding: 10px 10px 10px 20px;\n  background-color: rgba(0, 0, 0, 0.4);\n  font-size: 13pt;\n  font-family: \'Roboto\', Arial, Helvetica, sans-serif;\n  opacity: 0;\n  transition: opacity 0.2s; }\n\n.hlv__title--visible {\n  opacity: 1; }\n\n.hlv__screen {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10; }\n\n.hlv__controls {\n  z-index: 30;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  padding: 0 16px;\n  box-sizing: border-box;\n  background-color: rgba(0, 0, 0, 0.4);\n  user-select: none;\n  opacity: 0;\n  transition: opacity 0.2s; }\n\n.hlv__controls--visible {\n  opacity: 1; }\n\n.controls__buttons {\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 6px;\n  align-items: center; }\n\n.controls__left {\n  display: flex;\n  align-items: center; }\n  .controls__left .button {\n    margin-right: 8px; }\n\n.controls__right {\n  display: flex;\n  align-items: center;\n  width: 70px;\n  height: 100%;\n  justify-content: space-between; }\n\n.controls__button {\n  cursor: pointer; }\n\n.hlv__button {\n  width: 32px;\n  height: 32px;\n  padding: 7px;\n  box-sizing: border-box;\n  cursor: pointer; }\n',''])}]);