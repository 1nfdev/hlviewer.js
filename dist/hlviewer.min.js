/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2018 Stefan Stojković
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.HLViewer=e():t.HLViewer=e()}(window,function(){var t=Math.round,e=Math.floor,n=Math.ceil,r=Math.sqrt,i=Math.pow,o=Math.abs,a=Math.sin,s=Math.cos,u=Math.min,c=Math.PI,f=String.fromCharCode,l=Math.max;return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=26)}([function(t,e,n){"use strict";var r=n(9),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},function(t,e,n){"use strict";(function(t){var r=n(9),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.a.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();e.a=s}).call(this,n(15)(t))},function(t,e,n){"use strict";(function(t){var r=n(0),i=n(6),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.a.Buffer:void 0,u=(s?s.isBuffer:void 0)||i.a;e.a=u}).call(this,n(15)(t))},function(t,e,n){"use strict";function r(t){var e={},n="";for(var i in t){var o=t[i];if("$unique"==i)e[s.IS_UNIQUE]=o;else if("$nest"==i){var a=o;for(var u in a){var c=a[u];e[u]=r(c).result}}else"$debugName"==i?n=o:e[i]=o}return{result:e,debugName:n}}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map(function(t){return t&&"object"==typeof t?Object.keys(t).map(function(e){return!!t[e]&&e}):[t]}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return!!t}).join(" ")}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,r={},i=0,a=t;i<a.length;i++)if(null!=(n=a[i])&&!1!==n)for(var s in n){var u=n[s];(u||0===u)&&(r[s]="$nest"==s&&u?r.$nest?o(r.$nest,u):u:(-1!==s.indexOf("&")||0===s.indexOf("@media"))&&r[s]?o(r[s],u):u)}return r}function a(t){var e=new d({autoGenerateTag:!1});return t&&e.setStylesTarget(t),e}n.r(e);var s=n(11),u="undefined"==typeof requestAnimationFrame?function(t){return setTimeout(t)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window),c=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=[];t.type&&r.push(t.type),t.orientation&&r.push("(orientation: "+t.orientation+")"),t.minWidth&&r.push("(min-width: "+f(t.minWidth)+")"),t.maxWidth&&r.push("(max-width: "+f(t.maxWidth)+")"),t.minHeight&&r.push("(min-height: "+f(t.minHeight)+")"),t.maxHeight&&r.push("(max-height: "+f(t.maxHeight)+")");var i,a="@media "+r.join(" and "),s={$nest:(i={},i[a]=o.apply(void 0,e),i)};return s},f=function(t){return"string"==typeof t?t:t+"px"},l=function(){return s.create(void 0,!0)},d=function(){function t(t){var e=t.autoGenerateTag,n=this;this.cssRaw=function(t){t&&(n._raw+=t||"",n._pendingRawChange=!0,n._styleUpdated())},this.cssRule=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var a=r(o.apply(void 0,e)).result;return n._freeStyle.registerRule(t,a),void n._styleUpdated()},this.forceRenderStyles=function(){var t=n._getTag();t&&(t.textContent=n.getStyles())},this.fontFace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r,i=n._freeStyle,o=0,a=t;o<a.length;o++)r=a[o],i.registerRule("@font-face",r);n._styleUpdated()},this.getStyles=function(){return(n._raw||"")+n._freeStyle.getStyles()},this.keyframes=function(t){var e=function(t){var e={$debugName:void 0,keyframes:{}};for(var n in t){var r=t[n];"$debugName"==n?e.$debugName=r:e.keyframes[n]=r}return e}(t),r=e.keyframes,i=e.$debugName,o=n._freeStyle.registerKeyframes(r,i);return n._styleUpdated(),o},this.reinit=function(){var t=l();n._freeStyle=t,n._lastFreeStyleChangeId=t.changeId,n._raw="",n._pendingRawChange=!1;var e=n._getTag();e&&(e.textContent="")},this.setStylesTarget=function(t){n._tag&&(n._tag.textContent=""),n._tag=t,n.forceRenderStyles()},this.stylesheet=function(t){for(var e={},r=0,i=Object.getOwnPropertyNames(t);r<i.length;r++){var o=i[r],a=t[o];a&&(a.$debugName=o,e[o]=n.style(a))}return e};var i=l();this._autoGenerateTag=e,this._freeStyle=i,this._lastFreeStyleChangeId=i.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return t.prototype._afterAllSync=function(t){var e=this;this._pending++;var n=this._pending;u(function(){n!==e._pending||t()})},t.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var t="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(t),this._tag=t,t}},t.prototype._styleUpdated=function(){var t=this,e=this._freeStyle.changeId,n=this._lastFreeStyleChangeId;(this._pendingRawChange||e!==n)&&(this._lastFreeStyleChangeId=e,this._pendingRawChange=!1,this._afterAllSync(function(){return t.forceRenderStyles()}))},t.prototype.style=function(){var t=this._freeStyle,e=r(o.apply(void 0,arguments)),n=e.result,i=e.debugName,a=i?t.registerStyle(n,i):t.registerStyle(n);return this._styleUpdated(),a},t}(),h=n(22);n.d(e,"setStylesTarget",function(){return g}),n.d(e,"cssRaw",function(){return m}),n.d(e,"cssRule",function(){return v}),n.d(e,"forceRenderStyles",function(){return y}),n.d(e,"fontFace",function(){return b}),n.d(e,"getStyles",function(){return _}),n.d(e,"keyframes",function(){return x}),n.d(e,"reinit",function(){return w}),n.d(e,"style",function(){return E}),n.d(e,"stylesheet",function(){return S}),n.d(e,"createTypeStyle",function(){return a}),n.d(e,"TypeStyle",function(){return d}),n.d(e,"types",function(){return h}),n.d(e,"extend",function(){return o}),n.d(e,"classes",function(){return i}),n.d(e,"media",function(){return c});var p=new d({autoGenerateTag:!0}),g=p.setStylesTarget,m=p.cssRaw,v=p.cssRule,y=p.forceRenderStyles,b=p.fontFace,_=p.getStyles,x=p.keyframes,w=p.reinit,E=p.style,S=p.stylesheet},function(t,e){!function(t){"use strict";function e(t,e){var n,r,i,o,a=M;for(o=arguments.length;2<o--;)P.push(arguments[o]);for(e&&null!=e.children&&(!P.length&&P.push(e.children),delete e.children);P.length;)if((r=P.pop())&&void 0!==r.pop)for(o=r.length;o--;)P.push(r[o]);else"boolean"==typeof r&&(r=null),(i="function"!=typeof t)&&(null==r?r="":"number"==typeof r?r+="":"string"!=typeof r&&(i=!1)),i&&n?a[a.length-1]+=r:a===M?a=[r]:a.push(r),n=i;var s=new I;return s.nodeName=t,s.children=a,s.attributes=null==e?void 0:e,s.key=null==e?void 0:e.key,void 0!==L.vnode&&L.vnode(s),s}function n(t,e){for(var n in e)t[n]=e[n];return t}function r(t,e){t&&("function"==typeof t?t(e):t.current=e)}function i(t,r){return e(t.nodeName,n(n({},t.attributes),r),2<arguments.length?[].slice.call(arguments,2):t.children)}function o(t){!t._dirty&&(t._dirty=!0)&&1==U.push(t)&&(L.debounceRendering||C)(a)}function a(){for(var t;t=U.pop();)t._dirty&&E(t)}function s(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&u(t,e.nodeName):n||t._componentConstructor===e.nodeName}function u(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function c(t){var e=n({},t.attributes);e.children=t.children;var r=t.nodeName.defaultProps;if(void 0!==r)for(var i in r)void 0===e[i]&&(e[i]=r[i]);return e}function f(t){var e=t.parentNode;e&&e.removeChild(t)}function l(t,e,n,i,o){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)r(n,null),r(i,t);else if("class"!==e||o)if("style"===e){if(i&&"string"!=typeof i&&"string"!=typeof n||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof n)for(var a in n)a in i||(t.style[a]="");for(var s in i)t.style[s]="number"==typeof i[s]&&!1===D.test(s)?i[s]+"px":i[s]}}else if("dangerouslySetInnerHTML"===e)i&&(t.innerHTML=i.__html||"");else if("o"==e[0]&&"n"==e[1]){var u=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),i?!n&&t.addEventListener(e,d,u):t.removeEventListener(e,d,u),(t._listeners||(t._listeners={}))[e]=i}else if("list"!==e&&"type"!==e&&!o&&e in t){try{t[e]=null==i?"":i}catch(e){}(null==i||!1===i)&&"spellcheck"!=e&&t.removeAttribute(e)}else{var c=o&&e!==(e=e.replace(/^xlink:?/,""));null==i||!1===i?c?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof i&&(c?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),i):t.setAttribute(e,i))}else t.className=i||""}function d(t){return this._listeners[t.type](L.event&&L.event(t)||t)}function h(){for(var t;t=W.shift();)L.afterMount&&L.afterMount(t),t.componentDidMount&&t.componentDidMount()}function p(t,e,n,r,i,o){V++||(z=null!=i&&void 0!==i.ownerSVGElement,q=null!=t&&!(F in t));var a=g(t,e,n,r,o);return i&&a.parentNode!==i&&i.appendChild(a),--V||(q=!1,!o&&h()),a}function g(t,e,n,r,i){var o=t,a=z;if((null==e||"boolean"==typeof e)&&(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),v(t,!0))),o[F]=!0,o;var s=e.nodeName;if("function"==typeof s)return S(t,e,n,r);if(z="svg"===s||"foreignObject"!==s&&z,s+="",(!t||!u(t,s))&&(o=function(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}(s,z),t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),v(t,!0)}var c=o.firstChild,f=o[F],l=e.children;if(null==f){f=o[F]={};for(var d=o.attributes,h=d.length;h--;)f[d[h].name]=d[h].value}return!q&&l&&1===l.length&&"string"==typeof l[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=l[0]&&(c.nodeValue=l[0]):(l&&l.length||null!=c)&&m(o,l,n,r,q||null!=f.dangerouslySetInnerHTML),b(o,e.attributes,f),z=a,o}function m(t,e,n,r,i){var o,a,u,c,l,d=t.childNodes,h=[],p={},m=0,y=0,b=d.length,_=0,x=e?e.length:0;if(0!==b)for(var w=0;w<b;w++){var E=d[w],S=E[F],T=x&&S?E._component?E._component.__key:S.key:null;null==T?(S||(void 0===E.splitText?i:!i||E.nodeValue.trim()))&&(h[_++]=E):(m++,p[T]=E)}if(0!==x)for(var k=0;k<x;k++){l=null;var A=(c=e[k]).key;if(null!=A)m&&void 0!==p[A]&&(l=p[A],p[A]=void 0,m--);else if(y<_)for(o=y;o<_;o++)if(void 0!==h[o]&&s(a=h[o],c,i)){l=a,h[o]=void 0,o===_-1&&_--,o===y&&y++;break}l=g(l,c,n,r),u=d[k],l&&l!==t&&l!==u&&(null==u?t.appendChild(l):l===u.nextSibling?f(u):t.insertBefore(l,u))}if(m)for(var R in p)void 0!==p[R]&&v(p[R],!1);for(;y<=_;)void 0!==(l=h[_--])&&v(l,!1)}function v(t,e){var n=t._component;n?T(n):(null!=t[F]&&r(t[F].ref,null),(!1===e||null==t[F])&&f(t),y(t))}function y(t){for(t=t.lastChild;t;){var e=t.previousSibling;v(t,!0),t=e}}function b(t,e,n){for(var r in n)e&&null!=e[r]||null==n[r]||l(t,r,n[r],n[r]=void 0,z);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||l(t,r,n[r],n[r]=e[r],z)}function _(t,e,n){var r,i=G.length;for(t.prototype&&t.prototype.render?(r=new t(e,n),k.call(r,e,n)):((r=new k(e,n)).constructor=t,r.render=x);i--;)if(G[i].constructor===t)return r.nextBase=G[i].nextBase,G.splice(i,1),r;return r}function x(t,e,n){return this.constructor(t,n)}function w(t,e,n,i,a){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||a?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,i)),i&&i!==t.context&&(!t.prevContext&&(t.prevContext=t.context),t.context=i),!t.prevProps&&(t.prevProps=t.props),t.props=e,t._disable=!1,n!==O&&(n!==j&&!1===L.syncComponentUpdates&&t.base?o(t):E(t,j,a)),r(t.__ref,t))}function E(t,e,r,i){if(!t._disable){var o,a,s,u=t.props,f=t.state,l=t.context,d=t.prevProps||u,g=t.prevState||f,m=t.prevContext||l,y=t.base,b=t.nextBase,x=y||b,S=t._component,k=!1,A=m;if(t.constructor.getDerivedStateFromProps&&(f=n(n({},f),t.constructor.getDerivedStateFromProps(u,f)),t.state=f),y&&(t.props=d,t.state=g,t.context=m,e!==N&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(u,f,l)?k=!0:t.componentWillUpdate&&t.componentWillUpdate(u,f,l),t.props=u,t.state=f,t.context=l),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!k){o=t.render(u,f,l),t.getChildContext&&(l=n(n({},l),t.getChildContext())),y&&t.getSnapshotBeforeUpdate&&(A=t.getSnapshotBeforeUpdate(d,g));var R,I,P=o&&o.nodeName;if("function"==typeof P){var M=c(o);(a=S)&&a.constructor===P&&M.key==a.__key?w(a,M,j,l,!1):(R=a,t._component=a=_(P,M,l),a.nextBase=a.nextBase||b,a._parentComponent=t,w(a,M,O,l,!1),E(a,j,r,!0)),I=a.base}else s=x,(R=S)&&(s=t._component=null),(x||e===j)&&(s&&(s._component=null),I=p(s,o,l,r||!y,x&&x.parentNode,!0));if(x&&I!==x&&a!==S){var C=x.parentNode;C&&I!==C&&(C.replaceChild(I,x),!R&&(x._component=null,v(x,!1)))}if(R&&T(R),t.base=I,I&&!i){for(var B=t,F=t;F=F._parentComponent;)(B=F).base=I;I._component=B,I._componentConstructor=B.constructor}}for(!y||r?W.push(t):!k&&(t.componentDidUpdate&&t.componentDidUpdate(d,g,A),L.afterUpdate&&L.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);V||i||h()}}function S(t,e,n,r){for(var i=t&&t._component,o=i,a=t,s=i&&t._componentConstructor===e.nodeName,u=s,f=c(e);i&&!u&&(i=i._parentComponent);)u=i.constructor===e.nodeName;return i&&u&&(!r||i._component)?(w(i,f,B,n,r),t=i.base):(o&&!s&&(T(o),t=a=null),i=_(e.nodeName,f,n),t&&!i.nextBase&&(i.nextBase=t,a=null),w(i,f,j,n,r),t=i.base,a&&t!==a&&(a._component=null,v(a,!1))),t}function T(t){L.beforeUnmount&&L.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?T(n):e&&(null!=e[F]&&r(e[F].ref,null),t.nextBase=e,f(e),G.push(t),y(e)),r(t.__ref,null)}function k(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function A(t,e,n){return p(n,t,{},!1,e,!1)}function R(){return{}}var I=function(){},L={},P=[],M=[],C="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,O=0,j=1,N=2,B=3,F="__preactattr_",D=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,U=[],W=[],V=0,z=!1,q=!1,G=[];n(k.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=n(n({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),o(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),E(this,N)},render:function(){}}),t.default={h:e,createElement:e,cloneElement:i,createRef:R,Component:k,render:A,rerender:a,options:L},t.h=e,t.createElement=e,t.cloneElement=i,t.createRef=R,t.Component=k,t.render=A,t.rerender=a,t.options=L,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.ControlsStyle=r.stylesheet({controls:Object.assign({},{zIndex:30,position:"absolute",width:"100%",bottom:0,padding:"0 16px",boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.4)",userSelect:"none",opacity:0,transition:"opacity 0.2s"}),controlsVisible:Object.assign({},{zIndex:30,position:"absolute",width:"100%",bottom:0,padding:"0 16px",boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.4)",userSelect:"none",opacity:0,transition:"opacity 0.2s"},{opacity:1}),buttons:{height:"100%",display:"flex",justifyContent:"space-between",marginBottom:"6px",alignItems:"center"},button:{width:"32px",height:"32px",padding:"7px",boxSizing:"border-box",cursor:"pointer"},left:{display:"flex",alignItems:"center",$nest:{"& .button":{marginRight:"8px"}}},right:{display:"flex",alignItems:"center",width:"70px",height:"100%",justifyContent:"space-between"}})},function(t,e){"use strict";e.a=function(){return!1}},function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.UByte=0]="UByte",t[t.Byte=1]="Byte",t[t.UShort=2]="UShort",t[t.Short=3]="Short",t[t.UInt=4]="UInt",t[t.Int=5]="Int",t[t.Float=6]="Float",t[t.Double=7]="Double",t[t.NString=8]="NString",t[t.String=9]="String"}(n=e.ReaderDataType||(e.ReaderDataType={})),e.Reader=class{constructor(t){if(0===t.byteLength)throw new Error("ArrayBuffer must have size greater than zero");this.data=new DataView(t),this.offset=0}length(){return this.data.byteLength}tell(){return this.offset}seek(t){this.offset=l(0,t)}skip(t){this.seek(this.tell()+t)}b(){const t=this.data.getInt8(this.offset);return this.skip(1),t}ub(){const t=this.data.getUint8(this.offset);return this.skip(1),t}s(t=!0){const e=this.data.getInt16(this.offset,t);return this.skip(2),e}us(t=!0){const e=this.data.getUint16(this.offset,t);return this.skip(2),e}i(t=!0){const e=this.data.getInt32(this.tell(),t);return this.skip(4),e}ui(t=!0){const e=this.data.getUint32(this.tell(),t);return this.skip(4),e}f(t=!0){const e=this.data.getFloat32(this.tell(),t);return this.skip(4),e}lf(t=!0){const e=this.data.getFloat64(this.tell(),t);return this.skip(8),e}str(){let t=this.ub(),e="";for(;0!==t;)e+=f(t),t=this.ub();return e}nstr(t){if(0>t)throw new Error("Invalid string length");let e="";for(;0<t;){t-=1;const n=this.ub();if(0===n)break;e+=f(n)}return 0!==t&&this.skip(t),e}arr(t,e){e.bind(this);const n=[];for(;0<t--;)n.push(e());return n}arrx(t,e,r=0){let i;switch(e){case n.UByte:i=new Uint8Array(this.data.buffer,this.tell(),t),this.skip(t);break;case n.Byte:i=new Int8Array(this.data.buffer,this.tell(),t),this.skip(t);break;case n.UShort:i=new Uint16Array(this.data.buffer,this.tell(),t),this.skip(2*t);break;case n.Short:i=new Int16Array(this.data.buffer,this.tell(),t),this.skip(2*t);break;case n.UInt:i=new Uint32Array(this.data.buffer,this.tell(),t),this.skip(4*t);break;case n.Int:i=new Int32Array(this.data.buffer,this.tell(),t),this.skip(4*t);break;case n.Float:i=new Float32Array(this.data.buffer,this.tell(),t),this.skip(4*t);break;case n.Double:i=new Float64Array(this.data.buffer,this.tell(),t),this.skip(8*t);break;case n.NString:for(i=[];0<t--;)i.push(i.nstr(r));break;case n.String:for(i=[];0<t--;)i.push(i.str())}return i}}},function(t){"use strict";function e(){e.init.call(this)}function n(t){return void 0===t._maxListeners?e.defaultMaxListeners:t._maxListeners}function r(t,e,r,i){var o,a,s;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),s=a[e]),void 0===s)s=a[e]=r,++t._eventsCount;else if("function"==typeof s?s=a[e]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),0<(o=n(t))&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,function(t){console&&console.warn&&console.warn(t)}(u)}return t}function i(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,l(this.listener,this.target,t))}function o(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=i.bind(r);return o.listener=n,r.wrapFn=o,o}function a(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):u(i,i.length)}function s(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function u(t,e){for(var n=Array(e),r=0;r<e;++r)n[r]=t[r];return n}var c,f="object"==typeof Reflect?Reflect:null,l=f&&"function"==typeof f.apply?f.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};c=f&&"function"==typeof f.ownKeys?f.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var d=Number.isNaN||function(t){return t!=t};t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var h=10;Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||0>t||d(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),e.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(t){if("number"!=typeof t||0>t||d(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},e.prototype.getMaxListeners=function(){return n(this)},e.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(0<e.length&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[t];if(void 0===s)return!1;if("function"==typeof s)l(s,this,e);else{var c=s.length,f=u(s,c);for(n=0;n<c;++n)l(f[n],this,e)}return!0},e.prototype.addListener=function(t,e){return r(this,t,e,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(t,e){return r(this,t,e,!0)},e.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,o(this,t,e)),this},e.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,o(this,t,e)),this},e.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(0>i)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"===(i=o[r])||this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},e.prototype.listeners=function(t){return a(this,t,!0)},e.prototype.rawListeners=function(t){return a(this,t,!1)},e.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):s.call(t,e)},e.prototype.listenerCount=s,e.prototype.eventNames=function(){return 0<this._eventsCount?c(this._events):[]}},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(56))},function(t,e,n){"use strict";(function(t){var r=n(0),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(15)(t))},function(t,e,n){"use strict";(function(t){function n(t){return t.replace(g,b).replace(m,"-ms-")}function r(t){for(var e=5381,n=t.length;n--;)e=33*e^t.charCodeAt(n);return(e>>>0).toString(36)}function i(t,e){return"number"!=typeof e||0===e||_.hasOwnProperty(t)?t+":"+e:t+":"+e+"px"}function o(t){return t.sort(function(t,e){return t[0]>e[0]?1:-1})}function a(t,r){for(var i=[],a=[],u=!1,c=0,f=Object.keys(t);c<f.length;c++){var l=f[c],d=t[l];null!=d&&(l===e.IS_UNIQUE?u=!0:"object"!=typeof d||Array.isArray(d)?i.push([n(l.trim()),d]):a.push([l.trim(),d]))}return{style:s(o(i)),nested:r?a:o(a),isUnique:u}}function s(t){return t.map(function(t){var e=t[0],n=t[1];return Array.isArray(n)?n.map(function(t){return i(e,t)}).join(";"):i(e,n)}).join(";")}function u(t,e){return-1===t.indexOf("&")?e+" "+t:t.replace(v,e)}function c(t,e,n,r,i){var o=a(e,""!==t),s=o.style,f=o.nested,l=o.isUnique,d=s;if(64===t.charCodeAt(0)){var h={selector:t,styles:[],rules:[],style:i?"":s};n.push(h),s&&i&&h.styles.push({selector:i,style:s,isUnique:l});for(var p=0,g=f;p<g.length;p++){var m=g[p];d+=(_=m[0])+c(_,m[1],h.rules,h.styles,i)}}else{var v=i?u(t,i):t;s&&r.push({selector:v,style:s,isUnique:l});for(var y=0,b=f;y<b.length;y++){var _,x=b[y];d+=(_=x[0])+c(_,x[1],n,r,v)}}return d}function f(t,e,n,r,i,o){for(var a=0,s=r;a<s.length;a++){var c=s[a],l=c.selector,d=c.style,p=c.isUnique,g=o?u(l,i):l,m=p?"u\0"+(++h).toString(36):"s\0"+e+"\0"+d;(b=new R(d,m)).add(new A(g,"k\0"+e+"\0"+g)),t.add(b)}for(var v=0,y=n;v<y.length;v++){var b,_=y[v],x=(l=_.selector,d=_.style,_.rules),w=_.styles;f(b=new I(l,d,"r\0"+e+"\0"+l+"\0"+d),e,x,w,i,o),t.add(b)}}function l(t){for(var e="",n=0;n<t.length;n++)e+=t[n];return e}var d=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var h=0;e.IS_UNIQUE="__DO_NOT_DEDUPE_STYLE__";for(var p,g=/[A-Z]/g,m=/^ms-/,v=/&/g,y=/[ !#$%&()*+,.\/;<=>?@[\]^`{|}~"'\\]/g,b=function(t){return"-"+t.toLowerCase()},_={"animation-iteration-count":!0,"border-image-outset":!0,"border-image-slice":!0,"border-image-width":!0,"box-flex":!0,"box-flex-group":!0,"box-ordinal-group":!0,"column-count":!0,columns:!0,"counter-increment":!0,"counter-reset":!0,flex:!0,"flex-grow":!0,"flex-positive":!0,"flex-shrink":!0,"flex-negative":!0,"flex-order":!0,"font-weight":!0,"grid-area":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-span":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-span":!0,"grid-row-start":!0,"line-clamp":!0,"line-height":!0,opacity:!0,order:!0,orphans:!0,"tab-size":!0,widows:!0,"z-index":!0,zoom:!0,"fill-opacity":!0,"flood-opacity":!0,"stop-opacity":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0},x=0,w=Object.keys(_);x<w.length;x++){p=w[x];for(var E=0,S=["-webkit-","-ms-","-moz-","-o-",""];E<S.length;E++)_[S[E]+p]=!0}e.escape=function(t){return t.replace(y,"\\$&")},e.hyphenate=n,e.stringHash=r;var T={add:function(){},change:function(){},remove:function(){}},k=function(){function t(t){void 0===t&&(t=T),this.changes=t,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}return t.prototype.add=function(e){var n=this._counters[e.id]||0,r=this._children[e.id]||e.clone();if(this._counters[e.id]=n+1,0===n)this._children[r.id]=r,this._keys.push(r.id),this.sheet.push(r.getStyles()),this.changeId++,this.changes.add(r,this._keys.length-1);else if(r instanceof t&&e instanceof t){var i=this._keys.indexOf(e.id),o=r.changeId;r.merge(e),r.changeId!==o&&(this.sheet.splice(i,1,r.getStyles()),this.changeId++,this.changes.change(r,i,i))}return r},t.prototype.remove=function(e){var n=this._counters[e.id];if(void 0!==n&&0<n){this._counters[e.id]=n-1;var r=this._children[e.id],i=this._keys.indexOf(r.id);if(1===n)delete this._counters[e.id],delete this._children[e.id],this._keys.splice(i,1),this.sheet.splice(i,1),this.changeId++,this.changes.remove(r,i);else if(r instanceof t&&e instanceof t){var o=r.changeId;r.unmerge(e),r.changeId!==o&&(this.sheet.splice(i,1,r.getStyles()),this.changeId++,this.changes.change(r,i,i))}}},t.prototype.values=function(){var t=this;return this._keys.map(function(e){return t._children[e]})},t.prototype.merge=function(t){for(var e,n=0,r=t.values();n<r.length;n++)e=r[n],this.add(e);return this},t.prototype.unmerge=function(t){for(var e,n=0,r=t.values();n<r.length;n++)e=r[n],this.remove(e);return this},t.prototype.clone=function(){return(new t).merge(this)},t}();e.Cache=k;var A=function(){function t(t,e){this.selector=t,this.id=e}return t.prototype.getStyles=function(){return this.selector},t.prototype.clone=function(){return new t(this.selector,this.id)},t}();e.Selector=A;var R=function(t){function e(e,n){var r=t.call(this)||this;return r.style=e,r.id=n,r}return d(e,t),e.prototype.getStyles=function(){return this.sheet.join(",")+"{"+this.style+"}"},e.prototype.clone=function(){return new e(this.style,this.id).merge(this)},e}(k);e.Style=R;var I=function(t){function e(e,n,r){var i=t.call(this)||this;return i.rule=e,i.style=n,i.id=r,i}return d(e,t),e.prototype.getStyles=function(){return this.rule+"{"+this.style+l(this.sheet)+"}"},e.prototype.clone=function(){return new e(this.rule,this.style,this.id).merge(this)},e}(k);e.Rule=I;var L=function(t){function n(e,n,r,i){var o=t.call(this,i)||this;return o.hash=e,o.debug=n,o.id=r,o}return d(n,t),n.prototype.registerStyle=function(t,n){var r=[],i=[],o=c("&",t,r,i),a="f"+this.hash(o),s=this.debug&&n?n+"_"+a:a;return f(this,o,r,i,"."+e.escape(s),!0),s},n.prototype.registerKeyframes=function(t,e){return this.registerHashRule("@keyframes",t,e)},n.prototype.registerHashRule=function(t,n,r){var i=[],o=[],a=c("",n,i,o),s="f"+this.hash(a),u=this.debug&&r?r+"_"+s:s,l=new I(t+" "+e.escape(u),"","h\0"+a+"\0"+t);return f(l,a,i,o,"",!1),this.add(l),u},n.prototype.registerRule=function(t,e){var n=[],r=[];f(this,c(t,e,n,r),n,r,"",!1)},n.prototype.registerCss=function(t){return this.registerRule("",t)},n.prototype.getStyles=function(){return l(this.sheet)},n.prototype.clone=function(){return new n(this.hash,this.debug,this.id,this.changes).merge(this)},n}(k);e.FreeStyle=L,e.create=function(e,n,i){return void 0===e&&(e=r),void 0===n&&(n=void 0!==t&&!1),void 0===i&&(i=T),new L(e,n,"f"+(++h).toString(36),i)}}).call(this,n(18))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8),i=n(17),o=n(36),f=n(38),d=n(48),h=n(20),p=n(49),g=n(50),m=n(51),v=n(52),y=n(53),b=n(55);var _;!function(t){t[t.FREE=0]="FREE",t[t.REPLAY=1]="REPLAY"}(_=e.PlayerMode||(e.PlayerMode={})),e.Game=class{constructor(t){if(this.pauseTime=0,this.isPaused=!1,this.lastTime=0,this.accumTime=0,this.timeStep=1/60,this.pointerLocked=!1,this.entities=[],this.draw=()=>{requestAnimationFrame(this.draw);const t=this.canvas,e=t.parentElement;if(e){const n=e.clientWidth,r=e.clientHeight;(t.width!==n||t.height!==r)&&(t.width=n,t.height=r,this.camera.aspect=t.clientWidth/t.clientHeight,this.camera.updateProjectionMatrix(),this.context.gl.viewport(0,0,this.context.gl.drawingBufferWidth,this.context.gl.drawingBufferHeight)),(t.clientWidth!==t.width||t.clientHeight!==t.height)&&(t.width=t.clientWidth,t.height=t.clientHeight,this.camera.aspect=t.clientWidth/t.clientHeight,this.camera.updateProjectionMatrix(),this.context.gl.viewport(0,0,this.context.gl.drawingBufferWidth,this.context.gl.drawingBufferHeight))}const n=i.now()/1e3,r=n-this.lastTime;for(this.accumTime+=r;this.accumTime>this.timeStep;)this.update(this.timeStep),this.accumTime-=this.timeStep;this.renderer.draw(),""!==this.mapName&&(this.skyScene.draw(this.camera),this.worldScene.draw(this.camera,this.entities)),this.lastTime=n},this.mouseMove=t=>{this.mouse.delta.x=.5*t.movementX,this.mouse.delta.y=.5*t.movementY,this.mouse.position.x=t.pageX,this.mouse.position.y=t.pageY},this.keyDown=t=>(this.keyboard.keys[t.which]=1,!this.pointerLocked||(t.preventDefault(),!1)),this.keyUp=t=>(this.keyboard.keys[t.which]=0,!this.pointerLocked||(t.preventDefault(),!1)),this.onVisibilityChange=()=>{if(document.hidden){if(this.isPaused)return;this.pauseTime=i.now()/1e3,this.isPaused=!0}else{if(!this.isPaused)return;this.lastTime=i.now()/1e3-this.pauseTime+this.lastTime,this.isPaused=!1}},!(()=>{const t="Your browser does not seem to support WebGL",e="Your graphics card does not seem to support WebGL";if(!window.WebGLRenderingContext)return{hasSupport:!1,message:t};const n=document.createElement("canvas");try{return n.getContext("webgl")||n.getContext("experimental-webgl")?{hasSupport:!0,message:""}:{hasSupport:!1,message:e}}catch(t){return{hasSupport:!1,message:e}}})().hasSupport)return this.error=!0,void(this.errorMessage="No WebGL support!");this.error=!1,this.errorMessage="",this.mouse=new o.Mouse,this.keyboard=new d.Keyboard,this.soundSystem=new h.SoundSystem,this.sounds=[],this.config=t,this.loader=new f.Loader(this),this.loader.events.addListener("loadall",t=>{if(t&&t.replay&&this.changeReplay(t.replay.data),!t.map||!t.map.data)return;const e=t.map.data,n=t.skies;let r=!0;n.forEach(t=>{r=r&&t.isDone()}),r&&n.forEach(t=>t.data?e.skies.push(t.data):0),Object.entries(t.sprites).forEach(([t,n])=>{n.data&&(e.sprites[t]=n.data)}),0<t.sounds.length&&t.sounds.forEach(t=>{t.data&&this.sounds.push(t.data)}),this.changeMap(e),this.events.emit("load",t)}),document.addEventListener("mousemove",this.mouseMove,!1),window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp),window.addEventListener("visibilitychange",this.onVisibilityChange);const e=this.getCanvas();this.camera=g.Camera.init(e.width/e.height);const n=m.Context.init(e);if(!n)throw new Error("contextn't");this.context=n;const a=v.Renderer.init(n);if(!a)throw new Error("Failed to initialize renderer");this.renderer=a;const s=b.WorldScene.init(n);if(!s)throw new Error("Failed to initialize world scene");this.worldScene=s;const u=y.SkyScene.init(n);if(!u)throw new Error("Failed to initialize sky scene");this.skyScene=u,this.mode=_.FREE,this.player=new p.ReplayPlayer(this),this.events=new r.EventEmitter,this.mapName=""}getCanvas(){return this.canvas||(this.canvas=document.createElement("canvas")),this.canvas}load(t){this.events.emit("loadstart"),this.loader.load(t)}changeMap(t){if(this.mapName.toLowerCase()!==t.name.toLowerCase()){this.mapName=t.name,this.worldScene.changeMap(t),this.skyScene.changeMap(t),this.entities=t.entities;const e=t.entities.find(t=>"info_player_start"===t.classname);e?(this.camera.position[0]=e.origin[0],this.camera.position[1]=e.origin[1],this.camera.position[2]=e.origin[2]):(this.camera.position[0]=0,this.camera.position[1]=0,this.camera.position[2]=0),this.camera.rotation[0]=0,this.camera.rotation[1]=0,this.camera.rotation[2]=0}}changeReplay(t){this.events.emit("prereplaychange",this,t),this.player.changeReplay(t),this.events.emit("postreplaychange",this,t)}changeMode(t){this.mode=t,this.events.emit("modechange",t)}setTitle(t){this.title=t,this.events.emit("titlechange",t)}getTitle(){return this.title}update(t){this.events.emit("preupdate",this);const e=this.camera,n=this.keyboard,r=this.mouse;if(this.mode===_.REPLAY)this.player.update(t);else if(this.mode===_.FREE&&this.pointerLocked){e.rotation[0]=u(l(e.rotation[0]+r.delta.y/100,-c/2),c/2),e.rotation[1]-=r.delta.x/100;const i=500*t,o=d.Keyboard.KEYS.W,f=d.Keyboard.KEYS.S,h=d.Keyboard.KEYS.A,p=d.Keyboard.KEYS.D,g=d.Keyboard.KEYS.C,m=d.Keyboard.KEYS.SPACE;n.keys[o]!==n.keys[f]&&(n.keys[o]?(e.position[1]-=s(e.rotation[1]+c/2)*i,e.position[0]+=a(e.rotation[1]+c/2)*i):n.keys[f]&&(e.position[1]-=s(e.rotation[1]-c/2)*i,e.position[0]+=a(e.rotation[1]-c/2)*i)),n.keys[h]!==n.keys[p]&&(n.keys[h]?(e.position[1]+=s(e.rotation[1])*i,e.position[0]-=a(e.rotation[1])*i):n.keys[p]&&(e.position[1]-=s(e.rotation[1])*i,e.position[0]+=a(e.rotation[1])*i)),n.keys[m]!==n.keys[g]&&(n.keys[m]?e.position[2]+=i:n.keys[g]&&(e.position[2]-=i))}r.delta.x=0,r.delta.y=0,this.events.emit("postupdate",this)}on(t,e){return this.events.addListener(t,e)}off(t,e){this.events.removeListener(t,e)}}},function(t,e,n){(function(t){function n(t,e){for(var n,r=0,i=t.length-1;0<=i;i--)"."===(n=t[i])?t.splice(i,1):".."===n?(t.splice(i,1),r++):r&&(t.splice(i,1),r--);if(e)for(;r--;r)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e,i="",o=!1,a=arguments.length-1;-1<=a&&!o;a--){if("string"!=typeof(e=0<=a?arguments[a]:t.cwd()))throw new TypeError("Arguments to path.resolve must be strings");e&&(i=e+"/"+i,o="/"===e.charAt(0))}return(o?"/":"")+(i=n(r(i.split("/"),function(t){return!!t}),!o).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===i(t,-1);return(t=n(r(t.split("/"),function(t){return!!t}),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;0<=n&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=u(i.length,o.length),s=a,c=0;c<a;c++)if(i[c]!==o[c]){s=c;break}var f=[];for(c=s;c<i.length;c++)f.push("..");return(f=f.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;1<=o;--o)if(47!==(e=t.charCodeAt(o)))i=!1;else if(!i){r=o;break}return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;0<=e;--e)if(47!==t.charCodeAt(e))-1==r&&(i=!1,r=e+1);else if(!i){n=e+1;break}return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e,n=-1,r=0,i=-1,o=!0,a=0,s=t.length-1;0<=s;--s)if(47!==(e=t.charCodeAt(s)))-1==i&&(o=!1,i=s+1),46===e?-1===n?n=s:1!=a&&(a=1):-1!==n&&(a=-1);else if(!o){r=s+1;break}return-1===n||-1===i||0==a||1==a&&n===i-1&&n===r+1?"":t.slice(n,i)};var i=function(t,e,n){return t.substr(e,n)}}).call(this,n(18))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.paletteToRGBA=function(t,e){const n=new Uint8Array(4*t.length),r=t.length;for(let i=0;i<r;++i)n[4*i]=e[3*t[i]],n[4*i+1]=e[3*t[i]+1],n[4*i+2]=e[3*t[i]+2],n[4*i+3]=255;return n},e.paletteWithLastTransToRGBA=function(t,e){const n=new Uint8Array(4*t.length),r=t.length;for(let i=0;i<r;++i)255===t[i]?n[4*i+3]=0:(n[4*i]=e[3*t[i]],n[4*i+1]=e[3*t[i]+1],n[4*i+2]=e[3*t[i]+2],n[4*i+3]=255);return n}},function(t){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(f,d,h){"use strict";function p(t){Ni=t}function g(t){return t*Fi}function m(t,e){return o(t-e)<=ji*l(1,o(t),o(e))}function v(){var t=new Ni(4);return Ni!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function y(t){var e=new Ni(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function b(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function _(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function x(t,e,n,r){var i=new Ni(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function w(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function E(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function S(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function T(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function k(t){return t[0]*t[3]-t[2]*t[1]}function A(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*f,t[3]=i*c+a*f,t}function R(t,e,n){var r=e[0],i=e[1],o=e[2],u=e[3],c=a(n),f=s(n);return t[0]=r*f+o*c,t[1]=i*f+u*c,t[2]=r*-c+o*f,t[3]=i*-c+u*f,t}function I(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function L(t,e){var n=a(e),r=s(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function P(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function M(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function C(t){return r(i(t[0],2)+i(t[1],2)+i(t[2],2)+i(t[3],2))}function O(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function j(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function N(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function B(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function F(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=e[0],u=e[1],c=e[2],f=e[3];return o(n-s)<=ji*l(1,o(n),o(s))&&o(r-u)<=ji*l(1,o(r),o(u))&&o(i-c)<=ji*l(1,o(i),o(c))&&o(a-f)<=ji*l(1,o(a),o(f))}function D(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function U(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function W(){var t=new Ni(6);return Ni!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function V(t){var e=new Ni(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function z(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function q(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function G(t,e,n,r,i,o){var a=new Ni(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function X(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function H(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function K(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1],l=n[2],d=n[3],h=n[4],p=n[5];return t[0]=r*c+o*f,t[1]=i*c+a*f,t[2]=r*l+o*d,t[3]=i*l+a*d,t[4]=r*h+o*p+s,t[5]=i*h+a*p+u,t}function Y(t,e,n){var r=e[0],i=e[1],o=e[2],u=e[3],c=e[4],f=e[5],l=a(n),d=s(n);return t[0]=r*d+o*l,t[1]=i*d+u*l,t[2]=r*-l+o*d,t[3]=i*-l+u*d,t[4]=c,t[5]=f,t}function Z(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*f,t[3]=a*f,t[4]=s,t[5]=u,t}function Q(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*f+s,t[5]=i*c+a*f+u,t}function J(t,e){var n=a(e),r=s(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function tt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function et(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function nt(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function rt(t){return r(i(t[0],2)+i(t[1],2)+i(t[2],2)+i(t[3],2)+i(t[4],2)+i(t[5],2)+1)}function it(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ot(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function at(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function st(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function ut(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function ct(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=e[0],f=e[1],d=e[2],h=e[3],p=e[4],g=e[5];return o(n-c)<=ji*l(1,o(n),o(c))&&o(r-f)<=ji*l(1,o(r),o(f))&&o(i-d)<=ji*l(1,o(i),o(d))&&o(a-h)<=ji*l(1,o(a),o(h))&&o(s-p)<=ji*l(1,o(s),o(p))&&o(u-g)<=ji*l(1,o(u),o(g))}function ft(){var t=new Ni(9);return Ni!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function lt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function dt(t){var e=new Ni(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ht(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function pt(t,e,n,r,i,o,a,s,u){var c=new Ni(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=s,c[8]=u,c}function gt(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function mt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function vt(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function yt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=f*a-s*c,d=-f*o+s*u,h=c*o-a*u,p=n*l+r*d+i*h;return p?(p=1/p,t[0]=l*p,t[1]=(-f*r+i*c)*p,t[2]=(s*r-i*a)*p,t[3]=d*p,t[4]=(f*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=h*p,t[7]=(-c*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null}function bt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8];return t[0]=a*f-s*c,t[1]=i*c-r*f,t[2]=r*s-i*a,t[3]=s*u-o*f,t[4]=n*f-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t}function _t(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)}function xt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=n[0],h=n[1],p=n[2],g=n[3],m=n[4],v=n[5],y=n[6],b=n[7],_=n[8];return t[0]=d*r+h*a+p*c,t[1]=d*i+h*s+p*f,t[2]=d*o+h*u+p*l,t[3]=g*r+m*a+v*c,t[4]=g*i+m*s+v*f,t[5]=g*o+m*u+v*l,t[6]=y*r+b*a+_*c,t[7]=y*i+b*s+_*f,t[8]=y*o+b*u+_*l,t}function wt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=n[0],h=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=d*r+h*a+c,t[7]=d*i+h*s+f,t[8]=d*o+h*u+l,t}function Et(t,e,n){var r=e[0],i=e[1],o=e[2],u=e[3],c=e[4],f=e[5],l=e[6],d=e[7],h=e[8],p=a(n),g=s(n);return t[0]=g*r+p*u,t[1]=g*i+p*c,t[2]=g*o+p*f,t[3]=g*u-p*r,t[4]=g*c-p*i,t[5]=g*f-p*o,t[6]=l,t[7]=d,t[8]=h,t}function St(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Tt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function kt(t,e){var n=a(e),r=s(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Rt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function It(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,l=r*s,d=i*a,h=i*s,p=i*u,g=o*a,m=o*s,v=o*u;return t[0]=1-l-p,t[3]=f-v,t[6]=d+m,t[1]=f+v,t[4]=1-c-p,t[7]=h-g,t[2]=d-m,t[5]=h+g,t[8]=1-c-l,t}function Lt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=n*s-r*a,b=n*u-i*a,_=n*c-o*a,x=r*u-i*s,w=r*c-o*s,E=i*c-o*u,S=f*g-l*p,T=f*m-d*p,k=f*v-h*p,A=l*m-d*g,R=l*v-h*g,I=d*v-h*m,L=y*I-b*R+_*A+x*k-w*T+E*S;return L?(L=1/L,t[0]=(s*I-u*R+c*A)*L,t[1]=(u*k-a*I-c*T)*L,t[2]=(a*R-s*k+c*S)*L,t[3]=(i*R-r*I-o*A)*L,t[4]=(n*I-i*k+o*T)*L,t[5]=(r*k-n*R-o*S)*L,t[6]=(g*E-m*w+v*x)*L,t[7]=(m*_-p*E-v*b)*L,t[8]=(p*w-g*_+v*y)*L,t):null}function Pt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Mt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Ct(t){return r(i(t[0],2)+i(t[1],2)+i(t[2],2)+i(t[3],2)+i(t[4],2)+i(t[5],2)+i(t[6],2)+i(t[7],2)+i(t[8],2))}function Ot(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function jt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Bt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ft(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Dt(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],d=t[8],h=e[0],p=e[1],g=e[2],m=e[3],v=e[4],y=e[5],b=e[6],_=e[7],x=e[8];return o(n-h)<=ji*l(1,o(n),o(h))&&o(r-p)<=ji*l(1,o(r),o(p))&&o(i-g)<=ji*l(1,o(i),o(g))&&o(a-m)<=ji*l(1,o(a),o(m))&&o(s-v)<=ji*l(1,o(s),o(v))&&o(u-y)<=ji*l(1,o(u),o(y))&&o(c-b)<=ji*l(1,o(c),o(b))&&o(f-_)<=ji*l(1,o(f),o(_))&&o(d-x)<=ji*l(1,o(d),o(x))}function Ut(){var t=new Ni(16);return Ni!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Wt(t){var e=new Ni(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function zt(t,e,n,r,i,o,a,s,u,c,f,l,d,h,p,g){var m=new Ni(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=i,m[5]=o,m[6]=a,m[7]=s,m[8]=u,m[9]=c,m[10]=f,m[11]=l,m[12]=d,m[13]=h,m[14]=p,m[15]=g,m}function qt(t,e,n,r,i,o,a,s,u,c,f,l,d,h,p,g,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=f,t[10]=l,t[11]=d,t[12]=h,t[13]=p,t[14]=g,t[15]=m,t}function Gt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xt(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Ht(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=n*s-r*a,b=n*u-i*a,_=n*c-o*a,x=r*u-i*s,w=r*c-o*s,E=i*c-o*u,S=f*g-l*p,T=f*m-d*p,k=f*v-h*p,A=l*m-d*g,R=l*v-h*g,I=d*v-h*m,L=y*I-b*R+_*A+x*k-w*T+E*S;return L?(L=1/L,t[0]=(s*I-u*R+c*A)*L,t[1]=(i*R-r*I-o*A)*L,t[2]=(g*E-m*w+v*x)*L,t[3]=(d*w-l*E-h*x)*L,t[4]=(u*k-a*I-c*T)*L,t[5]=(n*I-i*k+o*T)*L,t[6]=(m*_-p*E-v*b)*L,t[7]=(f*E-d*_+h*b)*L,t[8]=(a*R-s*k+c*S)*L,t[9]=(r*k-n*R-o*S)*L,t[10]=(p*w-g*_+v*y)*L,t[11]=(l*_-f*w-h*y)*L,t[12]=(s*T-a*A-u*S)*L,t[13]=(n*A-r*T+i*S)*L,t[14]=(g*b-p*x-m*y)*L,t[15]=(f*x-l*b+d*y)*L,t):null}function $t(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],g=e[13],m=e[14],v=e[15];return t[0]=s*(d*v-h*m)-l*(u*v-c*m)+g*(u*h-c*d),t[1]=-(r*(d*v-h*m)-l*(i*v-o*m)+g*(i*h-o*d)),t[2]=r*(u*v-c*m)-s*(i*v-o*m)+g*(i*c-o*u),t[3]=-(r*(u*h-c*d)-s*(i*h-o*d)+l*(i*c-o*u)),t[4]=-(a*(d*v-h*m)-f*(u*v-c*m)+p*(u*h-c*d)),t[5]=n*(d*v-h*m)-f*(i*v-o*m)+p*(i*h-o*d),t[6]=-(n*(u*v-c*m)-a*(i*v-o*m)+p*(i*c-o*u)),t[7]=n*(u*h-c*d)-a*(i*h-o*d)+f*(i*c-o*u),t[8]=a*(l*v-h*g)-f*(s*v-c*g)+p*(s*h-c*l),t[9]=-(n*(l*v-h*g)-f*(r*v-o*g)+p*(r*h-o*l)),t[10]=n*(s*v-c*g)-a*(r*v-o*g)+p*(r*c-o*s),t[11]=-(n*(s*h-c*l)-a*(r*h-o*l)+f*(r*c-o*s)),t[12]=-(a*(l*m-d*g)-f*(s*m-u*g)+p*(s*d-u*l)),t[13]=n*(l*m-d*g)-f*(r*m-i*g)+p*(r*d-i*l),t[14]=-(n*(s*m-u*g)-a*(r*m-i*g)+p*(r*u-i*s)),t[15]=n*(s*d-u*l)-a*(r*d-i*l)+f*(r*u-i*s),t}function Kt(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],d=t[11],h=t[12],p=t[13],g=t[14],m=t[15];return(e*a-n*o)*(l*m-d*g)-(e*s-r*o)*(f*m-d*p)+(e*u-i*o)*(f*g-l*p)+(n*s-r*a)*(c*m-d*h)-(n*u-i*a)*(c*g-l*h)+(r*u-i*s)*(c*p-f*h)}function Yt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=e[9],h=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*s+x*l+w*g,t[1]=b*i+_*u+x*d+w*m,t[2]=b*o+_*c+x*h+w*v,t[3]=b*a+_*f+x*p+w*y,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*s+x*l+w*g,t[5]=b*i+_*u+x*d+w*m,t[6]=b*o+_*c+x*h+w*v,t[7]=b*a+_*f+x*p+w*y,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*s+x*l+w*g,t[9]=b*i+_*u+x*d+w*m,t[10]=b*o+_*c+x*h+w*v,t[11]=b*a+_*f+x*p+w*y,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*s+x*l+w*g,t[13]=b*i+_*u+x*d+w*m,t[14]=b*o+_*c+x*h+w*v,t[15]=b*a+_*f+x*p+w*y,t}function Zt(t,e,n){var r=n[0],i=n[1],o=n[2],a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,d=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(a=e[0],s=e[1],u=e[2],c=e[3],f=e[4],l=e[5],d=e[6],h=e[7],p=e[8],g=e[9],m=e[10],v=e[11],t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=f,t[5]=l,t[6]=d,t[7]=h,t[8]=p,t[9]=g,t[10]=m,t[11]=v,t[12]=a*r+f*i+p*o+e[12],t[13]=s*r+l*i+g*o+e[13],t[14]=u*r+d*i+m*o+e[14],t[15]=c*r+h*i+v*o+e[15]),t}function Qt(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,n,i){var o=i[0],u=i[1],c=i[2],f=r(o*o+u*u+c*c),l=void 0,d=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,_=void 0,x=void 0,w=void 0,E=void 0,S=void 0,T=void 0,k=void 0,A=void 0,R=void 0,I=void 0,L=void 0,P=void 0,M=void 0,C=void 0,O=void 0;return f<ji?null:(o*=f=1/f,u*=f,c*=f,l=a(n),h=1-(d=s(n)),p=e[0],g=e[1],m=e[2],v=e[3],y=e[4],b=e[5],_=e[6],x=e[7],w=e[8],E=e[9],S=e[10],T=e[11],k=o*o*h+d,A=u*o*h+c*l,R=c*o*h-u*l,I=o*u*h-c*l,L=u*u*h+d,P=c*u*h+o*l,M=o*c*h+u*l,C=u*c*h-o*l,O=c*c*h+d,t[0]=p*k+y*A+w*R,t[1]=g*k+b*A+E*R,t[2]=m*k+_*A+S*R,t[3]=v*k+x*A+T*R,t[4]=p*I+y*L+w*P,t[5]=g*I+b*L+E*P,t[6]=m*I+_*L+S*P,t[7]=v*I+x*L+T*P,t[8]=p*M+y*C+w*O,t[9]=g*M+b*C+E*O,t[10]=m*M+_*C+S*O,t[11]=v*M+x*C+T*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function te(t,e,n){var r=a(n),i=s(n),o=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=u*i+d*r,t[6]=c*i+h*r,t[7]=f*i+p*r,t[8]=l*i-o*r,t[9]=d*i-u*r,t[10]=h*i-c*r,t[11]=p*i-f*r,t}function ee(t,e,n){var r=a(n),i=s(n),o=e[0],u=e[1],c=e[2],f=e[3],l=e[8],d=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=u*i-d*r,t[2]=c*i-h*r,t[3]=f*i-p*r,t[8]=o*r+l*i,t[9]=u*r+d*i,t[10]=c*r+h*i,t[11]=f*r+p*i,t}function ne(t,e,n){var r=a(n),i=s(n),o=e[0],u=e[1],c=e[2],f=e[3],l=e[4],d=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=u*i+d*r,t[2]=c*i+h*r,t[3]=f*i+p*r,t[4]=l*i-o*r,t[5]=d*i-u*r,t[6]=h*i-c*r,t[7]=p*i-f*r,t}function re(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ie(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function oe(t,e,n){var i=n[0],o=n[1],u=n[2],c=r(i*i+o*o+u*u),f=void 0,l=void 0,d=void 0;return c<ji?null:(i*=c=1/c,o*=c,u*=c,f=a(e),d=1-(l=s(e)),t[0]=i*i*d+l,t[1]=o*i*d+u*f,t[2]=u*i*d-o*f,t[3]=0,t[4]=i*o*d-u*f,t[5]=o*o*d+l,t[6]=u*o*d+i*f,t[7]=0,t[8]=i*u*d+o*f,t[9]=o*u*d-i*f,t[10]=u*u*d+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ae(t,e){var n=a(e),r=s(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function se(t,e){var n=a(e),r=s(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ue(t,e){var n=a(e),r=s(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ce(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,f=r*s,l=r*u,d=r*c,h=i*u,p=i*c,g=o*c,m=a*s,v=a*u,y=a*c;return t[0]=1-(h+g),t[1]=l+y,t[2]=d-v,t[3]=0,t[4]=l-y,t[5]=1-(f+g),t[6]=p+m,t[7]=0,t[8]=d+v,t[9]=p-m,t[10]=1-(f+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function fe(t,e){var n=new Ni(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=r*r+i*i+o*o+a*a;return 0<l?(n[0]=2*(s*a+f*r+u*o-c*i)/l,n[1]=2*(u*a+f*i+c*r-s*o)/l,n[2]=2*(c*a+f*o+s*i-u*r)/l):(n[0]=2*(s*a+f*r+u*o-c*i),n[1]=2*(u*a+f*i+c*r-s*o),n[2]=2*(c*a+f*o+s*i-u*r)),ce(t,e,n),t}function le(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function de(t,e){var n=e[0],i=e[1],o=e[2],a=e[4],s=e[5],u=e[6],c=e[8],f=e[9],l=e[10];return t[0]=r(n*n+i*i+o*o),t[1]=r(a*a+s*s+u*u),t[2]=r(c*c+f*f+l*l),t}function he(t,e){var n=e[0]+e[5]+e[10],i=0;return 0<n?(i=2*r(n+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&&e[0]>e[10]?(i=2*r(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*r(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*r(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t}function pe(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,f=a+a,l=i*u,d=i*c,h=i*f,p=o*c,g=o*f,m=a*f,v=s*u,y=s*c,b=s*f,_=r[0],x=r[1],w=r[2];return t[0]=(1-(p+m))*_,t[1]=(d+b)*_,t[2]=(h-y)*_,t[3]=0,t[4]=(d-b)*x,t[5]=(1-(l+m))*x,t[6]=(g+v)*x,t[7]=0,t[8]=(h+y)*w,t[9]=(g-v)*w,t[10]=(1-(l+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ge(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,f=a+a,l=s+s,d=o*c,h=o*f,p=o*l,g=a*f,m=a*l,v=s*l,y=u*c,b=u*f,_=u*l,x=r[0],w=r[1],E=r[2],S=i[0],T=i[1],k=i[2],A=(1-(g+v))*x,R=(h+_)*x,I=(p-b)*x,L=(h-_)*w,P=(1-(d+v))*w,M=(m+y)*w,C=(p+b)*E,O=(m-y)*E,j=(1-(d+g))*E;return t[0]=A,t[1]=R,t[2]=I,t[3]=0,t[4]=L,t[5]=P,t[6]=M,t[7]=0,t[8]=C,t[9]=O,t[10]=j,t[11]=0,t[12]=n[0]+S-(A*S+L*T+C*k),t[13]=n[1]+T-(R*S+P*T+O*k),t[14]=n[2]+k-(I*S+M*T+j*k),t[15]=1,t}function me(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,l=r*s,d=i*a,h=i*s,p=i*u,g=o*a,m=o*s,v=o*u;return t[0]=1-l-p,t[1]=f+v,t[2]=d-m,t[3]=0,t[4]=f-v,t[5]=1-c-p,t[6]=h+g,t[7]=0,t[8]=d+m,t[9]=h-g,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function ye(t,e,n,r,i){var o,a=1/Si(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function be(t,e,n,r){var i=Si(e.upDegrees*c/180),o=Si(e.downDegrees*c/180),a=Si(e.leftDegrees*c/180),s=Si(e.rightDegrees*c/180),u=2/(a+s),f=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*f*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function _e(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}function xe(t,e,n,i){var a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,d=void 0,h=void 0,p=void 0,g=void 0,m=e[0],v=e[1],y=e[2],b=i[0],_=i[1],x=i[2],w=n[0],E=n[1],S=n[2];return o(m-w)<ji&&o(v-E)<ji&&o(y-S)<ji?Gt(t):(g=1/r((d=m-w)*d+(h=v-E)*h+(p=y-S)*p),(g=r((a=_*(p*=g)-x*(h*=g))*a+(s=x*(d*=g)-b*p)*s+(u=b*h-_*d)*u))?(a*=g=1/g,s*=g,u*=g):(a=0,s=0,u=0),(g=r((c=h*u-p*s)*c+(f=p*a-d*u)*f+(l=d*s-h*a)*l))?(c*=g=1/g,f*=g,l*=g):(c=0,f=0,l=0),t[0]=a,t[1]=c,t[2]=d,t[3]=0,t[4]=s,t[5]=f,t[6]=h,t[7]=0,t[8]=u,t[9]=l,t[10]=p,t[11]=0,t[12]=-(a*m+s*v+u*y),t[13]=-(c*m+f*v+l*y),t[14]=-(d*m+h*v+p*y),t[15]=1,t)}function we(t,e,n,i){var o=e[0],a=e[1],s=e[2],u=i[0],c=i[1],f=i[2],l=o-n[0],d=a-n[1],h=s-n[2],p=l*l+d*d+h*h;0<p&&(l*=p=1/r(p),d*=p,h*=p);var g=c*h-f*d,m=f*l-u*h,v=u*d-c*l;return 0<(p=g*g+m*m+v*v)&&(g*=p=1/r(p),m*=p,v*=p),t[0]=g,t[1]=m,t[2]=v,t[3]=0,t[4]=d*v-h*m,t[5]=h*g-l*v,t[6]=l*m-d*g,t[7]=0,t[8]=l,t[9]=d,t[10]=h,t[11]=0,t[12]=o,t[13]=a,t[14]=s,t[15]=1,t}function Ee(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Se(t){return r(i(t[0],2)+i(t[1],2)+i(t[2],2)+i(t[3],2)+i(t[4],2)+i(t[5],2)+i(t[6],2)+i(t[7],2)+i(t[8],2)+i(t[9],2)+i(t[10],2)+i(t[11],2)+i(t[12],2)+i(t[13],2)+i(t[14],2)+i(t[15],2))}function Te(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function ke(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Ae(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Re(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ie(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Le(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],d=t[8],h=t[9],p=t[10],g=t[11],m=t[12],v=t[13],y=t[14],b=t[15],_=e[0],x=e[1],w=e[2],E=e[3],S=e[4],T=e[5],k=e[6],A=e[7],R=e[8],I=e[9],L=e[10],P=e[11],M=e[12],C=e[13],O=e[14],j=e[15];return o(n-_)<=ji*l(1,o(n),o(_))&&o(r-x)<=ji*l(1,o(r),o(x))&&o(i-w)<=ji*l(1,o(i),o(w))&&o(a-E)<=ji*l(1,o(a),o(E))&&o(s-S)<=ji*l(1,o(s),o(S))&&o(u-T)<=ji*l(1,o(u),o(T))&&o(c-k)<=ji*l(1,o(c),o(k))&&o(f-A)<=ji*l(1,o(f),o(A))&&o(d-R)<=ji*l(1,o(d),o(R))&&o(h-I)<=ji*l(1,o(h),o(I))&&o(p-L)<=ji*l(1,o(p),o(L))&&o(g-P)<=ji*l(1,o(g),o(P))&&o(m-M)<=ji*l(1,o(m),o(M))&&o(v-C)<=ji*l(1,o(v),o(C))&&o(y-O)<=ji*l(1,o(y),o(O))&&o(b-j)<=ji*l(1,o(b),o(j))}function Pe(){var t=new Ni(3);return Ni!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Me(t){var e=new Ni(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ce(t){var e=t[0],n=t[1],i=t[2];return r(e*e+n*n+i*i)}function Oe(t,e,n){var r=new Ni(3);return r[0]=t,r[1]=e,r[2]=n,r}function je(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ne(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Be(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Fe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function De(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ue(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function We(t,e){return t[0]=n(e[0]),t[1]=n(e[1]),t[2]=n(e[2]),t}function Ve(t,n){return t[0]=e(n[0]),t[1]=e(n[1]),t[2]=e(n[2]),t}function ze(t,e,n){return t[0]=u(e[0],n[0]),t[1]=u(e[1],n[1]),t[2]=u(e[2],n[2]),t}function qe(t,e,n){return t[0]=l(e[0],n[0]),t[1]=l(e[1],n[1]),t[2]=l(e[2],n[2]),t}function Ge(e,n){return e[0]=t(n[0]),e[1]=t(n[1]),e[2]=t(n[2]),e}function Xe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function He(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function $e(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return r(n*n+i*i+o*o)}function Ke(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Ye(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function Ze(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Qe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Je(t,e){var n=e[0],i=e[1],o=e[2],a=n*n+i*i+o*o;return 0<a&&(a=1/r(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function tn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function en(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function nn(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function rn(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*f,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*f,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*f,t}function on(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,f=3*o*s,l=3*u*a,d=u*o;return t[0]=e[0]*c+n[0]*f+r[0]*l+i[0]*d,t[1]=e[1]*c+n[1]*f+r[1]*l+i[1]*d,t[2]=e[2]*c+n[2]*f+r[2]*l+i[2]*d,t}function an(t,e){e=e||1;var n=2*Bi()*c,i=2*Bi()-1,o=r(1-i*i)*e;return t[0]=s(n)*o,t[1]=a(n)*o,t[2]=i*e,t}function sn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function un(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function cn(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=i*c-o*u,l=o*s-r*c,d=r*u-i*s,h=i*d-o*l,p=o*f-r*d,g=r*l-i*f,m=2*a;return f*=m,l*=m,d*=m,h*=2,p*=2,g*=2,t[0]=s+f+h,t[1]=u+l+p,t[2]=c+d+g,t}function fn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*s(r)-i[2]*a(r),o[2]=i[1]*a(r)+i[2]*s(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function ln(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*a(r)+i[0]*s(r),o[1]=i[1],o[2]=i[2]*s(r)-i[0]*a(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function dn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*s(r)-i[1]*a(r),o[1]=i[0]*a(r)+i[1]*s(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function hn(t,e){var n=Oe(t[0],t[1],t[2]),r=Oe(e[0],e[1],e[2]);Je(n,n),Je(r,r);var i=tn(n,r);return 1<i?0:-1>i?c:Ei(i)}function pn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function gn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function mn(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],u=e[2];return o(n-a)<=ji*l(1,o(n),o(a))&&o(r-s)<=ji*l(1,o(r),o(s))&&o(i-u)<=ji*l(1,o(i),o(u))}function vn(){var t=new Ni(4);return Ni!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function yn(t){var e=new Ni(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function bn(t,e,n,r){var i=new Ni(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function _n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function xn(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function wn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function En(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Sn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Tn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function kn(t,e){return t[0]=n(e[0]),t[1]=n(e[1]),t[2]=n(e[2]),t[3]=n(e[3]),t}function An(t,n){return t[0]=e(n[0]),t[1]=e(n[1]),t[2]=e(n[2]),t[3]=e(n[3]),t}function Rn(t,e,n){return t[0]=u(e[0],n[0]),t[1]=u(e[1],n[1]),t[2]=u(e[2],n[2]),t[3]=u(e[3],n[3]),t}function In(t,e,n){return t[0]=l(e[0],n[0]),t[1]=l(e[1],n[1]),t[2]=l(e[2],n[2]),t[3]=l(e[3],n[3]),t}function Ln(e,n){return e[0]=t(n[0]),e[1]=t(n[1]),e[2]=t(n[2]),e[3]=t(n[3]),e}function Pn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Mn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function Cn(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return r(n*n+i*i+o*o+a*a)}function On(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function jn(t){var e=t[0],n=t[1],i=t[2],o=t[3];return r(e*e+n*n+i*i+o*o)}function Nn(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function Bn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Fn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Dn(t,e){var n=e[0],i=e[1],o=e[2],a=e[3],s=n*n+i*i+o*o+a*a;return 0<s&&(s=1/r(s),t[0]=n*s,t[1]=i*s,t[2]=o*s,t[3]=a*s),t}function Un(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Wn(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function Vn(t,e){var n,i,o,a,s,u;e=e||1;do{s=(n=2*Bi()-1)*n+(i=2*Bi()-1)*i}while(1<=s);do{u=(o=2*Bi()-1)*o+(a=2*Bi()-1)*a}while(1<=u);var c=r((1-s)/u);return t[0]=e*n,t[1]=e*i,t[2]=e*o*c,t[3]=e*a*c,t}function zn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function qn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*o-u*i,l=c*i+u*r-a*o,d=c*o+a*i-s*r,h=-a*r-s*i-u*o;return t[0]=f*c+h*-a+l*-u-d*-s,t[1]=l*c+h*-s+d*-a-f*-u,t[2]=d*c+h*-u+f*-s-l*-a,t[3]=e[3],t}function Gn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Xn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Hn(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=e[0],u=e[1],c=e[2],f=e[3];return o(n-s)<=ji*l(1,o(n),o(s))&&o(r-u)<=ji*l(1,o(r),o(u))&&o(i-c)<=ji*l(1,o(i),o(c))&&o(a-f)<=ji*l(1,o(a),o(f))}function $n(){var t=new Ni(4);return Ni!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Kn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Yn(t,e,n){var r=a(n*=.5);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s(n),t}function Zn(t,e){var n=2*Ei(e[3]),r=a(n/2);return r>ji?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Qn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,t}function Jn(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],u=e[3],c=a(n),f=s(n);return t[0]=r*f+u*c,t[1]=i*f+o*c,t[2]=o*f-i*c,t[3]=u*f-r*c,t}function tr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],u=e[3],c=a(n),f=s(n);return t[0]=r*f-o*c,t[1]=i*f+u*c,t[2]=o*f+r*c,t[3]=u*f-i*c,t}function er(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],u=e[3],c=a(n),f=s(n);return t[0]=r*f+i*c,t[1]=i*f-r*c,t[2]=o*f+u*c,t[3]=u*f-o*c,t}function nr(t,e){var n=e[0],i=e[1],a=e[2];return t[0]=n,t[1]=i,t[2]=a,t[3]=r(o(1-n*n-i*i-a*a)),t}function rr(t,e,n,r){var i=e[0],o=e[1],s=e[2],u=e[3],c=n[0],f=n[1],l=n[2],d=n[3],h=void 0,p=void 0,g=void 0,m=void 0,v=void 0;return 0>(p=i*c+o*f+s*l+u*d)&&(p=-p,c=-c,f=-f,l=-l,d=-d),1-p>ji?(h=Ei(p),g=a(h),m=a((1-r)*h)/g,v=a(r*h)/g):(m=1-r,v=r),t[0]=m*i+v*c,t[1]=m*o+v*f,t[2]=m*s+v*l,t[3]=m*u+v*d,t}function ir(t){var e=Bi(),n=Bi(),i=Bi(),o=r(1-e),u=r(e);return t[0]=o*a(2*c*n),t[1]=o*s(2*c*n),t[2]=u*a(2*c*i),t[3]=u*s(2*c*i),t}function or(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function ar(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function sr(t,e){var n=e[0]+e[4]+e[8],i=void 0;if(0<n)i=r(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var a=(o+1)%3,s=(o+2)%3;i=r(e[3*o+o]-e[3*a+a]-e[3*s+s]+1),t[o]=.5*i,i=.5/i,t[3]=(e[3*a+s]-e[3*s+a])*i,t[a]=(e[3*a+o]+e[3*o+a])*i,t[s]=(e[3*s+o]+e[3*o+s])*i}return t}function ur(t,e,n,r){var i=.5*c/180;n*=i,r*=i;var o=a(e*=i),u=s(e),f=a(n),l=s(n),d=a(r),h=s(r);return t[0]=o*l*h-u*f*d,t[1]=u*f*h+o*l*d,t[2]=u*l*d-o*f*h,t[3]=u*l*h+o*f*d,t}function cr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function fr(){var t=new Ni(8);return Ni!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function lr(t){var e=new Ni(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function dr(t,e,n,r,i,o,a,s){var u=new Ni(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u}function hr(t,e,n,r,i,o,a){var s=new Ni(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*i,c=.5*o,f=.5*a;return s[4]=u*r+c*n-f*e,s[5]=c*r+f*t-u*n,s[6]=f*r+u*e-c*t,s[7]=-u*t-c*e-f*n,s}function pr(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+i*u-o*s,t[5]=i*c+o*a-r*u,t[6]=o*c+r*s-i*a,t[7]=-r*a-i*s-o*u,t}function gr(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function mr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function vr(t,e){var n=$n();he(n,e);var r=new Ni(3);return le(r,e),pr(t,n,r),t}function yr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function br(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function _r(t,e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t}function xr(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}function wr(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Er(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+o*a+r*u-i*s),t[1]=2*(r*c+o*s+i*a-n*u),t[2]=2*(i*c+o*u+n*s-r*a),t}function Sr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],f=e[4],l=e[5],d=e[6],h=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*c-o*u+f,t[5]=a*u+o*s-r*c+l,t[6]=a*c+r*u-i*s+d,t[7]=-r*s-i*u-o*c+h,t}function Tr(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*a+f*r+u*o-c*i,d=u*a+f*i+c*r-s*o,h=c*a+f*o+s*i-u*r,p=f*a-s*r-u*i-c*o;return Jn(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+p*r+d*o-h*i,t[5]=d*a+p*i+h*r-l*o,t[6]=h*a+p*o+l*i-d*r,t[7]=p*a-l*r-d*i-h*o,t}function kr(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*a+f*r+u*o-c*i,d=u*a+f*i+c*r-s*o,h=c*a+f*o+s*i-u*r,p=f*a-s*r-u*i-c*o;return tr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+p*r+d*o-h*i,t[5]=d*a+p*i+h*r-l*o,t[6]=h*a+p*o+l*i-d*r,t[7]=p*a-l*r-d*i-h*o,t}function Ar(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*a+f*r+u*o-c*i,d=u*a+f*i+c*r-s*o,h=c*a+f*o+s*i-u*r,p=f*a-s*r-u*i-c*o;return er(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+p*r+d*o-h*i,t[5]=d*a+p*i+h*r-l*o,t[6]=h*a+p*o+l*i-d*r,t[7]=p*a-l*r-d*i-h*o,t}function Rr(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=e[3];return t[0]=s*a+f*r+u*o-c*i,t[1]=u*a+f*i+c*r-s*o,t[2]=c*a+f*o+s*i-u*r,t[3]=f*a-s*r-u*i-c*o,s=e[4],u=e[5],c=e[6],f=e[7],t[4]=s*a+f*r+u*o-c*i,t[5]=u*a+f*i+c*r-s*o,t[6]=c*a+f*o+s*i-u*r,t[7]=f*a-s*r-u*i-c*o,t}function Ir(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,s=n[4],u=n[5],c=n[6],f=n[7],t[4]=r*f+a*s+i*c-o*u,t[5]=i*f+a*u+o*s-r*c,t[6]=o*f+a*c+r*u-i*s,t[7]=a*f-r*s-i*u-o*c,t}function Lr(t,e,n,i){if(o(i)<ji)return yr(t,e);var u=r(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),c=a(i*=.5),f=c*n[0]/u,l=c*n[1]/u,d=c*n[2]/u,h=s(i),p=e[0],g=e[1],m=e[2],v=e[3];t[0]=p*h+v*f+g*d-m*l,t[1]=g*h+v*l+m*f-p*d,t[2]=m*h+v*d+p*l-g*f,t[3]=v*h-p*f-g*l-m*d;var y=e[4],b=e[5],_=e[6],x=e[7];return t[4]=y*h+x*f+b*d-_*l,t[5]=b*h+x*l+_*f-y*d,t[6]=_*h+x*d+y*l-b*f,t[7]=x*h-y*f-b*l-_*d,t}function Pr(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Mr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[4],u=n[5],c=n[6],f=n[7],l=e[4],d=e[5],h=e[6],p=e[7],g=n[0],m=n[1],v=n[2],y=n[3];return t[0]=r*y+a*g+i*v-o*m,t[1]=i*y+a*m+o*g-r*v,t[2]=o*y+a*v+r*m-i*g,t[3]=a*y-r*g-i*m-o*v,t[4]=r*f+a*s+i*c-o*u+l*y+p*g+d*v-h*m,t[5]=i*f+a*u+o*s-r*c+d*y+p*m+h*g-l*v,t[6]=o*f+a*c+r*u-i*s+h*y+p*v+l*m-d*g,t[7]=a*f-r*s-i*u-o*c+p*y-l*g-d*m-h*v,t}function Cr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}function Or(t,e,n,r){var i=1-r;return 0>Mo(e,n)&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function jr(t,e){var n=jo(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Nr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}function Br(t,e){var n=jo(e);if(0<n){n=r(n);var i=e[0]/n,o=e[1]/n,a=e[2]/n,s=e[3]/n,u=e[4],c=e[5],f=e[6],l=e[7],d=i*u+o*c+a*f+s*l;t[0]=i,t[1]=o,t[2]=a,t[3]=s,t[4]=(u-i*d)/n,t[5]=(c-o*d)/n,t[6]=(f-a*d)/n,t[7]=(l-s*d)/n}return t}function Fr(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Dr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Ur(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],d=e[0],h=e[1],p=e[2],g=e[3],m=e[4],v=e[5],y=e[6],b=e[7];return o(n-d)<=ji*l(1,o(n),o(d))&&o(r-h)<=ji*l(1,o(r),o(h))&&o(i-p)<=ji*l(1,o(i),o(p))&&o(a-g)<=ji*l(1,o(a),o(g))&&o(s-m)<=ji*l(1,o(s),o(m))&&o(u-v)<=ji*l(1,o(u),o(v))&&o(c-y)<=ji*l(1,o(c),o(y))&&o(f-b)<=ji*l(1,o(f),o(b))}function Wr(){var t=new Ni(2);return Ni!=Float32Array&&(t[0]=0,t[1]=0),t}function Vr(t){var e=new Ni(2);return e[0]=t[0],e[1]=t[1],e}function zr(t,e){var n=new Ni(2);return n[0]=t,n[1]=e,n}function qr(t,e){return t[0]=e[0],t[1]=e[1],t}function Gr(t,e,n){return t[0]=e,t[1]=n,t}function Xr(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Hr(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function $r(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function Kr(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Yr(t,e){return t[0]=n(e[0]),t[1]=n(e[1]),t}function Zr(t,n){return t[0]=e(n[0]),t[1]=e(n[1]),t}function Qr(t,e,n){return t[0]=u(e[0],n[0]),t[1]=u(e[1],n[1]),t}function Jr(t,e,n){return t[0]=l(e[0],n[0]),t[1]=l(e[1],n[1]),t}function ti(e,n){return e[0]=t(n[0]),e[1]=t(n[1]),e}function ei(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function ni(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function ri(t,e){var n=e[0]-t[0],i=e[1]-t[1];return r(n*n+i*i)}function ii(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function oi(t){var e=t[0],n=t[1];return r(e*e+n*n)}function ai(t){var e=t[0],n=t[1];return e*e+n*n}function si(t,e){return t[0]=-e[0],t[1]=-e[1],t}function ui(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function ci(t,e){var n=e[0],i=e[1],o=n*n+i*i;return 0<o&&(o=1/r(o),t[0]=e[0]*o,t[1]=e[1]*o),t}function fi(t,e){return t[0]*e[0]+t[1]*e[1]}function li(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function di(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function hi(t,e){e=e||1;var n=2*Bi()*c;return t[0]=s(n)*e,t[1]=a(n)*e,t}function pi(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function gi(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function mi(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function vi(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function yi(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],u=a(r),c=s(r);return t[0]=i*c-o*u+n[0],t[1]=i*u+o*c+n[1],t}function bi(t,e){var n=t[0],i=t[1],o=e[0],a=e[1],s=n*n+i*i;0<s&&(s=1/r(s));var u=o*o+a*a;0<u&&(u=1/r(u));var f=(n*o+i*a)*s*u;return 1<f?0:-1>f?c:Ei(f)}function _i(t){return"vec2("+t[0]+", "+t[1]+")"}function xi(t,e){return t[0]===e[0]&&t[1]===e[1]}function wi(t,e){var n=t[0],r=t[1],i=e[0],a=e[1];return o(n-i)<=ji*l(1,o(n),o(i))&&o(r-a)<=ji*l(1,o(r),o(a))}var Ei=Math.acos,Si=Math.tan;h.r(d);var Ti={};h.r(Ti),h.d(Ti,"EPSILON",function(){return ji}),h.d(Ti,"ARRAY_TYPE",function(){return Ni}),h.d(Ti,"RANDOM",function(){return Bi}),h.d(Ti,"setMatrixArrayType",function(){return p}),h.d(Ti,"toRadian",function(){return g}),h.d(Ti,"equals",function(){return m});var ki={};h.r(ki),h.d(ki,"create",function(){return v}),h.d(ki,"clone",function(){return y}),h.d(ki,"copy",function(){return b}),h.d(ki,"identity",function(){return _}),h.d(ki,"fromValues",function(){return x}),h.d(ki,"set",function(){return w}),h.d(ki,"transpose",function(){return E}),h.d(ki,"invert",function(){return S}),h.d(ki,"adjoint",function(){return T}),h.d(ki,"determinant",function(){return k}),h.d(ki,"multiply",function(){return A}),h.d(ki,"rotate",function(){return R}),h.d(ki,"scale",function(){return I}),h.d(ki,"fromRotation",function(){return L}),h.d(ki,"fromScaling",function(){return P}),h.d(ki,"str",function(){return M}),h.d(ki,"frob",function(){return C}),h.d(ki,"LDU",function(){return O}),h.d(ki,"add",function(){return j}),h.d(ki,"subtract",function(){return N}),h.d(ki,"exactEquals",function(){return B}),h.d(ki,"equals",function(){return F}),h.d(ki,"multiplyScalar",function(){return D}),h.d(ki,"multiplyScalarAndAdd",function(){return U}),h.d(ki,"mul",function(){return Di}),h.d(ki,"sub",function(){return Ui});var Ai={};h.r(Ai),h.d(Ai,"create",function(){return W}),h.d(Ai,"clone",function(){return V}),h.d(Ai,"copy",function(){return z}),h.d(Ai,"identity",function(){return q}),h.d(Ai,"fromValues",function(){return G}),h.d(Ai,"set",function(){return X}),h.d(Ai,"invert",function(){return H}),h.d(Ai,"determinant",function(){return $}),h.d(Ai,"multiply",function(){return K}),h.d(Ai,"rotate",function(){return Y}),h.d(Ai,"scale",function(){return Z}),h.d(Ai,"translate",function(){return Q}),h.d(Ai,"fromRotation",function(){return J}),h.d(Ai,"fromScaling",function(){return tt}),h.d(Ai,"fromTranslation",function(){return et}),h.d(Ai,"str",function(){return nt}),h.d(Ai,"frob",function(){return rt}),h.d(Ai,"add",function(){return it}),h.d(Ai,"subtract",function(){return ot}),h.d(Ai,"multiplyScalar",function(){return at}),h.d(Ai,"multiplyScalarAndAdd",function(){return st}),h.d(Ai,"exactEquals",function(){return ut}),h.d(Ai,"equals",function(){return ct}),h.d(Ai,"mul",function(){return Wi}),h.d(Ai,"sub",function(){return Vi});var Ri={};h.r(Ri),h.d(Ri,"create",function(){return ft}),h.d(Ri,"fromMat4",function(){return lt}),h.d(Ri,"clone",function(){return dt}),h.d(Ri,"copy",function(){return ht}),h.d(Ri,"fromValues",function(){return pt}),h.d(Ri,"set",function(){return gt}),h.d(Ri,"identity",function(){return mt}),h.d(Ri,"transpose",function(){return vt}),h.d(Ri,"invert",function(){return yt}),h.d(Ri,"adjoint",function(){return bt}),h.d(Ri,"determinant",function(){return _t}),h.d(Ri,"multiply",function(){return xt}),h.d(Ri,"translate",function(){return wt}),h.d(Ri,"rotate",function(){return Et}),h.d(Ri,"scale",function(){return St}),h.d(Ri,"fromTranslation",function(){return Tt}),h.d(Ri,"fromRotation",function(){return kt}),h.d(Ri,"fromScaling",function(){return At}),h.d(Ri,"fromMat2d",function(){return Rt}),h.d(Ri,"fromQuat",function(){return It}),h.d(Ri,"normalFromMat4",function(){return Lt}),h.d(Ri,"projection",function(){return Pt}),h.d(Ri,"str",function(){return Mt}),h.d(Ri,"frob",function(){return Ct}),h.d(Ri,"add",function(){return Ot}),h.d(Ri,"subtract",function(){return jt}),h.d(Ri,"multiplyScalar",function(){return Nt}),h.d(Ri,"multiplyScalarAndAdd",function(){return Bt}),h.d(Ri,"exactEquals",function(){return Ft}),h.d(Ri,"equals",function(){return Dt}),h.d(Ri,"mul",function(){return zi}),h.d(Ri,"sub",function(){return qi});var Ii={};h.r(Ii),h.d(Ii,"create",function(){return Ut}),h.d(Ii,"clone",function(){return Wt}),h.d(Ii,"copy",function(){return Vt}),h.d(Ii,"fromValues",function(){return zt}),h.d(Ii,"set",function(){return qt}),h.d(Ii,"identity",function(){return Gt}),h.d(Ii,"transpose",function(){return Xt}),h.d(Ii,"invert",function(){return Ht}),h.d(Ii,"adjoint",function(){return $t}),h.d(Ii,"determinant",function(){return Kt}),h.d(Ii,"multiply",function(){return Yt}),h.d(Ii,"translate",function(){return Zt}),h.d(Ii,"scale",function(){return Qt}),h.d(Ii,"rotate",function(){return Jt}),h.d(Ii,"rotateX",function(){return te}),h.d(Ii,"rotateY",function(){return ee}),h.d(Ii,"rotateZ",function(){return ne}),h.d(Ii,"fromTranslation",function(){return re}),h.d(Ii,"fromScaling",function(){return ie}),h.d(Ii,"fromRotation",function(){return oe}),h.d(Ii,"fromXRotation",function(){return ae}),h.d(Ii,"fromYRotation",function(){return se}),h.d(Ii,"fromZRotation",function(){return ue}),h.d(Ii,"fromRotationTranslation",function(){return ce}),h.d(Ii,"fromQuat2",function(){return fe}),h.d(Ii,"getTranslation",function(){return le}),h.d(Ii,"getScaling",function(){return de}),h.d(Ii,"getRotation",function(){return he}),h.d(Ii,"fromRotationTranslationScale",function(){return pe}),h.d(Ii,"fromRotationTranslationScaleOrigin",function(){return ge}),h.d(Ii,"fromQuat",function(){return me}),h.d(Ii,"frustum",function(){return ve}),h.d(Ii,"perspective",function(){return ye}),h.d(Ii,"perspectiveFromFieldOfView",function(){return be}),h.d(Ii,"ortho",function(){return _e}),h.d(Ii,"lookAt",function(){return xe}),h.d(Ii,"targetTo",function(){return we}),h.d(Ii,"str",function(){return Ee}),h.d(Ii,"frob",function(){return Se}),h.d(Ii,"add",function(){return Te}),h.d(Ii,"subtract",function(){return ke}),h.d(Ii,"multiplyScalar",function(){return Ae}),h.d(Ii,"multiplyScalarAndAdd",function(){return Re}),h.d(Ii,"exactEquals",function(){return Ie}),h.d(Ii,"equals",function(){return Le}),h.d(Ii,"mul",function(){return Gi}),h.d(Ii,"sub",function(){return Xi});var Li={};h.r(Li),h.d(Li,"create",function(){return Pe}),h.d(Li,"clone",function(){return Me}),h.d(Li,"length",function(){return Ce}),h.d(Li,"fromValues",function(){return Oe}),h.d(Li,"copy",function(){return je}),h.d(Li,"set",function(){return Ne}),h.d(Li,"add",function(){return Be}),h.d(Li,"subtract",function(){return Fe}),h.d(Li,"multiply",function(){return De}),h.d(Li,"divide",function(){return Ue}),h.d(Li,"ceil",function(){return We}),h.d(Li,"floor",function(){return Ve}),h.d(Li,"min",function(){return ze}),h.d(Li,"max",function(){return qe}),h.d(Li,"round",function(){return Ge}),h.d(Li,"scale",function(){return Xe}),h.d(Li,"scaleAndAdd",function(){return He}),h.d(Li,"distance",function(){return $e}),h.d(Li,"squaredDistance",function(){return Ke}),h.d(Li,"squaredLength",function(){return Ye}),h.d(Li,"negate",function(){return Ze}),h.d(Li,"inverse",function(){return Qe}),h.d(Li,"normalize",function(){return Je}),h.d(Li,"dot",function(){return tn}),h.d(Li,"cross",function(){return en}),h.d(Li,"lerp",function(){return nn}),h.d(Li,"hermite",function(){return rn}),h.d(Li,"bezier",function(){return on}),h.d(Li,"random",function(){return an}),h.d(Li,"transformMat4",function(){return sn}),h.d(Li,"transformMat3",function(){return un}),h.d(Li,"transformQuat",function(){return cn}),h.d(Li,"rotateX",function(){return fn}),h.d(Li,"rotateY",function(){return ln}),h.d(Li,"rotateZ",function(){return dn}),h.d(Li,"angle",function(){return hn}),h.d(Li,"str",function(){return pn}),h.d(Li,"exactEquals",function(){return gn}),h.d(Li,"equals",function(){return mn}),h.d(Li,"sub",function(){return Hi}),h.d(Li,"mul",function(){return $i}),h.d(Li,"div",function(){return Ki}),h.d(Li,"dist",function(){return Yi}),h.d(Li,"sqrDist",function(){return Zi}),h.d(Li,"len",function(){return Qi}),h.d(Li,"sqrLen",function(){return Ji}),h.d(Li,"forEach",function(){return to});var Pi={};h.r(Pi),h.d(Pi,"create",function(){return vn}),h.d(Pi,"clone",function(){return yn}),h.d(Pi,"fromValues",function(){return bn}),h.d(Pi,"copy",function(){return _n}),h.d(Pi,"set",function(){return xn}),h.d(Pi,"add",function(){return wn}),h.d(Pi,"subtract",function(){return En}),h.d(Pi,"multiply",function(){return Sn}),h.d(Pi,"divide",function(){return Tn}),h.d(Pi,"ceil",function(){return kn}),h.d(Pi,"floor",function(){return An}),h.d(Pi,"min",function(){return Rn}),h.d(Pi,"max",function(){return In}),h.d(Pi,"round",function(){return Ln}),h.d(Pi,"scale",function(){return Pn}),h.d(Pi,"scaleAndAdd",function(){return Mn}),h.d(Pi,"distance",function(){return Cn}),h.d(Pi,"squaredDistance",function(){return On}),h.d(Pi,"length",function(){return jn}),h.d(Pi,"squaredLength",function(){return Nn}),h.d(Pi,"negate",function(){return Bn}),h.d(Pi,"inverse",function(){return Fn}),h.d(Pi,"normalize",function(){return Dn}),h.d(Pi,"dot",function(){return Un}),h.d(Pi,"lerp",function(){return Wn}),h.d(Pi,"random",function(){return Vn}),h.d(Pi,"transformMat4",function(){return zn}),h.d(Pi,"transformQuat",function(){return qn}),h.d(Pi,"str",function(){return Gn}),h.d(Pi,"exactEquals",function(){return Xn}),h.d(Pi,"equals",function(){return Hn}),h.d(Pi,"sub",function(){return eo}),h.d(Pi,"mul",function(){return no}),h.d(Pi,"div",function(){return ro}),h.d(Pi,"dist",function(){return io}),h.d(Pi,"sqrDist",function(){return oo}),h.d(Pi,"len",function(){return ao}),h.d(Pi,"sqrLen",function(){return so}),h.d(Pi,"forEach",function(){return uo});var Mi={};h.r(Mi),h.d(Mi,"create",function(){return $n}),h.d(Mi,"identity",function(){return Kn}),h.d(Mi,"setAxisAngle",function(){return Yn}),h.d(Mi,"getAxisAngle",function(){return Zn}),h.d(Mi,"multiply",function(){return Qn}),h.d(Mi,"rotateX",function(){return Jn}),h.d(Mi,"rotateY",function(){return tr}),h.d(Mi,"rotateZ",function(){return er}),h.d(Mi,"calculateW",function(){return nr}),h.d(Mi,"slerp",function(){return rr}),h.d(Mi,"random",function(){return ir}),h.d(Mi,"invert",function(){return or}),h.d(Mi,"conjugate",function(){return ar}),h.d(Mi,"fromMat3",function(){return sr}),h.d(Mi,"fromEuler",function(){return ur}),h.d(Mi,"str",function(){return cr}),h.d(Mi,"clone",function(){return co}),h.d(Mi,"fromValues",function(){return fo}),h.d(Mi,"copy",function(){return lo}),h.d(Mi,"set",function(){return ho}),h.d(Mi,"add",function(){return po}),h.d(Mi,"mul",function(){return go}),h.d(Mi,"scale",function(){return mo}),h.d(Mi,"dot",function(){return vo}),h.d(Mi,"lerp",function(){return yo}),h.d(Mi,"length",function(){return bo}),h.d(Mi,"len",function(){return _o}),h.d(Mi,"squaredLength",function(){return xo}),h.d(Mi,"sqrLen",function(){return wo}),h.d(Mi,"normalize",function(){return Eo}),h.d(Mi,"exactEquals",function(){return So}),h.d(Mi,"equals",function(){return To}),h.d(Mi,"rotationTo",function(){return ko}),h.d(Mi,"sqlerp",function(){return Ao}),h.d(Mi,"setAxes",function(){return Ro});var Ci={};h.r(Ci),h.d(Ci,"create",function(){return fr}),h.d(Ci,"clone",function(){return lr}),h.d(Ci,"fromValues",function(){return dr}),h.d(Ci,"fromRotationTranslationValues",function(){return hr}),h.d(Ci,"fromRotationTranslation",function(){return pr}),h.d(Ci,"fromTranslation",function(){return gr}),h.d(Ci,"fromRotation",function(){return mr}),h.d(Ci,"fromMat4",function(){return vr}),h.d(Ci,"copy",function(){return yr}),h.d(Ci,"identity",function(){return br}),h.d(Ci,"set",function(){return _r}),h.d(Ci,"getReal",function(){return Io}),h.d(Ci,"getDual",function(){return xr}),h.d(Ci,"setReal",function(){return Lo}),h.d(Ci,"setDual",function(){return wr}),h.d(Ci,"getTranslation",function(){return Er}),h.d(Ci,"translate",function(){return Sr}),h.d(Ci,"rotateX",function(){return Tr}),h.d(Ci,"rotateY",function(){return kr}),h.d(Ci,"rotateZ",function(){return Ar}),h.d(Ci,"rotateByQuatAppend",function(){return Rr}),h.d(Ci,"rotateByQuatPrepend",function(){return Ir}),h.d(Ci,"rotateAroundAxis",function(){return Lr}),h.d(Ci,"add",function(){return Pr}),h.d(Ci,"multiply",function(){return Mr}),h.d(Ci,"mul",function(){return Po}),h.d(Ci,"scale",function(){return Cr}),h.d(Ci,"dot",function(){return Mo}),h.d(Ci,"lerp",function(){return Or}),h.d(Ci,"invert",function(){return jr}),h.d(Ci,"conjugate",function(){return Nr}),h.d(Ci,"length",function(){return Co}),h.d(Ci,"len",function(){return Oo}),h.d(Ci,"squaredLength",function(){return jo}),h.d(Ci,"sqrLen",function(){return No}),h.d(Ci,"normalize",function(){return Br}),h.d(Ci,"str",function(){return Fr}),h.d(Ci,"exactEquals",function(){return Dr}),h.d(Ci,"equals",function(){return Ur});var Oi={};h.r(Oi),h.d(Oi,"create",function(){return Wr}),h.d(Oi,"clone",function(){return Vr}),h.d(Oi,"fromValues",function(){return zr}),h.d(Oi,"copy",function(){return qr}),h.d(Oi,"set",function(){return Gr}),h.d(Oi,"add",function(){return Xr}),h.d(Oi,"subtract",function(){return Hr}),h.d(Oi,"multiply",function(){return $r}),h.d(Oi,"divide",function(){return Kr}),h.d(Oi,"ceil",function(){return Yr}),h.d(Oi,"floor",function(){return Zr}),h.d(Oi,"min",function(){return Qr}),h.d(Oi,"max",function(){return Jr}),h.d(Oi,"round",function(){return ti}),h.d(Oi,"scale",function(){return ei}),h.d(Oi,"scaleAndAdd",function(){return ni}),h.d(Oi,"distance",function(){return ri}),h.d(Oi,"squaredDistance",function(){return ii}),h.d(Oi,"length",function(){return oi}),h.d(Oi,"squaredLength",function(){return ai}),h.d(Oi,"negate",function(){return si}),h.d(Oi,"inverse",function(){return ui}),h.d(Oi,"normalize",function(){return ci}),h.d(Oi,"dot",function(){return fi}),h.d(Oi,"cross",function(){return li}),h.d(Oi,"lerp",function(){return di}),h.d(Oi,"random",function(){return hi}),h.d(Oi,"transformMat2",function(){return pi}),h.d(Oi,"transformMat2d",function(){return gi}),h.d(Oi,"transformMat3",function(){return mi}),h.d(Oi,"transformMat4",function(){return vi}),h.d(Oi,"rotate",function(){return yi}),h.d(Oi,"angle",function(){return bi}),h.d(Oi,"str",function(){return _i}),h.d(Oi,"exactEquals",function(){return xi}),h.d(Oi,"equals",function(){return wi}),h.d(Oi,"len",function(){return Bo}),h.d(Oi,"sub",function(){return Fo}),h.d(Oi,"mul",function(){return Do}),h.d(Oi,"div",function(){return Uo}),h.d(Oi,"dist",function(){return Wo}),h.d(Oi,"sqrDist",function(){return Vo}),h.d(Oi,"sqrLen",function(){return zo}),h.d(Oi,"forEach",function(){return qo});var ji=1e-6,Ni="undefined"==typeof Float32Array?Array:Float32Array,Bi=Math.random,Fi=c/180,Di=A,Ui=N,Wi=K,Vi=ot,zi=xt,qi=jt,Gi=Yt,Xi=ke,Hi=Fe,$i=De,Ki=Ue,Yi=$e,Zi=Ke,Qi=Ce,Ji=Ye,to=function(){var t=Pe();return function(e,n,r,i,o,a){var s,c;for(n||(n=3),r||(r=0),c=i?u(i*n+r,e.length):e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),eo=En,no=Sn,ro=Tn,io=Cn,oo=On,ao=jn,so=Nn,uo=function(){var t=vn();return function(e,n,r,i,o,a){var s,c;for(n||(n=4),r||(r=0),c=i?u(i*n+r,e.length):e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),co=yn,fo=bn,lo=_n,ho=xn,po=wn,go=Qn,mo=Pn,vo=Un,yo=Wn,bo=jn,_o=bo,xo=Nn,wo=xo,Eo=Dn,So=Xn,To=Hn,ko=function(){var t=Pe(),e=Oe(1,0,0),n=Oe(0,1,0);return function(r,i,o){var a=tn(i,o);return-.999999>a?(en(t,e,i),1e-6>Qi(t)&&en(t,n,i),Je(t,t),Yn(r,t,Math.PI),r):.999999<a?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(en(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+a,Eo(r,r))}}(),Ao=function(){var t=$n(),e=$n();return function(n,r,i,o,a,s){return rr(t,r,a,s),rr(e,i,o,s),rr(n,t,e,2*s*(1-s)),n}}(),Ro=function(){var t=ft();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],Eo(e,sr(e,t))}}(),Io=lo,Lo=lo,Po=Mr,Mo=vo,Co=bo,Oo=Co,jo=xo,No=jo,Bo=oi,Fo=Hr,Do=$r,Uo=Kr,Wo=ri,Vo=ii,zo=ai,qo=function(){var t=Wr();return function(e,n,r,i,o,a){var s,c;for(n||(n=2),r||(r=0),c=i?u(i*n+r,e.length):e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}();h.d(d,"glMatrix",function(){return Ti}),h.d(d,"mat2",function(){return ki}),h.d(d,"mat2d",function(){return Ai}),h.d(d,"mat3",function(){return Ri}),h.d(d,"mat4",function(){return Ii}),h.d(d,"quat",function(){return Mi}),h.d(d,"quat2",function(){return Ci}),h.d(d,"vec2",function(){return Oi}),h.d(d,"vec3",function(){return Li}),h.d(d,"vec4",function(){return Pi})},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=window;let i;"undefined"!=typeof performance&&(performance.now?i=()=>r.performance.now():r.performance.mozNow?i=()=>r.performance.mozNow():r.performance.msNow?i=()=>r.performance.msNow():r.performance.oNow?i=()=>r.performance.oNow():r.performance.webkitNow?i=()=>r.performance.webkitNow():Date.now&&(i=()=>Date.now())),n.now=i||(()=>(new Date).getTime()),n.formatTime=t=>{const n=e(t/60),r=e(t-60*n);return(10>n?"0"+n:n.toString())+":"+(10>r?"0"+r:r.toString())}},function(t){function e(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===e||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(){h&&l&&(h=!1,l.length?d=l.concat(d):p=-1,d.length&&o())}function o(){if(!h){var t=r(i);h=!0;for(var e=d.length;e;){for(l=d,d=[];++p<e;)l&&l[p].run();p=-1,e=d.length}l=null,h=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function s(){}var u,c,f=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:e}catch(t){u=e}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var l,d=[],h=!1,p=-1;f.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new a(t,e)),1!==d.length||h||r(o)},a.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=s,f.addListener=s,f.once=s,f.off=s,f.removeListener=s,f.removeAllListeners=s,f.emit=s,f.prependListener=s,f.prependOnceListener=s,f.listeners=function(){return[]},f.binding=function(){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,n,r){"use strict";function i(t,e){let n={},r=t.readBits(3),i=[];for(let e=0;e<r;++e)i.push(t.readBits(8));let o=!1;for(let a=0;a<r;++a){for(let r,s=0;8>s;++s){if((r=s+8*a)===e.length){o=!0;break}if(i[a]&1<<s)if(e[r].flags&c)if(e[r].flags&v){let i=t.readBits(1)?-1:1,o=t.readBits(e[r].bits-1),a=e[r].divisor;n[e[r].name]=i*o/a}else{let i=t.readBits(e[r].bits),o=e[r].divisor;n[e[r].name]=i/o}else if(e[r].flags&f)if(e[r].flags&v){let i=t.readBits(1)?-1:1,o=t.readBits(e[r].bits-1),a=e[r].divisor;n[e[r].name]=i*o/a}else{let i=t.readBits(e[r].bits),o=e[r].divisor;n[e[r].name]=i/o}else if(e[r].flags&d)if(e[r].flags&v){let i=t.readBits(1)?-1:1,o=t.readBits(e[r].bits-1),a=e[r].divisor;n[e[r].name]=i*o/a}else{let i=t.readBits(e[r].bits),o=e[r].divisor;n[e[r].name]=i/o}else if(e[r].flags&l||e[r].flags&p||e[r].flags&g)if(e[r].flags&v){let i=t.readBits(1)?-1:1,o=t.readBits(e[r].bits-1),a=e[r].divisor;n[e[r].name]=i*o/a}else{let i=t.readBits(e[r].bits),o=e[r].divisor;n[e[r].name]=i/o}else if(e[r].flags&h){let i=t.readBits(e[r].bits),o=360/(1<<e[r].bits);n[e[r].name]=i*o}else e[r].flags&m&&(n[e[r].name]=t.readString())}if(o)break}return n}function o(t){let e=t.readBits(1),n=t.readBits(1);if(!e&&!n)return 0;let r=t.readBits(1),i=0,o=0;e&&(i=t.readBits(12)),n&&(o=t.readBits(3));let a=i+o/32;return r&&(a=-a),a}Object.defineProperty(n,"__esModule",{value:!0});const a=r(13),s=r(43),u=r(7),c=1,f=2,l=4,d=8,h=16,p=32,g=64,m=128,v=-2147483648;class y{static bad(){throw new Error("Invalid message type")}static nop(){return null}static disconnect(t){return{reason:t.str()}}static event(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell();let o=[],a=r.readBits(5);for(let t,e=0;e<a;++e){if((t={}).index=r.readBits(10),r.readBits(1)){t.packetIndex=r.readBits(11),r.readBits(1)&&(t.delta=i(r,n.event_t))}r.readBits(1)&&(t.fireTime=r.readBits(16)),o.push(t)}return 0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{events:o}}static version(t){return{version:t.ui()}}static setView(t){return{entityIndex:t.s()}}static sound(t){let n=new s.BitStream(t.data.buffer);n.index=8*t.tell();let r=n.readBits(9),i=1;0!=(1&r)&&(i=n.readBits(8)/255);let a=1;0!=(2&r)&&(a=n.readBits(8)/64);let u,c=n.readBits(3),f=n.readBits(11);u=0==(4&r)?n.readBits(8):n.readBits(16);let l,d,h,p=n.readBits(1),g=n.readBits(1),m=n.readBits(1);p&&(l=o(n)),g&&(d=o(n)),m&&(h=o(n));let v=1;return 0!=(8&r)&&(v=n.readBits(8)),0<n.index%8?t.seek(e(n.index/8)+1):t.seek(n.index/8),{flags:r,volume:i,attenuation:a,channel:c,entityIndex:f,soundIndex:u,xPosition:l,yPosition:d,zPosition:h,pitch:v}}static time(t){return{time:t.f()}}static print(t){return{message:t.str()}}static stuffText(t){return{commands:t.str().split(";").map(t=>{let e=t.split(/\s*("[^"]+"|[^\s"]+)/).map(t=>t.replace(/^"(.*)"$/,"$1").trim()).filter(t=>t);return{func:e[0],params:e.slice(1)}})}}static setAngle(t){return{pitch:t.s(),yaw:t.s(),roll:t.s()}}static serverInfo(t){let e={protocol:t.i(),spawnCount:t.i(),mapCrc:t.i(),clientDllHash:t.arrx(16,u.ReaderDataType.UByte),maxPlayers:t.ub(),playerIndex:t.ub(),isDeathmatch:t.ub(),gameDir:t.str(),hostName:t.str(),mapFileName:t.str(),mapCycle:t.str()};return t.skip(1),e}static lightStyle(t){return{index:t.ub(),lightInfo:t.str()}}static updateUserInfo(t){return{clientIndex:t.ub(),clientUserId:t.ui(),clientUserInfo:t.str(),clientCdKeyHash:t.arrx(16,u.ReaderDataType.UByte)}}static deltaDescription(t,n){let r={name:t.str(),fields:[]},o=new s.BitStream(t.data.buffer),a=t.us();o.index=8*t.tell();for(let t=0;t<a;++t)r.fields.push(i(o,n.delta_description_t));return n[r.name]=r.fields,0<o.index%8?t.seek(e(o.index/8)+1):t.seek(o.index/8),r}static clientData(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell(),r.readBits(1)&&(r.index+=8);let o=i(r,n.clientdata_t),a=n.weapon_data_t;for(;r.readBits(1);)r.index+=6,i(r,a);return 0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{clientData:o}}static stopSound(t){return{entityIndex:t.s()}}static pings(t){let n=new s.BitStream(t.data.buffer);n.index=8*t.tell();let r=[];for(;n.readBits(1);)r.push({slot:n.readBits(8),ping:n.readBits(8),loss:n.readBits(8)});return 0<n.index%8?t.seek(e(n.index/8)+1):t.seek(n.index/8),r}static particle(t){return{position:[t.s()/8,t.s()/8,t.s()/8],direction:[t.b(),t.b(),t.b()],count:t.ub(),color:t.ub()}}static damage(){return null}static spawnStatic(t){let e={modelIndex:t.s(),sequence:t.b(),frame:t.b(),colorMap:t.s(),skin:t.b(),position:[],rotation:[]};return e.position[0]=t.s()/8,e.rotation[0]=1.40625*t.b(),e.position[1]=t.s()/8,e.rotation[1]=1.40625*t.b(),e.position[2]=t.s()/8,e.rotation[2]=1.40625*t.b(),e.renderMode=t.b(),e.renderMode&&(e.renderAmt=t.b(),e.renderColor=[t.ub(),t.ub(),t.ub()],e.renderFx=t.b()),e}static eventReliable(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell();let o,a=r.readBits(10),u=i(r,n.event_t),c=r.readBits(1);return c&&(o=r.readBits(16)),0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{eventIndex:a,eventData:u,delayBit:c,delay:o}}static spawnBaseLine(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell();let o=[];for(;;){let t,e=r.readBits(11);if(2047===e)break;t=1&r.readBits(2)?0<e&&32>=e?"entity_state_player_t":"entity_state_t":"custom_entity_state_t",o[e]=i(r,n[t])}if(31!==r.readBits(5))throw new Error("Bad spawnbaseline");let a=r.readBits(6),u=[];for(let t=0;t<a;++t)u.push(i(r,n.entity_state_t));return 0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{entities:o,extraData:u}}static tempEntity(t){let e={};switch(t.ub()){case 0:t.skip(24);break;case 1:t.skip(20);break;case 2:t.skip(6);break;case 3:t.skip(11);break;case 4:t.skip(6);break;case 5:t.skip(10);break;case 6:t.skip(12);break;case 7:t.skip(17);break;case 8:t.skip(16);break;case 9:case 10:case 11:t.skip(6);break;case 12:t.skip(8);break;case 13:t.skip(8),t.s()&&t.skip(2);break;case 14:t.skip(9);break;case 15:t.skip(19);break;case 17:t.skip(10);break;case 18:t.skip(16);break;case 19:case 20:case 21:t.skip(24);break;case 22:t.skip(10);break;case 23:t.skip(11);break;case 24:t.skip(16);break;case 25:t.skip(19);break;case 27:t.skip(12);break;case 28:t.skip(16);break;case 29:e.channel=t.b(),e.x=t.s(),e.y=t.s(),e.effect=t.b(),e.textColor=[t.ub(),t.ub(),t.ub(),t.ub()],e.effectColor=[t.ub(),t.ub(),t.ub(),t.ub()],e.fadeInTime=t.s(),e.fadeOutTime=t.s(),e.holdTime=t.s(),e.effect&&(e.effectTime=t.s()),e.message=t.str();break;case 30:case 31:t.skip(17);break;case 99:t.skip(2);break;case 100:t.skip(10);break;case 101:t.skip(14);break;case 102:t.skip(12);break;case 103:t.skip(14);break;case 104:t.skip(9);break;case 105:t.skip(5);break;case 106:t.skip(17);break;case 107:t.skip(13);break;case 108:t.skip(24);break;case 109:t.skip(9);break;case 110:t.skip(17);break;case 111:t.skip(7);break;case 112:t.skip(10);break;case 113:case 114:t.skip(19);break;case 115:t.skip(12);break;case 116:case 117:t.skip(7);break;case 118:t.skip(9);break;case 119:t.skip(16);break;case 120:t.skip(18);break;case 121:t.skip(5);break;case 122:t.skip(10);break;case 123:t.skip(9);break;case 124:t.skip(7);break;case 125:t.skip(1);break;case 126:t.skip(18);break;case 127:t.skip(15);break;default:throw new Error("Unknown temp entity type")}return e}static setPause(t){return{isPaused:t.b()}}static signOnNum(t){return{sign:t.b()}}static centerPrint(t){return{message:t.str()}}static killedMonster(){return null}static foundSecret(){return null}static spawnStaticSound(t){return{position:[t.s()/8,t.s()/8,t.s()/8],soundIndex:t.us(),volume:t.ub()/255,attenuation:t.ub()/64,entityIndex:t.us(),pitch:t.ub(),flags:t.ub()}}static intermission(){return null}static finale(t){return{text:t.str()}}static cdTrack(t){return{track:t.b(),loopTrack:t.b()}}static restore(t){let e=t.str(),n=t.ub(),r=[];for(let e=0;e<n;++e)r.push(t.str());return{saveName:e,maps:r}}static cutscene(t){return{text:t.str()}}static weaponAnim(t){return{sequenceNumber:t.b(),weaponModelBodyGroup:t.b()}}static decalName(t){return{positionIndex:t.ub(),decalName:t.str()}}static roomType(t){return{type:t.us()}}static addAngle(t){return{angleToAdd:t.s()/(360/65536)}}static newUserMsg(t){return{index:t.ub(),size:t.b(),name:t.nstr(16)}}static packetEntities(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell();let o=[];r.readBits(16);for(let t,e=0;0!==(t=r.readBits(16));){if(r.index-=16,r.readBits(1))e++;else{r.readBits(1)?e=r.readBits(11):e+=r.readBits(6)}let t=r.readBits(1);r.readBits(1)&&(r.index+=6);let a="entity_state_t";0<e&&32>=e?a="entity_state_player_t":t&&(a="custom_entity_state_t"),o.push(i(r,n[a]))}return 0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{entityStates:o}}static deltaPacketEntities(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell(),r.readBits(16),r.index+=8;let o=[],a=0;for(;;){if(0===r.readBits(16))break;r.index-=16;let t=r.readBits(1);if(r.readBits(1)?a=r.readBits(11):a+=r.readBits(6),t)continue;let e=r.readBits(1),s="entity_state_t";0<a&&32>a?s="entity_state_player_t":e&&(s="custom_entity_state_t"),o[a]=i(r,n[s])}return 0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{entityStates:o}}static choke(){return null}static resourceList(t){let n=new s.BitStream(t.data.buffer);n.index=8*t.tell();let r=[],i=n.readBits(12);for(let t,e=0;e<i;++e){(t={}).type=n.readBits(4),t.name=n.readString(),t.index=n.readBits(12),t.size=n.readBits(24),4&n.readBits(3)&&(n.index+=128),n.readBits(1)&&(n.index+=256),r.push(t)}if(n.readBits(1))for(;n.readBits(1);){let t=n.readBits(1)?5:10;n.index+=t}return 0<n.index%8?t.seek(e(n.index/8)+1):t.seek(n.index/8),r}static newMoveVars(t){return{gravity:t.f(),stopSpeed:t.f(),maxSpeed:t.f(),spectatorMaxSpeed:t.f(),acceleration:t.f(),airAcceleration:t.f(),waterAcceleration:t.f(),friction:t.f(),edgeFriction:t.f(),waterFriction:t.f(),entityGravity:t.f(),bounce:t.f(),stepSize:t.f(),maxVelocity:t.f(),zMax:t.f(),waveHeight:t.f(),footsteps:t.b(),rollAngle:t.f(),rollSpeed:t.f(),skyColor:[t.f(),t.f(),t.f()],skyVec:[t.f(),t.f(),t.f()],skyName:t.str()}}static resourceRequest(t){let e={spawnCount:t.i()};return t.skip(4),e}static customization(t){let e,n=t.ub(),r=t.ub(),i=t.str(),o=t.us(),a=t.ui(),s=t.ub();return 4&s&&(e=[t.i(),t.i(),t.i(),t.i()]),{playerIndex:n,type:r,name:i,index:o,downloadSize:a,flags:s,md5hash:e}}static crosshairAngle(t){return{pitch:t.b(),yaw:t.b()}}static soundFade(t){return{initialPercent:t.ub(),holdTime:t.ub(),fadeOutTime:t.ub(),fadeInTime:t.ub()}}static fileTxferFailed(t){return{filename:t.str()}}static hltv(t){return{mode:t.ub()}}static director(t){let e=t.ub();return{flag:t.ub(),message:t.nstr(e-1)}}static voiceInit(t){return{codecName:t.str(),quality:t.b()}}static voiceData(t){let e=t.ub(),n=t.us();return{playerIndex:e,data:t.arrx(n,u.ReaderDataType.UByte)}}static sendExtraInfo(t){return{fallbackDir:t.str(),canCheat:t.ub()}}static timeScale(t){return{timeScale:t.f()}}static resourceLocation(t){return{url:t.str()}}static sendCvarValue(t){return{name:t.str()}}static sendCvarValue2(t){return{requestId:t.ui(),name:t.str()}}static read(t,e,n){if(!y.handlers[e])return null;try{return y.handlers[e](t,n)}catch(e){return null}}}y.handlers=[y.bad,y.nop,y.disconnect,y.event,y.version,y.setView,y.sound,y.time,y.print,y.stuffText,y.setAngle,y.serverInfo,y.lightStyle,y.updateUserInfo,y.deltaDescription,y.clientData,y.stopSound,y.pings,y.particle,y.damage,y.spawnStatic,y.eventReliable,y.spawnBaseLine,y.tempEntity,y.setPause,y.signOnNum,y.centerPrint,y.killedMonster,y.foundSecret,y.spawnStaticSound,y.intermission,y.finale,y.cdTrack,y.restore,y.cutscene,y.weaponAnim,y.decalName,y.roomType,y.addAngle,y.newUserMsg,y.packetEntities,y.deltaPacketEntities,y.choke,y.resourceList,y.newMoveVars,y.resourceRequest,y.customization,y.crosshairAngle,y.soundFade,y.fileTxferFailed,y.hltv,y.director,y.voiceInit,y.voiceData,y.sendExtraInfo,y.timeScale,y.resourceLocation,y.sendCvarValue,y.sendCvarValue2],n.FrameDataReader=y,function(t){let e;!function(t){t[t.BAD=0]="BAD",t[t.NOP=1]="NOP",t[t.DISCONNECT=2]="DISCONNECT",t[t.EVENT=3]="EVENT",t[t.VERSION=4]="VERSION",t[t.SETVIEW=5]="SETVIEW",t[t.SOUND=6]="SOUND",t[t.TIME=7]="TIME",t[t.PRINT=8]="PRINT",t[t.STUFFTEXT=9]="STUFFTEXT",t[t.SETANGLE=10]="SETANGLE",t[t.SERVERINFO=11]="SERVERINFO",t[t.LIGHTSTYLE=12]="LIGHTSTYLE",t[t.UPDATEUSERINFO=13]="UPDATEUSERINFO",t[t.DELTADESCRIPTION=14]="DELTADESCRIPTION",t[t.CLIENTDATA=15]="CLIENTDATA",t[t.STOPSOUND=16]="STOPSOUND",t[t.PINGS=17]="PINGS",t[t.PARTICLE=18]="PARTICLE",t[t.DAMAGE=19]="DAMAGE",t[t.SPAWNSTATIC=20]="SPAWNSTATIC",t[t.EVENT_RELIABLE=21]="EVENT_RELIABLE",t[t.SPAWNBASELINE=22]="SPAWNBASELINE",t[t.TEMPENTITY=23]="TEMPENTITY",t[t.SETPAUSE=24]="SETPAUSE",t[t.SIGNONNUM=25]="SIGNONNUM",t[t.CENTERPRINT=26]="CENTERPRINT",t[t.KILLEDMONSTER=27]="KILLEDMONSTER",t[t.FOUNDSECRET=28]="FOUNDSECRET",t[t.SPAWNSTATICSOUND=29]="SPAWNSTATICSOUND",t[t.INTERMISSION=30]="INTERMISSION",t[t.FINALE=31]="FINALE",t[t.CDTRACK=32]="CDTRACK",t[t.RESTORE=33]="RESTORE",t[t.CUTSCENE=34]="CUTSCENE",t[t.WEAPONANIM=35]="WEAPONANIM",t[t.DECALNAME=36]="DECALNAME",t[t.ROOMTYPE=37]="ROOMTYPE",t[t.ADDANGLE=38]="ADDANGLE",t[t.NEWUSERMSG=39]="NEWUSERMSG",t[t.PACKETENTITIES=40]="PACKETENTITIES",t[t.DELTAPACKETENTITIES=41]="DELTAPACKETENTITIES",t[t.CHOKE=42]="CHOKE",t[t.RESOURCELIST=43]="RESOURCELIST",t[t.NEWMOVEVARS=44]="NEWMOVEVARS",t[t.RESOURCEREQUEST=45]="RESOURCEREQUEST",t[t.CUSTOMIZATION=46]="CUSTOMIZATION",t[t.CROSSHAIRANGLE=47]="CROSSHAIRANGLE",t[t.SOUNDFADE=48]="SOUNDFADE",t[t.FILETXFERFAILED=49]="FILETXFERFAILED",t[t.HLTV=50]="HLTV",t[t.DIRECTOR=51]="DIRECTOR",t[t.VOICEINIT=52]="VOICEINIT",t[t.VOICEDATA=53]="VOICEDATA",t[t.SENDEXTRAINFO=54]="SENDEXTRAINFO",t[t.TIMESCALE=55]="TIMESCALE",t[t.RESOURCELOCATION=56]="RESOURCELOCATION",t[t.SENDCVARVALUE=57]="SENDCVARVALUE",t[t.SENDCVARVALUE2=58]="SENDCVARVALUE2"}(e=t.SVC||(t.SVC={}))}(y||(y={})),n.FrameDataReader=y;const b=t=>{return"HLDEMO"===t.nstr(8)},_=t=>({demoProtocol:t.ui(),netProtocol:t.ui(),mapName:t.nstr(260),modName:t.nstr(260),mapCrc:t.i(),dirOffset:t.ui()}),x=(t,e)=>{t.seek(e);let n=t.ui(),r=[];for(let e=0;e<n;++e)r.push({id:t.ui(),name:t.nstr(64),flags:t.ui(),cdTrack:t.i(),time:t.f(),frames:t.ui(),offset:t.ui(),length:t.ui()});return r},w=(t,e,n)=>{let r={type:t.ub(),time:t.f(),tick:t.ui()};switch(r.type){case 0:case 1:t.skip(4),r.camera={position:[t.f(),t.f(),t.f()],orientation:[t.f(),t.f(),t.f()]},t.skip(436),r.data=((t,e,n)=>{let r=t.ui(),i=t.tell()+r,o=[];for(;t.tell()<i;){let r=t.ub();if(1===r)continue;if(64<=r){n[r]&&-1<n[r].size?t.skip(n[r].size):t.skip(t.ub());continue}let a=y.read(t,r,e);a?(39===r&&(n[a.index]=a),o.push({type:r,data:a})):t.seek(i)}return t.seek(i),o})(t,e,n);break;case 2:break;case 3:r.command=t.nstr(64);break;case 4:t.skip(32);break;case 5:break;case 6:t.skip(84);break;case 7:t.skip(8);break;case 8:r.sound={channel:t.i(),sample:t.nstr(t.ui()),attenuation:t.f(),volume:t.f(),flags:t.ui(),pitch:t.i()};break;case 9:t.skip(t.ui());break;default:r.error=!0}return r},E=()=>Object.assign({},{delta_description_t:[{name:"flags",bits:32,divisor:1,flags:d},{name:"name",bits:8,divisor:1,flags:m},{name:"offset",bits:16,divisor:1,flags:d},{name:"size",bits:8,divisor:1,flags:d},{name:"bits",bits:8,divisor:1,flags:d},{name:"divisor",bits:32,divisor:4e3,flags:l},{name:"preMultiplier",bits:32,divisor:4e3,flags:l}]});class S{constructor(t=null){t?(this.cameraPos=JSON.parse(JSON.stringify(t.cameraPos)),this.cameraRot=JSON.parse(JSON.stringify(t.cameraRot)),this.entities=JSON.parse(JSON.stringify(t.entities))):(this.cameraPos=[0,0,0],this.cameraRot=[0,0,0],this.entities=[])}feedFrame(t){switch(t.type){case 0:case 1:this.cameraPos[0]=t.camera.position[0],this.cameraPos[1]=t.camera.position[1],this.cameraPos[2]=t.camera.position[2],this.cameraRot[0]=t.camera.orientation[0],this.cameraRot[1]=t.camera.orientation[1],this.cameraRot[2]=t.camera.orientation[2]}}clone(){return new S(this)}}n.ReplayState=S;class T{constructor(t,e){this.header=t,this.mapName=this.header.mapName,this.directories=e}static parseFromArrayBuffer(t){let e=new u.Reader(t);if("HLDEMO"!==e.nstr(8))throw new Error("Invalid replay format");let n={};n.demoProtocol=e.ui(),n.netProtocol=e.ui(),n.mapName=e.nstr(260),n.modName=e.nstr(260),n.mapCrc=e.i(),n.dirOffset=e.ui(),e.seek(n.dirOffset);let r=e.ui(),i=[];for(let t=0;t<r;++t)i.push({id:e.ui(),name:e.nstr(64),flags:e.ui(),cdTrack:e.i(),time:e.f(),frames:e.ui(),offset:e.ui(),length:e.ui(),macros:[]});for(let t=0;t<i.length;++t){e.seek(i[t].offset);for(let n=!1;!n;){let r={type:e.b(),time:e.f(),frame:e.ui()};switch(r.type){case 0:case 1:e.skip(4),r.camera={position:[e.f(),e.f(),e.f()],orientation:[e.f(),e.f(),e.f()]},e.skip(436),e.skip(e.ui());break;case 2:break;case 3:r.command=e.nstr(64);break;case 4:e.skip(32);break;case 5:n=!0;break;case 6:e.skip(84);break;case 7:e.skip(8);break;case 8:e.skip(4),e.skip(e.ui()+16);break;case 9:e.skip(e.ui());break;default:{const t=(+(e.tell()-9)).toString(16),n=[`Unexpected macro (${r.type})`,` at offset = ${t}.`].join("");throw new Error(n)}}i[t].macros.push(r)}}return new T(n,i)}static parseFullFromArrayBuffer(t){let e=new u.Reader(t);if("HLDEMO"!==e.nstr(8))throw new Error("Invalid replay format");let n={};n.demoProtocol=e.ui(),n.netProtocol=e.ui(),n.mapName=e.nstr(260),n.modName=e.nstr(260),n.mapCrc=e.i(),n.dirOffset=e.ui(),e.seek(n.dirOffset);let r=e.ui(),i=[];for(let t=0;t<r;++t)i.push({id:e.ui(),name:e.nstr(64),flags:e.ui(),cdTrack:e.i(),time:e.f(),frames:e.ui(),offset:e.ui(),length:e.ui(),macros:[]});let o={delta_description_t:[{name:"flags",bits:32,divisor:1,flags:d},{name:"name",bits:8,divisor:1,flags:m},{name:"offset",bits:16,divisor:1,flags:d},{name:"size",bits:8,divisor:1,flags:d},{name:"bits",bits:8,divisor:1,flags:d},{name:"divisor",bits:32,divisor:4e3,flags:l},{name:"preMultiplier",bits:32,divisor:4e3,flags:l}]},a=[];for(let t=0;t<i.length;++t){e.seek(i[t].offset);for(let n=!1;!n;){let r={type:e.b(),time:e.f(),frame:e.ui()};switch(r.type){case 0:case 1:{e.skip(4),r.camera={position:[e.f(),e.f(),e.f()],orientation:[e.f(),e.f(),e.f()],forward:[e.f(),e.f(),e.f()],right:[e.f(),e.f(),e.f()],up:[e.f(),e.f(),e.f()]},r.RefParams={frametime:e.f(),time:e.f(),intermission:e.i(),paused:e.i(),spectator:e.i(),onground:e.i(),waterlevel:e.i(),velocity:[e.f(),e.f(),e.f()],origin:[e.f(),e.f(),e.f()],viewHeight:[e.f(),e.f(),e.f()],idealPitch:e.f(),viewAngles:[e.f(),e.f(),e.f()],health:e.i(),crosshairAngle:[e.f(),e.f(),e.f()],viewSize:e.f(),punchAngle:[e.f(),e.f(),e.f()],maxClients:e.i(),viewEntity:e.i(),playerCount:e.i(),maxEntities:e.i(),demoPlayback:e.i(),hardware:e.i(),smoothing:e.i(),ptr_cmd:e.i(),ptr_movevars:e.i(),viewport:[e.i(),e.i(),e.i(),e.i()],nextView:e.i(),onlyClientDraw:e.i()},r.UserCmd={lerp_msec:e.s(),msec:e.ub(),UNUSED1:e.ub(),viewAngles:[e.f(),e.f(),e.f()],forwardMove:e.f(),sideMove:e.f(),upMove:e.f(),lightLevel:e.b(),UNUSED2:e.ub(),buttons:e.us(),impulse:e.b(),weaponSelect:e.b(),UNUSED:e.s(),impactIndex:e.i(),impactPosition:[e.f(),e.f(),e.f()]},r.MoveVars={gravity:e.f(),stopSpeed:e.f(),maxSpeed:e.f(),spectatorMaxSpeed:e.f(),acceleration:e.f(),airAcceleration:e.f(),waterAcceleration:e.f(),friction:e.f(),edgeFriction:e.f(),waterFriction:e.f(),entityGravity:e.f(),bounce:e.f(),stepSize:e.f(),maxVelocity:e.f(),zMax:e.f(),waveHeight:e.f(),footsteps:e.i(),skyName:e.nstr(32),rollAngle:e.f(),rollSpeed:e.f(),skyColor:[e.f(),e.f(),e.f()],skyVec:[e.f(),e.f(),e.f()]},r.view=[e.f(),e.f(),e.f()],r.viewModel=e.i(),r.incoming_sequence=e.i(),r.incoming_acknowledged=e.i(),r.incoming_reliable_acknowledged=e.i(),r.incoming_reliable_sequence=e.i(),r.outgoing_sequence=e.i(),r.reliable_sequence=e.i(),r.last_reliable_sequence=e.i();let t=e.ui()+e.tell();for(r.frameData=[];e.tell()<t;){let n=e.ub();if(1===n)continue;if(64<=n){a[n]&&-1<a[n].size?e.skip(a[n].size):e.skip(e.ub());continue}let i=y.read(e,n,o);i?(39===n&&(a[i.index]=i),r.frameData.push({type:n,frameData:i})):e.seek(t)}e.seek(t);break}case 2:break;case 3:r.command=e.nstr(64);break;case 4:r.clientData={position:[e.f(),e.f(),e.f()],rotation:[e.f(),e.f(),e.f()],weaponFlags:e.ui(),fov:e.f()};break;case 5:n=!0;break;case 6:r.event={flags:e.ui(),index:e.ui(),delay:e.f(),args:{flags:e.ui(),entityIndex:e.ui(),position:[e.f(),e.f(),e.f()],rotation:[e.f(),e.f(),e.f()],velocity:[e.f(),e.f(),e.f()],ducking:e.ui(),fparam1:e.f(),fparam2:e.f(),iparam1:e.i(),iparam2:e.i(),bparam1:e.i(),bparam2:e.i()}};break;case 7:r.weaponAnimation={animation:e.i(),body:e.i()};break;case 8:r.sound={channel:e.i(),sample:e.nstr(e.ui()),attenuation:e.f(),volume:e.f(),flags:e.ui(),pitch:e.i()};break;case 9:e.skip(e.ui());break;default:{const t=(+(e.tell()-9)).toString(16),n=[`Unexpected macro (${r.type})`,` at offset = ${t}.`].join("");throw new Error(n)}}i[t].macros.push(r)}}return new T(n,i)}static parseIntoChunks(t){let e=new u.Reader(t);if(!b(e))throw new Error("Invalid replay file format");let n,r,i,o,a,s=[],c=E(),f=[],l=_(e),d=x(e,l.dirOffset),h=new S;for(a=d[0].offset+d[0].length,e.seek(d[0].offset);e.tell()<a;){let t=w(e,c,f);if(h.feedFrame(t),t.error)throw new Error("Encountered error while reading replay");if(2>t.type){let e=t.data.find(t=>t.type===y.SVC.SERVERINFO);e&&(n=new A(e.data.mapFileName),s.push(n));let r=t.data.find(t=>t.type===y.SVC.RESOURCELIST);r&&n&&n.setResources(r.data)}}if(!(n instanceof A))throw new Error("Error while parsing replay.");for(o=e.tell(),r=new k(h,0),n.addChunk(r),a=d[1].offset+d[1].length,e.seek(d[1].offset);;){let t=e.tell();if(t>=a){let n=i.time-r.startTime;r.timeLength=n;let a=t-o;e.seek(o),r.setData(e.arrx(a,u.ReaderDataType.UByte)),e.seek(t);break}let l=w(e,c,f);if(h.feedFrame(l),i=l,l.error)throw new Error("Encountered error while reading replay");if(2>l.type){let a=l.data.find(t=>t.type===y.SVC.SERVERINFO);if(a){n=new A(a.data.mapFileName),s.push(n);let c=i.time-r.startTime;r.timeLength=c;let f=t-o,d=e.tell();e.seek(o),r.setData(e.arrx(f,u.ReaderDataType.UByte)),e.seek(d),o=t,r=new k(h,l.time),n.addChunk(r)}let c=l.data.find(t=>t.type===y.SVC.RESOURCELIST);if(c&&n.setResources(c.data),a)continue;for(let t,e=0;e<l.data.length;++e)if((t=l.data[e]).type===y.SVC.SOUND||t.type===y.SVC.SPAWNSTATICSOUND){let e=n.resources.sounds.find(e=>e.index===t.data.soundIndex);e&&(e.used=!0)}else if(t.type===y.SVC.STUFFTEXT){let e=n.resources.sounds,r=t.data.commands;for(let t=0;t<r.length;++t){let n=r[t],i=n.func;if(("speak"===i||"spk"===i)&&1===n.params.length){let t=n.params[0]+".wav",r=e.find(e=>e.name===t);r&&(r.used=!0)}}}}else if(8===l.type){let t=n.resources.sounds.find(t=>t.name===l.sound.sample);t&&(t.used=!0)}if(r.startTime+10<l.time){let i=t-o,a=e.tell();e.seek(o),r.setData(e.arrx(i,u.ReaderDataType.UByte)),e.seek(a),o=t,r=new k(h,l.time),n.addChunk(r)}}return{length:d[1].time,maps:s,deltaDecoders:c,customMessages:f}}static readHeader(t){return _(t)}static readDirectories(t,e){return x(t,e)}static readFrame(t,e,n){return w(t,e,n)}static readFrameData(t,e,n){return w(t,e,n)}}n.Replay=T;class k{constructor(t,e){this.state=t.clone(),this.startTime=e,this.timeLength=10,this.data=null,this.reader=null}setData(t){this.data=new Uint8Array(t.length);for(let e=0;e<t.length;++e)this.data[e]=t[e];this.reader=new u.Reader(this.data.buffer)}}n.ReplayChunk=k;class A{constructor(t){this.name=a.basename(t,".bsp"),this.chunks=[],this.resources={sounds:[],skins:[],models:[],decals:[],custom:[],events:[]}}setResources(t){t.forEach(t=>{switch(t.type){case 0:t.used=!1,this.resources.sounds.push(t);break;case 1:this.resources.skins.push(t);break;case 2:this.resources.models.push(t);break;case 3:this.resources.decals.push(t);break;case 4:this.resources.custom.push(t);break;case 5:this.resources.events.push(t)}})}addChunk(t){this.chunks.push(t)}}n.ReplayMap=A},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8),i=window,o=new(i.AudioContext||i.webkitAudioContext);e.SoundSystem=class{constructor(){this.context=o,this.events=new r.EventEmitter;const t=parseFloat(localStorage.getItem("volume")||"0.3");localStorage.setItem("volume",t.toString()),this.channels=[],this.preMuteVolume=1,this.masterGain=this.context.createGain(),this.masterGain.gain.value=t,this.masterGain.connect(this.context.destination);for(let t=0;8>t;++t)this.channels.push({source:null,gain:this.context.createGain()}),this.channels[t].gain.connect(this.masterGain)}static getContext(){return o}play(t,e,n){this.stop(e);const r=this.channels[e].gain;r.gain.value=l(0,u(1,n));const i=this.context.createBufferSource();i.buffer=t.buffer,i.connect(r),i.start(0),this.channels[e].source=i}stop(t){const e=this.channels[t].source;e&&e.stop(0)}getVolume(){return this.masterGain.gain.value}setVolume(t){const e=this.masterGain.gain.value;0<e&&0===t&&(this.preMuteVolume=e),this.masterGain.gain.value=t,localStorage.setItem("volume",t.toString()),this.events.emit("volumeChange",t)}toggleMute(){0===this.getVolume()?this.setVolume(this.preMuteVolume):this.setVolume(0)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(7),i=n(14);var o;!function(t){t[t.VP_PARALLEL_UPRIGHT=0]="VP_PARALLEL_UPRIGHT",t[t.FACING_UPRIGHT=1]="FACING_UPRIGHT",t[t.VP_PARALLEL=2]="VP_PARALLEL",t[t.ORIENTED=3]="ORIENTED",t[t.VP_PARALLEL_ORIENTED=4]="VP_PARALLEL_ORIENTED"}(e.SpriteType||(e.SpriteType={})),function(t){t[t.SPR_NORMAL=0]="SPR_NORMAL",t[t.SPR_ADDITIVE=1]="SPR_ADDITIVE",t[t.SPR_INDEXALPHA=2]="SPR_INDEXALPHA",t[t.SPR_ALPHTEST=3]="SPR_ALPHTEST"}(o=e.SpriteAlphaType||(e.SpriteAlphaType={})),function(t){t[t.SYNCHRONIZED=0]="SYNCHRONIZED",t[t.RANDOM=1]="RANDOM"}(e.SpriteSyncType||(e.SpriteSyncType={}));class a{constructor(t,e){this.header=t,this.frames=e}static parse(t){const e=new r.Reader(t);if("IDSP"!==e.nstr(4))throw new Error("Invalid sprite file format");const n={version:e.i(),type:e.i(),alphaType:e.i(),radius:e.f(),width:e.i(),height:e.i(),frameCount:e.i(),beamLength:e.f(),syncType:e.i()},s=e.s(),u=e.arrx(3*s,r.ReaderDataType.UByte),c=[];for(let t=0;t<n.frameCount;++t){const t={group:e.i(),position:[e.i(),e.i()],width:e.i(),height:e.i(),data:new Uint8Array(n.width*n.height*4)},a=e.arrx(n.width*n.height,r.ReaderDataType.UByte);t.data=n.alphaType===o.SPR_ALPHTEST?i.paletteWithLastTransToRGBA(a,u):i.paletteToRGBA(a,u),c.push(t)}return new a(n,c)}}e.Sprite=a},function(){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(3),o=n(12),a=n(67),s=n(5);e.SettingsButton=class extends r.Component{constructor(){super(...arguments),this.onFreeModeClick=()=>{this.props.game.mode===o.PlayerMode.FREE||(this.props.game.changeMode(o.PlayerMode.FREE),this.props.game.player.pause())},this.onReplayModeClick=()=>{this.props.game.mode===o.PlayerMode.REPLAY||this.props.game.changeMode(o.PlayerMode.REPLAY)},this.toggleMenu=()=>{this.setState({isOpen:!this.state.isOpen})}}render(){const t=!!this.props.game.player.replay;return r.h("div",{class:a.SettingsButtonStyle.settings},r.h("div",{class:i.classes(s.ControlsStyle.button,a.SettingsButtonStyle.button),onClick:this.toggleMenu},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#ffffff",d:"M23.9 10.7c0-0.3-0.4-0.6-0.8-0.6 -1.1 0-2.1-0.6-2.5-1.6 -0.4-1-0.1-2.2 0.7-3 0.3-0.2 0.3-0.6 0.1-0.9 -0.6-0.7-1.2-1.4-1.9-1.9 -0.3-0.2-0.7-0.2-0.9 0.1 -0.7 0.8-2 1.1-3 0.7 -1-0.4-1.7-1.5-1.6-2.6 0-0.4-0.2-0.7-0.6-0.7 -0.9-0.1-1.8-0.1-2.7 0C10.4 0.1 10.1 0.4 10.1 0.8 10.1 1.9 9.5 2.9 8.5 3.3 7.5 3.7 6.2 3.4 5.5 2.6c-0.2-0.3-0.6-0.3-0.9-0.1 -0.7 0.6-1.4 1.2-1.9 1.9C2.4 4.8 2.5 5.2 2.7 5.4c0.8 0.8 1.1 2 0.7 3 -0.4 1-1.4 1.6-2.6 1.6 -0.4 0-0.7 0.2-0.7 0.6 -0.1 0.9-0.1 1.8 0 2.7 0 0.3 0.4 0.6 0.8 0.6 1 0 2 0.6 2.5 1.6 0.4 1 0.2 2.2-0.7 3 -0.3 0.2-0.3 0.6-0.1 0.9 0.6 0.7 1.2 1.4 1.9 1.9 0.3 0.2 0.7 0.2 0.9-0.1 0.7-0.8 2-1.1 3-0.7 1 0.4 1.7 1.5 1.6 2.6 0 0.4 0.2 0.7 0.6 0.7C11.1 24 11.5 24 12 24c0.4 0 0.9 0 1.3-0.1 0.3 0 0.6-0.3 0.6-0.7 0-1.1 0.6-2.1 1.6-2.6 1-0.4 2.3-0.1 3 0.7 0.2 0.3 0.6 0.3 0.9 0.1 0.7-0.6 1.4-1.2 1.9-1.9 0.2-0.3 0.2-0.7-0.1-0.9 -0.8-0.8-1.1-2-0.7-3 0.4-1 1.4-1.6 2.5-1.6l0.1 0c0.3 0 0.7-0.2 0.7-0.6C24 12.5 24 11.6 23.9 10.7zM12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6c3.3 0 6 2.7 6 6S15.3 18 12 18zM12 16"}))),r.h("div",{class:this.state.isOpen?a.SettingsButtonStyle.menuOpen:a.SettingsButtonStyle.menu},r.h("span",{class:a.SettingsButtonStyle.menuItemTitle},"Mode"),t?r.h("span",{class:this.props.game.mode===o.PlayerMode.REPLAY?a.SettingsButtonStyle.menuItemSelected:a.SettingsButtonStyle.menuItem,onClick:this.onReplayModeClick},"Replay"):r.h("span",null),r.h("span",{class:this.props.game.mode===o.PlayerMode.FREE?a.SettingsButtonStyle.menuItemSelected:a.SettingsButtonStyle.menuItem,onClick:this.onFreeModeClick},"Free")))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(3),o=n(25),a=n(68),s=n(5);e.FullscreenButton=class extends r.Component{constructor(){super(...arguments),this.state={isInFullscreen:!1},this.onClick=()=>{o.Fullscreen.isInFullscreen()?o.Fullscreen.exit():o.Fullscreen.enter(this.props.root)},this.onFullscreen=()=>{this.setState({isInFullscreen:o.Fullscreen.isInFullscreen()})}}componentDidMount(){o.Fullscreen.onChange(this.onFullscreen)}componentWillUnmount(){o.Fullscreen.onChangeRemove(this.onFullscreen)}render(){return r.h("div",{class:i.classes(s.ControlsStyle.button,a.FullscreenButtonStyle.button),onClick:this.onClick},this.state.isInFullscreen?r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 22 L22 22 L22 0 L14 0 L14 14 L0 14 M42 0 L42 22 L64 22 L64 14 L50 14 L50 0 M14 50 L0 50 L0 42 L22 42 L22 64 L14 64 M42 64 L42 42 L64 42 L64 50 L50 50 L50 64 Z"})):r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 22 L8 22 L8 8 L22 8 L22 0 L0 0 M42 0 L42 8 L56 8 L56 22 L64 22 L64 0 M0 64 L0 42 L8 42 L8 56 L22 56 L22 64 M64 64 L42 64 L42 56 L56 56 L56 42 L64 42 Z"})))}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=[{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",change:"fullscreenchange",error:"fullscreenerror"},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",change:"mozfullscreenchange",error:"mozfullscreenerror"},{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",change:"webkitfullscreenchange",error:"webkitfullscreenerror"},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",change:"MSFullscreenChange",error:"MSFullscreenError"}];let r=0;const i=document;for(let t=0;t<n.length;++t)if(void 0!==i[n[t].enabled]){r=t;break}class o{static element(){return i[n[r].element]}static enabled(){return i[n[r].enabled]}static isInFullscreen(){return null!==o.element()}static enter(t){t[n[r].request]()}static exit(){i[n[r].exit]()}static onChange(t){return window.addEventListener(n[r].change,t)}static onChangeRemove(t){window.removeEventListener(n[r].change,t)}static onError(t){return window.addEventListener(n[r].error,t)}}e.Fullscreen=o},function(t,e,n){"use strict";var r;const i=n(12),o=n(60),a=n(61);t.exports=((r=class{constructor(t,e){const n=o.Config.init(e);this.game=new i.Game(n),this.interface=new a.PlayerInterface(this.game),this.interface.draw(t),this.game.draw()}load(t){this.game.load(t)}setTitle(t){this.game.setTitle(t)}getTitle(){return this.game.getTitle()}}).VERSION="0.7.1",r)},,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(37);e.Mouse=class{constructor(){this.click=!1,this.leftClick=!1,this.rightClick=!1,this.position=new r.Vector2,this.delta=new r.Vector2}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=class{constructor(){this.x=0,this.y=0}},e.Vector3=class{constructor(){this.x=0,this.y=0,this.z=0}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(8),o=n(13),a=n(39),s=n(19),u=n(44),c=n(45),f=n(46),l=n(47),d=n(21);var h;!function(t){t[t.Loading=1]="Loading",t[t.Skipped=2]="Skipped",t[t.Error=3]="Error",t[t.Done=4]="Done"}(h||(h={}));class p{constructor(t){this.name=t,this.progress=0,this.status=h.Loading,this.data=null}isLoading(){return this.status===h.Loading}skip(){this.status=h.Skipped}isSkipped(){return this.status===h.Skipped}error(){this.status=h.Error}isError(){return this.status===h.Error}done(t){this.status=h.Done,this.data=t}isDone(){return this.status===h.Done}}class g extends p{constructor(){super(...arguments),this.type="replay"}}class m extends p{constructor(){super(...arguments),this.type="bsp"}}class v extends p{constructor(){super(...arguments),this.type="sky"}}class y extends p{constructor(){super(...arguments),this.type="wad"}}class b extends p{constructor(){super(...arguments),this.type="sound"}}class _ extends p{constructor(){super(...arguments),this.type="sprite"}}e.Loader=class{constructor(t){this.sprites={},this.game=t,this.replay=void 0,this.map=void 0,this.skies=[],this.wads=[],this.sounds=[],this.events=new i.EventEmitter,this.events.addListener("error",t=>{console.error(t)})}clear(){this.replay=void 0,this.map=void 0,this.skies.length=0,this.wads.length=0,this.sounds.length=0,this.sprites={}}checkStatus(){if((!this.replay||this.replay.isDone())&&(!this.map||this.map.isDone())){for(let t=0;t<this.skies.length;++t)if(this.skies[t].isLoading())return;for(let t=0;t<this.wads.length;++t)if(this.wads[t].isLoading())return;for(let t=0;t<this.sounds.length;++t)if(this.sounds[t].isLoading())return;const t=Object.entries(this.sprites);for(let e=0;e<t.length;++e)if(t[e][1].isLoading())return;this.events.emit("loadall",this)}}load(t){const e=o.extname(t);".dem"===e?this.loadReplay(t):".bsp"===e?this.loadMap(t):this.events.emit("error","Invalid file extension",t)}loadReplay(t){return r(this,void 0,void 0,function*(){this.replay=new g(t),this.events.emit("loadstart",this.replay);const e=this.game.config.getReplaysPath(),n=yield l.xhr(`${e}/${t}`,{method:"GET",isBinary:!0,progressCallback:(t,e)=>{this.replay&&(this.replay.progress=e),this.events.emit("progress",this.replay)}}).catch(t=>{this.replay&&this.replay.error(),this.events.emit("error",t,this.replay)});if(!this.replay.isError()){const t=yield s.Replay.parseIntoChunks(n);this.replay.done(t),this.loadMap(t.maps[0].name+".bsp"),t.maps[0].resources.sounds.forEach(t=>{t.used&&this.loadSound(t.name,t.index)}),this.events.emit("load",this.replay),this.checkStatus()}})}loadMap(t){return r(this,void 0,void 0,function*(){this.map=new m(t),this.events.emit("loadstart",this.map);const e=this.game.config.getMapsPath(),n=yield l.xhr(`${e}/${t}`,{method:"GET",isBinary:!0,progressCallback:(t,e)=>{this.map&&(this.map.progress=e),this.events.emit("progress",this.map)}}).catch(t=>{this.map&&this.map.error(),this.events.emit("error",t,this.map)});if(this.map.isError())return;const r=yield a.BspParser.parse(t,n);this.map.done(r),r.entities.map(t=>"string"==typeof t.model&&-1<t.model.indexOf(".spr")?t.model:void 0).filter((t,e,n)=>t&&n.indexOf(t)===e).forEach(t=>this.loadSprite(t));const i=r.entities[0].skyname;if(i&&["bk","dn","ft","lf","rt","up"].map(t=>`${i}${t}`).forEach(t=>this.loadSky(t)),r.textures.find(t=>t.isExternal)){const t=r.entities[0].wad.map(t=>this.loadWad(t));yield Promise.all(t)}this.events.emit("load",this.map),this.checkStatus()})}loadSprite(t){return r(this,void 0,void 0,function*(){const e=new _(t);this.sprites[t]=e,this.events.emit("loadstart",e);const n=yield l.xhr(`${this.game.config.getBasePath()}/${t}`,{method:"GET",isBinary:!0,progressCallback:(t,n)=>{e.progress=n,this.events.emit("progress",e)}}).catch(t=>{e.error(),this.events.emit("error",t,e),this.checkStatus()});if(!e.isError()){const t=d.Sprite.parse(n);e.done(t),this.events.emit("load",e),this.checkStatus()}})}loadSky(t){return r(this,void 0,void 0,function*(){const e=new v(t);this.skies.push(e),this.events.emit("loadstart",e);const n=this.game.config.getSkiesPath(),r=yield l.xhr(`${n}/${t}.tga`,{method:"GET",isBinary:!0,progressCallback:(t,n)=>{e.progress=n,this.events.emit("progress",e)}}).catch(t=>{e.error(),this.events.emit("error",t,e),this.checkStatus()});if(!e.isError()){const n=c.Tga.parse(r,t);e.done(n),this.events.emit("load",e),this.checkStatus()}})}loadWad(t){return r(this,void 0,void 0,function*(){const e=new y(t);this.wads.push(e),this.events.emit("loadstart",e);const n=this.game.config.getWadsPath(),r=yield l.xhr(`${n}/${t}`,{method:"GET",isBinary:!0,progressCallback:(t,n)=>{e.progress=n,this.events.emit("progress",e)}}).catch(t=>{e.error(),this.events.emit("error",t,e),this.checkStatus()});if(e.isError())return;const i=yield f.Wad.parse(r);if(e.done(i),!this.map||!this.map.data)return;const o=this.map.data;i.entries.forEach(t=>{"texture"!==t.type||o.textures.forEach(e=>{((t,e)=>t.toLowerCase()===e.toLowerCase())(t.name,e.name)&&(e.width=t.width,e.height=t.height,e.data=t.data)})}),this.events.emit("load",e),this.checkStatus()})}loadSound(t,e){return r(this,void 0,void 0,function*(){const n=new b(t);this.sounds.push(n),this.events.emit("loadstart",n);const r=this.game.config.getSoundsPath(),i=yield l.xhr(`${r}/${t}`,{method:"GET",isBinary:!0,progressCallback:(t,e)=>{n.progress=e,this.events.emit("progress",n)}}).catch(t=>{n.error(),this.events.emit("error",t,n),this.checkStatus()});if(!n.isError()){const r=yield u.Sound.create(i).catch(t=>{n.error(),this.events.emit("error",t,n),this.checkStatus()});!r||n.isError()||(r.index=e,r.name=t,n.done(r),this.events.emit("load",n),this.checkStatus())}})}addLoadStartListener(t){this.events.addListener("loadstart",t)}removeLoadStartListener(t){this.events.removeListener("loadstart",t)}addProgressListener(t){this.events.addListener("progress",t)}removeProgressListener(t){this.events.removeListener("progress",t)}}},function(t,e,n){"use strict";function r(t,e,n,r,i,a,s,u){const c=[];for(let f=0;f<t.length;++f){const l=t[f],d=[],h=new Float32Array(3),p=new Float32Array(3),g=new Float32Array(3),m=new Float32Array(2),v=new Float32Array(2),y=new Float32Array(2),b=new Float32Array(2),_=new Float32Array(2),x=new Float32Array(2);let w=0===f?[0,0,0]:[0,0,0].map((t,e)=>(l.maxs[e]-l.mins[e])/2+l.mins[e]);for(let t=l.firstFace;t<l.firstFace+l.faceCount;++t){const c={buffer:new Float32Array(21*(e[t].edgeCount-2)),textureIndex:-1},f=a[e[t].textureInfo],l=s[f.textureIndex],E=r.slice(e[t].firstEdge,e[t].firstEdge+e[t].edgeCount),S=n[o(E[0])][0<E[0]?0:1];h[0]=i[S][0],h[1]=i[S][1],h[2]=i[S][2],m[0]=h[0]*f.s[0]+h[1]*f.s[1]+h[2]*f.s[2]+f.sShift,m[1]=h[0]*f.t[0]+h[1]*f.t[1]+h[2]*f.t[2]+f.tShift,b[0]=0,b[1]=0;const T=n[o(E[1])][0<E[1]?0:1];p[0]=i[T][0],p[1]=i[T][1],p[2]=i[T][2],v[0]=p[0]*f.s[0]+p[1]*f.s[1]+p[2]*f.s[2]+f.sShift,v[1]=p[0]*f.t[0]+p[1]*f.t[1]+p[2]*f.t[2]+f.tShift,_[0]=0,_[1]=.999;let k=0;for(let r=2;r<e[t].edgeCount;++r){const t=n[o(E[r])][0<E[r]?0:1];g[0]=i[t][0],g[1]=i[t][1],g[2]=i[t][2],y[0]=g[0]*f.s[0]+g[1]*f.s[1]+g[2]*f.s[2]+f.sShift,y[1]=g[0]*f.t[0]+g[1]*f.t[1]+g[2]*f.t[2]+f.tShift,x[0]=.999,x[1]=.999,c.buffer[k++]=h[0],c.buffer[k++]=h[1],c.buffer[k++]=h[2],c.buffer[k++]=m[0],c.buffer[k++]=m[1],c.buffer[k++]=b[0],c.buffer[k++]=b[1],c.buffer[k++]=p[0],c.buffer[k++]=p[1],c.buffer[k++]=p[2],c.buffer[k++]=v[0],c.buffer[k++]=v[1],c.buffer[k++]=_[0],c.buffer[k++]=_[1],c.buffer[k++]=g[0],c.buffer[k++]=g[1],c.buffer[k++]=g[2],c.buffer[k++]=y[0],c.buffer[k++]=y[1],c.buffer[k++]=x[0],c.buffer[k++]=x[1],p[0]=g[0],p[1]=g[1],p[2]=g[2],v[0]=y[0],v[1]=y[1],_[0]=x[0],_[1]=x[1]}(0===f.flags||-65536===f.flags)&&u.processFace(c.buffer,f,e[t].lightmapOffset),c.textureIndex=f.textureIndex;for(let t=0;t<c.buffer.length/7;++t)c.buffer[7*t]-=w[0],c.buffer[7*t+1]-=w[1],c.buffer[7*t+2]-=w[2],c.buffer[7*t+3]/=l.width,c.buffer[7*t+4]/=l.height;d.push(c)}c.push({origin:w,faces:d})}return c}Object.defineProperty(e,"__esModule",{value:!0});const i=n(13),a=n(40),s=n(7),u=n(41),c=n(14),f=n(42);var l;e.parseModels=r,function(t){t[t.Entities=0]="Entities",t[t.Planes=1]="Planes",t[t.Textures=2]="Textures",t[t.Vertices=3]="Vertices",t[t.Visibility=4]="Visibility",t[t.Nodes=5]="Nodes",t[t.TexInfo=6]="TexInfo",t[t.Faces=7]="Faces",t[t.Lighting=8]="Lighting",t[t.ClipNodes=9]="ClipNodes",t[t.Leaves=10]="Leaves",t[t.MarkSurfaces=11]="MarkSurfaces",t[t.Edges=12]="Edges",t[t.SurfEdges=13]="SurfEdges",t[t.Models=14]="Models"}(l=e.BspLumpIndex||(e.BspLumpIndex={})),e.BspParser=class{static parse(t,e){const n=new s.Reader(e);if(30!==n.ui())throw new Error("Invalid map version");const i=[];for(let t=0;15>t;++t)i.push({offset:n.ui(),length:n.ui()});const o=this.loadEntities(n,i[l.Entities].offset,i[l.Entities].length),a=this.loadTextures(n,i[l.Textures].offset),c=this.loadModels(n,i[l.Models].offset,i[l.Models].length),d=this.loadFaces(n,i[l.Faces].offset,i[l.Faces].length),h=this.loadEdges(n,i[l.Edges].offset,i[l.Edges].length),p=this.loadSurfEdges(n,i[l.SurfEdges].offset,i[l.SurfEdges].length),g=this.loadVertices(n,i[l.Vertices].offset,i[l.Vertices].length),m=this.loadTexInfo(n,i[l.TexInfo].offset,i[l.TexInfo].length),v=this.loadLightmap(n,i[l.Lighting].offset,i[l.Lighting].length),y=u.BspLightmapParser.init(v),b=r(c,d,h,p,g,m,a,y);return new f.Bsp(t,o,a,b,{width:u.BspLightmapParser.TEXTURE_SIZE,height:u.BspLightmapParser.TEXTURE_SIZE,data:y.getTexture()})}static loadFaces(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/20;++e)r.push({plane:t.us(),planeSide:t.us(),firstEdge:t.ui(),edgeCount:t.us(),textureInfo:t.us(),styles:[t.ub(),t.ub(),t.ub(),t.ub()],lightmapOffset:t.ui()});return r}static loadModels(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/64;++e)r.push({mins:[t.f(),t.f(),t.f()],maxs:[t.f(),t.f(),t.f()],origin:[t.f(),t.f(),t.f()],headNodes:[t.i(),t.i(),t.i(),t.i()],visLeaves:t.i(),firstFace:t.i(),faceCount:t.i()});return r}static loadEdges(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/4;++e)r.push([t.us(),t.us()]);return r}static loadSurfEdges(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/4;++e)r.push(t.i());return r}static loadVertices(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/12;++e)r.push([t.f(),t.f(),t.f()]);return r}static loadTexInfo(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/40;++e)r.push({s:[t.f(),t.f(),t.f()],sShift:t.f(),t:[t.f(),t.f(),t.f()],tShift:t.f(),textureIndex:t.i(),flags:t.i()});return r}static loadLightmap(t,e,n){return t.seek(e),t.arrx(n,s.ReaderDataType.UByte)}static loadTextureData(t){const e=t.nstr(16),n=t.ui(),r=t.ui(),i=!t.ui();if(i){const t=new Uint8Array(4);return t[0]=t[1]=t[2]=t[3]=255,{name:e,width:n,height:r,data:t,isExternal:i}}{t.skip(12);const o=n*r,a=t.arrx(o,s.ReaderDataType.UByte);t.skip(o/64*21),t.skip(2);const u=t.arrx(768,s.ReaderDataType.UByte);return{name:e,width:n,height:r,data:"{"===e[0]?c.paletteWithLastTransToRGBA(a,u):c.paletteToRGBA(a,u),isExternal:i}}}static loadTextures(t,e){t.seek(e);const n=t.ui(),r=[];for(let e=0;e<n;++e)r.push(t.ui());const i=[];for(let o=0;o<n;++o)4294967295===r[o]?i.push({name:"ERROR404",width:1,height:1,data:new Uint8Array([0,255,0,255]),isExternal:!1}):(t.seek(e+r[o]),i.push(this.loadTextureData(t)));return i}static loadEntities(t,e,n){t.seek(e);const r=a.vdf(t.nstr(n)),o=["origin","angles","_diffuse_light","_light","rendercolor","avelocity"],s=["renderamt","rendermode","scale"],u=r[0];return"worldspawn"===u.classname&&(u.model="*0",u.wad=u.wad||"",u.wad=u.wad.split(";").filter(t=>t.length).map(t=>t.replace(/\\/g,"/")).map(t=>i.basename(t))),r.forEach(t=>{var e=Number.parseFloat;t.model&&(void 0===t.renderamt&&(t.renderamt=0),void 0===t.rendermode&&(t.rendermode=0),void 0===t.renderfx&&(t.renderfx=0),void 0===t.rendercolor&&(t.rendercolor="0 0 0")),o.forEach(n=>{t[n]&&(t[n]=t[n].split(" ").map(t=>e(t)))}),s.forEach(n=>{t[n]&&(t[n]=e(t[n]))})}),r}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.vdf=function(t){let e=0,n="",r="";const i=[];for(let o=0;o<t.length;++o){const a=t[o];switch(e){case 0:if(/\s/.test(a))continue;if("{"!==a)return[];i.push({}),e=1;break;case 1:if(/\s/.test(a))continue;if("}"===a)e=0;else{if('"'!==a)return[];n="",e=2}break;case 2:'"'===a?e=3:n+=a;break;case 3:if(/\s/.test(a))continue;'"'===a&&(r="",e=4);break;case 4:'"'===a?(i[i.length-1][n]=r,e=1):r+=a}}return i}},function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});class i{constructor(t){this.block=new Uint16Array(i.TEXTURE_SIZE),this.lightmap=t,this.texture=new Uint8Array(i.TEXTURE_SIZE*i.TEXTURE_SIZE*4),this.texture[this.texture.length-4]=255,this.texture[this.texture.length-3]=255,this.texture[this.texture.length-2]=255,this.texture[this.texture.length-1]=255}static init(t){return new i(t)}getTexture(){return this.texture}processFace(t,e,n){const r=this.getDimensions(t),o=this.readLightmap(n,r.width,r.height);if(o)for(let n,a=0;a<t.length/7;++a){n=t[7*a]*e.s[0]+t[7*a+1]*e.s[1]+t[7*a+2]*e.s[2]+e.sShift-r.minU,n+=16*o.x+8,n/=16*i.TEXTURE_SIZE;let s=t[7*a]*e.t[0]+t[7*a+1]*e.t[1]+t[7*a+2]*e.t[2]+e.tShift-r.minV;s+=16*o.y+8,s/=16*i.TEXTURE_SIZE,t[7*a+5]=n,t[7*a+6]=s}}getDimensions(t){let r=e(t[3]),i=e(t[4]),o=e(t[3]),a=e(t[4]);for(let n=1;n<t.length/7;++n)e(t[7*n+3])<r&&(r=e(t[7*n+3])),e(t[7*n+4])<i&&(i=e(t[7*n+4])),e(t[7*n+3])>o&&(o=e(t[7*n+3])),e(t[7*n+4])>a&&(a=e(t[7*n+4]));return{width:n(o/16)-e(r/16)+1,height:n(a/16)-e(i/16)+1,minU:e(r),minV:e(i)}}readLightmap(t,n,r){if(0>=r||0>=n)return null;const o=this.findFreeSpace(n,r);if(o){const a=[o.x,o.y],s=[n,r],c=[i.TEXTURE_SIZE,i.TEXTURE_SIZE];for(let i=0;i<n*r;++i){const n=a[1]*c[0]+a[0]+c[0]*e(i/s[0])+i%s[0];this.texture[4*n]=u(255,2*this.lightmap[t+3*i]),this.texture[4*n+1]=u(255,2*this.lightmap[t+3*i+1]),this.texture[4*n+2]=u(255,2*this.lightmap[t+3*i+2]),this.texture[4*n+3]=255}}return o}findFreeSpace(t,e){let n=0,r=0,o=i.TEXTURE_SIZE;for(let e=0;e<this.block.length-t;++e){let i,a=0;for(i=0;i<t&&!(this.block[e+i]>=o);++i)this.block[e+i]>a&&(a=this.block[e+i]);i===t&&(n=e,r=o=a)}if(o+e>i.TEXTURE_SIZE)return null;for(let r=0;r<t;++r)this.block[n+r]=o+e;return{x:n,y:r}}}i.TEXTURE_SIZE=1024,r.BspLightmapParser=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bsp=class{constructor(t,e,n,r,i){this.skies=[],this.sprites={},this.name=t,this.entities=e,this.textures=n,this.models=r,this.lightmap=i}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t){this.view=new Uint8Array(t,0,t.byteLength)}getBits(t,e,n=!1){if(e>8*this.view.length-t)throw new Error("Bits out of bounds");let r=0;for(let n=0;n<e;){const i=e-n,o=7&t,a=this.view[t>>3],s=u(i,8-o);r|=(a>>o&(1<<s)-1)<<n,t+=s,n+=s}return n?(32!==e&&r&1<<e-1&&(r|=-1^(1<<e)-1),r):r>>>0}getInt8(t){return this.getBits(t,8,!0)}getUint8(t){return this.getBits(t,8,!1)}getInt16(t){return this.getBits(t,16,!0)}getUint16(t){return this.getBits(t,16,!1)}getInt32(t){return this.getBits(t,32,!0)}getUint32(t){return this.getBits(t,32,!1)}getFloat32(t){return n.scratch.setUint32(0,this.getUint32(t)),n.scratch.getFloat32(0)}getFloat64(t){return n.scratch.setUint32(0,this.getUint32(t)),n.scratch.setUint32(4,this.getUint32(t+32)),n.scratch.getFloat64(0)}}n.scratch=new DataView(new ArrayBuffer(8)),e.BitView=n,e.BitStream=class{constructor(t){this.view=new n(t),this.index=0}readBits(t,e=!1){const n=this.view.getBits(this.index,t,e);return this.index+=t,n}readInt8(){const t=this.view.getInt8(this.index);return this.index+=8,t}readUint8(){const t=this.view.getUint8(this.index);return this.index+=8,t}readInt16(){const t=this.view.getInt16(this.index);return this.index+=16,t}readUint16(){const t=this.view.getUint16(this.index);return this.index+=16,t}readInt32(){const t=this.view.getInt32(this.index);return this.index+=32,t}readUint32(){const t=this.view.getUint32(this.index);return this.index+=32,t}readFloat32(){const t=this.view.getFloat32(this.index);return this.index+=32,t}readFloat64(){const t=this.view.getFloat64(this.index);return this.index+=64,t}readString(t=0,e=!1){let n=0;const r=[];for(let e=!0;!t||t&&n<t;){const i=this.readUint8();if(0===i&&(e=!1,!t))break;e&&r.push(i),n++}const i=f.apply(null,r);if(!e)return i;try{return decodeURIComponent(i)}catch(e){return i}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(20);class i{constructor(t){this.index=-1,this.name="",this.buffer=t}static create(t){return new Promise((e,n)=>{r.SoundSystem.getContext().decodeAudioData(t,t=>{e(new i(t))},t=>{n(t)})})}}e.Sound=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(7);class i{constructor(t,e,n,r){this.name=t,this.width=e,this.height=n,this.data=r}static parse(t,e){let n=new r.Reader(t),o={idLength:n.ub(),colorMapType:n.ub(),imageType:n.ub(),colorMap:{firstEntryIndex:n.us(),length:n.us(),size:n.ub()},image:{xOrigin:n.us(),yOrigin:n.us(),width:n.us(),height:n.us(),depth:n.ub(),descriptor:n.ub()}};if(o.idLength&&n.arrx(o.idLength,r.ReaderDataType.UByte),o.colorMapType)throw new Error("Not implemented");let a,s=o.image.width,u=o.image.height,c=s*u;if(2===o.imageType){let t=c*o.image.depth/8;if(a=n.arrx(t,r.ReaderDataType.UByte),24===o.image.depth){let t=new Uint8Array(4*c);for(let e=0;e<u;++e)for(let n,r=0;r<s;++r)t[4*(n=(u-1-e)*s+r)]=a[3*(e*s+r)+2],t[4*n+1]=a[3*(e*s+r)+1],t[4*n+2]=a[3*(e*s+r)],t[4*n+3]=255;a=t}else if(32===o.image.depth){let t=new Uint8Array(4*c);for(let e=0;e<u;++e)for(let n,r=0;r<s;++r)t[4*(n=(u-1-e)*s+r)]=a[4*(e*s+r)+2],t[4*n+1]=a[4*(e*s+r)+1],t[4*n+2]=a[4*(e*s+r)],t[4*n+3]=255;a=t}}else if(10===o.imageType&&(a=new Uint8Array(4*c),24===o.image.depth))for(let t=0;t<u;++t)for(let e,r=0;r<s;)if(128&(e=n.ub())){e=1+(127&e);for(let i,o=n.ub(),c=n.ub(),f=n.ub();r<s&&e;)a[4*(i=(u-1-t)*s+r)]=f,a[4*i+1]=c,a[4*i+2]=o,a[4*i+3]=255,++r,--e}else for(e=1+(127&e);r<s&&e;){let i=(u-1-t)*s+r;a[4*i+2]=n.ub(),a[4*i+1]=n.ub(),a[4*i]=n.ub(),a[4*i+3]=255,++r,--e}return new i(e,o.image.width,o.image.height,a)}}e.Tga=i},function(t,e,n){"use strict";function r(t,e){switch(t.seek(e.offset),e.type){case 64:return function(t){const e=t.nstr(16),n=t.ui(),r=t.ui();t.skip(16);const a=n*r,s=t.arrx(a,i.ReaderDataType.UByte);t.skip(a/64*21),t.skip(2);const u=t.arrx(768,i.ReaderDataType.UByte);return{type:"decal",name:e,width:n,height:r,data:"{"===e[0]?o.paletteWithLastTransToRGBA(s,u):o.paletteToRGBA(s,u)}}(t);case 66:return function(t,e){return{type:"cache",name:e.name}}(0,e);case 67:return function(t){const e=t.nstr(16),n=t.ui(),r=t.ui();t.skip(16);const a=n*r,s=t.arrx(a,i.ReaderDataType.UByte);t.skip(a/64*21),t.skip(2);const u=t.arrx(768,i.ReaderDataType.UByte);return{type:"texture",name:e,width:n,height:r,data:"{"===e[0]?o.paletteWithLastTransToRGBA(s,u):o.paletteToRGBA(s,u)}}(t);case 70:return function(t,e){const n=t.ui(),r=t.ui(),a=t.ui(),s=t.ui(),u=[];for(let e=0;256>e;++e)u.push({offset:t.us(),width:t.us()});const c=t.arrx(n*r,i.ReaderDataType.UByte);t.skip(2);const f=t.arrx(768,i.ReaderDataType.UByte);return{type:"font",name:e.name,width:n,height:r,rowCount:a,rowHeight:s,glyphs:u,data:o.paletteToRGBA(c,f)}}(t,e);default:return function(t,e){return{type:"unknown",name:e.name,data:t.arrx(e.length,t.ub.bind(t))}}(t,e)}}Object.defineProperty(e,"__esModule",{value:!0});const i=n(7),o=n(14);class a{constructor(t){this.entries=t}static parse(t){const e=new i.Reader(t);if("WAD3"!==e.nstr(4))throw new Error("Invalid WAD file format");const n=e.ui(),o=e.ui();e.seek(o);const s=[];for(let t=0;t<n;++t){const t={offset:e.ui(),diskLength:e.ui(),length:e.ui(),type:e.b(),isCompressed:e.b(),name:""};e.skip(2),t.name=e.nstr(16),s.push(t)}const u=s.map(t=>r(e,t));return new a(u)}}e.Wad=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xhr=function(t,e){let n=e.method||"GET",r=e.isBinary,i=e.progressCallback;if(!t)throw new Error("Url parameter missing");return new Promise((e,o)=>{let a=new XMLHttpRequest;r&&(a.responseType="arraybuffer"),r&&i&&a.addEventListener("progress",t=>{if(t.lengthComputable)i(a,t.loaded/t.total);else{let e=a.getResponseHeader("content-length"),n=0;e&&(n=parseFloat(e));let r=a.getResponseHeader("content-encoding");if(n&&r&&-1<r.indexOf("gzip")){n*=4;let e=u(.99,t.loaded/n);i(a,e)}else i(a,0)}}),a.addEventListener("readystatechange",t=>{4!==t.target.readyState||(200===t.target.status?(i&&i(a,1),e(t.target.response)):o({status:t.target.status}))}),a.open(n,t,!0),a.send()})}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(){this.keys=new Uint8Array(256);for(let t=0;256>t;++t)this.keys[0]=0}}e.Keyboard=n,function(t){let e;!function(t){t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.CTRL=17]="CTRL",t[t.ALT=18]="ALT",t[t.SPACE=32]="SPACE"}(e=t.KEYS||(t.KEYS={}))}(n||(n={})),e.Keyboard=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(16),i=n(8),o=n(19),a=(t,e)=>{t.camera.position[0]=e.cameraPos[0],t.camera.position[1]=e.cameraPos[1],t.camera.position[2]=e.cameraPos[2],t.camera.rotation[0]=r.glMatrix.toRadian(e.cameraRot[0]),t.camera.rotation[1]=r.glMatrix.toRadian(e.cameraRot[1]),t.camera.rotation[2]=r.glMatrix.toRadian(e.cameraRot[2])};e.ReplayPlayer=class{constructor(t){this.currentMap=0,this.currentChunk=0,this.currentTime=0,this.currentTick=0,this.isPlaying=!1,this.isPaused=!1,this.speed=1,this.reset(),this.game=t,this.state=new o.ReplayState,this.replay=null,this.events=new i.EventEmitter}reset(){if(this.currentMap=0,this.currentChunk=0,this.currentTime=0,this.currentTick=0,this.isPlaying=!1,this.isPaused=!1,this.speed=1,this.replay){let t=this.replay.maps[0].chunks[0];t.reader.seek(0),this.state=t.state.clone()}}on(t,e){return this.events.on(t,e)}off(t,e){this.events.removeListener(t,e)}changeReplay(t){this.replay=t,this.reset()}play(){this.isPlaying?this.isPaused&&(this.isPaused=!1):this.isPlaying=!0,this.events.emit("play")}pause(){this.isPlaying&&(this.isPaused=!0),this.events.emit("pause")}stop(){this.reset(),this.events.emit("stop")}speedUp(){this.speed=u(2*this.speed,4)}speedDown(){this.speed=l(this.speed/2,.25)}seek(t){let e=l(0,u(this.replay.length,t)),n=this.replay.maps;for(let t,r=0;r<n.length;++r){t=n[r].chunks;for(let n=0;n<t.length;++n){let i=t[n],s=i.startTime,u=s+i.timeLength;if(e>=s&&e<u){this.currentMap=r,this.currentChunk=n,this.currentTime=e,this.state=i.state.clone();let t=this.replay.deltaDecoders,s=this.replay.customMessages,u=i.reader;for(u.seek(0);;){let n=u.tell(),r=o.Replay.readFrame(u,t,s);if(!(r.time<=e)){u.seek(n);break}this.state.feedFrame(r),this.currentTick=r.tick}return void a(this.game,this.state)}}}}seekByPercent(t){t=l(0,u(t,100))/100,t*=this.replay.length,this.seek(t)}update(t){if(!this.isPlaying||this.isPaused)return;let e=this.replay.deltaDecoders,n=this.replay.customMessages,r=this.replay.maps[this.currentMap],i=r.chunks[this.currentChunk],s=i.reader,u=this.currentTime+t*this.speed,c=!1;for(;;){let t=s.tell();if(t>=i.data.length){if(this.currentChunk!==r.chunks.length-1)this.currentChunk++,i=r.chunks[this.currentChunk];else{if(this.currentMap===this.replay.maps.length-1){c=!0;break}this.currentChunk=0,this.currentMap++,i=(r=this.replay.maps[this.currentMap]).chunks[this.currentChunk]}(s=i.reader).seek(0),t=0;continue}let a=this.game.sounds,f=o.Replay.readFrame(s,e,n);if(2>f.type)for(let t,e=0;e<f.data.length;++e)if(6===(t=f.data[e]).type){let e=t.data,n=a.find(t=>t.index===e.soundIndex);if(n&&"common/null.wav"!==n.name){let t=e.channel,r=e.volume;this.game.soundSystem.play(n,t,r)}}else if(29===t.type){let e=t.data,n=a.find(t=>t.index===e.soundIndex);n&&n.name}else 9===t.type&&t.data.commands.forEach(t=>{switch(t.func){case"speak":case"spk":case"play":{let e=t.params[0]+".wav",n=a.find(t=>t.name===e);if(!n)return;this.game.soundSystem.play(n,1,.7);break}case"playvol":{let e,n=t.params[0]+".wav";e=isNaN(t.params[1])?1:parseFloat(t.params[1]);let r=a.find(t=>t.name===n);if(!r)return;this.game.soundSystem.play(r,1,e);break}}});else if(8===f.type){let t=f.sound.sample,e=a.find(e=>e.name===t);if(e&&"common/null.wav"!==e.name){let t=f.sound.channel,n=f.sound.volume;this.game.soundSystem.play(e,t,n)}}if(!(f.time<=u)){s.seek(t);break}this.state.feedFrame(f),this.currentTick=f.tick}a(this.game,this.state),this.currentTime=u,c&&this.stop()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(16);class i{constructor(t){this.projectionMatrix=r.mat4.create(),this.fov=r.glMatrix.toRadian(60),this.near=1,this.far=8192,this.viewMatrix=r.mat4.create(),this.position=r.vec3.create(),this.rotation=r.vec3.create(),this.aspect=t,this.updateProjectionMatrix()}static init(t){return new i(t)}updateProjectionMatrix(){r.mat4.perspective(this.projectionMatrix,this.fov,this.aspect,this.near,this.far)}updateViewMatrix(){r.mat4.identity(this.viewMatrix),r.mat4.rotateX(this.viewMatrix,this.viewMatrix,this.rotation[0]-c/2),r.mat4.rotateZ(this.viewMatrix,this.viewMatrix,c/2-this.rotation[1]),r.mat4.translate(this.viewMatrix,this.viewMatrix,[-this.position[0],-this.position[1],-this.position[2]])}}e.Camera=i},function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.VERTEX=0]="VERTEX",t[t.FRAGMENT=1]="FRAGMENT"}(n=e.ShaderType||(e.ShaderType={}));class r{static init(t){const e=t.getContext("webgl",{alpha:!1});return e?new r(e):(console.log("contextn't"),null)}constructor(t){this.gl=t}createProgram(t){const e=this.gl;var r=e.createProgram();if(!r)return console.error("gl.createProgramn't"),null;const i=this.createShader({source:t.vertexShaderSrc,type:n.VERTEX});if(!i)return console.error("Failed to compile vertex shader"),null;const o=this.createShader({source:t.fragmentShaderSrc,type:n.FRAGMENT});if(!o)return console.error("Failed to compile fragment shader"),null;if(e.attachShader(r,i),e.attachShader(r,o),e.linkProgram(r),e.validateProgram(r),!e.getProgramParameter(r,e.LINK_STATUS)){e.deleteProgram(r),e.deleteShader(i),e.deleteShader(o);const t=e.getProgramInfoLog(r);return console.debug(`Could not initialize shader: ${t}`),null}if(!e.getProgramParameter(r,e.VALIDATE_STATUS)){e.deleteProgram(r),e.deleteShader(i),e.deleteShader(o);const t=e.getProgramInfoLog(r);return console.debug(`Could not initialize shader: ${t}`),null}e.useProgram(r);const a={};for(let n=0;n<t.attributeNames.length;++n){const i=t.attributeNames[n],o=e.getAttribLocation(r,i);if(-1===o)return console.error(`gl.getAttribLocation't named "${i}"`),e.deleteProgram(r),null;a[i]=o}const s={};for(let n=0;n<t.uniformNames.length;++n){const i=t.uniformNames[n],o=e.getUniformLocation(r,i);if(null===o)return console.error(`gl.getUniformLocation't named "${i}"`),e.deleteProgram(r),null;s[i]=o}return{handle:r,attributes:a,uniforms:s}}createShader(t){const e=this.gl,r=t.type===n.VERTEX?e.createShader(e.VERTEX_SHADER):e.createShader(e.FRAGMENT_SHADER);return r?(e.shaderSource(r,t.source),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.debug(e.getShaderInfoLog(r)),e.deleteShader(r),null)):(console.error("Failed to create shader program"),null)}getAnisotropyExtension(){return this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")}getMaxAnisotropy(t){return this.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}}e.Context=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t){this.draw=()=>{const t=this.context.gl;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},this.context=t.context}static init(t){const e=t.gl;return e.clearColor(0,0,0,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.CULL_FACE),e.cullFace(e.FRONT),new n({context:t})}}e.Renderer=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(54);class i{constructor(t){this.isReady=!1,this.context=t.context,this.shader=t.shader}static init(t){const e=r.SkyShader.init(t);return e?new i({context:t,shader:e}):(console.error("skyscenen't"),null)}changeMap(t){if(6!==t.skies.length)return void(this.isReady=!1);const e=this.context.gl,n=e.createBuffer(),r=e.createBuffer(),i=e.createTexture();if(!n||!r||!i)throw new Error("shouldnt happen");const o=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),a=new Float32Array([-1,-1,1,.499,.001,1,-1,1,.499,.249,1,1,1,.001,.249,-1,1,1,.001,.001,-1,-1,-1,.499,.749,-1,1,-1,.001,.749,1,1,-1,.001,.501,1,-1,-1,.499,.501,-1,1,-1,.501,.749,-1,1,1,.501,.501,1,1,1,.999,.501,1,1,-1,.999,.749,-1,-1,-1,.999,.249,1,-1,-1,.501,.249,1,-1,1,.501,.001,-1,-1,1,.999,.001,1,-1,-1,.499,.499,1,1,-1,.001,.499,1,1,1,.001,.251,1,-1,1,.499,.251,-1,-1,-1,.501,.499,-1,-1,1,.501,.251,-1,1,1,.999,.251,-1,1,-1,.999,.499].map((t,e)=>3>e%5?4096*t:t));e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),e.enableVertexAttribArray(0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r),e.bufferData(e.ELEMENT_ARRAY_BUFFER,o,e.STATIC_DRAW);const s=document.createElement("canvas");s.width=512,s.height=1024;const u=s.getContext("2d");if(!u)throw new Error("sky ctx fail");const c={up:[0,0],rt:[0,256],dn:[0,512],ft:[256,0],lf:[256,256],bk:[256,512]};t.skies.forEach(t=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("Runtime error.");e.width=t.width,e.height=t.height;const r=n.getImageData(0,0,e.width,e.height);for(let e=0;e<t.data.length;++e)r.data[e]=t.data[e];n.putImageData(r,0,0);const i=t.name.slice(-2),o=c[i]?c[i]:[];if(!u)throw new Error("Runtime error.");u.drawImage(e,o[0],o[1])});const f=u.getImageData(0,0,512,1024).data;e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,512,1024,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(f)),e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);const l=this.context.getAnisotropyExtension();l&&e.texParameteri(e.TEXTURE_2D,l.TEXTURE_MAX_ANISOTROPY_EXT,this.context.getMaxAnisotropy(l)),this.vertexBuffer=n,this.indexBuffer=r,this.texture=i,this.isReady=!0}draw(t){if(this.isReady){const e=this.context.gl,n=this.shader;n.useProgram(e),e.bindTexture(e.TEXTURE_2D,this.texture),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.enableVertexAttribs(e),n.setVertexAttribPointers(e),n.setDiffuse(e,0);const r=t.position[0],i=t.position[1],o=t.position[2];t.position[0]=0,t.position[1]=0,t.position[2]=0,t.updateViewMatrix(),t.position[0]=r,t.position[1]=i,t.position[2]=o,n.setViewMatrix(e,t.viewMatrix),n.setProjectionMatrix(e,t.projectionMatrix),e.drawElements(e.TRIANGLES,36,e.UNSIGNED_BYTE,0),e.clear(e.DEPTH_BUFFER_BIT)}}}e.SkyScene=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n="#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D diffuse;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  vec4 diffuseColor = texture2D(diffuse, vTexCoord);\n  gl_FragColor = vec4(diffuseColor.rgb, 1.0);\n}",r="#ifdef GL_ES\nprecision highp float;\n#endif\n\nattribute vec3 position;\nattribute vec2 texCoord;\n\nvarying vec2 vTexCoord;\n\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n  vTexCoord = texCoord;\n  gl_Position = projectionMatrix * viewMatrix * vec4(position, 1);\n}";class i{static init(t){const e=t.createProgram({vertexShaderSrc:r,fragmentShaderSrc:n,attributeNames:["position","texCoord"],uniformNames:["viewMatrix","projectionMatrix","diffuse"]});return e?new i(e):(console.error("Failed to create sky shader program"),null)}constructor(t){this.program=t.handle,this.aPosition=t.attributes.position,this.aTexCoord=t.attributes.texCoord,this.uViewMx=t.uniforms.viewMatrix,this.uProjectionMx=t.uniforms.projectionMatrix,this.uDiffuse=t.uniforms.diffuse}useProgram(t){t.useProgram(this.program)}setViewMatrix(t,e){t.uniformMatrix4fv(this.uViewMx,!1,e)}setProjectionMatrix(t,e){t.uniformMatrix4fv(this.uProjectionMx,!1,e)}setDiffuse(t,e){t.uniform1i(this.uDiffuse,e)}enableVertexAttribs(t){t.enableVertexAttribArray(this.aPosition),t.enableVertexAttribArray(this.aTexCoord)}setVertexAttribPointers(t){t.vertexAttribPointer(this.aPosition,3,t.FLOAT,!1,20,0),t.vertexAttribPointer(this.aTexCoord,2,t.FLOAT,!1,20,12)}}e.SkyShader=i},function(t,e,n){"use strict";var o=Math.atan2;Object.defineProperty(e,"__esModule",{value:!0});const a=n(84),s=n(16),u=n(57),f=n(58),l=n(21),d=n(59);class h{constructor(t){this.modelMatrix=s.mat4.create(),this.sceneInfo={length:0,data:new Float32Array(0),models:[]},this.textures=[],this.sprites={},this.lightmap=null,this.buffer=t.buffer,this.context=t.context,this.shader=t.shader}static init(t){const e=u.MainShader.init(t);if(!e)return console.error("shadern't"),null;e.useProgram(t.gl);const n=t.gl.createBuffer();return n?new h({buffer:n,context:t,shader:e}):(console.error("buffern't"),null)}changeMap(t){this.fillBuffer(t),this.loadTextures(t),this.loadSpriteTextures(t),this.loadLightmap(t),this.bsp=t}fillBuffer(t){const e=this.context.gl,n=t.models,r=["aaatrigger","clip","null","hint","nodraw","invisible","skip","trigger","sky","fog"];let i=0;for(let e=0;e<n.length;++e){const o=n[e];for(let e=0;e<o.faces.length;++e){const n=t.textures[o.faces[e].textureIndex];-1<r.indexOf(n.name)||(i+=o.faces[e].buffer.length)}}const o={length:i+=42,data:new Float32Array(i),models:[]};let s=0;for(let e=0;e<t.models.length;++e){const n=t.models[e],i={origin:n.origin,offset:s,length:0,isTransparent:!1,faces:[]};for(let e=0;e<n.faces.length;++e){const a=t.textures[n.faces[e].textureIndex];if(-1<r.indexOf(a.name))continue;const u={offset:s,length:0,textureIndex:-1};for(let t=0;t<n.faces[e].buffer.length;++t)o.data[s++]=n.faces[e].buffer[t];i.isTransparent||"{"!==t.textures[n.faces[e].textureIndex].name[0]||(i.isTransparent=!0),u.textureIndex=n.faces[e].textureIndex,u.length=s-u.offset,i.faces.push(u)}i.length=s-i.offset,o.models.push(i)}o.models.push({origin:[0,0,0],offset:s,length:4,isTransparent:!1,faces:[{offset:s,length:4,textureIndex:0}]}),o.data[s++]=-.5,o.data[s++]=0,o.data[s++]=-.5,o.data[s++]=1,o.data[s++]=1,o.data[s++]=0,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=0,o.data[s++]=0,o.data[s++]=0,o.data[s++]=0,o.data[s++]=-.5,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=1,o.data[s++]=0,o.data[s++]=0,o.data[s++]=0,o.data[s++]=-.5,o.data[s++]=0,o.data[s++]=-.5,o.data[s++]=1,o.data[s++]=1,o.data[s++]=0,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=0,o.data[s++]=-.5,o.data[s++]=0,o.data[s++]=1,o.data[s++]=0,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=0,o.data[s++]=.5,o.data[s++]=0,o.data[s++]=0,o.data[s++]=0,o.data[s++]=0,s=0;const u=a.cloneDeep(o);for(let t=0;t<u.models.length;++t){const e=u.models[t];e.faces.sort((t,e)=>t.textureIndex-e.textureIndex);for(let t=0;t<e.faces.length;++t){const n=e.faces[t],r=s;for(let t=0;t<n.length;++t)u.data[s]=o.data[n.offset+t],s+=1;n.offset=r}const n=[];let r=-1;for(let t=0;t<e.faces.length;++t){const i=e.faces[t];i.textureIndex===r?n[n.length-1].length+=i.length:(n.push({offset:i.offset,length:i.length,textureIndex:i.textureIndex}),r=i.textureIndex)}e.faces=n}this.sceneInfo=u,e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.sceneInfo.data,e.STATIC_DRAW)}loadTextures(t){const e=this.context.gl;for(let n=0;n<t.textures.length;++n){const r=e.createTexture();if(!r)throw new Error("fatal error");const i=t.textures[n];if(!d.isPowerOfTwo(i.width)||!d.isPowerOfTwo(i.height)){const t=i.width,e=i.height,n=d.nextPowerOfTwo(i.width),r=d.nextPowerOfTwo(i.height);i.data=d.resizeTexture(i.data,t,e,n,r),i.width=n,i.height=r}e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,i.width,i.height,0,e.RGBA,e.UNSIGNED_BYTE,i.data),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.generateMipmap(e.TEXTURE_2D);const o=this.context.getAnisotropyExtension();o&&e.texParameteri(e.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,this.context.getMaxAnisotropy(o)),this.textures.push({name:i.name,width:i.width,height:i.height,data:i.data,handle:r})}}loadSpriteTextures(t){const e=this.context.gl;for(const[n,r]of Object.entries(t.sprites)){const t=e.createTexture();if(!t)throw new Error("fatal error");const i=r.frames[0];if(!d.isPowerOfTwo(i.width)||!d.isPowerOfTwo(i.height)){const t=i.width,e=i.height,n=d.nextPowerOfTwo(i.width),r=d.nextPowerOfTwo(i.height);i.data=d.resizeTexture(i.data,t,e,n,r),i.width=n,i.height=r}e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,i.width,i.height,0,e.RGBA,e.UNSIGNED_BYTE,i.data),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.generateMipmap(e.TEXTURE_2D);const o=this.context.getAnisotropyExtension();o&&e.texParameteri(e.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,this.context.getMaxAnisotropy(o)),this.textures.push({name:n,width:i.width,height:i.height,data:i.data,handle:t}),this.sprites[n]=r}}loadLightmap(t){const e=this.context.gl,n=e.createTexture();if(!n)throw new Error("fatal error");e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.lightmap.width,t.lightmap.height,0,e.RGBA,e.UNSIGNED_BYTE,t.lightmap.data),e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),this.lightmap={data:t.lightmap.data,handle:n}}draw(t,e){if(this.bsp&&this.lightmap){const n=this.context.gl,r=this.shader;r.useProgram(n),t.updateProjectionMatrix(),t.updateViewMatrix(),r.setViewMatrix(n,t.viewMatrix),r.setProjectionMatrix(n,t.projectionMatrix),n.bindBuffer(n.ARRAY_BUFFER,this.buffer),r.enableVertexAttribs(n),r.setVertexAttribPointers(n),r.setDiffuse(n,0),r.setLightmap(n,1),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,this.lightmap.handle),n.activeTexture(n.TEXTURE0);const i=[],o=[];for(let t=1;t<e.length;++t){const n=e[t];if(n.model)if(n.rendermode&&n.rendermode!=f.RenderMode.Normal&&n.rendermode!=f.RenderMode.Solid)n.rendermode,f.RenderMode.Additive,o.push(n);else{if("*"===n.model[0]){if(this.sceneInfo.models[parseInt(n.model.substr(1))].isTransparent){o.push(n);continue}}else if(-1<n.model.indexOf(".spr")){o.push(n);continue}i.push(n)}}r.setOpacity(n,1),this.renderWorldSpawn(),this.renderOpaqueEntities(t,i),o.length&&(n.depthMask(!1),this.renderTransparentEntities(o,t),n.depthMask(!0))}}renderWorldSpawn(){const t=this.sceneInfo.models[0],e=this.context.gl;s.mat4.identity(this.modelMatrix),this.shader.setModelMatrix(e,this.modelMatrix);for(let n=0;n<t.faces.length;++n){const r=t.faces[n];e.bindTexture(e.TEXTURE_2D,this.textures[r.textureIndex].handle),e.drawArrays(e.TRIANGLES,r.offset/7,r.length/7)}}renderOpaqueEntities(t,e){const n=this.context.gl,a=this.shader,u=this.modelMatrix;for(let d=0;d<e.length;++d){const h=e[d],p=parseInt(h.model.substr(1)),g=this.sceneInfo.models[p];if(g){const t=h.angles||[0,0,0],e=h.origin?s.vec3.fromValues(h.origin[0],h.origin[1],h.origin[2]):s.vec3.create();s.vec3.add(e,e,g.origin),s.mat4.identity(u),s.mat4.translate(u,u,e),s.mat4.rotateZ(u,u,t[1]*c/180),s.mat4.rotateX(this.modelMatrix,this.modelMatrix,t[2]*c/180),a.setModelMatrix(n,this.modelMatrix);for(let t=0;t<g.faces.length;++t){const e=g.faces[t];n.bindTexture(n.TEXTURE_2D,this.textures[e.textureIndex].handle),n.drawArrays(n.TRIANGLES,e.offset/7,e.length/7)}}else if(-1<h.model.indexOf(".spr")){const e=this.textures.find(t=>t.name===h.model),d=this.sprites[h.model];if(e&&d){const p=h.origin?s.vec3.fromValues(h.origin[0],h.origin[1],h.origin[2]):s.vec3.create(),g=s.vec3.fromValues(e.width,1,e.height),m=h.angles?s.vec3.fromValues(h.angles[0],h.angles[2],h.angles[1]):s.vec3.create();switch(s.vec3.scale(g,g,h.scale||1),s.mat4.identity(u),s.mat4.translate(u,u,p),d.header.type){case l.SpriteType.VP_PARALLEL_UPRIGHT:case l.SpriteType.FACING_UPRIGHT:s.mat4.rotateZ(u,u,t.rotation[1]+c/2);break;case l.SpriteType.VP_PARALLEL:s.mat4.rotateZ(u,u,o(p[1]-t.position[1],p[0]-t.position[0])+c/2),s.mat4.rotateX(u,u,o(t.position[2]-p[2],r(i(t.position[0]-p[0],2)+i(t.position[1]-p[1],2))));break;case l.SpriteType.ORIENTED:s.mat4.rotateY(u,u,m[0]*c/180+c),s.mat4.rotateZ(u,u,m[1]*c/180+c),s.mat4.rotateX(u,u,m[2]*c/180-c/2);break;case l.SpriteType.VP_PARALLEL_ORIENTED:s.mat4.rotateY(u,u,m[0]*c/180+c),s.mat4.rotateZ(u,u,m[1]*c/180+c);break;default:throw new Error("Invalid sprite type")}switch(s.mat4.scale(u,u,g),a.setModelMatrix(n,u),a.setOpacity(n,(h.renderamt||255)/255),h.rendermode||f.RenderMode.Normal){case f.RenderMode.Normal:a.setOpacity(n,1),n.bindTexture(n.TEXTURE_2D,e.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Color:case f.RenderMode.Texture:a.setOpacity(n,(h.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,e.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Glow:n.blendFunc(n.SRC_ALPHA,n.DST_ALPHA),a.setOpacity(n,(h.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,e.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA);break;case f.RenderMode.Solid:a.setOpacity(n,(h.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,e.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Additive:n.blendFunc(n.SRC_ALPHA,n.DST_ALPHA),a.setOpacity(n,(h.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,e.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA)}}}}}renderTransparentEntities(t,e){const n=this.context.gl,a=this.shader,u=this.modelMatrix,d=t.map((t,n)=>({index:n,distance:s.vec3.dist(e.position,t.origin||[0,0,0])})).sort((t,e)=>t.distance-e.distance);for(let h=0;h<d.length;++h){const p=t[d[h].index],g=parseInt(p.model.substr(1)),m=this.sceneInfo.models[g];if(m){const t=p.angles||[0,0,0],e=p.origin||[0,0,0];switch(e[0]+=m.origin[0],e[1]+=m.origin[1],e[2]+=m.origin[2],s.mat4.identity(u),s.mat4.translate(u,u,e),s.mat4.rotateZ(u,u,t[1]*c/180),s.mat4.rotateX(this.modelMatrix,this.modelMatrix,t[2]*c/180),a.setModelMatrix(n,this.modelMatrix),p.rendermode||f.RenderMode.Normal){case f.RenderMode.Normal:a.setOpacity(n,1);for(let t=0;t<m.faces.length;++t){const e=m.faces[t];n.bindTexture(n.TEXTURE_2D,this.textures[e.textureIndex].handle),n.drawArrays(n.TRIANGLES,e.offset/7,e.length/7)}break;case f.RenderMode.Color:case f.RenderMode.Texture:case f.RenderMode.Glow:case f.RenderMode.Solid:a.setOpacity(n,(p.renderamt||255)/255);for(let t=0;t<m.faces.length;++t){const e=m.faces[t];n.bindTexture(n.TEXTURE_2D,this.textures[e.textureIndex].handle),n.drawArrays(n.TRIANGLES,e.offset/7,e.length/7)}break;case f.RenderMode.Additive:n.blendFunc(n.SRC_ALPHA,n.DST_ALPHA),a.setOpacity(n,(p.renderamt||255)/255);for(let t=0;t<m.faces.length;++t){const e=m.faces[t];n.bindTexture(n.TEXTURE_2D,this.textures[e.textureIndex].handle),n.drawArrays(n.TRIANGLES,e.offset/7,e.length/7)}n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA)}}else if(-1<p.model.indexOf(".spr")){const t=this.textures.find(t=>t.name===p.model),d=this.sprites[p.model];if(t&&d){const h=p.origin?s.vec3.fromValues(p.origin[0],p.origin[1],p.origin[2]):s.vec3.create(),g=s.vec3.fromValues(t.width,1,t.height),m=p.angles?s.vec3.fromValues(p.angles[0],p.angles[2],p.angles[1]):s.vec3.create();switch(s.vec3.scale(g,g,p.scale||1),s.mat4.identity(u),s.mat4.translate(u,u,h),d.header.type){case l.SpriteType.VP_PARALLEL_UPRIGHT:case l.SpriteType.FACING_UPRIGHT:s.mat4.rotateZ(u,u,e.rotation[1]+c/2);break;case l.SpriteType.VP_PARALLEL:s.mat4.rotateZ(u,u,o(h[1]-e.position[1],h[0]-e.position[0])+c/2),s.mat4.rotateX(u,u,o(e.position[2]-h[2],r(i(e.position[0]-h[0],2)+i(e.position[1]-h[1],2))));break;case l.SpriteType.ORIENTED:s.mat4.rotateY(u,u,m[0]*c/180+c),s.mat4.rotateZ(u,u,m[1]*c/180+c),s.mat4.rotateX(u,u,m[2]*c/180-c/2);break;case l.SpriteType.VP_PARALLEL_ORIENTED:s.mat4.rotateY(u,u,m[0]*c/180+c),s.mat4.rotateZ(u,u,m[1]*c/180+c);break;default:throw new Error("Invalid sprite type")}switch(s.mat4.scale(u,u,g),a.setModelMatrix(n,u),a.setOpacity(n,(p.renderamt||255)/255),p.rendermode||f.RenderMode.Normal){case f.RenderMode.Normal:a.setOpacity(n,1),n.bindTexture(n.TEXTURE_2D,t.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Color:case f.RenderMode.Texture:a.setOpacity(n,(p.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,t.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Glow:n.blendFunc(n.SRC_ALPHA,n.DST_ALPHA),a.setOpacity(n,(p.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,t.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA);break;case f.RenderMode.Solid:a.setOpacity(n,(p.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,t.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Additive:n.blendFunc(n.SRC_ALPHA,n.DST_ALPHA),a.setOpacity(n,(p.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,t.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA)}}}}}}e.WorldScene=h},function(t){var e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n="#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D diffuse;\nuniform sampler2D lightmap;\nuniform float opacity;\n\nvarying vec2 vTexCoord;\nvarying vec2 vLightmapCoord;\n\nvoid main(void) {\n  vec4 diffuseColor = texture2D(diffuse, vTexCoord);\n  vec4 lightColor = texture2D(lightmap, vLightmapCoord);\n\n  gl_FragColor = vec4(diffuseColor.rgb * lightColor.rgb, diffuseColor.a * opacity);\n}",r="#ifdef GL_ES\nprecision highp float;\n#endif\n\nattribute vec3 position;\nattribute vec2 texCoord;\nattribute vec2 texCoord2;\n\nvarying vec2 vTexCoord;\nvarying vec2 vLightmapCoord;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n  vTexCoord = texCoord;\n  vLightmapCoord = texCoord2;\n\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1);\n}";class i{static init(t){const e=t.createProgram({vertexShaderSrc:r,fragmentShaderSrc:n,attributeNames:["position","texCoord","texCoord2"],uniformNames:["modelMatrix","viewMatrix","projectionMatrix","diffuse","lightmap","opacity"]});return e?new i(e):(console.log("programn't"),null)}constructor(t){this.program=t.handle,this.aPosition=t.attributes.position,this.aTexCoord=t.attributes.texCoord,this.aTexCoord2=t.attributes.texCoord2,this.uModelMx=t.uniforms.modelMatrix,this.uViewMx=t.uniforms.viewMatrix,this.uProjectionMx=t.uniforms.projectionMatrix,this.uDiffuse=t.uniforms.diffuse,this.uLightmap=t.uniforms.lightmap,this.uOpacity=t.uniforms.opacity}useProgram(t){t.useProgram(this.program)}setModelMatrix(t,e){t.uniformMatrix4fv(this.uModelMx,!1,e)}setViewMatrix(t,e){t.uniformMatrix4fv(this.uViewMx,!1,e)}setProjectionMatrix(t,e){t.uniformMatrix4fv(this.uProjectionMx,!1,e)}setDiffuse(t,e){t.uniform1i(this.uDiffuse,e)}setLightmap(t,e){t.uniform1i(this.uLightmap,e)}setOpacity(t,e){t.uniform1f(this.uOpacity,e)}enableVertexAttribs(t){t.enableVertexAttribArray(this.aPosition),t.enableVertexAttribArray(this.aTexCoord),t.enableVertexAttribArray(this.aTexCoord2)}setVertexAttribPointers(t){t.vertexAttribPointer(this.aPosition,3,t.FLOAT,!1,28,0),t.vertexAttribPointer(this.aTexCoord,2,t.FLOAT,!1,28,12),t.vertexAttribPointer(this.aTexCoord2,2,t.FLOAT,!1,28,20)}}e.MainShader=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.No=0]="No",t[t.Yes=1]="Yes"}(e.WorldSpawnStartDark||(e.WorldSpawnStartDark={})),function(t){t[t.No=0]="No",t[t.Yes=1]="Yes"}(e.WorldSpawnGameTitle||(e.WorldSpawnGameTitle={})),function(t){t[t.No=0]="No",t[t.Yes=1]="Yes"}(e.WorldSpawnNewUnit||(e.WorldSpawnNewUnit={})),function(t){t[t.FewestPlayers=0]="FewestPlayers",t[t.FirstTeam=1]="FirstTeam"}(e.WorldSpawnDefaultTeam||(e.WorldSpawnDefaultTeam={})),function(t){t[t.No=0]="No",t[t.Walk=1]="Walk",t[t.Run=2]="Run",t[t.Instantaneous=4]="Instantaneous",t[t.No_TurnToFace=5]="No_TurnToFace"}(e.AiScriptedSequenceMoveTo||(e.AiScriptedSequenceMoveTo={})),function(t){t[t.DefaultAI=0]="DefaultAI",t[t.Ambush=1]="Ambush"}(e.AiScriptedSequenceFinishSchedule||(e.AiScriptedSequenceFinishSchedule={})),function(t){t[t.Repeatable=4]="Repeatable",t[t.LeaveCorpse=8]="LeaveCorpse"}(e.AiScriptedSequenceSpawnflags||(e.AiScriptedSequenceSpawnflags={})),function(t){t[t.None=0]="None",t[t.HugeMachine=1]="HugeMachine",t[t.BigMachine=2]="BigMachine",t[t.Machine=3]="Machine",t[t.SlowFadeIn=4]="SlowFadeIn",t[t.FadeIn=5]="FadeIn",t[t.QuickFadeIn=6]="QuickFadeIn",t[t.SlowPulse=7]="SlowPulse",t[t.Pulse=8]="Pulse",t[t.QuickPulse=9]="QuickPulse",t[t.SlowOscillator=10]="SlowOscillator",t[t.Oscillator=11]="Oscillator",t[t.QuickOscillator=12]="QuickOscillator",t[t.GrungePitch=13]="GrungePitch",t[t.VeryLowPitch=14]="VeryLowPitch",t[t.LowPitch=15]="LowPitch",t[t.HighPitch=16]="HighPitch",t[t.VeryHighPitch=17]="VeryHighPitch",t[t.ScreamingPitch=18]="ScreamingPitch",t[t.OscillateSpinUpDown=19]="OscillateSpinUpDown",t[t.PulseSpinUpDown=20]="PulseSpinUpDown",t[t.RandomPitch=21]="RandomPitch",t[t.RandomPitchFast=22]="RandomPitchFast",t[t.IncrementalSpinup=23]="IncrementalSpinup",t[t.Alien=24]="Alien",t[t.Bizzare=25]="Bizzare",t[t.PlanetX=26]="PlanetX",t[t.Haunted=27]="Haunted"}(e.AmbientGenericPreset||(e.AmbientGenericPreset={})),function(t){t[t.PlayEverywhere=1]="PlayEverywhere",t[t.SmallRadius=2]="SmallRadius",t[t.MediumRadius=4]="MediumRadius",t[t.LargeRadius=8]="LargeRadius",t[t.StartSilent=16]="StartSilent",t[t.NotToggled=32]="NotToggled"}(e.AmbientGenericSpawnFlags||(e.AmbientGenericSpawnFlags={})),function(t){t[t.UseActivates=1]="UseActivates",t[t.StartOn=2]="StartOn"}(e.ButtonTargetSpawnFlags||(e.ButtonTargetSpawnFlags={})),function(t){t[t.NoTrigger=0]="NoTrigger",t[t.SeePlayerMadAtPlayer=1]="SeePlayerMadAtPlayer",t[t.TakeDamage=2]="TakeDamage",t[t.HalfHealthRemaining=3]="HalfHealthRemaining",t[t.Death=4]="Death",t[t.HearWorld=7]="HearWorld",t[t.HearPlayer=8]="HearPlayer",t[t.HearCombat=9]="HearCombat",t[t.SeePlayerUnconditional=10]="SeePlayerUnconditional",t[t.SeePlayerNotInCombat=11]="SeePlayerNotInCombat"}(e.CyclerWeaponTriggerCondition||(e.CyclerWeaponTriggerCondition={})),function(t){t[t.StartOn=1]="StartOn",t[t.Toggle=2]="Toggle",t[t.RandomStrike=4]="RandomStrike",t[t.Ring=8]="Ring",t[t.StartSparks=16]="StartSparks",t[t.EndSparks=32]="EndSparks",t[t.DecalEnd=64]="DecalEnd",t[t.FadeStart=128]="FadeStart",t[t.FadeEnd=256]="FadeEnd"}(e.EnvBeamSpawnFlags||(e.EnvBeamSpawnFlags={})),function(t){t[t.Normal=0]="Normal",t[t.EmbeddedFix=1]="EmbeddedFix",t[t.OpaqueBlockLight=2]="OpaqueBlockLight",t[t.OpaqueEmbeddedFix=3]="OpaqueEmbeddedFix",t[t.OpaqueConcaveFix=6]="OpaqueConcaveFix"}(e.ZHLTLightFlags||(e.ZHLTLightFlags={})),function(t){t[t.Normal=0]="Normal",t[t.SlowPulse=1]="SlowPulse",t[t.FastPulse=2]="FastPulse",t[t.SlowWidePulse=3]="SlowWidePulse",t[t.FastWidePulse=4]="FastWidePulse",t[t.SlowFadeAway=5]="SlowFadeAway",t[t.FastFadeAway=6]="FastFadeAway",t[t.SlowBecomeSolid=7]="SlowBecomeSolid",t[t.FastBecomeSolid=8]="FastBecomeSolid",t[t.SlowStrobe=9]="SlowStrobe",t[t.FastStrobe=10]="FastStrobe",t[t.FasterStrobe=11]="FasterStrobe",t[t.SlowFlicker=12]="SlowFlicker",t[t.FastFlicker=13]="FastFlicker",t[t.ConstantGlow=14]="ConstantGlow",t[t.DistortModels=15]="DistortModels",t[t.HologramDistort=16]="HologramDistort"}(e.RenderEffect||(e.RenderEffect={})),function(t){t[t.Normal=0]="Normal",t[t.Color=1]="Color",t[t.Texture=2]="Texture",t[t.Glow=3]="Glow",t[t.Solid=4]="Solid",t[t.Additive=5]="Additive"}(e.RenderMode||(e.RenderMode={}));const n=t=>t.split(" ").map(t=>parseFloat(t)),r={worldspawn:t=>({classname:"worldspawn",wad:t.wad.split(";").filter(t=>t.length).map(t=>t.replace(/\\/g,"/")),mapversion:parseInt(t.mapversion),skyname:t.skyname,maxRange:parseFloat(t.MaxRange)||8192,message:t.message||"",sounds:parseInt(t.sounds)||0,light:parseInt(t.light)||0,waveHeight:parseFloat(t.WaveHeight)||0,startDark:parseInt(t.startdark)||0,newUnit:parseInt(t.newunit)||0,defaultTeam:parseInt(t.defaultteam)||0,gameTitle:parseInt(t.gametitle)||0}),aiscripted_sequence:t=>({classname:"aiscripted_sequence",spawnflags:parseInt(t.spawnflags),m_iszEntity:t.m_iszEntity,m_iszPlay:t.m_iszPlay||"",m_flRadius:parseInt(t.m_flRadius)||512,m_flRepeat:parseInt(t.m_flRepeat)||0,m_fMoveTo:parseInt(t.m_fMoveTo)||0,m_iFinishSchedule:parseInt(t.m_iFinishSchedule)||0}),ambient_generic:t=>({classname:"ambient_generic",origin:n(t.origin),targetName:t.targetname,message:t.message,health:parseInt(t.health)||10,preset:parseInt(t.preset)||0,startVolume:parseInt(t.volstart)||0,fadeIn:parseInt(t.fadein),fadeOut:parseInt(t.fadeout),pitch:parseInt(t.pitch),pitchStart:parseInt(t.pitchstart),spinUp:parseInt(t.spinup),spinDown:parseInt(t.spindown),lfoType:parseInt(t.lfotype),lfoRate:parseInt(t.lforate),lfoModPitch:parseInt(t.lfomodpitch),lfoModVolume:parseInt(t.lfomodvolume),cSpinUp:parseInt(t.cspinup),spawnFlags:parseInt(t.spawnflags)}),ammo_357:t=>({classname:"ammo_357",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_9mmAR:t=>({classname:"ammo_9mmAR",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_9mmbox:t=>({classname:"ammo_9mmbox",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_9mmclip:t=>({classname:"ammo_9mmclip",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_ARgrenades:t=>({classname:"ammo_ARgrenades",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_buckshot:t=>({classname:"ammo_buckshot",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_crossbow:t=>({classname:"ammo_crossbow",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_gaussclip:t=>({classname:"ammo_gaussclip",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_rpgclip:t=>({classname:"ammo_rpgclip",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),button_target:t=>({classname:"button_target",target:t.target,master:t.master,renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0"),zhltLightFlags:parseInt(t.zhlt_lightflags)||0,lightOrigin:t.light_origin,spawnFlags:parseInt(t.spawnflags)||1}),cycler:t=>({classname:"cycler",origin:n(t.origin),angles:n(t.angles),targetName:t.targetname,model:t.model,sequence:t.sequence||"",renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0")}),cycler_sprite:t=>({classname:"cycler_sprite",origin:n(t.origin),angles:n(t.angles),targetName:t.targetname,model:t.model,framerate:parseInt(t.framerate||"10"),renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0")}),cyclear_weapon:t=>({classname:"cycler_weapon",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname,triggerTarget:t.TriggerTarget||"",triggerCondition:parseInt(t.TriggerCondition)||0,model:t.model,sequence:t.sequence,renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0")}),cyclear_wreckage:t=>({classname:"cycler_wreckage",origin:n(t.origin),angles:n(t.angles),targetName:t.targetname,model:t.model,framerate:parseInt(t.framerate)||10,scale:parseFloat(t.scale)||1,renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0")}),env_beam:t=>({classname:"env_beam",renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0"),radius:parseFloat(t.Radius)||256,life:parseInt(t.life)||1,boltWidth:parseInt(t.BoltWidth)||20,noiseAmplitude:parseInt(t.NoiseAmplitude)||0,texture:t.texture||"sprites/laserbeam.spr",textureScroll:parseInt(t.TextureScroll)||35,frameRate:parseInt(t.framerate)||0,frameStart:parseInt(t.framestart)||0,strikeTime:parseInt(t.StrikeTime)||1,damage:parseInt(t.damage)||1,spawnFlags:parseInt(t.spawnflags)})};e.BspEntityParser=class{static parse(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];i.classname||e.push({classname:"!",data:i}),r[i.classname]?e.push(r[i.classname](i)):e.push({classname:"?",originalClassname:i.classname,data:i})}return e}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resizeTexture=(t,e,n,r,i)=>{const o=document.createElement("canvas"),a=o.getContext("2d");if(!a)throw new Error("Runtime error.");o.width=e,o.height=n;const s=document.createElement("canvas"),u=s.getContext("2d");if(!u)throw new Error("Runtime error.");s.width=r,s.height=i;const c=a.createImageData(e,n);for(let r=0;r<e*n*4;r+=4)c.data[r]=t[r],c.data[r+1]=t[r+1],c.data[r+2]=t[r+2],c.data[r+3]=t[r+3];return a.putImageData(c,0,0),u.drawImage(o,0,0,r,i),new Uint8Array(u.getImageData(0,0,r,i).data)},e.isPowerOfTwo=t=>0==(t&t-1),e.nextPowerOfTwo=t=>{--t;for(let e=1;32>e;e<<=1)t|=t>>e;return t+1}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{static init(t){return new n("string"==typeof t?{paths:{base:t,replays:`${t}/replays`,maps:`${t}/maps`,wads:`${t}/wads`,skies:`${t}/skies`,sounds:`${t}/sounds`}}:{paths:{base:t&&t.paths&&t.paths.base||"",replays:t&&t.paths&&t.paths.replays||"/replays",maps:t&&t.paths&&t.paths.maps||"/maps",wads:t&&t.paths&&t.paths.wads||"/wads",skies:t&&t.paths&&t.paths.skies||"/skies",sounds:t&&t.paths&&t.paths.sounds||"/sounds"}})}constructor(t){this.paths=Object.assign({},t.paths)}getBasePath(){return this.paths.base}getReplaysPath(){return this.paths.replays}getMapsPath(){return this.paths.maps}getWadsPath(){return this.paths.wads}getSkiesPath(){return this.paths.skies}getSoundsPath(){return this.paths.sounds}}e.Config=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(62);e.PlayerInterface=class{constructor(t){this.game=t}getRootNode(){return this.rootNode}draw(t){const e=document.querySelector(t);e&&(this.rootNode=e,r.render(r.h(i.Root,{game:this.game,root:this.rootNode}),e))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(63),o=n(65),a=n(69),s=n(25),u=n(12),c=n(83);e.Root=class extends r.Component{constructor(t){super(t),this.fadeOut=0,this.onPointerLockChange=()=>{this.props.game.pointerLocked=!(document.pointerLockElement!==this.props.root)},this.onContextMenu=t=>{t.preventDefault()},this.onWindowClick=()=>{this.setState({isActive:!1})},this.onRootClick=t=>{t.stopPropagation(),this.setState({isActive:!0}),this.fadeReset()},this.onKeyDown=t=>{if(this.state.isActive){const e=this.props.game;switch(t.which){case 70:s.Fullscreen.isInFullscreen()?s.Fullscreen.exit():s.Fullscreen.enter(this.props.root),this.fadeReset();break;case 77:e.soundSystem.toggleMute(),this.fadeReset();break;case 38:e.soundSystem.setVolume(e.soundSystem.getVolume()+.05),this.fadeReset();break;case 40:e.soundSystem.setVolume(e.soundSystem.getVolume()-.05),this.fadeReset();break;case 74:case 37:e.player.seek(e.player.currentTime-5),this.fadeReset();break;case 76:case 39:e.player.seek(e.player.currentTime+5),this.fadeReset();break;case 75:case 32:if(this.props.game.mode!==u.PlayerMode.REPLAY)return;!e.player.isPlaying||e.player.isPaused?e.player.play():e.player.pause()}}},this.onModeChange=()=>{this.forceUpdate()},this.onLoadStart=()=>{this.setState({isLoading:!0})},this.onLoadEnd=()=>{this.setState({isLoading:!1})},this.onTitleChange=t=>{this.setState({title:t})},this.onMouseEnter=()=>{this.setState({isMouseOver:!0}),this.fadeReset()},this.onMouseMove=()=>{this.state.isMouseOver&&!s.Fullscreen.isInFullscreen()&&this.fadeReset()},this.onMouseLeave=()=>{this.setState({isMouseOver:!1,isVisible:!1}),clearTimeout(this.fadeOut),this.fadeOut=0},this.fadeReset=()=>{this.state.isVisible||this.setState({isVisible:!0}),clearTimeout(this.fadeOut),this.fadeOut=setTimeout(()=>{this.setState({isVisible:!1}),this.fadeOut=0},5e3)},this.onScreenClick=()=>{switch(this.props.game.mode){case u.PlayerMode.REPLAY:{const t=this.props.game.player;!t.isPlaying||t.isPaused?t.play():t.pause();break}case u.PlayerMode.FREE:this.props.root.requestPointerLock()}},this.onScreenDblClick=()=>{s.Fullscreen.isInFullscreen()?s.Fullscreen.exit():s.Fullscreen.enter(this.props.root)},this.state={title:t.game.title,isActive:!1,isLoading:!1,isMouseOver:!1,isVisible:!1}}componentDidMount(){if(this.node){const t=this.props.game,e=this.props.root;this.node.appendChild(t.getCanvas()),t.on("loadstart",this.onLoadStart),t.on("load",this.onLoadEnd),t.on("modechange",this.onModeChange),t.on("titlechange",this.onTitleChange),e.addEventListener("click",this.onRootClick),window.addEventListener("click",this.onWindowClick),window.addEventListener("keydown",this.onKeyDown),document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),e.addEventListener("mouseover",this.onMouseEnter),e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mouseout",this.onMouseLeave),e.addEventListener("contextmenu",this.onContextMenu)}}componentWillUnmount(){const t=this.props.game,e=this.props.root;t.off("loadstart",this.onLoadStart),t.off("load",this.onLoadEnd),t.off("modechange",this.onModeChange),t.off("titlechange",this.onTitleChange),e.removeEventListener("click",this.onRootClick),window.removeEventListener("click",this.onWindowClick),window.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),e.removeEventListener("mouseover",this.onMouseEnter),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mouseout",this.onMouseLeave),e.removeEventListener("contextmenu",this.onContextMenu)}render(){const t=this.props.game,e=this.state.isVisible;return r.h("div",{class:e?c.RootStyle.rootVisible:c.RootStyle.root},r.h("div",{class:e?c.RootStyle.titleVisible:c.RootStyle.title},this.state.title),r.h(i.Loading,{game:t,visible:this.state.isLoading}),r.h("div",{class:c.RootStyle.screen,ref:t=>this.node=t,onClick:this.onScreenClick,onDblClick:this.onScreenDblClick}),t.mode===u.PlayerMode.FREE?r.h(o.FreeMode,{class:e?c.RootStyle.controlsVisible:c.RootStyle.controls,game:t,root:this.props.root}):r.h(a.ReplayMode,{class:e?c.RootStyle.controlsVisible:c.RootStyle.controls,game:t,root:this.props.root,visible:this.state.isMouseOver}))}}},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const i=r(4),o=r(64),a={replay:"Replay",bsp:"Map",sound:"Sounds",sky:"Skybox",sprite:"Sprites",wad:"Wads"};n.Loading=class extends i.Component{constructor(){super(...arguments),this.state={items:{}},this.onItemLoad=t=>{const e=this.state.items[t.type]?this.state.items[t.type]:[];for(let n=0;n<e.length;++n)if(e[n]===t)return;e.push({name:t.name,progress:0}),this.setState({items:Object.assign({},this.state.items,{[t.type]:e})})},this.onItemProgress=t=>{if(this.state.items[t.type]){const e=this.state.items[t.type];for(let n=0;n<e.length;++n)if(e[n].name===t.name){e[n].progress=t.progress;break}this.forceUpdate()}}}componentDidMount(){const t=this.props.game.loader;t.addLoadStartListener(this.onItemLoad),t.addProgressListener(this.onItemProgress)}componentWillUnmount(){const t=this.props.game.loader;t.removeLoadStartListener(this.onItemLoad),t.removeProgressListener(this.onItemProgress)}formatItem(e,n){e=a[e];const r=t(100*n)+"%";let i=29-e.length-r.length;return 2>i&&(i=9-r.length),`${e}${Array(i).join(".")}${r}`}render(){return i.h("div",{class:this.props.visible?o.LoadingStyle.loading:o.LoadingStyle.loadingHidden},i.h("div",{class:o.LoadingStyle.spinner},i.h("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"80px",height:"80px",viewBox:"0 0 80 80",xmlSpace:"preserve"},i.h("path",{fill:"#ffffff",width:"10px",d:"M40,72C22.4,72,8,57.6,8,40C8,22.4,22.4,8,40,8c17.6,0,32,14.4,32,32c0,1.1-0.9,2-2,2s-2-0.9-2-2c0-15.4-12.6-28-28-28S12,24.6,12,40s12.6,28,28,28c1.1,0,2,0.9,2,2S41.1,72,40,72z"}))),i.h("ul",{class:o.LoadingStyle.log},Object.entries(this.state.items).map(([t,e])=>i.h("li",{key:t,class:o.LoadingStyle.logItem},this.formatItem(t,e.reduce((t,e)=>t+e.progress,0)/e.length)))))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.LoadingStyle=r.stylesheet({loading:Object.assign({},{position:"relative",width:"100%",height:"100%",opacity:1,transition:"opacity 2s ease, z-index 1s linear",zIndex:30}),loadingHidden:Object.assign({},{position:"relative",width:"100%",height:"100%",opacity:1,transition:"opacity 2s ease, z-index 1s linear",zIndex:30},{opacity:0,userSelect:"none",zIndex:0}),spinner:{position:"absolute",left:"50%",top:"50%",marginLeft:"-40px",marginTop:"-40px",animation:"rotate 1s linear 0s infinite",height:"80px",width:"80px",animationName:r.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}})},log:{position:"absolute",background:"rgba(0,0,0,0.4)",padding:"10px",fontFamily:"monospace",margin:"0",top:"16px",right:0,paddingLeft:"16px",listStyle:"none"},logItem:{display:"block"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(3),o=n(66),a=n(5),s=n(23),u=n(24);e.FreeMode=function(t){return r.h("div",{class:i.classes(t.class,o.FreeModeStyle.controls)},r.h("div",{class:a.ControlsStyle.buttons},r.h("div",{class:a.ControlsStyle.left}),r.h("div",{class:a.ControlsStyle.right},r.h(s.SettingsButton,{game:t.game}),r.h(u.FullscreenButton,{active:!1,root:t.root}))))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.FreeModeStyle=r.stylesheet({controls:{height:"44px"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.SettingsButtonStyle=r.stylesheet({settings:{position:"relative"},menu:Object.assign({},{display:"none",position:"absolute",left:"-38px",bottom:"48px",padding:"2px 6px",fontSize:"14px",backgroundColor:"rgba(0, 0, 0, 0.4)",flexFlow:"column",minWidth:"100px"}),menuOpen:Object.assign({},{display:"none",position:"absolute",left:"-38px",bottom:"48px",padding:"2px 6px",fontSize:"14px",backgroundColor:"rgba(0, 0, 0, 0.4)",flexFlow:"column",minWidth:"100px"},{display:"flex"}),menuItemTitle:{padding:"6px 4px",borderBottom:"1px solid white",fontWeight:"bold"},menuItem:Object.assign({},{cursor:"pointer",margin:"4px 0",padding:"4px",$nest:{"&:last-child":{marginTop:0},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}}),menuItemSelected:Object.assign({},{cursor:"pointer",margin:"4px 0",padding:"4px",$nest:{"&:last-child":{marginTop:0},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}},{backgroundColor:"rgba(255, 255, 255, 0.2) !important"}),button:{width:"32px",height:"32px",padding:"5px"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.FullscreenButtonStyle=r.stylesheet({button:{width:"30px",minWidth:"30px",height:"30px",padding:"5px"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(70),o=n(72),a=n(74),s=n(76),u=n(77),c=n(78),f=n(80),l=n(81),d=n(23),h=n(24),p=n(5);e.ReplayMode=class extends r.Component{constructor(){super(...arguments),this.onPlayClick=()=>{this.props.game.player.play()},this.onPauseClick=()=>{this.props.game.player.pause()},this.onSpeedDown=()=>{this.props.game.player.speedDown()},this.onSpeedUp=()=>{this.props.game.player.speedUp()},this.onVolumeClick=()=>{this.props.game.soundSystem.toggleMute()},this.onPlayStateChange=()=>{this.forceUpdate()}}componentDidMount(){this.props.game.player.on("play",this.onPlayStateChange),this.props.game.player.on("pause",this.onPlayStateChange),this.props.game.player.on("stop",this.onPlayStateChange)}componentWillUnmount(){this.props.game.player.off("play",this.onPlayStateChange),this.props.game.player.off("pause",this.onPlayStateChange),this.props.game.player.off("stop",this.onPlayStateChange)}render(){const t=this.props.game,e=t.player,n=e.isPlaying,g=e.isPaused;return r.h("div",{class:this.props.class},r.h(o.TimeLine,{game:t}),r.h("div",{class:p.ControlsStyle.buttons},r.h("div",{class:p.ControlsStyle.left},r.h(l.SpeedDownButton,{onClick:this.onSpeedDown}),g||!n?r.h(s.PlayButton,{onClick:this.onPlayClick}):r.h(u.PauseButton,{onClick:this.onPauseClick}),r.h(f.SpeedUpButton,{onClick:this.onSpeedUp}),r.h(c.VolumeButton,{onClick:this.onVolumeClick}),r.h(a.VolumeControl,{game:t}),r.h(i.Time,{player:e})),r.h("div",{class:p.ControlsStyle.right},r.h(d.SettingsButton,{game:t}),r.h(h.FullscreenButton,{active:!0,root:this.props.root}))))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(17),o=n(71);e.Time=class extends r.Component{constructor(){super(...arguments),this.onPlay=()=>{this.setState({isPlaying:!0},this.update)},this.onPauseOrStop=()=>{this.setState({isPlaying:!1})},this.update=()=>{this.state.isPlaying&&(this.forceUpdate(),setTimeout(this.update,100))}}componentDidMount(){this.props.player.events.on("play",this.onPlay),this.props.player.events.on("pause",this.onPauseOrStop),this.props.player.events.on("stop",this.onPauseOrStop)}componentWillUnmount(){this.props.player.events.removeListener("play",this.onPlay),this.props.player.events.removeListener("pause",this.onPauseOrStop),this.props.player.events.removeListener("stop",this.onPauseOrStop)}render(){const t=i.formatTime(this.props.player.currentTime),e=i.formatTime(this.props.player.replay.length);return r.h("div",{class:o.Time.time},t," / ",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.Time=r.stylesheet({time:{fontFamily:"'Roboto', Arial, Helvetica, sans-serif",fontSize:"10pt"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(73);e.TimeLine=class extends r.Component{constructor(t){super(t),this.onPostUpdate=()=>{const t=this.props.game.player;this.setState({progress:t.currentTime/t.replay.length})},this.onClick=t=>{const e=t.currentTarget.getClientRects()[0],n=1-(e.right-t.pageX)/(e.right-e.left);this.props.game.player.seekByPercent(100*n),this.props.game.player.pause()},this.onMouseEnter=()=>{this.setState({ghostKnobActive:!0})},this.onMouseMove=t=>{if(this.state.ghostKnobActive){const e=t.currentTarget.getClientRects()[0],n=1-(e.right-t.pageX)/(e.right-e.left);this.setState({ghostKnobPos:100*n+"%"})}},this.onMouseLeave=()=>{this.setState({ghostKnobActive:!1})},this.state={progress:0,ghostKnobActive:!1,ghostKnobPos:"0%"}}componentDidMount(){this.props.game.on("postupdate",this.onPostUpdate)}componentWillUnmount(){this.props.game.off("postupdate",this.onPostUpdate)}render(){const t=100*this.state.progress;return r.h("div",{class:i.TimeLine.timeline,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},r.h("div",{class:i.TimeLine.ghostLine}),r.h("div",{class:i.TimeLine.line,style:{right:100-t+"%"}}),r.h("div",{class:i.TimeLine.knob,style:{left:t+"%"}}),r.h("div",{class:i.TimeLine.ghostKnob,style:{left:this.state.ghostKnobPos}}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.TimeLine=r.stylesheet({timeline:{display:"flex",alignItems:"center",position:"relative",height:"26px",cursor:"pointer"},line:{height:"4px",backgroundColor:"#fff",position:"absolute",left:"0",right:"0",borderRadius:"2px"},ghostLine:{height:"4px",backgroundColor:"rgba(255, 255, 255, 0.5)",position:"absolute",left:"0",right:"0",borderRadius:"2px"},knob:{position:"absolute",width:"12px",height:"12px",backgroundColor:"#fff",borderRadius:"6px",left:"100%",marginLeft:"-6px"},ghostKnob:{position:"absolute",width:"8px",height:"8px",backgroundColor:"#fff",boxSizing:"border-box",borderRadius:"8px",left:"0",marginLeft:"-4px",display:"none",$nest:{"&:hover":{display:"block"}}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(75);e.VolumeControl=class extends r.Component{constructor(t){super(t),this.onVolumeChange=()=>{this.setState({volume:this.props.game.soundSystem.getVolume()})},this.onClick=t=>{const e=t.currentTarget.getClientRects()[0],n=1-(e.right-t.pageX)/(e.right-e.left);this.props.game.soundSystem.setVolume(n)},this.onMouseEnter=()=>{this.setState({ghostKnobActive:!0})},this.onMouseMove=t=>{if(this.state.ghostKnobActive){const e=t.currentTarget.getClientRects()[0],n=1-(e.right-t.pageX)/(e.right-e.left),r=u(95,l(5,100*n))+"%";this.setState({ghostKnobPos:r})}},this.onMouseLeave=()=>{this.setState({ghostKnobActive:!1})},this.state={volume:t.game.soundSystem.getVolume(),ghostKnobActive:!1,ghostKnobPos:"5%"}}componentDidMount(){this.props.game.soundSystem.events.on("volumeChange",this.onVolumeChange)}componentWillUnmount(){this.props.game.soundSystem.events.removeListener("volumeChange",this.onVolumeChange)}render(){const t=100*this.state.volume,e=u(95,l(5,t))+"%",n=u(95,l(5,100-t))+"%";return r.h("div",{class:i.VolumeControl.control,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},r.h("div",{class:i.VolumeControl.ghostLine}),r.h("div",{class:i.VolumeControl.line,style:{right:n}}),r.h("div",{class:i.VolumeControl.knob,style:{left:e}}),r.h("div",{class:i.VolumeControl.ghostKnob,style:{left:this.state.ghostKnobPos}}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.VolumeControl=r.stylesheet({control:{display:"flex",alignItems:"center",position:"relative",width:"80px",height:"26px",marginLeft:"6px",marginRight:"14px",cursor:"pointer"},line:{height:"4px",backgroundColor:"#fff",position:"absolute",left:"0",right:"0",borderRadius:"2px"},ghostLine:{height:"4px",backgroundColor:"rgba(255, 255, 255, 0.5)",position:"absolute",left:"0",right:"0",borderRadius:"2px"},knob:{position:"absolute",width:"12px",height:"12px",backgroundColor:"#fff",borderRadius:"6px",left:"100%",marginLeft:"-6px"},ghostKnob:{position:"absolute",width:"8px",height:"8px",backgroundColor:"#fff",boxSizing:"border-box",borderRadius:"8px",left:"0",marginLeft:"-4px",display:"none",$nest:{"&:hover":{display:"block"}}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(5);e.PlayButton=function(t){return r.h("div",{class:i.ControlsStyle.button,onClick:t.onClick},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 0 L0 64 L64 32 Z"})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(5);e.PauseButton=function(t){return r.h("div",{class:i.ControlsStyle.button,onClick:t.onClick},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 0 L0 64 L20 64 L20 0 M44 0 L64 0 L64 64 L44 64 Z"})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(3),o=n(79),a=n(5);e.VolumeButton=function(t){return r.h("div",{class:i.classes(a.ControlsStyle.button,o.VolumeButton.button),onClick:t.onClick},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"currentcolor"},r.h("path",{d:"M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.VolumeButton=r.stylesheet({button:{width:"28px",height:"28px",padding:"2px",marginRight:"5px"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(5);e.SpeedUpButton=function(t){return r.h("div",{class:i.ControlsStyle.button,onClick:t.onClick},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 0 L0 64 L32 32 L32 64 L64 32 L32 0 L32 32 Z"})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(3),o=n(82),a=n(5);e.SpeedDownButton=function(t){return r.h("div",{class:i.classes(a.ControlsStyle.button,o.SpeedDownButtonStyle.button),onClick:t.onClick},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 0 L0 64 L32 32 L32 64 L64 32 L32 0 L32 32 Z"})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.SpeedDownButtonStyle=r.stylesheet({button:{transform:"rotate(180deg)"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.RootStyle=r.stylesheet({root:Object.assign({},{position:"relative",color:"white",width:"100%",height:"100%",cursor:"none",userSelect:"none"}),rootVisible:Object.assign({},{position:"relative",color:"white",width:"100%",height:"100%",cursor:"none",userSelect:"none"},{cursor:"default"}),title:Object.assign({},{position:"absolute",top:"20px",left:"0",zIndex:20,padding:"10px 10px 10px 20px",backgroundColor:"rgba(0, 0, 0, 0.4)",fontSize:"13pt",fontFamily:"'Roboto', Arial, Helvetica, sans-serif",opacity:0,transition:"opacity 0.2s"}),titleVisible:Object.assign({},{position:"absolute",top:"20px",left:"0",zIndex:20,padding:"10px 10px 10px 20px",backgroundColor:"rgba(0, 0, 0, 0.4)",fontSize:"13pt",fontFamily:"'Roboto', Arial, Helvetica, sans-serif",opacity:0,transition:"opacity 0.2s"},{opacity:1}),controls:Object.assign({},{zIndex:30,position:"absolute",width:"100%",bottom:0,padding:"0 16px",boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.4)",userSelect:"none",opacity:0,transition:"opacity 0.2s"}),controlsVisible:Object.assign({},{zIndex:30,position:"absolute",width:"100%",bottom:0,padding:"0 16px",boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.4)",userSelect:"none",opacity:0,transition:"opacity 0.2s"},{opacity:1}),screen:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10}})},function(t,r,i){"use strict";function o(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Tt,this.__views__=[]}function a(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function s(t){if(C(t)&&!B(t)&&!(t instanceof kt)){if(t instanceof Mt)return t;if(jt.call(t,"__wrapped__"))return Ot(t)}return new Mt(t)}function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function f(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function h(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(_n);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(h.Cache||bn),n}function p(t){var e=this.__data__=new mn(t);this.size=e.size}function g(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new bn;++e<n;)this.add(t[e])}function m(t,e){return null!=t&&e in Object(t)}function v(t,e,n){var r=ve(t,No,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=v.placeholder,r}function y(t,e,n){var r=ve(t,Fo,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=y.placeholder,r}function b(t,e,n,r,i,o){return q(t)&&q(e)&&(o.set(e,t),ea(t,e,void 0,b,o),o.delete(e)),t}i.r(r);var _=i(0),x=_.a.Symbol,w=Object.prototype,E=w.hasOwnProperty,S=w.toString,T=x?x.toStringTag:void 0,k=function(t){var e=E.call(t,T),n=t[T];try{t[T]=void 0}catch(e){}var r=S.call(t);return e?t[T]=n:delete t[T],r},A=Object.prototype.toString,R=function(t){return A.call(t)},I="[object Null]",L="[object Undefined]",P=x?x.toStringTag:void 0,M=function(t){return null==t?void 0===t?L:I:P&&P in Object(t)?k(t):R(t)},C=function(t){return null!=t&&"object"==typeof t},O=function(t){return"symbol"==typeof t||C(t)&&"[object Symbol]"==M(t)},j=function(t){return"number"==typeof t?t:O(t)?NaN:+t},N=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},B=Array.isArray,F=1/0,D=x?x.prototype:void 0,U=D?D.toString:void 0,W=function t(e){if("string"==typeof e)return e;if(B(e))return N(e,t)+"";if(O(e))return U?U.call(e):"";var n=e+"";return"0"==n&&1/e==-F?"-0":n},V=function(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=W(n),r=W(r)):(n=j(n),r=j(r)),i=t(n,r)}return i}},z=V(function(t,e){return t+e},0),q=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},G=/^\s+|\s+$/g,X=/^[-+]0x[0-9a-f]+$/i,H=/^0b[01]+$/i,$=/^0o[0-7]+$/i,K=parseInt,Y=function(t){if("number"==typeof t)return t;if(O(t))return NaN;if(q(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=q(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(G,"");var n=H.test(t);return n||$.test(t)?K(t.slice(2),n?2:8):X.test(t)?NaN:+t},Z=function(t){return t?(t=Y(t))===1/0||t===-1/0?17976931348623157e292*(0>t?-1:1):t==t?t:0:0===t?t:0},Q=function(t){var e=Z(t),n=e%1;return e==e?n?e-n:e:0},J=function(t,e){if("function"!=typeof e)throw new TypeError("Expected a function");return t=Q(t),function(){if(1>--t)return e.apply(this,arguments)}},tt=function(t){return t},et=function(t){if(!q(t))return!1;var e=M(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},nt=_.a["__core-js_shared__"],rt=function(){var t=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),it=Function.prototype.toString,ot=function(t){if(null!=t){try{return it.call(t)}catch(t){}try{return t+""}catch(t){}}return""},at=/^\[object .+?Constructor\]$/,st=Function.prototype,ut=Object.prototype,ct=st.toString,ft=ut.hasOwnProperty,lt=RegExp("^"+ct.call(ft).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=function(t){return!(!q(t)||function(t){return!!rt&&rt in t}(t))&&(et(t)?lt:at).test(ot(t))},ht=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return dt(n)?n:void 0},pt=ht(_.a,"WeakMap"),gt=pt&&new pt,mt=gt?function(t,e){return gt.set(t,e),t}:tt,vt=Object.create,yt=function(){function t(){}return function(e){if(!q(e))return{};if(vt)return vt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),bt=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=yt(t.prototype),r=t.apply(n,e);return q(r)?r:n}},_t=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},xt=function(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=l(o-a,0),f=Array(u+c),d=!r;++s<u;)f[s]=e[s];for(;++i<a;)(d||i<o)&&(f[n[i]]=t[i]);for(;c--;)f[s++]=t[i++];return f},wt=function(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,f=l(o-s,0),d=Array(f+c),h=!r;++i<f;)d[i]=t[i];for(var p=i;++u<c;)d[p+u]=e[u];for(;++a<s;)(h||i<o)&&(d[p+n[a]]=t[i++]);return d},Et=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r},St=function(){},Tt=4294967295;o.prototype=yt(St.prototype),o.prototype.constructor=o;var kt=o,At=function(){},Rt=gt?function(t){return gt.get(t)}:At,It={},Lt=Object.prototype.hasOwnProperty,Pt=function(t){for(var e=t.name+"",n=It[e],r=Lt.call(It,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e};a.prototype=yt(St.prototype),a.prototype.constructor=a;var Mt=a,Ct=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},Ot=function(t){if(t instanceof kt)return t.clone();var e=new Mt(t.__wrapped__,t.__chain__);return e.__actions__=Ct(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},jt=Object.prototype.hasOwnProperty;s.prototype=St.prototype,s.prototype.constructor=s;var Nt=s,Bt=function(t){var e=Pt(t),n=Nt[e];if("function"!=typeof n||!(e in kt.prototype))return!1;if(t===n)return!0;var r=Rt(n);return!!r&&t===r[0]},Ft=Date.now,Dt=function(t){var e=0,n=0;return function(){var r=Ft(),i=16-(r-n);if(n=r,0<i){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},Ut=Dt(mt),Wt=/\{\n\/\* \[wrapped with (.+)\] \*/,Vt=/,? & /,zt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qt=function(t){return function(){return t}},Gt=function(){try{var t=ht(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Xt=Dt(Gt?function(t,e){return Gt(t,"toString",{configurable:!0,enumerable:!1,value:qt(e),writable:!0})}:tt),Ht=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},$t=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1},Kt=function(t){return t!=t},Yt=function(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):$t(t,Kt,n)},Zt=function(t,e){return!!(null==t?0:t.length)&&-1<Yt(t,e,0)},Qt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Jt=function(t,e,n){var r=e+"";return Xt(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(1<n?"& ":"")+e[r],e=e.join(2<n?", ":" "),t.replace(zt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ht(Qt,function(n){var r="_."+n[0];e&n[1]&&!Zt(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(Wt);return e?e[1].split(Vt):[]}(r),n)))},te=function(t,e,n,r,i,o,a,s,u,c){var f=8&e;e|=f?32:64,4&(e&=~(f?64:32))||(e&=-4);var l=[t,e,i,f?o:void 0,f?a:void 0,f?void 0:o,f?void 0:a,s,u,c],d=n.apply(void 0,l);return Bt(t)&&Ut(d,l),d.placeholder=r,Jt(d,t,e)},ee=function(t){return t.placeholder},ne=/^(?:0|[1-9]\d*)$/,re=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ne.test(t))&&-1<t&&0==t%1&&t<e},ie=function(t,e){for(var n=t.length,r=u(e.length,n),i=Ct(t);r--;){var o=e[r];t[r]=re(o,n)?i[o]:void 0}return t},oe="__lodash_placeholder__",ae=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];(a===e||a===oe)&&(t[n]=oe,o[i++]=n)}return o},se=1,ue=2,ce=8,fe=16,le=128,de=512,he=function t(e,n,r,i,o,a,s,u,c,f){var l=n&le,d=n&se,h=n&ue,p=n&(ce|fe),g=n&de,m=h?void 0:bt(e);return function v(){for(var y=arguments.length,b=Array(y),x=y;x--;)b[x]=arguments[x];if(p)var w=ee(v),E=Et(b,w);if(i&&(b=xt(b,i,o,p)),a&&(b=wt(b,a,s,p)),y-=E,p&&y<f){var S=ae(b,w);return te(e,n,t,v.placeholder,r,b,S,u,c,f-y)}var T=d?r:this,k=h?T[e]:e;return y=b.length,u?b=ie(b,u):g&&1<y&&b.reverse(),l&&c<y&&(b.length=c),this&&this!==_.a&&this instanceof v&&(k=m||bt(k)),k.apply(T,b)}},pe="__lodash_placeholder__",ge=function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var s=e[3];if(s){var c=t[3];t[3]=c?xt(c,s,e[4]):s,t[4]=c?ae(t[3],pe):e[4]}return(s=e[5])&&(c=t[5],t[5]=c?wt(c,s,e[6]):s,t[6]=c?ae(t[5],pe):e[6]),(s=e[7])&&(t[7]=s),128&r&&(t[8]=null==t[8]?e[8]:u(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},me=l,ve=function(t,e,n,r,i,o,a,s){var u=2&e;if(!u&&"function"!=typeof t)throw new TypeError("Expected a function");var c=r?r.length:0;if(c||(e&=-97,r=i=void 0),a=void 0===a?a:me(Q(a),0),s=void 0===s?s:Q(s),c-=i?i.length:0,64&e){var f=r,l=i;r=i=void 0}var d=u?void 0:Rt(t),h=[t,e,n,r,i,f,l,o,a,s];if(d&&ge(h,d),t=h[0],e=h[1],n=h[2],r=h[3],i=h[4],!(s=h[9]=void 0===h[9]?u?0:t.length:me(h[9]-c,0))&&24&e&&(e&=-25),e&&1!=e)p=8==e||16==e?function(t,e,n){var r=bt(t);return function i(){for(var o=arguments.length,a=Array(o),s=o,u=ee(i);s--;)a[s]=arguments[s];var c=3>o&&a[0]!==u&&a[o-1]!==u?[]:ae(a,u);if((o-=c.length)<n)return te(t,e,he,i.placeholder,void 0,a,c,void 0,void 0,n-o);var f=this&&this!==_.a&&this instanceof i?r:t;return _t(f,this,a)}}(t,e,s):32!=e&&33!=e||i.length?he.apply(void 0,h):function(t,e,n,r){var i=1&e,o=bt(t);return function e(){for(var a=-1,s=arguments.length,u=-1,c=r.length,f=Array(c+s),l=this&&this!==_.a&&this instanceof e?o:t;++u<c;)f[u]=r[u];for(;s--;)f[u++]=arguments[++a];return _t(l,i?n:this,f)}}(t,e,n,r);else var p=function(t,e,n){var r=1&e,i=bt(t);return function e(){return(this&&this!==_.a&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Jt((d?mt:Ut)(p,h),t,e)},ye=function(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,ve(t,128,void 0,void 0,void 0,void 0,e)},be=function(t,e,n){"__proto__"==e&&Gt?Gt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},_e=function(t,e){return t===e||t!=t&&e!=e},xe=Object.prototype.hasOwnProperty,we=function(t,e,n){var r=t[e];xe.call(t,e)&&_e(r,n)&&(void 0!==n||e in t)||be(t,e,n)},Ee=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?be(n,s,u):we(n,s,u)}return n},Se=l,Te=function(t,e,n){return e=Se(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Se(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),_t(t,this,s)}},ke=function(t,e){return Xt(Te(t,e,tt),t+"")},Ae=function(t){return"number"==typeof t&&-1<t&&0==t%1&&t<=9007199254740991},Re=function(t){return null!=t&&Ae(t.length)&&!et(t)},Ie=function(t,e,n){if(!q(n))return!1;var r=typeof e;return!("number"==r?!Re(n)||!re(e,n.length):!("string"==r&&e in n))&&_e(n[e],t)},Le=function(t){return ke(function(e,n){var r=-1,i=n.length,o=1<i?n[i-1]:void 0,a=2<i?n[2]:void 0;for(o=3<t.length&&"function"==typeof o?(i--,o):void 0,a&&Ie(n[0],n[1],a)&&(o=3>i?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})},Pe=Object.prototype,Me=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Pe)},Ce=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},Oe=function(t){return C(t)&&"[object Arguments]"==M(t)},je=Object.prototype,Ne=je.hasOwnProperty,Be=je.propertyIsEnumerable,Fe=Oe(function(){return arguments}())?Oe:function(t){return C(t)&&Ne.call(t,"callee")&&!Be.call(t,"callee")},De=i(2),Ue={};Ue["[object Float32Array]"]=Ue["[object Float64Array]"]=Ue["[object Int8Array]"]=Ue["[object Int16Array]"]=Ue["[object Int32Array]"]=Ue["[object Uint8Array]"]=Ue["[object Uint8ClampedArray]"]=Ue["[object Uint16Array]"]=Ue["[object Uint32Array]"]=!0,Ue["[object Arguments]"]=Ue["[object Array]"]=Ue["[object ArrayBuffer]"]=Ue["[object Boolean]"]=Ue["[object DataView]"]=Ue["[object Date]"]=Ue["[object Error]"]=Ue["[object Function]"]=Ue["[object Map]"]=Ue["[object Number]"]=Ue["[object Object]"]=Ue["[object RegExp]"]=Ue["[object Set]"]=Ue["[object String]"]=Ue["[object WeakMap]"]=!1;var We=function(t){return function(e){return t(e)}},Ve=i(1),ze=Ve.a&&Ve.a.isTypedArray,qe=ze?We(ze):function(t){return C(t)&&Ae(t.length)&&!!Ue[M(t)]},Ge=Object.prototype.hasOwnProperty,Xe=function(t,e){var n=B(t),r=!n&&Fe(t),i=!n&&!r&&Object(De.a)(t),o=!n&&!r&&!i&&qe(t),a=n||r||i||o,s=a?Ce(t.length,String):[],u=s.length;for(var c in t)(e||Ge.call(t,c))&&(!a||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||re(c,u)))&&s.push(c);return s},He=function(t,e){return function(n){return t(e(n))}},$e=He(Object.keys,Object),Ke=Object.prototype.hasOwnProperty,Ye=function(t){if(!Me(t))return $e(t);var e=[];for(var n in Object(t))Ke.call(t,n)&&"constructor"!=n&&e.push(n);return e},Ze=function(t){return Re(t)?Xe(t):Ye(t)},Qe=Object.prototype.hasOwnProperty,Je=Le(function(t,e){if(Me(e)||Re(e))Ee(e,Ze(e),t);else for(var n in e)Qe.call(e,n)&&we(t,n,e[n])}),tn=Object.prototype.hasOwnProperty,en=function(t){if(!q(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Me(t),n=[];for(var r in t)("constructor"!=r||!e&&tn.call(t,r))&&n.push(r);return n},nn=function(t){return Re(t)?Xe(t,!0):en(t)},rn=Le(function(t,e){Ee(e,nn(e),t)}),on=Le(function(t,e,n,r){Ee(e,nn(e),t,r)}),an=Le(function(t,e,n,r){Ee(e,Ze(e),t,r)}),sn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,un=/^\w*$/,cn=function(t,e){if(B(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!O(t))||un.test(t)||!sn.test(t)||null!=e&&t in Object(e)},fn=ht(Object,"create"),ln=Object.prototype.hasOwnProperty,dn=Object.prototype.hasOwnProperty;c.prototype.clear=function(){this.__data__=fn?fn(null):{},this.size=0},c.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},c.prototype.get=function(t){var e=this.__data__;if(fn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ln.call(e,t)?e[t]:void 0},c.prototype.has=function(t){var e=this.__data__;return fn?void 0!==e[t]:dn.call(e,t)},c.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=fn&&void 0===e?"__lodash_hash_undefined__":e,this};var hn=c,pn=function(t,e){for(var n=t.length;n--;)if(_e(t[n][0],e))return n;return-1},gn=Array.prototype.splice;f.prototype.clear=function(){this.__data__=[],this.size=0},f.prototype.delete=function(t){var e=this.__data__,n=pn(e,t);return!(0>n)&&(n==e.length-1?e.pop():gn.call(e,n,1),--this.size,!0)},f.prototype.get=function(t){var e=this.__data__,n=pn(e,t);return 0>n?void 0:e[n][1]},f.prototype.has=function(t){return-1<pn(this.__data__,t)},f.prototype.set=function(t,e){var n=this.__data__,r=pn(n,t);return 0>r?(++this.size,n.push([t,e])):n[r][1]=e,this};var mn=f,vn=ht(_.a,"Map"),yn=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};d.prototype.clear=function(){this.size=0,this.__data__={hash:new hn,map:new(vn||mn),string:new hn}},d.prototype.delete=function(t){var e=yn(this,t).delete(t);return this.size-=e?1:0,e},d.prototype.get=function(t){return yn(this,t).get(t)},d.prototype.has=function(t){return yn(this,t).has(t)},d.prototype.set=function(t,e){var n=yn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var bn=d,_n="Expected a function";h.Cache=bn;var xn=h,wn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,En=/\\(\\)?/g,Sn=function(t){var e=xn(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(wn,function(t,n,r,i){e.push(r?i.replace(En,"$1"):n||t)}),e},function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}(),Tn=function(t){return null==t?"":W(t)},kn=function(t,e){return B(t)?t:cn(t,e)?[t]:Sn(Tn(t))},An=function(t){if("string"==typeof t||O(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Rn=function(t,e){for(var n=0,r=(e=kn(e,t)).length;null!=t&&n<r;)t=t[An(e[n++])];return n&&n==r?t:void 0},In=function(t,e,n){var r=null==t?void 0:Rn(t,e);return void 0===r?n:r},Ln=function(t,e){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=null==t?void 0:In(t,e[n]);return i},Pn=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Mn=x?x.isConcatSpreadable:void 0,Cn=function(t){return B(t)||Fe(t)||!!(Mn&&t&&t[Mn])},On=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=Cn),o||(o=[]);++a<s;){var u=e[a];0<n&&r(u)?1<n?t(u,n-1,r,i,o):Pn(o,u):!i&&(o[o.length]=u)}return o},jn=function(t){return(null==t?0:t.length)?On(t,1):[]},Nn=function(t){return Xt(Te(t,void 0,jn),t+"")},Bn=Nn(Ln),Fn=He(Object.getPrototypeOf,Object),Dn=Function.prototype,Un=Object.prototype,Wn=Dn.toString,Vn=Un.hasOwnProperty,zn=Wn.call(Object),qn=function(t){if(!C(t)||"[object Object]"!=M(t))return!1;var e=Fn(t);if(null===e)return!0;var n=Vn.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Wn.call(n)==zn},Gn=function(t){if(!C(t))return!1;var e=M(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!qn(t)},Xn=ke(function(t,e){try{return _t(t,void 0,e)}catch(e){return Gn(e)?e:new Error(e)}}),Hn=function(t,e){var n;if("function"!=typeof e)throw new TypeError("Expected a function");return t=Q(t),function(){return 0<--t&&(n=e.apply(this,arguments)),1>=t&&(e=void 0),n}},$n=ke(function(t,e,n){var r=1;if(n.length){var i=ae(n,ee($n));r|=32}return ve(t,r,e,n,i)});$n.placeholder={};var Kn=$n,Yn=Nn(function(t,e){return Ht(e,function(e){e=An(e),be(t,e,Kn(t[e],t))}),t}),Zn=ke(function(t,e,n){var r=3;if(n.length){var i=ae(n,ee(Zn));r|=32}return ve(e,r,t,n,i)});Zn.placeholder={};var Qn=Zn,Jn=function(t,e,n){var r=-1,i=t.length;0>e&&(e=-e>i?0:i+e),0>(n=n>i?i:n)&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o},tr=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Jn(t,e,n)},er=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff\ufe0e\ufe0f]/,nr=function(t){return er.test(t)},rr=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,ir=function(t){return nr(t)?function(t){return t.match(rr)||[]}(t):function(t){return t.split("")}(t)},or=function(t){return function(e){e=Tn(e);var n=nr(e)?ir(e):void 0,r=n?n[0]:e.charAt(0),i=n?tr(n,1).join(""):e.slice(1);return r[t]()+i}},ar=or("toUpperCase"),sr=function(t){return ar(Tn(t).toLowerCase())},ur=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},cr=function(t){return function(e){return null==t?void 0:t[e]}},fr=cr({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),lr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,dr=/[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]/g,hr=function(t){return(t=Tn(t))&&t.replace(lr,fr).replace(dr,"")},pr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mr="a-z\\xdf-\\xf6\\xf8-\\xff",vr="A-Z\\xc0-\\xd6\\xd8-\\xde",yr="\\d+",br="["+mr+"]",_r="[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000"+yr+"\\u2700-\\u27bf"+mr+vr+"]",xr="["+vr+"]",wr="(?:['’](?:d|ll|m|re|s|t|ve))?",Er="(?:['’](?:D|LL|M|RE|S|T|VE))?",Sr="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Tr="[\\ufe0e\\ufe0f]?",kr=RegExp([xr+"?"+br+"+"+wr+"(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)","(?:"+xr+"|"+_r+")+"+Er+"(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)",xr+"?(?:"+br+"|"+_r+")+"+wr,xr+"+"+Er,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yr,"(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+(Tr+Sr)+"(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+Tr+Sr+")*"].join("|"),"g"),Ar=function(t,e,n){return t=Tn(t),void 0===(e=n?void 0:e)?function(t){return gr.test(t)}(t)?function(t){return t.match(kr)||[]}(t):function(t){return t.match(pr)||[]}(t):t.match(e)||[]},Rr=/['’]/g,Ir=function(t){return function(e){return ur(Ar(hr(e).replace(Rr,"")),t,"")}},Lr=Ir(function(t,e,n){return e=e.toLowerCase(),t+(n?sr(e):e)}),Pr=function(){if(!arguments.length)return[];var t=arguments[0];return B(t)?t:[t]},Mr=_.a.isFinite,Cr=function(t){var e=Math[t];return function(t,n){if(t=Y(t),(n=null==n?0:u(Q(n),292))&&Mr(t)){var r=(Tn(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return+((r=(Tn(i)+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}},Or=Cr("ceil"),jr=function(t){var e=Nt(t);return e.__chain__=!0,e},Nr=function(t,e,r){e=(r?Ie(t,e,r):void 0===e)?1:l(Q(e),0);var i=null==t?0:t.length;if(!i||1>e)return[];for(var o=0,a=0,s=Array(n(i/e));o<i;)s[a++]=Jn(t,o,o+=e);return s},Br=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t},Fr=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=Y(n))==n?n:0),void 0!==e&&(e=(e=Y(e))==e?e:0),Br(Y(t),e,n)};p.prototype.clear=function(){this.__data__=new mn,this.size=0},p.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},p.prototype.get=function(t){return this.__data__.get(t)},p.prototype.has=function(t){return this.__data__.has(t)},p.prototype.set=function(t,e){var n=this.__data__;if(n instanceof mn){var r=n.__data__;if(!vn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new bn(r)}return n.set(t,e),this.size=n.size,this};var Dr=p,Ur=function(t,e){return t&&Ee(e,Ze(e),t)},Wr=function(t,e){return t&&Ee(e,nn(e),t)},Vr=i(10),zr=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o},qr=function(){return[]},Gr=Object.prototype.propertyIsEnumerable,Xr=Object.getOwnPropertySymbols,Hr=Xr?function(t){return null==t?[]:(t=Object(t),zr(Xr(t),function(e){return Gr.call(t,e)}))}:qr,$r=function(t,e){return Ee(t,Hr(t),e)},Kr=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Pn(e,Hr(t)),t=Fn(t);return e}:qr,Yr=function(t,e){return Ee(t,Kr(t),e)},Zr=function(t,e,n){var r=e(t);return B(t)?r:Pn(r,n(t))},Qr=function(t){return Zr(t,Ze,Hr)},Jr=function(t){return Zr(t,nn,Kr)},ti=ht(_.a,"DataView"),ei=ht(_.a,"Promise"),ni=ht(_.a,"Set"),ri="[object Map]",ii="[object Promise]",oi="[object Set]",ai="[object WeakMap]",si="[object DataView]",ui=ot(ti),ci=ot(vn),fi=ot(ei),li=ot(ni),di=ot(pt),hi=M;(ti&&hi(new ti(new ArrayBuffer(1)))!=si||vn&&hi(new vn)!=ri||ei&&hi(ei.resolve())!=ii||ni&&hi(new ni)!=oi||pt&&hi(new pt)!=ai)&&(hi=function(t){var e=M(t),n="[object Object]"==e?t.constructor:void 0,r=n?ot(n):"";if(r)switch(r){case ui:return si;case ci:return ri;case fi:return ii;case li:return oi;case di:return ai}return e});var pi=hi,gi=Object.prototype.hasOwnProperty,mi=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&gi.call(t,"index")&&(n.index=t.index,n.input=t.input),n},vi=_.a.Uint8Array,yi=function(t){var e=new t.constructor(t.byteLength);return new vi(e).set(new vi(t)),e},bi=/\w*$/,_i=x?x.prototype:void 0,xi=_i?_i.valueOf:void 0,wi=function(t,e){var n=e?yi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Ei=function(t,e,n){var r=t.constructor;return"[object ArrayBuffer]"===e?yi(t):"[object Boolean]"===e||"[object Date]"===e?new r(+t):"[object DataView]"===e?function(t,e){var n=e?yi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n):"[object Float32Array]"===e||"[object Float64Array]"===e||"[object Int8Array]"===e||"[object Int16Array]"===e||"[object Int32Array]"===e||"[object Uint8Array]"===e||"[object Uint8ClampedArray]"===e||"[object Uint16Array]"===e||"[object Uint32Array]"===e?wi(t,n):"[object Map]"===e?new r:"[object Number]"===e||"[object String]"===e?new r(t):"[object RegExp]"===e?function(t){var e=new t.constructor(t.source,bi.exec(t));return e.lastIndex=t.lastIndex,e}(t):"[object Set]"===e?new r:"[object Symbol]"===e?function(t){return xi?Object(xi.call(t)):{}}(t):void 0},Si=function(t){return"function"!=typeof t.constructor||Me(t)?{}:yt(Fn(t))},Ti=Ve.a&&Ve.a.isMap,ki=Ti?We(Ti):function(t){return C(t)&&"[object Map]"==pi(t)},Ai=Ve.a&&Ve.a.isSet,Ri=Ai?We(Ai):function(t){return C(t)&&"[object Set]"==pi(t)},Ii=1,Li=2,Pi=4,Mi="[object Arguments]",Ci="[object Function]",Oi="[object GeneratorFunction]",ji="[object Object]",Ni={};Ni[Mi]=Ni["[object Array]"]=Ni["[object ArrayBuffer]"]=Ni["[object DataView]"]=Ni["[object Boolean]"]=Ni["[object Date]"]=Ni["[object Float32Array]"]=Ni["[object Float64Array]"]=Ni["[object Int8Array]"]=Ni["[object Int16Array]"]=Ni["[object Int32Array]"]=Ni["[object Map]"]=Ni["[object Number]"]=Ni[ji]=Ni["[object RegExp]"]=Ni["[object Set]"]=Ni["[object String]"]=Ni["[object Symbol]"]=Ni["[object Uint8Array]"]=Ni["[object Uint8ClampedArray]"]=Ni["[object Uint16Array]"]=Ni["[object Uint32Array]"]=!0,Ni["[object Error]"]=Ni[Ci]=Ni["[object WeakMap]"]=!1;var Bi=function t(e,n,r,i,o,a){var s,u=n&Ii,c=n&Li;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!q(e))return e;var f=B(e);if(f){if(s=mi(e),!u)return Ct(e,s)}else{var l=pi(e),d=l==Ci||l==Oi;if(Object(De.a)(e))return Object(Vr.a)(e,u);if(l==ji||l==Mi||d&&!o){if(s=c||d?{}:Si(e),!u)return c?Yr(e,Wr(s,e)):$r(e,Ur(s,e))}else{if(!Ni[l])return o?e:{};s=Ei(e,l,u)}}a||(a=new Dr);var h=a.get(e);if(h)return h;a.set(e,s),Ri(e)?e.forEach(function(i){s.add(t(i,n,r,i,e,a))}):ki(e)&&e.forEach(function(i,o){s.set(o,t(i,n,r,o,e,a))});var p=n&Pi?c?Jr:Qr:c?keysIn:Ze,g=f?void 0:p(e);return Ht(g||e,function(i,o){g&&(i=e[o=i]),we(s,o,t(i,n,r,o,e,a))}),s},Fi=function(t){return Bi(t,4)},Di=function(t){return Bi(t,5)},Ui=function(t,e){return Bi(t,5,e="function"==typeof e?e:void 0)},Wi=function(t,e){return Bi(t,4,e="function"==typeof e?e:void 0)},Vi=function(){return new Mt(this.value(),this.__chain__)},zi=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},qi=function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Pn(B(n)?Ct(n):[n],On(e,1))};g.prototype.add=g.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},g.prototype.has=function(t){return this.__data__.has(t)};var Gi=g,Xi=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Hi=function(t,e){return t.has(e)},$i=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var f=-1,l=!0,d=2&n?new Gi:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var h=t[f],p=e[f];if(r)var g=a?r(p,h,f,e,t,o):r(h,p,f,t,e,o);if(void 0!==g){if(g)continue;l=!1;break}if(d){if(!Xi(e,function(t,e){if(!Hi(d,e)&&(h===t||i(h,t,n,r,o)))return d.push(e)})){l=!1;break}}else if(h!==p&&!i(h,p,n,r,o)){l=!1;break}}return o.delete(t),o.delete(e),l},Ki=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n},Yi=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},Zi=x?x.prototype:void 0,Qi=Zi?Zi.valueOf:void 0,Ji=1,to=Object.prototype.hasOwnProperty,eo="[object Arguments]",no="[object Array]",ro="[object Object]",io=Object.prototype.hasOwnProperty,oo=function(t,e,n,r,i,o){var a=B(t),s=B(e),u=a?no:pi(t),c=s?no:pi(e),f=(u=u==eo?ro:u)==ro,l=(c=c==eo?ro:c)==ro,d=u==c;if(d&&Object(De.a)(t)){if(!Object(De.a)(e))return!1;a=!0,f=!1}if(d&&!f)return o||(o=new Dr),a||qe(t)?$i(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new vi(t),new vi(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _e(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Ki;case"[object Set]":var u=1&r;if(s||(s=Yi),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var f=$i(s(t),s(e),r,i,o,a);return a.delete(t),f;case"[object Symbol]":if(Qi)return Qi.call(t)==Qi.call(e)}return!1}(t,e,u,n,r,i,o);if(!(1&n)){var h=f&&io.call(t,"__wrapped__"),p=l&&io.call(e,"__wrapped__");if(h||p){var g=h?t.value():t,m=p?e.value():e;return o||(o=new Dr),i(g,m,n,r,o)}}return!!d&&(o||(o=new Dr),function(t,e,n,r,i,o){var a=n&Ji,s=Qr(t),u=s.length;if(u!=Qr(e).length&&!a)return!1;for(var c,f=u;f--;)if(c=s[f],a?!(c in e):!to.call(e,c))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var d=!0;o.set(t,e),o.set(e,t);for(var h=a;++f<u;){var p=t[c=s[f]],g=e[c];if(r)var m=a?r(g,p,c,e,t,o):r(p,g,c,t,e,o);if(void 0===m?p!==g&&!i(p,g,n,r,o):!m){d=!1;break}h||(h="constructor"==c)}if(d&&!h){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,r,i,o))},ao=function t(e,n,r,i,o){return!(e!==n)||(null!=e&&null!=n&&(C(e)||C(n))?oo(e,n,r,i,t,o):e!=e&&n!=n)},so=1,uo=2,co=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],f=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var l=new Dr;if(r)var d=r(c,f,u,t,e,l);if(void 0===d?!ao(f,c,so|uo,r,l):!d)return!1}}return!0},fo=function(t){return t==t&&!q(t)},lo=function(t){for(var e=Ze(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,fo(i)]}return e},ho=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},po=function(t){var e=lo(t);return 1==e.length&&e[0][2]?ho(e[0][0],e[0][1]):function(n){return n===t||co(n,t,e)}},go=function(t,e,n){for(var r,i=-1,o=(e=kn(e,t)).length,a=!1;++i<o&&(r=An(e[i]),a=null!=t&&n(t,r));)t=t[r];return a||++i!=o?a:!!(o=null==t?0:t.length)&&Ae(o)&&re(r,o)&&(B(t)||Fe(t))},mo=function(t,e){return null!=t&&go(t,e,m)},vo=function(t,e){return cn(t)&&fo(e)?ho(An(t),e):function(n){var r=In(n,t);return void 0===r&&r===e?mo(n,t):ao(e,r,3)}},yo=function(t){return function(e){return null==e?void 0:e[t]}},bo=function(t){return cn(t)?yo(An(t)):function(t){return function(e){return Rn(e,t)}}(t)},_o=function(t){return"function"==typeof t?t:null==t?tt:"object"==typeof t?B(t)?vo(t[0],t[1]):po(t):bo(t)},xo=function(t){var e=null==t?0:t.length;return t=e?N(t,function(t){if("function"!=typeof t[1])throw new TypeError("Expected a function");return[_o(t[0]),t[1]]}):[],ke(function(n){for(var r,i=-1;++i<e;)if(r=t[i],_t(r[0],this,n))return _t(r[1],this,n)})},wo=function(t,e,n){var r=n.length;if(null==t)return!r;for(t=Object(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0},Eo=function(t){return function(t){var e=Ze(t);return function(n){return wo(n,t,e)}}(Bi(t,1))},So=function(t,e){return null==e||wo(t,e,Ze(e))},To=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r},ko=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}},Ao=ko(),Ro=function(t,e){return t&&Ao(t,e,Ze)},Io=function(t,e){return function(n,r){if(null==n)return n;if(!Re(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}},Lo=Io(Ro),Po=function(t,e,n,r){return Lo(t,function(t,i,o){e(r,t,n(t),o)}),r},Mo=function(t,e){return function(n,r){var i=B(n)?To:Po,o=e?e():{};return i(n,t,_o(r),o)}},Co=Object.prototype.hasOwnProperty,Oo=Mo(function(t,e,n){Co.call(t,n)?++t[n]:be(t,n,1)}),jo=function(t,e){var n=yt(t);return null==e?n:Ur(n,e)},No=8;v.placeholder={};var Bo=v,Fo=16;y.placeholder={};var Do=y,Uo=function(){return _.a.Date.now()},Wo="Expected a function",Vo=l,zo=u,qo=function(t,e,n){function r(e){var n=u,r=c;return u=c=void 0,p=e,l=t.apply(r,n)}function i(t){var n=t-h;return void 0===h||n>=e||0>n||m&&t-p>=f}function o(){var t=Uo();return i(t)?a(t):void(d=setTimeout(o,function(t){var n=e-(t-h);return m?zo(n,f-(t-p)):n}(t)))}function a(t){return d=void 0,v&&u?r(t):(u=c=void 0,l)}function s(){var t=Uo(),n=i(t);if(u=arguments,c=this,h=t,n){if(void 0===d)return function(t){return p=t,d=setTimeout(o,e),g?r(t):l}(h);if(m)return clearTimeout(d),d=setTimeout(o,e),r(h)}return void 0===d&&(d=setTimeout(o,e)),l}var u,c,f,l,d,h,p=0,g=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError(Wo);return e=Y(e)||0,q(n)&&(g=!!n.leading,f=(m="maxWait"in n)?Vo(Y(n.maxWait)||0,e):f,v="trailing"in n?!!n.trailing:v),s.cancel=function(){void 0!==d&&clearTimeout(d),p=0,u=h=c=d=void 0},s.flush=function(){return void 0===d?l:a(Uo())},s},Go=function(t,e){return null==t||t!=t?e:t},Xo=Object.prototype,Ho=Xo.hasOwnProperty,$o=ke(function(t,e){t=Object(t);var n=-1,r=e.length,i=2<r?e[2]:void 0;for(i&&Ie(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=nn(o),s=-1,u=a.length;++s<u;){var c=a[s],f=t[c];(void 0===f||_e(f,Xo[c])&&!Ho.call(t,c))&&(t[c]=o[c])}return t}),Ko=$o,Yo=function(t,e,n){(void 0===n||_e(t[e],n))&&(void 0!==n||e in t)||be(t,e,n)},Zo=function(t){return C(t)&&Re(t)},Qo=function(t,e){return"constructor"===e&&"function"==typeof t[e]||"__proto__"==e?void 0:t[e]},Jo=function(t){return Ee(t,nn(t))},ta=function(t,e,n,r,i,o,a){var s=Qo(t,n),u=Qo(e,n),c=a.get(u);if(c)Yo(t,n,c);else{var f=o?o(s,u,n+"",t,e,a):void 0,l=void 0===f;if(l){var d=B(u),h=!d&&Object(De.a)(u),p=!d&&!h&&qe(u);f=u,d||h||p?B(s)?f=s:Zo(s)?f=Ct(s):h?(l=!1,f=Object(Vr.a)(u,!0)):p?(l=!1,f=wi(u,!0)):f=[]:qn(u)||Fe(u)?(f=s,Fe(s)?f=Jo(s):(!q(s)||et(s))&&(f=Si(u))):l=!1}l&&(a.set(u,f),i(f,u,r,o,a),a.delete(u)),Yo(t,n,f)}},ea=function t(e,n,r,i,o){e===n||Ao(n,function(a,s){if(o||(o=new Dr),q(a))ta(e,n,s,r,t,i,o);else{var u=i?i(Qo(e,s),a,s+"",e,n,o):void 0;void 0===u&&(u=a),Yo(e,s,u)}},nn)},na=Le(function(t,e,n,r){ea(t,e,n,r)}),ra=na,ia=ke(function(t){return t.push(void 0,b),_t(ra,void 0,t)}),oa=ia,aa=function(t,e,n){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout(function(){t.apply(void 0,n)},e)},sa=ke(function(t,e){return aa(t,1,e)}),ua=sa,ca=ke(function(t,e,n){return aa(t,Y(e)||0,n)}),fa=ca,la=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},da=function(t,e,n,r){var i=-1,o=Zt,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=N(e,We(n))),r?(o=la,a=!1):e.length>=200&&(o=Hi,a=!1,e=new Gi(e));t:for(;++i<s;){var f=t[i],l=null==n?f:n(f);if(f=r||0!==f?f:0,a&&l==l){for(var d=c;d--;)if(e[d]===l)continue t;u.push(f)}else o(e,l,r)||u.push(f)}return u},ha=ke(function(t,e){return Zo(t)?da(t,On(e,1,Zo,!0)):[]}),pa=ha,ga=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},ma=ke(function(t,e){var n=ga(e);return Zo(n)&&(n=void 0),Zo(t)?da(t,On(e,1,Zo,!0),_o(n)):[]}),va=ma,ya=ke(function(t,e){var n=ga(e);return Zo(n)&&(n=void 0),Zo(t)?da(t,On(e,1,Zo,!0),void 0,n):[]}),ba=ya,_a=V(function(t,e){return t/e},1),xa=_a,wa=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:Q(e),Jn(t,0>e?0:e,r)):[]},Ea=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:Q(e),Jn(t,0,0>(e=r-e)?0:e)):[]},Sa=function(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Jn(t,r?0:o,r?o+1:i):Jn(t,r?o+1:0,r?i:o)},Ta=function(t,e){return t&&t.length?Sa(t,_o(e),!0,!0):[]},ka=function(t,e){return t&&t.length?Sa(t,_o(e),!0):[]},Aa=function(t){return"function"==typeof t?t:tt},Ra=function(t,e){return(B(t)?Ht:Lo)(t,Aa(e))},Ia=function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t},La=ko(!0),Pa=La,Ma=function(t,e){return t&&Pa(t,e,Ze)},Ca=Io(Ma,!0),Oa=Ca,ja=function(t,e){return(B(t)?Ia:Oa)(t,Aa(e))},Na=function(t,e,n){t=Tn(t),e=W(e);var r=t.length,i=n=void 0===n?r:Br(Q(n),0,r);return 0<=(n-=e.length)&&t.slice(n,i)==e},Ba=function(t){return function(e){var n=pi(e);return"[object Map]"==n?Ki(e):"[object Set]"==n?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(e):function(t,e){return N(e,function(e){return[e,t[e]]})}(e,t(e))}},Fa=Ba(Ze),Da=Fa,Ua=Ba(nn),Wa=Ua,Va=cr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),za=/[&<>"']/g,qa=RegExp(za.source),Ga=function(t){return(t=Tn(t))&&qa.test(t)?t.replace(za,Va):t},Xa=/[\\^$.*+?()[\]{}|]/g,Ha=RegExp(Xa.source),$a=function(t){return(t=Tn(t))&&Ha.test(t)?t.replace(Xa,"\\$&"):t},Ka=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0},Ya=function(t,e){var n=!0;return Lo(t,function(t,r,i){return n=!!e(t,r,i)}),n},Za=function(t,e,n){var r=B(t)?Ka:Ya;return n&&Ie(t,e,n)&&(e=void 0),r(t,_o(e))},Qa=function(t){return t?Br(Q(t),0,4294967295):0},Ja=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Ie(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for(0>(n=Q(n))&&(n=-n>i?0:i+n),0>(r=void 0===r||r>i?i:Q(r))&&(r+=i),r=n>r?0:Qa(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},ts=function(t,e){var n=[];return Lo(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n},es=function(t,e){return(B(t)?zr:ts)(t,_o(e))},ns=function(t){return function(e,n,r){var i=Object(e);if(!Re(e)){var o=_o(n);e=Ze(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return-1<a?i[o?e[a]:a]:void 0}},rs=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Q(n);return 0>i&&(i=l(r+i,0)),$t(t,_o(e),i)},is=ns(rs),os=function(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r},as=function(t,e){return os(t,_o(e),Ro)},ss=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=Q(n),i=0>n?l(r+i,0):u(i,r-1)),$t(t,_o(e),i,!0)},us=ns(ss),cs=function(t,e){return os(t,_o(e),Ma)},fs=function(t){return t&&t.length?t[0]:void 0},ls=function(t,e){var n=-1,r=Re(t)?Array(t.length):[];return Lo(t,function(t,i,o){r[++n]=e(t,i,o)}),r},ds=function(t,e){return(B(t)?N:ls)(t,_o(e))},hs=function(t,e){return On(ds(t,e),1)},ps=function(t,e){return On(ds(t,e),1/0)},gs=function(t,e,n){return n=void 0===n?1:Q(n),On(ds(t,e),n)},ms=function(t){return(null==t?0:t.length)?On(t,1/0):[]},vs=function(t,e){return(null==t?0:t.length)?(e=void 0===e?1:Q(e),On(t,e)):[]},ys=function(t){return ve(t,512)},bs=Cr("floor"),_s=function(t){return Nn(function(e){var n=e.length,r=n,i=Mt.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!a&&"wrapper"==Pt(o))var a=new Mt([],!0)}for(r=a?r:n;++r<n;){o=e[r];var s=Pt(o),u="wrapper"==s?Rt(o):void 0;a=u&&Bt(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[Pt(u[0])].apply(a,u[3]):1==o.length&&Bt(o)?a[s]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&B(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})},xs=_s(),ws=_s(!0),Es=function(t,e){return null==t?t:Ao(t,Aa(e),nn)},Ss=function(t,e){return null==t?t:Pa(t,Aa(e),nn)},Ts=function(t,e){return t&&Ro(t,Aa(e))},ks=function(t,e){return t&&Ma(t,Aa(e))},As=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Rs=function(t,e){return zr(e,function(e){return et(t[e])})},Is=function(t){return null==t?[]:Rs(t,Ze(t))},Ls=function(t){return null==t?[]:Rs(t,nn(t))},Ps=Object.prototype.hasOwnProperty,Ms=Mo(function(t,e,n){Ps.call(t,n)?t[n].push(e):be(t,n,[e])}),Cs=function(t,e){return t>e},Os=function(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Y(e),n=Y(n)),t(e,n)}},js=Os(Cs),Ns=Os(function(t,e){return t>=e}),Bs=Object.prototype.hasOwnProperty,Fs=function(t,e){return null!=t&&Bs.call(t,e)},Ds=function(t,e){return null!=t&&go(t,e,Fs)},Us=function(t,e,n){return e=Z(e),void 0===n?(n=e,e=0):n=Z(n),function(t,e,n){return t>=u(e,n)&&t<l(e,n)}(t=Y(t),e,n)},Ws=function(t){return"string"==typeof t||!B(t)&&C(t)&&"[object String]"==M(t)},Vs=function(t,e){return N(e,function(e){return t[e]})},zs=function(t){return null==t?[]:Vs(t,Ze(t))},qs=function(t,e,n,r){t=Re(t)?t:zs(t),n=n&&!r?Q(n):0;var i=t.length;return 0>n&&(n=l(i+n,0)),Ws(t)?n<=i&&-1<t.indexOf(e,n):!!i&&-1<Yt(t,e,n)},Gs=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Q(n);return 0>i&&(i=l(r+i,0)),Yt(t,e,i)},Xs=function(t){return(null==t?0:t.length)?Jn(t,0,-1):[]},Hs=function(t,e,n){for(var r=n?la:Zt,i=t[0].length,o=t.length,a=o,s=Array(o),c=1/0,f=[];a--;){var l=t[a];a&&e&&(l=N(l,We(e))),c=u(l.length,c),s[a]=!n&&(e||120<=i&&120<=l.length)?new Gi(a&&l):void 0}l=t[0];var d=-1,h=s[0];t:for(;++d<i&&f.length<c;){var p=l[d],g=e?e(p):p;if(p=n||0!==p?p:0,h?!Hi(h,g):!r(f,g,n)){for(a=o;--a;){var m=s[a];if(m?!Hi(m,g):!r(t[a],g,n))continue t}h&&h.push(g),f.push(p)}}return f},$s=function(t){return Zo(t)?t:[]},Ks=ke(function(t){var e=N(t,$s);return e.length&&e[0]===t[0]?Hs(e):[]}),Ys=ke(function(t){var e=ga(t),n=N(t,$s);return e===ga(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?Hs(n,_o(e)):[]}),Zs=ke(function(t){var e=ga(t),n=N(t,$s);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?Hs(n,void 0,e):[]}),Qs=function(t,e){return function(n,r){return function(t,e,n,r){return Ro(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}},Js=Object.prototype.toString,tu=Qs(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Js.call(e)),t[e]=n},qt(tt)),eu=Object.prototype,nu=eu.hasOwnProperty,ru=eu.toString,iu=Qs(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ru.call(e)),nu.call(t,e)?t[e].push(n):t[e]=[n]},_o),ou=function(t,e){return 2>e.length?t:Rn(t,Jn(e,0,-1))},au=function(t,e,n){e=kn(e,t);var r=null==(t=ou(t,e))?t:t[An(ga(e))];return null==r?void 0:_t(r,t,n)},su=ke(au),uu=ke(function(t,e,n){var r=-1,i=Re(t)?Array(t.length):[];return Lo(t,function(t){i[++r]="function"==typeof e?_t(e,t,n):au(t,e,n)}),i}),cu=Ve.a&&Ve.a.isArrayBuffer,fu=cu?We(cu):function(t){return C(t)&&"[object ArrayBuffer]"==M(t)},lu=function(t){return!0===t||!1===t||C(t)&&"[object Boolean]"==M(t)},du=Ve.a&&Ve.a.isDate,hu=du?We(du):function(t){return C(t)&&"[object Date]"==M(t)},pu=function(t){return C(t)&&1===t.nodeType&&!qn(t)},gu=Object.prototype.hasOwnProperty,mu=function(t){if(null==t)return!0;if(Re(t)&&(B(t)||"string"==typeof t||"function"==typeof t.splice||Object(De.a)(t)||qe(t)||Fe(t)))return!t.length;var e=pi(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Me(t))return!Ye(t).length;for(var n in t)if(gu.call(t,n))return!1;return!0},vu=function(t,e){return ao(t,e)},yu=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?ao(t,e,void 0,n):!!r},bu=_.a.isFinite,_u=function(t){return"number"==typeof t&&bu(t)},xu=function(t){return"number"==typeof t&&t==Q(t)},wu=function(t,e){return t===e||co(t,e,lo(e))},Eu=function(t,e,n){return n="function"==typeof n?n:void 0,co(t,e,lo(e),n)},Su=function(t){return"number"==typeof t||C(t)&&"[object Number]"==M(t)},Tu=function(t){return Su(t)&&t!=+t},ku=i(6),Au=nt?et:ku.a,Ru=function(t){if(Au(t))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return dt(t)},Iu=function(t){return null==t},Lu=function(t){return null===t},Pu=Ve.a&&Ve.a.isRegExp,Mu=Pu?We(Pu):function(t){return C(t)&&"[object RegExp]"==M(t)},Cu=9007199254740991,Ou=function(t){return xu(t)&&t>=-Cu&&t<=Cu},ju=function(t){return void 0===t},Nu=function(t){return C(t)&&"[object WeakMap]"==pi(t)},Bu=function(t){return C(t)&&"[object WeakSet]"==M(t)},Fu=function(t){return _o("function"==typeof t?t:Bi(t,1))},Du=Array.prototype.join,Uu=function(t,e){return null==t?"":Du.call(t,e)},Wu=Ir(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Vu=Mo(function(t,e,n){be(t,n,e)}),zu=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=0>(i=Q(n))?l(r+i,0):u(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):$t(t,Kt,i,!0)},qu=Ir(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Gu=or("toLowerCase"),Xu=function(t,e){return t<e},Hu=Os(Xu),$u=Os(function(t,e){return t<=e}),Ku=function(t,e){var n={};return e=_o(e),Ro(t,function(t,r,i){be(n,e(t,r,i),t)}),n},Yu=function(t,e){var n={};return e=_o(e),Ro(t,function(t,r,i){be(n,r,e(t,r,i))}),n},Zu=function(t){return po(Bi(t,1))},Qu=function(t,e){return vo(t,Bi(e,1))},Ju=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!O(a):n(a,s)))var s=a,u=o}return u},tc=function(t){return t&&t.length?Ju(t,tt,Cs):void 0},ec=function(t,e){return t&&t.length?Ju(t,_o(e),Cs):void 0},nc=function(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n},rc=function(t,e){var n=null==t?0:t.length;return n?nc(t,e)/n:NaN},ic=function(t){return rc(t,tt)},oc=function(t,e){return rc(t,_o(e))},ac=Le(function(t,e,n){ea(t,e,n)}),sc=ke(function(t,e){return function(n){return au(n,t,e)}}),uc=ke(function(t,e){return function(n){return au(t,n,e)}}),cc=function(t){return t&&t.length?Ju(t,tt,Xu):void 0},fc=function(t,e){return t&&t.length?Ju(t,_o(e),Xu):void 0},lc=function(t,e,n){var r=Ze(e),i=Rs(e,r),o=!(q(n)&&"chain"in n&&!n.chain),a=et(t);return Ht(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Ct(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Pn([this.value()],arguments))})}),t},dc=V(function(t,e){return t*e},1),hc=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}},pc=x?x.iterator:void 0,gc=function(t){if(!t)return[];if(Re(t))return Ws(t)?ir(t):Ct(t);if(pc&&t[pc])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[pc]());var e=pi(t);return("[object Map]"==e?Ki:"[object Set]"==e?Yi:zs)(t)},mc=function(){void 0===this.__values__&&(this.__values__=gc(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},vc=function(t,e){var n=t.length;if(n)return re(e+=0>e?n:0,n)?t[e]:void 0},yc=function(t,e){return t&&t.length?vc(t,Q(e)):void 0},bc=function(t){return t=Q(t),ke(function(e){return vc(e,t)})},_c=function(t,e){return e=kn(e,t),null==(t=ou(t,e))||delete t[An(ga(e))]},xc=function(t){return qn(t)?void 0:t},wc=Nn(function(t,e){var n={};if(null==t)return n;var r=!1;e=N(e,function(e){return e=kn(e,t),r||(r=1<e.length),e}),Ee(t,Jr(t),n),r&&(n=Bi(n,7,xc));for(var i=e.length;i--;)_c(n,e[i]);return n}),Ec=function(t,e,n,r){if(!q(t))return t;for(var i=-1,o=(e=kn(e,t)).length,a=t;null!=a&&++i<o;){var s=An(e[i]),u=n;if(i!=o-1){var c=a[s];void 0===(u=r?r(c,s,a):void 0)&&(u=q(c)?c:re(e[i+1])?[]:{})}we(a,s,u),a=a[s]}return t},Sc=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Rn(t,a);n(s,a)&&Ec(o,kn(a,t),s)}return o},Tc=function(t,e){if(null==t)return{};var n=N(Jr(t),function(t){return[t]});return e=_o(e),Sc(t,n,function(t,n){return e(t,n[0])})},kc=function(t,e){return Tc(t,hc(_o(e)))},Ac=function(t){return Hn(2,t)},Rc=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=O(t),a=void 0!==e,s=null===e,u=e==e,c=O(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0},Ic=function(t,e,n){var r=-1;return e=N(e.length?e:[tt],We(_o)),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(ls(t,function(t){return{criteria:N(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Rc(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)})},Lc=function(t,e,n,r){return null==t?[]:(B(e)||(e=null==e?[]:[e]),B(n=r?void 0:n)||(n=null==n?[]:[n]),Ic(t,e,n))},Pc=function(t){return Nn(function(e){return e=N(e,We(_o)),ke(function(n){var r=this;return t(e,function(t){return _t(t,r,n)})})})},Mc=Pc(N),Cc=ke(function(t,e){var n=(e=1==e.length&&B(e[0])?N(e[0],We(_o)):N(On(e,1),We(_o))).length;return ke(function(r){for(var i=-1,o=u(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return _t(t,this,r)})}),Oc=Pc(Ka),jc=Pc(Xi),Nc=function(t,n){var r="";if(!t||1>n||n>9007199254740991)return r;do{n%2&&(r+=t),(n=e(n/2))&&(t+=t)}while(n);return r},Bc=yo("length"),Fc=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Dc=function(t){return nr(t)?function(t){for(var e=Fc.lastIndex=0;Fc.test(t);)++e;return e}(t):Bc(t)},Uc=function(t,e){var r=(e=void 0===e?" ":W(e)).length;if(2>r)return r?Nc(e,t):e;var i=Nc(e,n(t/Dc(e)));return nr(e)?tr(ir(i),0,t).join(""):i.slice(0,t)},Wc=function(t,r,i){t=Tn(t);var o=(r=Q(r))?Dc(t):0;if(!r||o>=r)return t;var a=(r-o)/2;return Uc(e(a),i)+t+Uc(n(a),i)},Vc=function(t,e,n){t=Tn(t);var r=(e=Q(e))?Dc(t):0;return e&&r<e?t+Uc(e-r,n):t},zc=function(t,e,n){t=Tn(t);var r=(e=Q(e))?Dc(t):0;return e&&r<e?Uc(e-r,n)+t:t},qc=/^\s+/,Gc=_.a.parseInt,Xc=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Gc(Tn(t).replace(qc,""),e||0)},Hc=ke(function(t,e){var n=ae(e,ee(Hc));return ve(t,32,void 0,e,n)});Hc.placeholder={};var $c=Hc,Kc=ke(function(t,e){var n=ae(e,ee(Kc));return ve(t,64,void 0,e,n)});Kc.placeholder={};var Yc=Kc,Zc=Mo(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Qc=Zc,Jc=Nn(function(t,e){return null==t?{}:function(t,e){return Sc(t,e,function(e,n){return mo(t,n)})}(t,e)}),tf=Jc,ef=function(t){for(var e,n,r=this;r instanceof St;){(n=Ot(r)).__index__=0,n.__values__=void 0,e?i.__wrapped__=n:e=n;var i=n;r=r.__wrapped__}return i.__wrapped__=t,e},nf=function(t){return function(e){return null==t?void 0:Rn(t,e)}},rf=function(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1},of=Array.prototype,af=of.splice,sf=function(t,e,n,r){var i=r?rf:Yt,o=-1,a=e.length,s=t;for(t===e&&(e=Ct(e)),n&&(s=N(t,We(n)));++o<a;)for(var u=0,c=e[o],f=n?n(c):c;-1<(u=i(s,f,u,r));)s!==t&&af.call(s,u,1),af.call(t,u,1);return t},uf=function(t,e){return t&&t.length&&e&&e.length?sf(t,e):t},cf=ke(uf),ff=function(t,e,n){return t&&t.length&&e&&e.length?sf(t,e,_o(n)):t},lf=function(t,e,n){return t&&t.length&&e&&e.length?sf(t,e,void 0,n):t},df=Array.prototype.splice,hf=function(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;re(i)?df.call(t,i,1):_c(t,i)}}return t},pf=Nn(function(t,e){var n=null==t?0:t.length,r=Ln(t,e);return hf(t,N(e,function(t){return re(t,n)?+t:t}).sort(Rc)),r}),gf=Math.random,mf=function(t,n){return t+e(gf()*(n-t+1))},vf=parseFloat,yf=Math.random,bf=function(t,e,n){if(n&&"boolean"!=typeof n&&Ie(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=Z(t),void 0===e?(e=t,t=0):e=Z(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=yf();return u(t+i*(e-t+vf("1e-"+((i+"").length-1))),e)}return mf(t,e)},_f=function(t,e,r,i){for(var o=-1,a=l(n((e-t)/(r||1)),0),s=Array(a);a--;)s[i?a:++o]=t,t+=r;return s},xf=function(t){return function(e,n,r){return r&&"number"!=typeof r&&Ie(e,n,r)&&(n=r=void 0),e=Z(e),void 0===n?(n=e,e=0):n=Z(n),r=void 0===r?e<n?1:-1:Z(r),_f(e,n,r,t)}},wf=xf(),Ef=xf(!0),Sf=Nn(function(t,e){return ve(t,256,void 0,void 0,void 0,e)}),Tf=function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n},kf=function(t,e,n){var r=B(t)?ur:Tf,i=3>arguments.length;return r(t,_o(e),n,i,Lo)},Af=function(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n},Rf=function(t,e,n){var r=B(t)?Af:Tf,i=3>arguments.length;return r(t,_o(e),n,i,Oa)},If=function(t,e){return(B(t)?zr:ts)(t,hc(_o(e)))},Lf=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=_o(e);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return hf(t,i),n},Pf=function(t,e,n){return e=(n?Ie(t,e,n):void 0===e)?1:Q(e),Nc(Tn(t),e)},Mf=function(){var t=arguments,e=Tn(t[0]);return 3>t.length?e:e.replace(t[1],t[2])},Cf=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=void 0===e?e:Q(e),ke(t,e)},Of=function(t,e,n){var r=-1,i=(e=kn(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[An(e[r])];void 0===o&&(r=i,o=n),t=et(o)?o.call(t):o}return t},jf=Array.prototype.reverse,Nf=function(t){return null==t?t:jf.call(t)},Bf=Cr("round"),Ff=function(t){var e=t.length;return e?t[mf(0,e-1)]:void 0},Df=function(t){return Ff(zs(t))},Uf=function(t){return(B(t)?Ff:Df)(t)},Wf=function(t,e){var n=-1,r=t.length;for(e=void 0===e?r:e;++n<e;){var i=mf(n,r-1),o=t[i];t[i]=t[n],t[n]=o}return t.length=e,t},Vf=function(t,e){return Wf(Ct(t),Br(e,0,t.length))},zf=function(t,e){var n=zs(t);return Wf(n,Br(e,0,n.length))},qf=function(t,e,n){return e=(n?Ie(t,e,n):void 0===e)?1:Q(e),(B(t)?Vf:zf)(t,e)},Gf=function(t,e,n){return null==t?t:Ec(t,e,n)},Xf=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Ec(t,e,n,r)},Hf=function(t){return Wf(Ct(t))},$f=function(t){return Wf(zs(t))},Kf=function(t){return(B(t)?Hf:$f)(t)},Yf=function(t){if(null==t)return 0;if(Re(t))return Ws(t)?Dc(t):t.length;var e=pi(t);return"[object Map]"==e||"[object Set]"==e?t.size:Ye(t).length},Zf=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Ie(t,e,n)?(e=0,n=r):(e=null==e?0:Q(e),n=void 0===n?r:Q(n)),Jn(t,e,n)):[]},Qf=Ir(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Jf=function(t,e){var n;return Lo(t,function(t,r,i){return!(n=e(t,r,i))}),!!n},tl=function(t,e,n){var r=B(t)?Xi:Jf;return n&&Ie(t,e,n)&&(e=void 0),r(t,_o(e))},el=ke(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&Ie(t,e[0],e[1])?e=[]:2<n&&Ie(e[0],e[1],e[2])&&(e=[e[0]]),Ic(t,On(e,1),[])}),nl=function(t,n,r,i){n=r(n);for(var o=0,a=null==t?0:t.length,s=n!=n,c=null===n,f=O(n),l=void 0===n;o<a;){var d=e((o+a)/2),h=r(t[d]),p=void 0!==h,g=null===h,m=h==h,v=O(h);if(s)var y=i||m;else y=l?m&&(i||p):c?m&&p&&(i||!g):f?m&&p&&!g&&(i||!v):!(g||v)&&(i?h<=n:h<n);y?o=d+1:a=d}return u(a,4294967294)},rl=function(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!O(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return nl(t,e,tt,n)},il=function(t,e){return rl(t,e)},ol=function(t,e,n){return nl(t,e,_o(n))},al=function(t,e){var n=null==t?0:t.length;if(n){var r=rl(t,e);if(r<n&&_e(t[r],e))return r}return-1},sl=function(t,e){return rl(t,e,!0)},ul=function(t,e,n){return nl(t,e,_o(n),!0)},cl=function(t,e){if(null==t?0:t.length){var n=rl(t,e,!0)-1;if(_e(t[n],e))return n}return-1},fl=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!_e(s,u)){var u=s;o[i++]=0===a?0:a}}return o},ll=function(t){return t&&t.length?fl(t):[]},dl=function(t,e){return t&&t.length?fl(t,_o(e)):[]},hl=function(t,e,n){return n&&"number"!=typeof n&&Ie(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=Tn(t))&&("string"==typeof e||null!=e&&!Mu(e))&&(!(e=W(e))&&nr(t))?tr(ir(t),0,n):t.split(e,n):[]},pl=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=null==e?0:l(Q(e),0),ke(function(n){var r=n[e],i=tr(n,0,e);return r&&Pn(i,r),_t(t,this,i)})},gl=Ir(function(t,e,n){return t+(n?" ":"")+ar(e)}),ml=function(t,e,n){return t=Tn(t),n=null==n?0:Br(Q(n),0,t.length),e=W(e),t.slice(n,n+e.length)==e},vl=function(){return{}},yl=function(){return""},bl=function(){return!0},_l=V(function(t,e){return t-e},0),xl=function(t){return t&&t.length?nc(t,tt):0},wl=function(t,e){return t&&t.length?nc(t,_o(e)):0},El=function(t){var e=null==t?0:t.length;return e?Jn(t,1,e):[]},Sl=function(t,e,n){return t&&t.length?(e=n||void 0===e?1:Q(e),Jn(t,0,0>e?0:e)):[]},Tl=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:Q(e),Jn(t,0>(e=r-e)?0:e,r)):[]},kl=function(t,e){return t&&t.length?Sa(t,_o(e),!1,!0):[]},Al=function(t,e){return t&&t.length?Sa(t,_o(e)):[]},Rl=function(t,e){return e(t),t},Il=Object.prototype,Ll=Il.hasOwnProperty,Pl=function(t,e,n,r){return void 0===t||_e(t,Il[n])&&!Ll.call(r,n)?e:t},Ml={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cl=function(t){return"\\"+Ml[t]},Ol=/<%=([\s\S]+?)%>/g,jl={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ol,variable:"",imports:{_:{escape:Ga}}},Nl=/\b__p \+= '';/g,Bl=/\b(__p \+=) '' \+/g,Fl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ul=/($^)/,Wl=/['\n\r\u2028\u2029\\]/g,Vl=Object.prototype.hasOwnProperty,zl=function(t,e,n){var r=jl.imports._.templateSettings||jl;n&&Ie(t,e,n)&&(e=void 0),t=Tn(t),e=on({},e,r,Pl);var i,o,a=on({},e.imports,r.imports,Pl),s=Ze(a),u=Vs(a,s),c=0,f=e.interpolate||Ul,l="__p += '",d=RegExp((e.escape||Ul).source+"|"+f.source+"|"+(f===Ol?Dl:Ul).source+"|"+(e.evaluate||Ul).source+"|$","g"),h=Vl.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/[\r\n]/g," ")+"\n":"";t.replace(d,function(e,n,r,a,s,u){return r||(r=a),l+=t.slice(c,u).replace(Wl,Cl),n&&(i=!0,l+="' +\n__e("+n+") +\n'"),s&&(o=!0,l+="';\n"+s+";\n__p += '"),r&&(l+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),l+="';\n";var p=Vl.call(e,"variable")&&e.variable;p||(l="with (obj) {\n"+l+"\n}\n"),l=(o?l.replace(Nl,""):l).replace(Bl,"$1").replace(Fl,"$1;"),l="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var g=Xn(function(){return Function(s,h+"return "+l).apply(void 0,u)});if(g.source=l,Gn(g))throw g;return g},ql="Expected a function",Gl=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError(ql);return q(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),qo(t,e,{leading:r,maxWait:e,trailing:i})},Xl=function(t,e){return e(t)},Hl=4294967295,$l=function(t,e){if(1>(t=Q(t))||t>9007199254740991)return[];var n=Hl,r=u(t,Hl);e=Aa(e),t-=Hl;for(var i=Ce(r,e);++n<t;)e(n);return i},Kl=function(){return this},Yl=function(t,e){var n=t;return n instanceof kt&&(n=n.value()),ur(e,function(t,e){return e.func.apply(e.thisArg,Pn([t],e.args))},n)},Zl=function(){return Yl(this.__wrapped__,this.__actions__)},Ql=function(t){return Tn(t).toLowerCase()},Jl=function(t){return B(t)?N(t,An):O(t)?[t]:Ct(Sn(Tn(t)))},td=9007199254740991,ed=function(t){return t?Br(Q(t),-td,td):0===t?t:0},nd=function(t){return Tn(t).toUpperCase()},rd=function(t,e,n){var r=B(t),i=r||Object(De.a)(t)||qe(t);if(e=_o(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:q(t)&&et(o)?yt(Fn(t)):{}}return(i?Ht:Ro)(t,function(t,r,i){return e(n,t,r,i)}),n},id=function(t,e){for(var n=t.length;n--&&-1<Yt(e,t[n],0););return n},od=function(t,e){for(var n=-1,r=t.length;++n<r&&-1<Yt(e,t[n],0););return n},ad=/^\s+|\s+$/g,sd=function(t,e,n){if((t=Tn(t))&&(n||void 0===e))return t.replace(ad,"");if(!t||!(e=W(e)))return t;var r=ir(t),i=ir(e),o=od(r,i),a=id(r,i)+1;return tr(r,o,a).join("")},ud=/\s+$/,cd=function(t,e,n){if((t=Tn(t))&&(n||void 0===e))return t.replace(ud,"");if(!t||!(e=W(e)))return t;var r=ir(t),i=id(r,ir(e))+1;return tr(r,0,i).join("")},fd=/^\s+/,ld=function(t,e,n){if((t=Tn(t))&&(n||void 0===e))return t.replace(fd,"");if(!t||!(e=W(e)))return t;var r=ir(t),i=od(r,ir(e));return tr(r,i).join("")},dd=30,hd="...",pd=/\w*$/,gd=function(t,e){var n=dd,r=hd;if(q(e)){var i="separator"in e?e.separator:i;n="length"in e?Q(e.length):n,r="omission"in e?W(e.omission):r}var o=(t=Tn(t)).length;if(nr(t)){var a=ir(t);o=a.length}if(n>=o)return t;var s=n-Dc(r);if(1>s)return r;var u=a?tr(a,0,s).join(""):t.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),Mu(i)){if(t.slice(s).search(i)){var c,f=u;for(i.global||(i=RegExp(i.source,Tn(pd.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var l=c.index;u=u.slice(0,void 0===l?s:l)}}else if(t.indexOf(W(i),s)!=s){var d=u.lastIndexOf(i);-1<d&&(u=u.slice(0,d))}return u+r},md=function(t){return ye(t,1)},vd=cr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),yd=/&(?:amp|lt|gt|quot|#39);/g,bd=RegExp(yd.source),_d=function(t){return(t=Tn(t))&&bd.test(t)?t.replace(yd,vd):t},xd=ni&&1/Yi(new ni([,-0]))[1]==1/0?function(t){return new ni(t)}:At,wd=function(t,e,n){var r=-1,i=Zt,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=la;else if(o>=200){var c=e?null:xd(t);if(c)return Yi(c);a=!1,i=Hi,u=new Gi}else u=e?[]:s;t:for(;++r<o;){var f=t[r],l=e?e(f):f;if(f=n||0!==f?f:0,a&&l==l){for(var d=u.length;d--;)if(u[d]===l)continue t;e&&u.push(l),s.push(f)}else i(u,l,n)||(u!==s&&u.push(l),s.push(f))}return s},Ed=ke(function(t){return wd(On(t,1,Zo,!0))}),Sd=ke(function(t){var e=ga(t);return Zo(e)&&(e=void 0),wd(On(t,1,Zo,!0),_o(e))}),Td=ke(function(t){var e=ga(t);return e="function"==typeof e?e:void 0,wd(On(t,1,Zo,!0),void 0,e)}),kd=function(t){return t&&t.length?wd(t):[]},Ad=function(t,e){return t&&t.length?wd(t,_o(e)):[]},Rd=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?wd(t,void 0,e):[]},Id=0,Ld=function(t){var e=++Id;return Tn(t)+e},Pd=function(t,e){return!(null!=t)||_c(t,e)},Md=function(t){if(!t||!t.length)return[];var e=0;return t=zr(t,function(t){if(Zo(t))return e=l(t.length,e),!0}),Ce(e,function(e){return N(t,yo(e))})},Cd=function(t,e){if(!t||!t.length)return[];var n=Md(t);return null==e?n:N(n,function(t){return _t(e,void 0,t)})},Od=function(t,e,n,r){return Ec(t,e,n(Rn(t,e)),r)},jd=function(t,e,n){return null==t?t:Od(t,e,Aa(n))},Nd=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Od(t,e,Aa(n),r)},Bd=Ir(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Fd=function(t){return null==t?[]:Vs(t,nn(t))},Dd=ke(function(t,e){return Zo(t)?da(t,e):[]}),Ud=function(t,e){return $c(Aa(e),t)},Wd=Nn(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Ln(e,t)};return!(1<e||this.__actions__.length)&&r instanceof kt&&re(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Xl,args:[i],thisArg:void 0}),new Mt(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(void 0),t})):this.thru(i)}),Vd=function(){return jr(this)},zd=function(){var t=this.__wrapped__;if(t instanceof kt){var e=t;return this.__actions__.length&&(e=new kt(this)),(e=e.reverse()).__actions__.push({func:Xl,args:[Nf],thisArg:void 0}),new Mt(e,this.__chain__)}return this.thru(Nf)},qd=function(t,e,n){var r=t.length;if(2>r)return r?wd(t[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=da(o[i]||a,t[s],e,n));return wd(On(o,1),e,n)},Gd=ke(function(t){return qd(zr(t,Zo))}),Xd=ke(function(t){var e=ga(t);return Zo(e)&&(e=void 0),qd(zr(t,Zo),_o(e))}),Hd=ke(function(t){var e=ga(t);return e="function"==typeof e?e:void 0,qd(zr(t,Zo),void 0,e)}),$d=ke(Md),Kd=function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a},Yd=function(t,e){return Kd(t||[],e||[],we)},Zd=function(t,e){return Kd(t||[],e||[],Ec)},Qd=ke(function(t){var e=t.length,n=1<e?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Cd(t,n)}),Jd={chunk:Nr,compact:zi,concat:qi,difference:pa,differenceBy:va,differenceWith:ba,drop:wa,dropRight:Ea,dropRightWhile:Ta,dropWhile:ka,fill:Ja,findIndex:rs,findLastIndex:ss,first:fs,flatten:jn,flattenDeep:ms,flattenDepth:vs,fromPairs:As,head:fs,indexOf:Gs,initial:Xs,intersection:Ks,intersectionBy:Ys,intersectionWith:Zs,join:Uu,last:ga,lastIndexOf:zu,nth:yc,pull:cf,pullAll:uf,pullAllBy:ff,pullAllWith:lf,pullAt:pf,remove:Lf,reverse:Nf,slice:Zf,sortedIndex:il,sortedIndexBy:ol,sortedIndexOf:al,sortedLastIndex:sl,sortedLastIndexBy:ul,sortedLastIndexOf:cl,sortedUniq:ll,sortedUniqBy:dl,tail:El,take:Sl,takeRight:Tl,takeRightWhile:kl,takeWhile:Al,union:Ed,unionBy:Sd,unionWith:Td,uniq:kd,uniqBy:Ad,uniqWith:Rd,unzip:Md,unzipWith:Cd,without:Dd,xor:Gd,xorBy:Xd,xorWith:Hd,zip:$d,zipObject:Yd,zipObjectDeep:Zd,zipWith:Qd},th={countBy:Oo,each:Ra,eachRight:ja,every:Za,filter:es,find:is,findLast:us,flatMap:hs,flatMapDeep:ps,flatMapDepth:gs,forEach:Ra,forEachRight:ja,groupBy:Ms,includes:qs,invokeMap:uu,keyBy:Vu,map:ds,orderBy:Lc,partition:Qc,reduce:kf,reduceRight:Rf,reject:If,sample:Uf,sampleSize:qf,shuffle:Kf,size:Yf,some:tl,sortBy:el},eh={after:J,ary:ye,before:Hn,bind:Kn,bindKey:Qn,curry:Bo,curryRight:Do,debounce:qo,defer:ua,delay:fa,flip:ys,memoize:xn,negate:hc,once:Ac,overArgs:Cc,partial:$c,partialRight:Yc,rearg:Sf,rest:Cf,spread:pl,throttle:Gl,unary:md,wrap:Ud},nh={castArray:Pr,clone:Fi,cloneDeep:Di,cloneDeepWith:Ui,cloneWith:Wi,conformsTo:So,eq:_e,gt:js,gte:Ns,isArguments:Fe,isArray:B,isArrayBuffer:fu,isArrayLike:Re,isArrayLikeObject:Zo,isBoolean:lu,isBuffer:De.a,isDate:hu,isElement:pu,isEmpty:mu,isEqual:vu,isEqualWith:yu,isError:Gn,isFinite:_u,isFunction:et,isInteger:xu,isLength:Ae,isMap:ki,isMatch:wu,isMatchWith:Eu,isNaN:Tu,isNative:Ru,isNil:Iu,isNull:Lu,isNumber:Su,isObject:q,isObjectLike:C,isPlainObject:qn,isRegExp:Mu,isSafeInteger:Ou,isSet:Ri,isString:Ws,isSymbol:O,isTypedArray:qe,isUndefined:ju,isWeakMap:Nu,isWeakSet:Bu,lt:Hu,lte:$u,toArray:gc,toFinite:Z,toInteger:Q,toLength:Qa,toNumber:Y,toPlainObject:Jo,toSafeInteger:ed,toString:Tn},rh={add:z,ceil:Or,divide:xa,floor:bs,max:tc,maxBy:ec,mean:ic,meanBy:oc,min:cc,minBy:fc,multiply:dc,round:Bf,subtract:_l,sum:xl,sumBy:wl},ih=Fr,oh=Us,ah=bf,sh={assign:Je,assignIn:rn,assignInWith:on,assignWith:an,at:Bn,create:jo,defaults:Ko,defaultsDeep:oa,entries:Da,entriesIn:Wa,extend:rn,extendWith:on,findKey:as,findLastKey:cs,forIn:Es,forInRight:Ss,forOwn:Ts,forOwnRight:ks,functions:Is,functionsIn:Ls,get:In,has:Ds,hasIn:mo,invert:tu,invertBy:iu,invoke:su,keys:Ze,keysIn:nn,mapKeys:Ku,mapValues:Yu,merge:ac,mergeWith:ra,omit:wc,omitBy:kc,pick:tf,pickBy:Tc,result:Of,set:Gf,setWith:Xf,toPairs:Da,toPairsIn:Wa,transform:rd,unset:Pd,update:jd,updateWith:Nd,values:zs,valuesIn:Fd},uh={at:Wd,chain:jr,commit:Vi,lodash:Nt,next:mc,plant:ef,reverse:zd,tap:Rl,thru:Xl,toIterator:Kl,toJSON:Zl,value:Zl,valueOf:Zl,wrapperChain:Vd},ch={camelCase:Lr,capitalize:sr,deburr:hr,endsWith:Na,escape:Ga,escapeRegExp:$a,kebabCase:Wu,lowerCase:qu,lowerFirst:Gu,pad:Wc,padEnd:Vc,padStart:zc,parseInt:Xc,repeat:Pf,replace:Mf,snakeCase:Qf,split:hl,startCase:gl,startsWith:ml,template:zl,templateSettings:jl,toLower:Ql,toUpper:nd,trim:sd,trimEnd:cd,trimStart:ld,truncate:gd,unescape:_d,upperCase:Bd,upperFirst:ar,words:Ar},fh={attempt:Xn,bindAll:Yn,cond:xo,conforms:Eo,constant:qt,defaultTo:Go,flow:xs,flowRight:ws,identity:tt,iteratee:Fu,matches:Zu,matchesProperty:Qu,method:sc,methodOf:uc,mixin:lc,noop:At,nthArg:bc,over:Mc,overEvery:Oc,overSome:jc,property:bo,propertyOf:nf,range:wf,rangeRight:Ef,stubArray:qr,stubFalse:ku.a,stubObject:vl,stubString:yl,stubTrue:bl,times:$l,toPath:Jl,uniqueId:Ld},lh=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=u(e,t+a);break;case"takeRight":t=l(t,e-a)}}return{start:t,end:e}},dh=4294967295,hh=Array.prototype,ph=Object.prototype.hasOwnProperty,gh=x?x.iterator:void 0,mh=u,vh=function(t){return function(e,n,r){if(null==r){var i=q(n),o=i&&Ze(n),a=o&&o.length&&Rs(n,o);(a?a.length:i)||(r=n,n=e,e=this)}return t(e,n,r)}}(lc);
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Nt.after=eh.after,Nt.ary=eh.ary,Nt.assign=sh.assign,Nt.assignIn=sh.assignIn,Nt.assignInWith=sh.assignInWith,Nt.assignWith=sh.assignWith,Nt.at=sh.at,Nt.before=eh.before,Nt.bind=eh.bind,Nt.bindAll=fh.bindAll,Nt.bindKey=eh.bindKey,Nt.castArray=nh.castArray,Nt.chain=uh.chain,Nt.chunk=Jd.chunk,Nt.compact=Jd.compact,Nt.concat=Jd.concat,Nt.cond=fh.cond,Nt.conforms=fh.conforms,Nt.constant=fh.constant,Nt.countBy=th.countBy,Nt.create=sh.create,Nt.curry=eh.curry,Nt.curryRight=eh.curryRight,Nt.debounce=eh.debounce,Nt.defaults=sh.defaults,Nt.defaultsDeep=sh.defaultsDeep,Nt.defer=eh.defer,Nt.delay=eh.delay,Nt.difference=Jd.difference,Nt.differenceBy=Jd.differenceBy,Nt.differenceWith=Jd.differenceWith,Nt.drop=Jd.drop,Nt.dropRight=Jd.dropRight,Nt.dropRightWhile=Jd.dropRightWhile,Nt.dropWhile=Jd.dropWhile,Nt.fill=Jd.fill,Nt.filter=th.filter,Nt.flatMap=th.flatMap,Nt.flatMapDeep=th.flatMapDeep,Nt.flatMapDepth=th.flatMapDepth,Nt.flatten=Jd.flatten,Nt.flattenDeep=Jd.flattenDeep,Nt.flattenDepth=Jd.flattenDepth,Nt.flip=eh.flip,Nt.flow=fh.flow,Nt.flowRight=fh.flowRight,Nt.fromPairs=Jd.fromPairs,Nt.functions=sh.functions,Nt.functionsIn=sh.functionsIn,Nt.groupBy=th.groupBy,Nt.initial=Jd.initial,Nt.intersection=Jd.intersection,Nt.intersectionBy=Jd.intersectionBy,Nt.intersectionWith=Jd.intersectionWith,Nt.invert=sh.invert,Nt.invertBy=sh.invertBy,Nt.invokeMap=th.invokeMap,Nt.iteratee=fh.iteratee,Nt.keyBy=th.keyBy,Nt.keys=Ze,Nt.keysIn=sh.keysIn,Nt.map=th.map,Nt.mapKeys=sh.mapKeys,Nt.mapValues=sh.mapValues,Nt.matches=fh.matches,Nt.matchesProperty=fh.matchesProperty,Nt.memoize=eh.memoize,Nt.merge=sh.merge,Nt.mergeWith=sh.mergeWith,Nt.method=fh.method,Nt.methodOf=fh.methodOf,Nt.mixin=vh,Nt.negate=hc,Nt.nthArg=fh.nthArg,Nt.omit=sh.omit,Nt.omitBy=sh.omitBy,Nt.once=eh.once,Nt.orderBy=th.orderBy,Nt.over=fh.over,Nt.overArgs=eh.overArgs,Nt.overEvery=fh.overEvery,Nt.overSome=fh.overSome,Nt.partial=eh.partial,Nt.partialRight=eh.partialRight,Nt.partition=th.partition,Nt.pick=sh.pick,Nt.pickBy=sh.pickBy,Nt.property=fh.property,Nt.propertyOf=fh.propertyOf,Nt.pull=Jd.pull,Nt.pullAll=Jd.pullAll,Nt.pullAllBy=Jd.pullAllBy,Nt.pullAllWith=Jd.pullAllWith,Nt.pullAt=Jd.pullAt,Nt.range=fh.range,Nt.rangeRight=fh.rangeRight,Nt.rearg=eh.rearg,Nt.reject=th.reject,Nt.remove=Jd.remove,Nt.rest=eh.rest,Nt.reverse=Jd.reverse,Nt.sampleSize=th.sampleSize,Nt.set=sh.set,Nt.setWith=sh.setWith,Nt.shuffle=th.shuffle,Nt.slice=Jd.slice,Nt.sortBy=th.sortBy,Nt.sortedUniq=Jd.sortedUniq,Nt.sortedUniqBy=Jd.sortedUniqBy,Nt.split=ch.split,Nt.spread=eh.spread,Nt.tail=Jd.tail,Nt.take=Jd.take,Nt.takeRight=Jd.takeRight,Nt.takeRightWhile=Jd.takeRightWhile,Nt.takeWhile=Jd.takeWhile,Nt.tap=uh.tap,Nt.throttle=eh.throttle,Nt.thru=Xl,Nt.toArray=nh.toArray,Nt.toPairs=sh.toPairs,Nt.toPairsIn=sh.toPairsIn,Nt.toPath=fh.toPath,Nt.toPlainObject=nh.toPlainObject,Nt.transform=sh.transform,Nt.unary=eh.unary,Nt.union=Jd.union,Nt.unionBy=Jd.unionBy,Nt.unionWith=Jd.unionWith,Nt.uniq=Jd.uniq,Nt.uniqBy=Jd.uniqBy,Nt.uniqWith=Jd.uniqWith,Nt.unset=sh.unset,Nt.unzip=Jd.unzip,Nt.unzipWith=Jd.unzipWith,Nt.update=sh.update,Nt.updateWith=sh.updateWith,Nt.values=sh.values,Nt.valuesIn=sh.valuesIn,Nt.without=Jd.without,Nt.words=ch.words,Nt.wrap=eh.wrap,Nt.xor=Jd.xor,Nt.xorBy=Jd.xorBy,Nt.xorWith=Jd.xorWith,Nt.zip=Jd.zip,Nt.zipObject=Jd.zipObject,Nt.zipObjectDeep=Jd.zipObjectDeep,Nt.zipWith=Jd.zipWith,Nt.entries=sh.toPairs,Nt.entriesIn=sh.toPairsIn,Nt.extend=sh.assignIn,Nt.extendWith=sh.assignInWith,vh(Nt,Nt),Nt.add=rh.add,Nt.attempt=fh.attempt,Nt.camelCase=ch.camelCase,Nt.capitalize=ch.capitalize,Nt.ceil=rh.ceil,Nt.clamp=ih,Nt.clone=nh.clone,Nt.cloneDeep=nh.cloneDeep,Nt.cloneDeepWith=nh.cloneDeepWith,Nt.cloneWith=nh.cloneWith,Nt.conformsTo=nh.conformsTo,Nt.deburr=ch.deburr,Nt.defaultTo=fh.defaultTo,Nt.divide=rh.divide,Nt.endsWith=ch.endsWith,Nt.eq=nh.eq,Nt.escape=ch.escape,Nt.escapeRegExp=ch.escapeRegExp,Nt.every=th.every,Nt.find=th.find,Nt.findIndex=Jd.findIndex,Nt.findKey=sh.findKey,Nt.findLast=th.findLast,Nt.findLastIndex=Jd.findLastIndex,Nt.findLastKey=sh.findLastKey,Nt.floor=rh.floor,Nt.forEach=th.forEach,Nt.forEachRight=th.forEachRight,Nt.forIn=sh.forIn,Nt.forInRight=sh.forInRight,Nt.forOwn=sh.forOwn,Nt.forOwnRight=sh.forOwnRight,Nt.get=sh.get,Nt.gt=nh.gt,Nt.gte=nh.gte,Nt.has=sh.has,Nt.hasIn=sh.hasIn,Nt.head=Jd.head,Nt.identity=tt,Nt.includes=th.includes,Nt.indexOf=Jd.indexOf,Nt.inRange=oh,Nt.invoke=sh.invoke,Nt.isArguments=nh.isArguments,Nt.isArray=B,Nt.isArrayBuffer=nh.isArrayBuffer,Nt.isArrayLike=nh.isArrayLike,Nt.isArrayLikeObject=nh.isArrayLikeObject,Nt.isBoolean=nh.isBoolean,Nt.isBuffer=nh.isBuffer,Nt.isDate=nh.isDate,Nt.isElement=nh.isElement,Nt.isEmpty=nh.isEmpty,Nt.isEqual=nh.isEqual,Nt.isEqualWith=nh.isEqualWith,Nt.isError=nh.isError,Nt.isFinite=nh.isFinite,Nt.isFunction=nh.isFunction,Nt.isInteger=nh.isInteger,Nt.isLength=nh.isLength,Nt.isMap=nh.isMap,Nt.isMatch=nh.isMatch,Nt.isMatchWith=nh.isMatchWith,Nt.isNaN=nh.isNaN,Nt.isNative=nh.isNative,Nt.isNil=nh.isNil,Nt.isNull=nh.isNull,Nt.isNumber=nh.isNumber,Nt.isObject=q,Nt.isObjectLike=nh.isObjectLike,Nt.isPlainObject=nh.isPlainObject,Nt.isRegExp=nh.isRegExp,Nt.isSafeInteger=nh.isSafeInteger,Nt.isSet=nh.isSet,Nt.isString=nh.isString,Nt.isSymbol=nh.isSymbol,Nt.isTypedArray=nh.isTypedArray,Nt.isUndefined=nh.isUndefined,Nt.isWeakMap=nh.isWeakMap,Nt.isWeakSet=nh.isWeakSet,Nt.join=Jd.join,Nt.kebabCase=ch.kebabCase,Nt.last=ga,Nt.lastIndexOf=Jd.lastIndexOf,Nt.lowerCase=ch.lowerCase,Nt.lowerFirst=ch.lowerFirst,Nt.lt=nh.lt,Nt.lte=nh.lte,Nt.max=rh.max,Nt.maxBy=rh.maxBy,Nt.mean=rh.mean,Nt.meanBy=rh.meanBy,Nt.min=rh.min,Nt.minBy=rh.minBy,Nt.stubArray=fh.stubArray,Nt.stubFalse=fh.stubFalse,Nt.stubObject=fh.stubObject,Nt.stubString=fh.stubString,Nt.stubTrue=fh.stubTrue,Nt.multiply=rh.multiply,Nt.nth=Jd.nth,Nt.noop=fh.noop,Nt.now={now:Uo}.now,Nt.pad=ch.pad,Nt.padEnd=ch.padEnd,Nt.padStart=ch.padStart,Nt.parseInt=ch.parseInt,Nt.random=ah,Nt.reduce=th.reduce,Nt.reduceRight=th.reduceRight,Nt.repeat=ch.repeat,Nt.replace=ch.replace,Nt.result=sh.result,Nt.round=rh.round,Nt.sample=th.sample,Nt.size=th.size,Nt.snakeCase=ch.snakeCase,Nt.some=th.some,Nt.sortedIndex=Jd.sortedIndex,Nt.sortedIndexBy=Jd.sortedIndexBy,Nt.sortedIndexOf=Jd.sortedIndexOf,Nt.sortedLastIndex=Jd.sortedLastIndex,Nt.sortedLastIndexBy=Jd.sortedLastIndexBy,Nt.sortedLastIndexOf=Jd.sortedLastIndexOf,Nt.startCase=ch.startCase,Nt.startsWith=ch.startsWith,Nt.subtract=rh.subtract,Nt.sum=rh.sum,Nt.sumBy=rh.sumBy,Nt.template=ch.template,Nt.times=fh.times,Nt.toFinite=nh.toFinite,Nt.toInteger=Q,Nt.toLength=nh.toLength,Nt.toLower=ch.toLower,Nt.toNumber=nh.toNumber,Nt.toSafeInteger=nh.toSafeInteger,Nt.toString=nh.toString,Nt.toUpper=ch.toUpper,Nt.trim=ch.trim,Nt.trimEnd=ch.trimEnd,Nt.trimStart=ch.trimStart,Nt.truncate=ch.truncate,Nt.unescape=ch.unescape,Nt.uniqueId=fh.uniqueId,Nt.upperCase=ch.upperCase,Nt.upperFirst=ch.upperFirst,Nt.each=th.forEach,Nt.eachRight=th.forEachRight,Nt.first=Jd.head,vh(Nt,function(){var t={};return Ro(Nt,function(e,n){ph.call(Nt.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),Nt.VERSION="4.17.15",(Nt.templateSettings=ch.templateSettings).imports._=Nt,Ht(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Nt[t].placeholder=Nt}),Ht(["drop","take"],function(t,e){kt.prototype[t]=function(n){n=void 0===n?1:l(Q(n),0);var r=this.__filtered__&&!e?new kt(this):this.clone();return r.__filtered__?r.__takeCount__=mh(n,r.__takeCount__):r.__views__.push({size:mh(n,dh),type:t+(0>r.__dir__?"Right":"")}),r},kt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ht(["filter","map","takeWhile"],function(t,e){var n=e+1;kt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:_o(t),type:n}),e.__filtered__=e.__filtered__||1==n||3==n,e}}),Ht(["head","last"],function(t,e){var n="take"+(e?"Right":"");kt.prototype[t]=function(){return this[n](1).value()[0]}}),Ht(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");kt.prototype[t]=function(){return this.__filtered__?new kt(this):this[n](1)}}),kt.prototype.compact=function(){return this.filter(tt)},kt.prototype.find=function(t){return this.filter(t).head()},kt.prototype.findLast=function(t){return this.reverse().find(t)},kt.prototype.invokeMap=ke(function(t,e){return"function"==typeof t?new kt(this):this.map(function(n){return au(n,t,e)})}),kt.prototype.reject=function(t){return this.filter(hc(_o(t)))},kt.prototype.slice=function(t,e){t=Q(t);var n=this;return n.__filtered__&&(0<t||0>e)?new kt(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=0>(e=Q(e))?n.dropRight(-e):n.take(e-t)),n)},kt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},kt.prototype.toArray=function(){return this.take(dh)},Ro(kt.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Nt[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(Nt.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof kt,u=a[0],c=s||B(e),f=function(t){var e=i.apply(Nt,Pn([t],a));return r&&l?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(s=c=!1);var l=this.__chain__,d=!!this.__actions__.length,h=o&&!l,p=s&&!d;if(!o&&c){e=p?e:new kt(this);var g=t.apply(e,a);return g.__actions__.push({func:Xl,args:[f],thisArg:void 0}),new Mt(g,l)}return h&&p?t.apply(this,a):(g=this.thru(f),h?r?g.value()[0]:g.value():g)})}),Ht(["pop","push","shift","sort","splice","unshift"],function(t){var e=hh[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Nt.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(B(i)?i:[],t)}return this[n](function(n){return e.apply(B(n)?n:[],t)})}}),Ro(kt.prototype,function(t,e){var n=Nt[e];if(n){var r=n.name+"";ph.call(It,r)||(It[r]=[]),It[r].push({name:e,func:n})}}),It[he(void 0,2).name]=[{name:"wrapper",func:void 0}],kt.prototype.clone=function(){var t=new kt(this.__wrapped__);return t.__actions__=Ct(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ct(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ct(this.__views__),t},kt.prototype.reverse=function(){if(this.__filtered__){var t=new kt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},kt.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=B(t),r=0>e,i=n?t.length:0,o=lh(0,i,this.__views__),a=o.start,s=o.end,c=s-a,f=r?s:a-1,l=this.__iteratees__,d=l.length,h=0,p=u(c,this.__takeCount__);if(!n||!r&&i==c&&p==c)return Yl(t,this.__actions__);var g=[];t:for(;c--&&h<p;){for(var m=-1,v=t[f+=e];++m<d;){var y=l[m],b=y.iteratee,_=y.type,x=b(v);if(2==_)v=x;else if(!x){if(1==_)continue t;break t}}g[h++]=v}return g},Nt.prototype.at=uh.at,Nt.prototype.chain=uh.wrapperChain,Nt.prototype.commit=uh.commit,Nt.prototype.next=uh.next,Nt.prototype.plant=uh.plant,Nt.prototype.reverse=uh.reverse,Nt.prototype.toJSON=Nt.prototype.valueOf=Nt.prototype.value=uh.value,Nt.prototype.first=Nt.prototype.head,gh&&(Nt.prototype[gh]=uh.toIterator),i.d(r,"add",function(){return z}),i.d(r,"after",function(){return J}),i.d(r,"ary",function(){return ye}),i.d(r,"assign",function(){return Je}),i.d(r,"assignIn",function(){return rn}),i.d(r,"assignInWith",function(){return on}),i.d(r,"assignWith",function(){return an}),i.d(r,"at",function(){return Bn}),i.d(r,"attempt",function(){return Xn}),i.d(r,"before",function(){return Hn}),i.d(r,"bind",function(){return Kn}),i.d(r,"bindAll",function(){return Yn}),i.d(r,"bindKey",function(){return Qn}),i.d(r,"camelCase",function(){return Lr}),i.d(r,"capitalize",function(){return sr}),i.d(r,"castArray",function(){return Pr}),i.d(r,"ceil",function(){return Or}),i.d(r,"chain",function(){return jr}),i.d(r,"chunk",function(){return Nr}),i.d(r,"clamp",function(){return Fr}),i.d(r,"clone",function(){return Fi}),i.d(r,"cloneDeep",function(){return Di}),i.d(r,"cloneDeepWith",function(){return Ui}),i.d(r,"cloneWith",function(){return Wi}),i.d(r,"commit",function(){return Vi}),i.d(r,"compact",function(){return zi}),i.d(r,"concat",function(){return qi}),i.d(r,"cond",function(){return xo}),i.d(r,"conforms",function(){return Eo}),i.d(r,"conformsTo",function(){return So}),i.d(r,"constant",function(){return qt}),i.d(r,"countBy",function(){return Oo}),i.d(r,"create",function(){return jo}),i.d(r,"curry",function(){return Bo}),i.d(r,"curryRight",function(){return Do}),i.d(r,"debounce",function(){return qo}),i.d(r,"deburr",function(){return hr}),i.d(r,"defaultTo",function(){return Go}),i.d(r,"defaults",function(){return Ko}),i.d(r,"defaultsDeep",function(){return oa}),i.d(r,"defer",function(){return ua}),i.d(r,"delay",function(){return fa}),i.d(r,"difference",function(){return pa}),i.d(r,"differenceBy",function(){return va}),i.d(r,"differenceWith",function(){return ba}),i.d(r,"divide",function(){return xa}),i.d(r,"drop",function(){return wa}),i.d(r,"dropRight",function(){return Ea}),i.d(r,"dropRightWhile",function(){return Ta}),i.d(r,"dropWhile",function(){return ka}),i.d(r,"each",function(){return Ra}),i.d(r,"eachRight",function(){return ja}),i.d(r,"endsWith",function(){return Na}),i.d(r,"entries",function(){return Da}),i.d(r,"entriesIn",function(){return Wa}),i.d(r,"eq",function(){return _e}),i.d(r,"escape",function(){return Ga}),i.d(r,"escapeRegExp",function(){return $a}),i.d(r,"every",function(){return Za}),i.d(r,"extend",function(){return rn}),i.d(r,"extendWith",function(){return on}),i.d(r,"fill",function(){return Ja}),i.d(r,"filter",function(){return es}),i.d(r,"find",function(){return is}),i.d(r,"findIndex",function(){return rs}),i.d(r,"findKey",function(){return as}),i.d(r,"findLast",function(){return us}),i.d(r,"findLastIndex",function(){return ss}),i.d(r,"findLastKey",function(){return cs}),i.d(r,"first",function(){return fs}),i.d(r,"flatMap",function(){return hs}),i.d(r,"flatMapDeep",function(){return ps}),i.d(r,"flatMapDepth",function(){return gs}),i.d(r,"flatten",function(){return jn}),i.d(r,"flattenDeep",function(){return ms}),i.d(r,"flattenDepth",function(){return vs}),i.d(r,"flip",function(){return ys}),i.d(r,"floor",function(){return bs}),i.d(r,"flow",function(){return xs}),i.d(r,"flowRight",function(){return ws}),i.d(r,"forEach",function(){return Ra}),i.d(r,"forEachRight",function(){return ja}),i.d(r,"forIn",function(){return Es}),i.d(r,"forInRight",function(){return Ss}),i.d(r,"forOwn",function(){return Ts}),i.d(r,"forOwnRight",function(){return ks}),i.d(r,"fromPairs",function(){return As}),i.d(r,"functions",function(){return Is}),i.d(r,"functionsIn",function(){return Ls}),i.d(r,"get",function(){return In}),i.d(r,"groupBy",function(){return Ms}),i.d(r,"gt",function(){return js}),i.d(r,"gte",function(){return Ns}),i.d(r,"has",function(){return Ds}),i.d(r,"hasIn",function(){return mo}),i.d(r,"head",function(){return fs}),i.d(r,"identity",function(){return tt}),i.d(r,"inRange",function(){return Us}),i.d(r,"includes",function(){return qs}),i.d(r,"indexOf",function(){return Gs}),i.d(r,"initial",function(){return Xs}),i.d(r,"intersection",function(){return Ks}),i.d(r,"intersectionBy",function(){return Ys}),i.d(r,"intersectionWith",function(){return Zs}),i.d(r,"invert",function(){return tu}),i.d(r,"invertBy",function(){return iu}),i.d(r,"invoke",function(){return su}),i.d(r,"invokeMap",function(){return uu}),i.d(r,"isArguments",function(){return Fe}),i.d(r,"isArray",function(){return B}),i.d(r,"isArrayBuffer",function(){return fu}),i.d(r,"isArrayLike",function(){return Re}),i.d(r,"isArrayLikeObject",function(){return Zo}),i.d(r,"isBoolean",function(){return lu}),i.d(r,"isBuffer",function(){return De.a}),i.d(r,"isDate",function(){return hu}),i.d(r,"isElement",function(){return pu}),i.d(r,"isEmpty",function(){return mu}),i.d(r,"isEqual",function(){return vu}),i.d(r,"isEqualWith",function(){return yu}),i.d(r,"isError",function(){return Gn}),i.d(r,"isFinite",function(){return _u}),i.d(r,"isFunction",function(){return et}),i.d(r,"isInteger",function(){return xu}),i.d(r,"isLength",function(){return Ae}),i.d(r,"isMap",function(){return ki}),i.d(r,"isMatch",function(){return wu}),i.d(r,"isMatchWith",function(){return Eu}),i.d(r,"isNaN",function(){return Tu}),i.d(r,"isNative",function(){return Ru}),i.d(r,"isNil",function(){return Iu}),i.d(r,"isNull",function(){return Lu}),i.d(r,"isNumber",function(){return Su}),i.d(r,"isObject",function(){return q}),i.d(r,"isObjectLike",function(){return C}),i.d(r,"isPlainObject",function(){return qn}),i.d(r,"isRegExp",function(){return Mu}),i.d(r,"isSafeInteger",function(){return Ou}),i.d(r,"isSet",function(){return Ri}),i.d(r,"isString",function(){return Ws}),i.d(r,"isSymbol",function(){return O}),i.d(r,"isTypedArray",function(){return qe}),i.d(r,"isUndefined",function(){return ju}),i.d(r,"isWeakMap",function(){return Nu}),i.d(r,"isWeakSet",function(){return Bu}),i.d(r,"iteratee",function(){return Fu}),i.d(r,"join",function(){return Uu}),i.d(r,"kebabCase",function(){return Wu}),i.d(r,"keyBy",function(){return Vu}),i.d(r,"keys",function(){return Ze}),i.d(r,"keysIn",function(){return nn}),i.d(r,"last",function(){return ga}),i.d(r,"lastIndexOf",function(){return zu}),i.d(r,"lodash",function(){return Nt}),i.d(r,"lowerCase",function(){return qu}),i.d(r,"lowerFirst",function(){return Gu}),i.d(r,"lt",function(){return Hu}),i.d(r,"lte",function(){return $u}),i.d(r,"map",function(){return ds}),i.d(r,"mapKeys",function(){return Ku}),i.d(r,"mapValues",function(){return Yu}),i.d(r,"matches",function(){return Zu}),i.d(r,"matchesProperty",function(){return Qu}),i.d(r,"max",function(){return tc}),i.d(r,"maxBy",function(){return ec}),i.d(r,"mean",function(){return ic}),i.d(r,"meanBy",function(){return oc}),i.d(r,"memoize",function(){return xn}),i.d(r,"merge",function(){return ac}),i.d(r,"mergeWith",function(){return ra}),i.d(r,"method",function(){return sc}),i.d(r,"methodOf",function(){return uc}),i.d(r,"min",function(){return cc}),i.d(r,"minBy",function(){return fc}),i.d(r,"mixin",function(){return lc}),i.d(r,"multiply",function(){return dc}),i.d(r,"negate",function(){return hc}),i.d(r,"next",function(){return mc}),i.d(r,"noop",function(){return At}),i.d(r,"now",function(){return Uo}),i.d(r,"nth",function(){return yc}),i.d(r,"nthArg",function(){return bc}),i.d(r,"omit",function(){return wc}),i.d(r,"omitBy",function(){return kc}),i.d(r,"once",function(){return Ac}),i.d(r,"orderBy",function(){return Lc}),i.d(r,"over",function(){return Mc}),i.d(r,"overArgs",function(){return Cc}),i.d(r,"overEvery",function(){return Oc}),i.d(r,"overSome",function(){return jc}),i.d(r,"pad",function(){return Wc}),i.d(r,"padEnd",function(){return Vc}),i.d(r,"padStart",function(){return zc}),i.d(r,"parseInt",function(){return Xc}),i.d(r,"partial",function(){return $c}),i.d(r,"partialRight",function(){return Yc}),i.d(r,"partition",function(){return Qc}),i.d(r,"pick",function(){return tf}),i.d(r,"pickBy",function(){return Tc}),i.d(r,"plant",function(){return ef}),i.d(r,"property",function(){return bo}),i.d(r,"propertyOf",function(){return nf}),i.d(r,"pull",function(){return cf}),i.d(r,"pullAll",function(){return uf}),i.d(r,"pullAllBy",function(){return ff}),i.d(r,"pullAllWith",function(){return lf}),i.d(r,"pullAt",function(){return pf}),i.d(r,"random",function(){return bf}),i.d(r,"range",function(){return wf}),i.d(r,"rangeRight",function(){return Ef}),i.d(r,"rearg",function(){return Sf}),i.d(r,"reduce",function(){return kf}),i.d(r,"reduceRight",function(){return Rf}),i.d(r,"reject",function(){return If}),i.d(r,"remove",function(){return Lf}),i.d(r,"repeat",function(){return Pf}),i.d(r,"replace",function(){return Mf}),i.d(r,"rest",function(){return Cf}),i.d(r,"result",function(){return Of}),i.d(r,"reverse",function(){return Nf}),i.d(r,"round",function(){return Bf}),i.d(r,"sample",function(){return Uf}),i.d(r,"sampleSize",function(){return qf}),i.d(r,"set",function(){return Gf}),i.d(r,"setWith",function(){return Xf}),i.d(r,"shuffle",function(){return Kf}),i.d(r,"size",function(){return Yf}),i.d(r,"slice",function(){return Zf}),i.d(r,"snakeCase",function(){return Qf}),i.d(r,"some",function(){return tl}),i.d(r,"sortBy",function(){return el}),i.d(r,"sortedIndex",function(){return il}),i.d(r,"sortedIndexBy",function(){return ol}),i.d(r,"sortedIndexOf",function(){return al}),i.d(r,"sortedLastIndex",function(){return sl}),i.d(r,"sortedLastIndexBy",function(){return ul}),i.d(r,"sortedLastIndexOf",function(){return cl}),i.d(r,"sortedUniq",function(){return ll}),i.d(r,"sortedUniqBy",function(){return dl}),i.d(r,"split",function(){return hl}),i.d(r,"spread",function(){return pl}),i.d(r,"startCase",function(){return gl}),i.d(r,"startsWith",function(){return ml}),i.d(r,"stubArray",function(){return qr}),i.d(r,"stubFalse",function(){return ku.a}),i.d(r,"stubObject",function(){return vl}),i.d(r,"stubString",function(){return yl}),i.d(r,"stubTrue",function(){return bl}),i.d(r,"subtract",function(){return _l}),i.d(r,"sum",function(){return xl}),i.d(r,"sumBy",function(){return wl}),i.d(r,"tail",function(){return El}),i.d(r,"take",function(){return Sl}),i.d(r,"takeRight",function(){return Tl}),i.d(r,"takeRightWhile",function(){return kl}),i.d(r,"takeWhile",function(){return Al}),i.d(r,"tap",function(){return Rl}),i.d(r,"template",function(){return zl}),i.d(r,"templateSettings",function(){return jl}),i.d(r,"throttle",function(){return Gl}),i.d(r,"thru",function(){return Xl}),i.d(r,"times",function(){return $l}),i.d(r,"toArray",function(){return gc}),i.d(r,"toFinite",function(){return Z}),i.d(r,"toInteger",function(){return Q}),i.d(r,"toIterator",function(){return Kl}),i.d(r,"toJSON",function(){return Zl}),i.d(r,"toLength",function(){return Qa}),i.d(r,"toLower",function(){return Ql}),i.d(r,"toNumber",function(){return Y}),i.d(r,"toPairs",function(){return Da}),i.d(r,"toPairsIn",function(){return Wa}),i.d(r,"toPath",function(){return Jl}),i.d(r,"toPlainObject",function(){return Jo}),i.d(r,"toSafeInteger",function(){return ed}),i.d(r,"toString",function(){return Tn}),i.d(r,"toUpper",function(){return nd}),i.d(r,"transform",function(){return rd}),i.d(r,"trim",function(){return sd}),i.d(r,"trimEnd",function(){return cd}),i.d(r,"trimStart",function(){return ld}),i.d(r,"truncate",function(){return gd}),i.d(r,"unary",function(){return md}),i.d(r,"unescape",function(){return _d}),i.d(r,"union",function(){return Ed}),i.d(r,"unionBy",function(){return Sd}),i.d(r,"unionWith",function(){return Td}),i.d(r,"uniq",function(){return kd}),i.d(r,"uniqBy",function(){return Ad}),i.d(r,"uniqWith",function(){return Rd}),i.d(r,"uniqueId",function(){return Ld}),i.d(r,"unset",function(){return Pd}),i.d(r,"unzip",function(){return Md}),i.d(r,"unzipWith",function(){return Cd}),i.d(r,"update",function(){return jd}),i.d(r,"updateWith",function(){return Nd}),i.d(r,"upperCase",function(){return Bd}),i.d(r,"upperFirst",function(){return ar}),i.d(r,"value",function(){return Zl}),i.d(r,"valueOf",function(){return Zl}),i.d(r,"values",function(){return zs}),i.d(r,"valuesIn",function(){return Fd}),i.d(r,"without",function(){return Dd}),i.d(r,"words",function(){return Ar}),i.d(r,"wrap",function(){return Ud}),i.d(r,"wrapperAt",function(){return Wd}),i.d(r,"wrapperChain",function(){return Vd}),i.d(r,"wrapperCommit",function(){return Vi}),i.d(r,"wrapperLodash",function(){return Nt}),i.d(r,"wrapperNext",function(){return mc}),i.d(r,"wrapperPlant",function(){return ef}),i.d(r,"wrapperReverse",function(){return zd}),i.d(r,"wrapperToIterator",function(){return Kl}),i.d(r,"wrapperValue",function(){return Zl}),i.d(r,"xor",function(){return Gd}),i.d(r,"xorBy",function(){return Xd}),i.d(r,"xorWith",function(){return Hd}),i.d(r,"zip",function(){return $d}),i.d(r,"zipObject",function(){return Yd}),i.d(r,"zipObjectDeep",function(){return Zd}),i.d(r,"zipWith",function(){return Qd}),i.d(r,"default",function(){return Nt})}]
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */)});
//# sourceMappingURL=hlviewer.min.js.map