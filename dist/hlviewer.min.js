/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2018 Stefan Stojković
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.HLViewer=e():t.HLViewer=e()}(window,function(){var t=Math.round,e=Math.floor,n=Math.ceil,r=Math.sqrt,i=Math.pow,o=Math.abs,a=Math.min,s=Math.sin,u=Math.cos,c=Math.PI,f=String.fromCharCode,l=Math.max;return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=81)}([function(t,e){"use strict";var n=Array.isArray;e.a=n},function(t,e,n){"use strict";var r=n(6),i=n(57),o=n(48);e.a=function(t,e){return Object(o.a)(Object(i.a)(t,e,r.a),t+"")}},function(t,e){"use strict";e.a=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";var r=n(7),i=n(3);e.a=function(t){return Object(i.a)(t)&&Object(r.a)(t)}},function(t,e,n){"use strict";var r=n(56),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},function(t,e){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var r=n(16),i=n(30);e.a=function(t){return null!=t&&Object(i.a)(t.length)&&!Object(r.a)(t)}},function(t,e,n){"use strict";var r=n(14),i=n(7),o=n(19),a=n(2);e.a=function(t,e,n){if(!Object(a.a)(n))return!1;var s=typeof e;return!("number"==s?!Object(i.a)(n)||!Object(o.a)(e,n.length):!("string"==s&&e in n))&&Object(r.a)(n[e],t)}},function(t,e,n){"use strict";var r=n(15),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r.a?r.a.toStringTag:void 0,u=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0}catch(e){}var r=a.call(t);return e?t[s]=n:delete t[s],r},c=Object.prototype.toString,f=function(t){return c.call(t)},l="[object Null]",d="[object Undefined]",h=r.a?r.a.toStringTag:void 0;e.a=function(t){return null==t?void 0===t?d:l:h&&h in Object(t)?u(t):f(t)}},function(t,e,n){"use strict";var r=n(62),i=n(2),o=n(32),a=Object.prototype.hasOwnProperty,s=function(t){if(!Object(i.a)(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Object(o.a)(t),n=[];for(var r in t)("constructor"!=r||!e&&a.call(t,r))&&n.push(r);return n},u=n(7);e.a=function(t){return Object(u.a)(t)?Object(r.a)(t,!0):s(t)}},function(t,e){"use strict";e.a=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){"use strict";e.a=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e){"use strict";e.a=function(t){return function(e){return t(e)}}},function(t,e){"use strict";e.a=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(5).a.Symbol;e.a=r},function(t,e,n){"use strict";var r=n(9),i=n(2);e.a=function(t){if(!Object(i.a)(t))return!1;var e=Object(r.a)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){"use strict";var r=n(31),i=n(18);e.a=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],f=o?o(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),a?Object(i.a)(n,c,f):Object(r.a)(n,c,f)}return n}},function(t,e,n){"use strict";var r=n(49);e.a=function(t,e,n){"__proto__"==e&&r.a?Object(r.a)(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){"use strict";var n=/^(?:0|[1-9]\d*)$/;e.a=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&-1<t&&0==t%1&&t<e}},function(t,e,n){"use strict";(function(t){var r=n(56),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.a.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();e.a=s}).call(this,n(66)(t))},function(t,e,n){"use strict";(function(t){var r=n(5),i=n(37),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.a.Buffer:void 0,u=(s?s.isBuffer:void 0)||i.a;e.a=u}).call(this,n(66)(t))},function(t,e,n){"use strict";function r(t){var e={},n="";for(var i in t){var o=t[i];if("$unique"==i)e[s.IS_UNIQUE]=o;else if("$nest"==i){var a=o;for(var u in a){var c=a[u];e[u]=r(c).result}}else"$debugName"==i?n=o:e[i]=o}return{result:e,debugName:n}}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map(function(t){return t&&"object"==typeof t?Object.keys(t).map(function(e){return!!t[e]&&e}):[t]}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return!!t}).join(" ")}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,r={},i=0,a=t;i<a.length;i++)if(null!=(n=a[i])&&!1!==n)for(var s in n){var u=n[s];(u||0===u)&&(r[s]="$nest"==s&&u?r.$nest?o(r.$nest,u):u:(-1!==s.indexOf("&")||0===s.indexOf("@media"))&&r[s]?o(r[s],u):u)}return r}function a(t){var e=new d({autoGenerateTag:!1});return t&&e.setStylesTarget(t),e}n.r(e);var s=n(64),u="undefined"==typeof requestAnimationFrame?function(t){return setTimeout(t)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window),c=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=[];t.type&&r.push(t.type),t.orientation&&r.push("(orientation: "+t.orientation+")"),t.minWidth&&r.push("(min-width: "+f(t.minWidth)+")"),t.maxWidth&&r.push("(max-width: "+f(t.maxWidth)+")"),t.minHeight&&r.push("(min-height: "+f(t.minHeight)+")"),t.maxHeight&&r.push("(max-height: "+f(t.maxHeight)+")");var i,a="@media "+r.join(" and "),s={$nest:(i={},i[a]=o.apply(void 0,e),i)};return s},f=function(t){return"string"==typeof t?t:t+"px"},l=function(){return s.create(void 0,!0)},d=function(){function t(t){var e=t.autoGenerateTag,n=this;this.cssRaw=function(t){t&&(n._raw+=t||"",n._pendingRawChange=!0,n._styleUpdated())},this.cssRule=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var a=r(o.apply(void 0,e)).result;return n._freeStyle.registerRule(t,a),void n._styleUpdated()},this.forceRenderStyles=function(){var t=n._getTag();t&&(t.textContent=n.getStyles())},this.fontFace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r,i=n._freeStyle,o=0,a=t;o<a.length;o++)r=a[o],i.registerRule("@font-face",r);n._styleUpdated()},this.getStyles=function(){return(n._raw||"")+n._freeStyle.getStyles()},this.keyframes=function(t){var e=function(t){var e={$debugName:void 0,keyframes:{}};for(var n in t){var r=t[n];"$debugName"==n?e.$debugName=r:e.keyframes[n]=r}return e}(t),r=e.keyframes,i=e.$debugName,o=n._freeStyle.registerKeyframes(r,i);return n._styleUpdated(),o},this.reinit=function(){var t=l();n._freeStyle=t,n._lastFreeStyleChangeId=t.changeId,n._raw="",n._pendingRawChange=!1;var e=n._getTag();e&&(e.textContent="")},this.setStylesTarget=function(t){n._tag&&(n._tag.textContent=""),n._tag=t,n.forceRenderStyles()},this.stylesheet=function(t){for(var e={},r=0,i=Object.getOwnPropertyNames(t);r<i.length;r++){var o=i[r],a=t[o];a&&(a.$debugName=o,e[o]=n.style(a))}return e};var i=l();this._autoGenerateTag=e,this._freeStyle=i,this._lastFreeStyleChangeId=i.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return t.prototype._afterAllSync=function(t){var e=this;this._pending++;var n=this._pending;u(function(){n!==e._pending||t()})},t.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var t="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(t),this._tag=t,t}},t.prototype._styleUpdated=function(){var t=this,e=this._freeStyle.changeId,n=this._lastFreeStyleChangeId;(this._pendingRawChange||e!==n)&&(this._lastFreeStyleChangeId=e,this._pendingRawChange=!1,this._afterAllSync(function(){return t.forceRenderStyles()}))},t.prototype.style=function(){var t=this._freeStyle,e=r(o.apply(void 0,arguments)),n=e.result,i=e.debugName,a=i?t.registerStyle(n,i):t.registerStyle(n);return this._styleUpdated(),a},t}(),h=n(72);n.d(e,"setStylesTarget",function(){return g}),n.d(e,"cssRaw",function(){return m}),n.d(e,"cssRule",function(){return v}),n.d(e,"forceRenderStyles",function(){return y}),n.d(e,"fontFace",function(){return b}),n.d(e,"getStyles",function(){return _}),n.d(e,"keyframes",function(){return x}),n.d(e,"reinit",function(){return w}),n.d(e,"style",function(){return E}),n.d(e,"stylesheet",function(){return S}),n.d(e,"createTypeStyle",function(){return a}),n.d(e,"TypeStyle",function(){return d}),n.d(e,"types",function(){return h}),n.d(e,"extend",function(){return o}),n.d(e,"classes",function(){return i}),n.d(e,"media",function(){return c});var p=new d({autoGenerateTag:!0}),g=p.setStylesTarget,m=p.cssRaw,v=p.cssRule,y=p.forceRenderStyles,b=p.fontFace,_=p.getStyles,x=p.keyframes,w=p.reinit,E=p.style,S=p.stylesheet},function(t,e){!function(t){"use strict";function e(t,e){var n,r,i,o,a=L;for(o=arguments.length;2<o--;)I.push(arguments[o]);for(e&&null!=e.children&&(!I.length&&I.push(e.children),delete e.children);I.length;)if((r=I.pop())&&void 0!==r.pop)for(o=r.length;o--;)I.push(r[o]);else"boolean"==typeof r&&(r=null),(i="function"!=typeof t)&&(null==r?r="":"number"==typeof r?r+="":"string"!=typeof r&&(i=!1)),i&&n?a[a.length-1]+=r:a===L?a=[r]:a.push(r),n=i;var s=new A;return s.nodeName=t,s.children=a,s.attributes=null==e?void 0:e,s.key=null==e?void 0:e.key,void 0!==R.vnode&&R.vnode(s),s}function n(t,e){for(var n in e)t[n]=e[n];return t}function r(t,e){t&&("function"==typeof t?t(e):t.current=e)}function i(t,r){return e(t.nodeName,n(n({},t.attributes),r),2<arguments.length?[].slice.call(arguments,2):t.children)}function o(t){!t._dirty&&(t._dirty=!0)&&1==U.push(t)&&(R.debounceRendering||P)(a)}function a(){for(var t;t=U.pop();)t._dirty&&E(t)}function s(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&u(t,e.nodeName):n||t._componentConstructor===e.nodeName}function u(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function c(t){var e=n({},t.attributes);e.children=t.children;var r=t.nodeName.defaultProps;if(void 0!==r)for(var i in r)void 0===e[i]&&(e[i]=r[i]);return e}function f(t){var e=t.parentNode;e&&e.removeChild(t)}function l(t,e,n,i,o){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)r(n,null),r(i,t);else if("class"!==e||o)if("style"===e){if(i&&"string"!=typeof i&&"string"!=typeof n||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof n)for(var a in n)a in i||(t.style[a]="");for(var s in i)t.style[s]="number"==typeof i[s]&&!1===D.test(s)?i[s]+"px":i[s]}}else if("dangerouslySetInnerHTML"===e)i&&(t.innerHTML=i.__html||"");else if("o"==e[0]&&"n"==e[1]){var u=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),i?!n&&t.addEventListener(e,d,u):t.removeEventListener(e,d,u),(t._listeners||(t._listeners={}))[e]=i}else if("list"!==e&&"type"!==e&&!o&&e in t){try{t[e]=null==i?"":i}catch(e){}(null==i||!1===i)&&"spellcheck"!=e&&t.removeAttribute(e)}else{var c=o&&e!==(e=e.replace(/^xlink:?/,""));null==i||!1===i?c?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof i&&(c?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),i):t.setAttribute(e,i))}else t.className=i||""}function d(t){return this._listeners[t.type](R.event&&R.event(t)||t)}function h(){for(var t;t=W.shift();)R.afterMount&&R.afterMount(t),t.componentDidMount&&t.componentDidMount()}function p(t,e,n,r,i,o){V++||(z=null!=i&&void 0!==i.ownerSVGElement,q=null!=t&&!(F in t));var a=g(t,e,n,r,o);return i&&a.parentNode!==i&&i.appendChild(a),--V||(q=!1,!o&&h()),a}function g(t,e,n,r,i){var o=t,a=z;if((null==e||"boolean"==typeof e)&&(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),v(t,!0))),o[F]=!0,o;var s=e.nodeName;if("function"==typeof s)return S(t,e,n,r);if(z="svg"===s||"foreignObject"!==s&&z,s+="",(!t||!u(t,s))&&(o=function(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}(s,z),t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),v(t,!0)}var c=o.firstChild,f=o[F],l=e.children;if(null==f){f=o[F]={};for(var d=o.attributes,h=d.length;h--;)f[d[h].name]=d[h].value}return!q&&l&&1===l.length&&"string"==typeof l[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=l[0]&&(c.nodeValue=l[0]):(l&&l.length||null!=c)&&m(o,l,n,r,q||null!=f.dangerouslySetInnerHTML),b(o,e.attributes,f),z=a,o}function m(t,e,n,r,i){var o,a,u,c,l,d=t.childNodes,h=[],p={},m=0,y=0,b=d.length,_=0,x=e?e.length:0;if(0!==b)for(var w=0;w<b;w++){var E=d[w],S=E[F],O=x&&S?E._component?E._component.__key:S.key:null;null==O?(S||(void 0===E.splitText?i:!i||E.nodeValue.trim()))&&(h[_++]=E):(m++,p[O]=E)}if(0!==x)for(var T=0;T<x;T++){l=null;var k=(c=e[T]).key;if(null!=k)m&&void 0!==p[k]&&(l=p[k],p[k]=void 0,m--);else if(y<_)for(o=y;o<_;o++)if(void 0!==h[o]&&s(a=h[o],c,i)){l=a,h[o]=void 0,o===_-1&&_--,o===y&&y++;break}l=g(l,c,n,r),u=d[T],l&&l!==t&&l!==u&&(null==u?t.appendChild(l):l===u.nextSibling?f(u):t.insertBefore(l,u))}if(m)for(var j in p)void 0!==p[j]&&v(p[j],!1);for(;y<=_;)void 0!==(l=h[_--])&&v(l,!1)}function v(t,e){var n=t._component;n?O(n):(null!=t[F]&&r(t[F].ref,null),(!1===e||null==t[F])&&f(t),y(t))}function y(t){for(t=t.lastChild;t;){var e=t.previousSibling;v(t,!0),t=e}}function b(t,e,n){for(var r in n)e&&null!=e[r]||null==n[r]||l(t,r,n[r],n[r]=void 0,z);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||l(t,r,n[r],n[r]=e[r],z)}function _(t,e,n){var r,i=G.length;for(t.prototype&&t.prototype.render?(r=new t(e,n),T.call(r,e,n)):((r=new T(e,n)).constructor=t,r.render=x);i--;)if(G[i].constructor===t)return r.nextBase=G[i].nextBase,G.splice(i,1),r;return r}function x(t,e,n){return this.constructor(t,n)}function w(t,e,n,i,a){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||a?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,i)),i&&i!==t.context&&(!t.prevContext&&(t.prevContext=t.context),t.context=i),!t.prevProps&&(t.prevProps=t.props),t.props=e,t._disable=!1,n!==M&&(n!==C&&!1===R.syncComponentUpdates&&t.base?o(t):E(t,C,a)),r(t.__ref,t))}function E(t,e,r,i){if(!t._disable){var o,a,s,u=t.props,f=t.state,l=t.context,d=t.prevProps||u,g=t.prevState||f,m=t.prevContext||l,y=t.base,b=t.nextBase,x=y||b,S=t._component,T=!1,k=m;if(t.constructor.getDerivedStateFromProps&&(f=n(n({},f),t.constructor.getDerivedStateFromProps(u,f)),t.state=f),y&&(t.props=d,t.state=g,t.context=m,e!==N&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(u,f,l)?T=!0:t.componentWillUpdate&&t.componentWillUpdate(u,f,l),t.props=u,t.state=f,t.context=l),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!T){o=t.render(u,f,l),t.getChildContext&&(l=n(n({},l),t.getChildContext())),y&&t.getSnapshotBeforeUpdate&&(k=t.getSnapshotBeforeUpdate(d,g));var j,A,I=o&&o.nodeName;if("function"==typeof I){var L=c(o);(a=S)&&a.constructor===I&&L.key==a.__key?w(a,L,C,l,!1):(j=a,t._component=a=_(I,L,l),a.nextBase=a.nextBase||b,a._parentComponent=t,w(a,L,M,l,!1),E(a,C,r,!0)),A=a.base}else s=x,(j=S)&&(s=t._component=null),(x||e===C)&&(s&&(s._component=null),A=p(s,o,l,r||!y,x&&x.parentNode,!0));if(x&&A!==x&&a!==S){var P=x.parentNode;P&&A!==P&&(P.replaceChild(A,x),!j&&(x._component=null,v(x,!1)))}if(j&&O(j),t.base=A,A&&!i){for(var B=t,F=t;F=F._parentComponent;)(B=F).base=A;A._component=B,A._componentConstructor=B.constructor}}for(!y||r?W.push(t):!T&&(t.componentDidUpdate&&t.componentDidUpdate(d,g,k),R.afterUpdate&&R.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);V||i||h()}}function S(t,e,n,r){for(var i=t&&t._component,o=i,a=t,s=i&&t._componentConstructor===e.nodeName,u=s,f=c(e);i&&!u&&(i=i._parentComponent);)u=i.constructor===e.nodeName;return i&&u&&(!r||i._component)?(w(i,f,B,n,r),t=i.base):(o&&!s&&(O(o),t=a=null),i=_(e.nodeName,f,n),t&&!i.nextBase&&(i.nextBase=t,a=null),w(i,f,C,n,r),t=i.base,a&&t!==a&&(a._component=null,v(a,!1))),t}function O(t){R.beforeUnmount&&R.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?O(n):e&&(null!=e[F]&&r(e[F].ref,null),t.nextBase=e,f(e),G.push(t),y(e)),r(t.__ref,null)}function T(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function k(t,e,n){return p(n,t,{},!1,e,!1)}function j(){return{}}var A=function(){},R={},I=[],L=[],P="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,M=0,C=1,N=2,B=3,F="__preactattr_",D=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,U=[],W=[],V=0,z=!1,q=!1,G=[];n(T.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=n(n({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),o(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),E(this,N)},render:function(){}}),t.default={h:e,createElement:e,cloneElement:i,createRef:j,Component:T,render:k,rerender:a,options:R},t.h=e,t.createElement=e,t.cloneElement=i,t.createRef=j,t.Component=T,t.render=k,t.rerender=a,t.options=R,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";var r=n(9),i=n(3),o=function(t){return Object(i.a)(t)&&"[object Arguments]"==Object(r.a)(t)},a=Object.prototype,s=a.hasOwnProperty,u=a.propertyIsEnumerable,c=o(function(){return arguments}())?o:function(t){return Object(i.a)(t)&&s.call(t,"callee")&&!u.call(t,"callee")};e.a=c},function(t,e,n){"use strict";var r=n(9),i=n(30),o=n(3),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=n(13),u=n(20),c=u.a&&u.a.isTypedArray,f=c?Object(s.a)(c):function(t){return Object(o.a)(t)&&Object(i.a)(t.length)&&!!a[Object(r.a)(t)]};e.a=f},function(t,e,n){"use strict";var r=n(65);e.a=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Object(r.a)(n)?n:void 0}},function(t,e,n){"use strict";var r=n(9),i=n(38),o=n(3),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,f=u.call(Object);e.a=function(t){if(!Object(o.a)(t)||"[object Object]"!=Object(r.a)(t))return!1;var e=Object(i.a)(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==f}},function(t,e,n){"use strict";var r=n(2),i=Object.create,o=function(){function t(){}return function(e){if(!Object(r.a)(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(8);e.a=function(t){return Object(r.a)(function(e,n){var r=-1,o=n.length,a=1<o?n[o-1]:void 0,s=2<o?n[2]:void 0;for(a=3<t.length&&"function"==typeof a?(o--,a):void 0,s&&Object(i.a)(n[0],n[1],s)&&(a=3>o?void 0:a,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e})}},function(t,e){"use strict";e.a=function(t){return"number"==typeof t&&-1<t&&0==t%1&&t<=9007199254740991}},function(t,e,n){"use strict";var r=n(18),i=n(14),o=Object.prototype.hasOwnProperty;e.a=function(t,e,n){var a=t[e];o.call(t,e)&&Object(i.a)(a,n)&&(void 0!==n||e in t)||Object(r.a)(t,e,n)}},function(t,e){"use strict";var n=Object.prototype;e.a=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){"use strict";function r(t){var e=this.__data__=new i.a(t);this.size=e.size}var i=n(39),o=n(40),a=n(41);r.prototype.clear=function(){this.__data__=new i.a,this.size=0},r.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},r.prototype.get=function(t){return this.__data__.get(t)},r.prototype.has=function(t){return this.__data__.has(t)},r.prototype.set=function(t,e){var n=this.__data__;if(n instanceof i.a){var r=n.__data__;if(!o.a||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a.a(r)}return n.set(t,e),this.size=n.size,this},e.a=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.ControlsStyle=r.stylesheet({controls:Object.assign({},{zIndex:30,position:"absolute",width:"100%",bottom:0,padding:"0 16px",boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.4)",userSelect:"none",opacity:0,transition:"opacity 0.2s"}),controlsVisible:Object.assign({},{zIndex:30,position:"absolute",width:"100%",bottom:0,padding:"0 16px",boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.4)",userSelect:"none",opacity:0,transition:"opacity 0.2s"},{opacity:1}),buttons:{height:"100%",display:"flex",justifyContent:"space-between",marginBottom:"6px",alignItems:"center"},button:{width:"32px",height:"32px",padding:"7px",boxSizing:"border-box",cursor:"pointer"},left:{display:"flex",alignItems:"center",$nest:{"& .button":{marginRight:"8px"}}},right:{display:"flex",alignItems:"center",width:"70px",height:"100%",justifyContent:"space-between"}})},function(t,e){"use strict";var n=Function.prototype.toString;e.a=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){"use strict";e.a=function(t){return function(){return t}}},function(t,e){"use strict";e.a=function(){return!1}},function(t,e,n){"use strict";var r=n(61),i=Object(r.a)(Object.getPrototypeOf,Object);e.a=i},function(t,e,n){"use strict";function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(14),o=function(t,e){for(var n=t.length;n--;)if(Object(i.a)(t[n][0],e))return n;return-1},a=Array.prototype.splice;r.prototype.clear=function(){this.__data__=[],this.size=0},r.prototype.delete=function(t){var e=this.__data__,n=o(e,t);return!(0>n)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)},r.prototype.get=function(t){var e=this.__data__,n=o(e,t);return 0>n?void 0:e[n][1]},r.prototype.has=function(t){return-1<o(this.__data__,t)},r.prototype.set=function(t,e){var n=this.__data__,r=o(n,t);return 0>r?(++this.size,n.push([t,e])):n[r][1]=e,this},e.a=r},function(t,e,n){"use strict";var r=n(26),i=n(5),o=Object(r.a)(i.a,"Map");e.a=o},function(t,e,n){"use strict";function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(26),a=Object(o.a)(Object,"create"),s=Object.prototype.hasOwnProperty,u=Object.prototype.hasOwnProperty;r.prototype.clear=function(){this.__data__=a?a(null):{},this.size=0},r.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},r.prototype.get=function(t){var e=this.__data__;if(a){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(e,t)?e[t]:void 0},r.prototype.has=function(t){var e=this.__data__;return a?void 0!==e[t]:u.call(e,t)},r.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=a&&void 0===e?"__lodash_hash_undefined__":e,this};var c=r,f=n(39),l=n(40),d=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};i.prototype.clear=function(){this.size=0,this.__data__={hash:new c,map:new(l.a||f.a),string:new c}},i.prototype.delete=function(t){var e=d(this,t).delete(t);return this.size-=e?1:0,e},i.prototype.get=function(t){return d(this,t).get(t)},i.prototype.has=function(t){return d(this,t).has(t)},i.prototype.set=function(t,e){var n=d(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},e.a=i},function(t,e,n){"use strict";var r=n(17),i=n(10);e.a=function(t){return Object(r.a)(t,Object(i.a)(t))}},function(t,e,n){"use strict";var r=n(47),i=n(29),o=Object(i.a)(function(t,e,n,i){Object(r.a)(t,e,n,i)});e.a=o},function(t,e,n){"use strict";var r=n(58),i=Object(r.a)();e.a=i},function(t,e,n){"use strict";var r=n(51);e.a=function(t){var e=new t.constructor(t.byteLength);return new r.a(e).set(new r.a(t)),e}},function(t,e){"use strict";e.a=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){"use strict";var r=n(33),i=n(18),o=n(14),a=function(t,e,n){(void 0===n||Object(o.a)(t[e],n))&&(void 0!==n||e in t)||Object(i.a)(t,e,n)},s=n(44),u=n(59),c=n(60),f=n(11),l=n(63),d=n(24),h=n(0),p=n(4),g=n(21),m=n(16),v=n(2),y=n(27),b=n(25),_=function(t,e){return"constructor"===e&&"function"==typeof t[e]||"__proto__"==e?void 0:t[e]},x=n(42),w=function(t,e,n,r,i,o,s){var w=_(t,n),E=_(e,n),S=s.get(E);if(S)a(t,n,S);else{var O=o?o(w,E,n+"",t,e,s):void 0,T=void 0===O;if(T){var k=Object(h.a)(E),j=!k&&Object(g.a)(E),A=!k&&!j&&Object(b.a)(E);O=E,k||j||A?Object(h.a)(w)?O=w:Object(p.a)(w)?O=Object(f.a)(w):j?(T=!1,O=Object(u.a)(E,!0)):A?(T=!1,O=Object(c.a)(E,!0)):O=[]:Object(y.a)(E)||Object(d.a)(E)?(O=w,Object(d.a)(w)?O=Object(x.a)(w):(!Object(v.a)(w)||Object(m.a)(w))&&(O=Object(l.a)(E))):T=!1}T&&(s.set(E,O),i(O,E,r,o,s),s.delete(E)),a(t,n,O)}},E=n(10);e.a=function t(e,n,i,o,u){e===n||Object(s.a)(n,function(s,c){if(u||(u=new r.a),Object(v.a)(s))w(e,n,c,i,t,o,u);else{var f=o?o(_(e,c),s,c+"",e,n,u):void 0;void 0===f&&(f=s),a(e,c,f)}},E.a)}},function(t,e,n){"use strict";var r=n(36),i=n(49),o=n(6),a=i.a?function(t,e){return Object(i.a)(t,"toString",{configurable:!0,enumerable:!1,value:Object(r.a)(e),writable:!0})}:o.a,s=n(55),u=Object(s.a)(a);e.a=u},function(t,e,n){"use strict";var r=n(26),i=function(){try{var t=Object(r.a)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.a=i},function(t,e,n){"use strict";var r=n(5).a["__core-js_shared__"];e.a=r},function(t,e,n){"use strict";var r=n(5).a.Uint8Array;e.a=r},function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.UByte=0]="UByte",t[t.Byte=1]="Byte",t[t.UShort=2]="UShort",t[t.Short=3]="Short",t[t.UInt=4]="UInt",t[t.Int=5]="Int",t[t.Float=6]="Float",t[t.Double=7]="Double",t[t.NString=8]="NString",t[t.String=9]="String"}(n=e.ReaderDataType||(e.ReaderDataType={})),e.Reader=class{constructor(t){if(0===t.byteLength)throw new Error("ArrayBuffer must have size greater than zero");this.data=new DataView(t),this.offset=0}length(){return this.data.byteLength}tell(){return this.offset}seek(t){this.offset=l(0,t)}skip(t){this.seek(this.tell()+t)}b(){const t=this.data.getInt8(this.offset);return this.skip(1),t}ub(){const t=this.data.getUint8(this.offset);return this.skip(1),t}s(t=!0){const e=this.data.getInt16(this.offset,t);return this.skip(2),e}us(t=!0){const e=this.data.getUint16(this.offset,t);return this.skip(2),e}i(t=!0){const e=this.data.getInt32(this.tell(),t);return this.skip(4),e}ui(t=!0){const e=this.data.getUint32(this.tell(),t);return this.skip(4),e}f(t=!0){const e=this.data.getFloat32(this.tell(),t);return this.skip(4),e}lf(t=!0){const e=this.data.getFloat64(this.tell(),t);return this.skip(8),e}str(){let t=this.ub(),e="";for(;0!==t;)e+=f(t),t=this.ub();return e}nstr(t){if(0>t)throw new Error("Invalid string length");let e="";for(;0<t;){t-=1;const n=this.ub();if(0===n)break;e+=f(n)}return 0!==t&&this.skip(t),e}arr(t,e){e.bind(this);const n=[];for(;0<t--;)n.push(e());return n}arrx(t,e,r=0){let i;switch(e){case n.UByte:i=new Uint8Array(this.data.buffer,this.tell(),t),this.skip(t);break;case n.Byte:i=new Int8Array(this.data.buffer,this.tell(),t),this.skip(t);break;case n.UShort:i=new Uint16Array(this.data.buffer,this.tell(),t),this.skip(2*t);break;case n.Short:i=new Int16Array(this.data.buffer,this.tell(),t),this.skip(2*t);break;case n.UInt:i=new Uint32Array(this.data.buffer,this.tell(),t),this.skip(4*t);break;case n.Int:i=new Int32Array(this.data.buffer,this.tell(),t),this.skip(4*t);break;case n.Float:i=new Float32Array(this.data.buffer,this.tell(),t),this.skip(4*t);break;case n.Double:i=new Float64Array(this.data.buffer,this.tell(),t),this.skip(8*t);break;case n.NString:for(i=[];0<t--;)i.push(i.nstr(r));break;case n.String:for(i=[];0<t--;)i.push(i.str())}return i}}},function(t,e,n){"use strict";function r(t,e,n,i,o,u){return Object(s.a)(t)&&Object(s.a)(e)&&(u.set(e,t),Object(a.a)(t,e,void 0,r,u),u.delete(e)),t}n.r(e);var i=n(12),o=n(1),a=n(47),s=n(2),u=n(43),c=Object(o.a)(function(t){return t.push(void 0,r),Object(i.a)(u.a,void 0,t)});e.default=c},function(t){"use strict";function e(){e.init.call(this)}function n(t){return void 0===t._maxListeners?e.defaultMaxListeners:t._maxListeners}function r(t,e,r,i){var o,a,s;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),s=a[e]),void 0===s)s=a[e]=r,++t._eventsCount;else if("function"==typeof s?s=a[e]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),0<(o=n(t))&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,function(t){console&&console.warn&&console.warn(t)}(u)}return t}function i(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,l(this.listener,this.target,t))}function o(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=i.bind(r);return o.listener=n,r.wrapFn=o,o}function a(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):u(i,i.length)}function s(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function u(t,e){for(var n=Array(e),r=0;r<e;++r)n[r]=t[r];return n}var c,f="object"==typeof Reflect?Reflect:null,l=f&&"function"==typeof f.apply?f.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};c=f&&"function"==typeof f.ownKeys?f.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var d=Number.isNaN||function(t){return t!=t};t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var h=10;Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||0>t||d(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),e.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(t){if("number"!=typeof t||0>t||d(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},e.prototype.getMaxListeners=function(){return n(this)},e.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(0<e.length&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[t];if(void 0===s)return!1;if("function"==typeof s)l(s,this,e);else{var c=s.length,f=u(s,c);for(n=0;n<c;++n)l(f[n],this,e)}return!0},e.prototype.addListener=function(t,e){return r(this,t,e,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(t,e){return r(this,t,e,!0)},e.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,o(this,t,e)),this},e.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,o(this,t,e)),this},e.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(0>i)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"===(i=o[r])||this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},e.prototype.listeners=function(t){return a(this,t,!0)},e.prototype.rawListeners=function(t){return a(this,t,!1)},e.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):s.call(t,e)},e.prototype.listenerCount=s,e.prototype.eventNames=function(){return 0<this._eventsCount?c(this._events):[]}},function(t,e){"use strict";var n=Date.now;e.a=function(t){var e=0,r=0;return function(){var i=n(),o=16-(i-r);if(r=i,0<o){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(91))},function(t,e,n){"use strict";var r=n(12),i=l;e.a=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),u=Array(s);++a<s;)u[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=n(u),Object(r.a)(t,this,c)}}},function(t,e){"use strict";e.a=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){"use strict";(function(t){var r=n(5),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(66)(t))},function(t,e,n){"use strict";var r=n(45);e.a=function(t,e){var n=e?Object(r.a)(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e){"use strict";e.a=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){"use strict";var r=n(46),i=n(24),o=n(0),a=n(21),s=n(19),u=n(25),c=Object.prototype.hasOwnProperty;e.a=function(t,e){var n=Object(o.a)(t),f=!n&&Object(i.a)(t),l=!n&&!f&&Object(a.a)(t),d=!n&&!f&&!l&&Object(u.a)(t),h=n||f||l||d,p=h?Object(r.a)(t.length,String):[],g=p.length;for(var m in t)(e||c.call(t,m))&&(!h||!("length"==m||l&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||Object(s.a)(m,g)))&&p.push(m);return p}},function(t,e,n){"use strict";var r=n(28),i=n(38),o=n(32);e.a=function(t){return"function"!=typeof t.constructor||Object(o.a)(t)?{}:Object(r.a)(Object(i.a)(t))}},function(t,e,n){"use strict";(function(t){function n(t){return t.replace(g,b).replace(m,"-ms-")}function r(t){for(var e=5381,n=t.length;n--;)e=33*e^t.charCodeAt(n);return(e>>>0).toString(36)}function i(t,e){return"number"!=typeof e||0===e||_.hasOwnProperty(t)?t+":"+e:t+":"+e+"px"}function o(t){return t.sort(function(t,e){return t[0]>e[0]?1:-1})}function a(t,r){for(var i=[],a=[],u=!1,c=0,f=Object.keys(t);c<f.length;c++){var l=f[c],d=t[l];null!=d&&(l===e.IS_UNIQUE?u=!0:"object"!=typeof d||Array.isArray(d)?i.push([n(l.trim()),d]):a.push([l.trim(),d]))}return{style:s(o(i)),nested:r?a:o(a),isUnique:u}}function s(t){return t.map(function(t){var e=t[0],n=t[1];return Array.isArray(n)?n.map(function(t){return i(e,t)}).join(";"):i(e,n)}).join(";")}function u(t,e){return-1===t.indexOf("&")?e+" "+t:t.replace(v,e)}function c(t,e,n,r,i){var o=a(e,""!==t),s=o.style,f=o.nested,l=o.isUnique,d=s;if(64===t.charCodeAt(0)){var h={selector:t,styles:[],rules:[],style:i?"":s};n.push(h),s&&i&&h.styles.push({selector:i,style:s,isUnique:l});for(var p=0,g=f;p<g.length;p++){var m=g[p];d+=(_=m[0])+c(_,m[1],h.rules,h.styles,i)}}else{var v=i?u(t,i):t;s&&r.push({selector:v,style:s,isUnique:l});for(var y=0,b=f;y<b.length;y++){var _,x=b[y];d+=(_=x[0])+c(_,x[1],n,r,v)}}return d}function f(t,e,n,r,i,o){for(var a=0,s=r;a<s.length;a++){var c=s[a],l=c.selector,d=c.style,p=c.isUnique,g=o?u(l,i):l,m=p?"u\0"+(++h).toString(36):"s\0"+e+"\0"+d;(b=new j(d,m)).add(new k(g,"k\0"+e+"\0"+g)),t.add(b)}for(var v=0,y=n;v<y.length;v++){var b,_=y[v],x=(l=_.selector,d=_.style,_.rules),w=_.styles;f(b=new A(l,d,"r\0"+e+"\0"+l+"\0"+d),e,x,w,i,o),t.add(b)}}function l(t){for(var e="",n=0;n<t.length;n++)e+=t[n];return e}var d=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var h=0;e.IS_UNIQUE="__DO_NOT_DEDUPE_STYLE__";for(var p,g=/[A-Z]/g,m=/^ms-/,v=/&/g,y=/[ !#$%&()*+,.\/;<=>?@[\]^`{|}~"'\\]/g,b=function(t){return"-"+t.toLowerCase()},_={"animation-iteration-count":!0,"border-image-outset":!0,"border-image-slice":!0,"border-image-width":!0,"box-flex":!0,"box-flex-group":!0,"box-ordinal-group":!0,"column-count":!0,columns:!0,"counter-increment":!0,"counter-reset":!0,flex:!0,"flex-grow":!0,"flex-positive":!0,"flex-shrink":!0,"flex-negative":!0,"flex-order":!0,"font-weight":!0,"grid-area":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-span":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-span":!0,"grid-row-start":!0,"line-clamp":!0,"line-height":!0,opacity:!0,order:!0,orphans:!0,"tab-size":!0,widows:!0,"z-index":!0,zoom:!0,"fill-opacity":!0,"flood-opacity":!0,"stop-opacity":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0},x=0,w=Object.keys(_);x<w.length;x++){p=w[x];for(var E=0,S=["-webkit-","-ms-","-moz-","-o-",""];E<S.length;E++)_[S[E]+p]=!0}e.escape=function(t){return t.replace(y,"\\$&")},e.hyphenate=n,e.stringHash=r;var O={add:function(){},change:function(){},remove:function(){}},T=function(){function t(t){void 0===t&&(t=O),this.changes=t,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}return t.prototype.add=function(e){var n=this._counters[e.id]||0,r=this._children[e.id]||e.clone();if(this._counters[e.id]=n+1,0===n)this._children[r.id]=r,this._keys.push(r.id),this.sheet.push(r.getStyles()),this.changeId++,this.changes.add(r,this._keys.length-1);else if(r instanceof t&&e instanceof t){var i=this._keys.indexOf(e.id),o=r.changeId;r.merge(e),r.changeId!==o&&(this.sheet.splice(i,1,r.getStyles()),this.changeId++,this.changes.change(r,i,i))}return r},t.prototype.remove=function(e){var n=this._counters[e.id];if(void 0!==n&&0<n){this._counters[e.id]=n-1;var r=this._children[e.id],i=this._keys.indexOf(r.id);if(1===n)delete this._counters[e.id],delete this._children[e.id],this._keys.splice(i,1),this.sheet.splice(i,1),this.changeId++,this.changes.remove(r,i);else if(r instanceof t&&e instanceof t){var o=r.changeId;r.unmerge(e),r.changeId!==o&&(this.sheet.splice(i,1,r.getStyles()),this.changeId++,this.changes.change(r,i,i))}}},t.prototype.values=function(){var t=this;return this._keys.map(function(e){return t._children[e]})},t.prototype.merge=function(t){for(var e,n=0,r=t.values();n<r.length;n++)e=r[n],this.add(e);return this},t.prototype.unmerge=function(t){for(var e,n=0,r=t.values();n<r.length;n++)e=r[n],this.remove(e);return this},t.prototype.clone=function(){return(new t).merge(this)},t}();e.Cache=T;var k=function(){function t(t,e){this.selector=t,this.id=e}return t.prototype.getStyles=function(){return this.selector},t.prototype.clone=function(){return new t(this.selector,this.id)},t}();e.Selector=k;var j=function(t){function e(e,n){var r=t.call(this)||this;return r.style=e,r.id=n,r}return d(e,t),e.prototype.getStyles=function(){return this.sheet.join(",")+"{"+this.style+"}"},e.prototype.clone=function(){return new e(this.style,this.id).merge(this)},e}(T);e.Style=j;var A=function(t){function e(e,n,r){var i=t.call(this)||this;return i.rule=e,i.style=n,i.id=r,i}return d(e,t),e.prototype.getStyles=function(){return this.rule+"{"+this.style+l(this.sheet)+"}"},e.prototype.clone=function(){return new e(this.rule,this.style,this.id).merge(this)},e}(T);e.Rule=A;var R=function(t){function n(e,n,r,i){var o=t.call(this,i)||this;return o.hash=e,o.debug=n,o.id=r,o}return d(n,t),n.prototype.registerStyle=function(t,n){var r=[],i=[],o=c("&",t,r,i),a="f"+this.hash(o),s=this.debug&&n?n+"_"+a:a;return f(this,o,r,i,"."+e.escape(s),!0),s},n.prototype.registerKeyframes=function(t,e){return this.registerHashRule("@keyframes",t,e)},n.prototype.registerHashRule=function(t,n,r){var i=[],o=[],a=c("",n,i,o),s="f"+this.hash(a),u=this.debug&&r?r+"_"+s:s,l=new A(t+" "+e.escape(u),"","h\0"+a+"\0"+t);return f(l,a,i,o,"",!1),this.add(l),u},n.prototype.registerRule=function(t,e){var n=[],r=[];f(this,c(t,e,n,r),n,r,"",!1)},n.prototype.registerCss=function(t){return this.registerRule("",t)},n.prototype.getStyles=function(){return l(this.sheet)},n.prototype.clone=function(){return new n(this.hash,this.debug,this.id,this.changes).merge(this)},n}(T);e.FreeStyle=R,e.create=function(e,n,i){return void 0===e&&(e=r),void 0===n&&(n=void 0!==t&&!1),void 0===i&&(i=O),new R(e,n,"f"+(++h).toString(36),i)}}).call(this,n(71))},function(t,e,n){"use strict";var r=n(16),i=n(50),o=function(){var t=/[^.]+$/.exec(i.a&&i.a.keys&&i.a.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),a=n(2),s=n(35),u=/^\[object .+?Constructor\]$/,c=Function.prototype,f=Object.prototype,l=c.toString,d=f.hasOwnProperty,h=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.a=function(t){return!(!Object(a.a)(t)||function(t){return!!o&&o in t}(t))&&(Object(r.a)(t)?h:u).test(Object(s.a)(t))}},function(t){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(80),i=n(54),o=n(74),a=n(98),f=n(100),l=n(110),d=n(76),h=n(111),p=n(112),g=n(113),m=n(114),v=n(115),y=n(117);var b;!function(t){t[t.FREE=0]="FREE",t[t.REPLAY=1]="REPLAY"}(b=e.PlayerMode||(e.PlayerMode={})),e.Game=class{constructor(t){if(this.pauseTime=0,this.isPaused=!1,this.lastTime=0,this.accumTime=0,this.timeStep=1/60,this.pointerLocked=!1,this.entities=[],this.draw=()=>{requestAnimationFrame(this.draw);const t=this.canvas,e=t.parentElement;if(e){const n=e.clientWidth,r=e.clientHeight;(t.width!==n||t.height!==r)&&(t.width=n,t.height=r,this.camera.aspect=t.clientWidth/t.clientHeight,this.camera.updateProjectionMatrix(),this.context.gl.viewport(0,0,this.context.gl.drawingBufferWidth,this.context.gl.drawingBufferHeight)),(t.clientWidth!==t.width||t.clientHeight!==t.height)&&(t.width=t.clientWidth,t.height=t.clientHeight,this.camera.aspect=t.clientWidth/t.clientHeight,this.camera.updateProjectionMatrix(),this.context.gl.viewport(0,0,this.context.gl.drawingBufferWidth,this.context.gl.drawingBufferHeight))}const n=o.now()/1e3,r=n-this.lastTime;for(this.accumTime+=r;this.accumTime>this.timeStep;)this.update(this.timeStep),this.accumTime-=this.timeStep;this.renderer.draw(),""!==this.mapName&&(this.skyScene.draw(this.camera),this.worldScene.draw(this.camera,this.entities)),this.lastTime=n},this.mouseMove=t=>{this.mouse.delta.x=.5*t.movementX,this.mouse.delta.y=.5*t.movementY,this.mouse.position.x=t.pageX,this.mouse.position.y=t.pageY},this.keyDown=t=>(this.keyboard.keys[t.which]=1,!this.pointerLocked||(t.preventDefault(),!1)),this.keyUp=t=>(this.keyboard.keys[t.which]=0,!this.pointerLocked||(t.preventDefault(),!1)),this.onVisibilityChange=()=>{if(document.hidden){if(this.isPaused)return;this.pauseTime=o.now()/1e3,this.isPaused=!0}else{if(!this.isPaused)return;this.lastTime=o.now()/1e3-this.pauseTime+this.lastTime,this.isPaused=!1}},!(()=>{const t="Your browser does not seem to support WebGL",e="Your graphics card does not seem to support WebGL";if(!window.WebGLRenderingContext)return{hasSupport:!1,message:t};const n=document.createElement("canvas");try{return n.getContext("webgl")||n.getContext("experimental-webgl")?{hasSupport:!0,message:""}:{hasSupport:!1,message:e}}catch(t){return{hasSupport:!1,message:e}}})().hasSupport)return this.error=!0,void(this.errorMessage="No WebGL support!");this.error=!1,this.errorMessage="",this.mouse=new a.Mouse,this.keyboard=new l.Keyboard,this.soundSystem=new d.SoundSystem,this.sounds=[],this.config=t,this.loader=new f.Loader(this),this.loader.events.addListener("loadall",t=>{if(t&&t.replay&&this.changeReplay(t.replay.data),!t.map||!t.map.data)return;const e=t.map.data,n=t.skies;let r=!0;n.forEach(t=>{r=r&&t.isDone()}),r&&n.forEach(t=>t.data?e.skies.push(t.data):0),Object.entries(t.sprites).forEach(([t,n])=>{n.data&&(e.sprites[t]=n.data)}),0<t.sounds.length&&t.sounds.forEach(t=>{t.data&&this.sounds.push(t.data)}),this.changeMap(e),this.events.emit("load",t)}),document.addEventListener("mousemove",this.mouseMove,!1),window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp),window.addEventListener("visibilitychange",this.onVisibilityChange);const e=this.getCanvas();this.camera=p.Camera.init(e.width/e.height);const n=g.Context.init(e);if(!n)throw new Error("contextn't");this.context=n;const r=m.Renderer.init(n);if(!r)throw new Error("Failed to initialize renderer");this.renderer=r;const s=y.WorldScene.init(n);if(!s)throw new Error("Failed to initialize world scene");this.worldScene=s;const u=v.SkyScene.init(n);if(!u)throw new Error("Failed to initialize sky scene");this.skyScene=u,this.mode=b.FREE,this.player=new h.ReplayPlayer(this),this.events=new i.EventEmitter,this.mapName=""}getCanvas(){return this.canvas||(this.canvas=document.createElement("canvas")),this.canvas}load(t){this.events.emit("loadstart"),this.loader.load(t)}changeMap(t){if(this.mapName.toLowerCase()!==t.name.toLowerCase()){this.mapName=t.name,this.worldScene.changeMap(t),this.skyScene.changeMap(t),this.entities=t.entities;const e=t.entities.find(t=>"info_player_start"===t.classname);e?(this.camera.position[0]=e.origin[0],this.camera.position[1]=e.origin[1],this.camera.position[2]=e.origin[2]):(this.camera.position[0]=0,this.camera.position[1]=0,this.camera.position[2]=0),this.camera.rotation[0]=0,this.camera.rotation[1]=0,this.camera.rotation[2]=0}}changeReplay(t){this.events.emit("prereplaychange",this,t),this.player.changeReplay(t),this.events.emit("postreplaychange",this,t)}changeMode(t){this.mode=t,this.events.emit("modechange",t)}setTitle(t){this.title=t,this.events.emit("titlechange",t)}getTitle(){return this.title}update(t){this.events.emit("preupdate",this);const e=this.camera,n=this.keyboard,i=this.mouse;if(this.mode===b.REPLAY)this.player.update(t);else if(this.mode===b.FREE&&this.pointerLocked){e.rotation[0]=r.clamp(e.rotation[0]+i.delta.y/100,-c/2,c/2),e.rotation[1]-=i.delta.x/100;const o=500*t,a=l.Keyboard.KEYS.W,f=l.Keyboard.KEYS.S,d=l.Keyboard.KEYS.A,h=l.Keyboard.KEYS.D,p=l.Keyboard.KEYS.C,g=l.Keyboard.KEYS.SPACE;n.keys[a]!==n.keys[f]&&(n.keys[a]?(e.position[1]-=u(e.rotation[1]+c/2)*o,e.position[0]+=s(e.rotation[1]+c/2)*o):n.keys[f]&&(e.position[1]-=u(e.rotation[1]-c/2)*o,e.position[0]+=s(e.rotation[1]-c/2)*o)),n.keys[d]!==n.keys[h]&&(n.keys[d]?(e.position[1]+=u(e.rotation[1])*o,e.position[0]-=s(e.rotation[1])*o):n.keys[h]&&(e.position[1]-=u(e.rotation[1])*o,e.position[0]+=s(e.rotation[1])*o)),n.keys[g]!==n.keys[p]&&(n.keys[g]?e.position[2]+=o:n.keys[p]&&(e.position[2]-=o))}i.delta.x=0,i.delta.y=0,this.events.emit("postupdate",this)}on(t,e){return this.events.addListener(t,e)}off(t,e){this.events.removeListener(t,e)}}},function(t,e,n){(function(t){function n(t,e){for(var n,r=0,i=t.length-1;0<=i;i--)"."===(n=t[i])?t.splice(i,1):".."===n?(t.splice(i,1),r++):r&&(t.splice(i,1),r--);if(e)for(;r--;r)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e,i="",o=!1,a=arguments.length-1;-1<=a&&!o;a--){if("string"!=typeof(e=0<=a?arguments[a]:t.cwd()))throw new TypeError("Arguments to path.resolve must be strings");e&&(i=e+"/"+i,o="/"===e.charAt(0))}return(o?"/":"")+(i=n(r(i.split("/"),function(t){return!!t}),!o).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===i(t,-1);return(t=n(r(t.split("/"),function(t){return!!t}),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;0<=n&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),s=a(i.length,o.length),u=s,c=0;c<s;c++)if(i[c]!==o[c]){u=c;break}var f=[];for(c=u;c<i.length;c++)f.push("..");return(f=f.concat(o.slice(u))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;1<=o;--o)if(47!==(e=t.charCodeAt(o)))i=!1;else if(!i){r=o;break}return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;0<=e;--e)if(47!==t.charCodeAt(e))-1==r&&(i=!1,r=e+1);else if(!i){n=e+1;break}return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e,n=-1,r=0,i=-1,o=!0,a=0,s=t.length-1;0<=s;--s)if(47!==(e=t.charCodeAt(s)))-1==i&&(o=!1,i=s+1),46===e?-1===n?n=s:1!=a&&(a=1):-1!==n&&(a=-1);else if(!o){r=s+1;break}return-1===n||-1===i||0==a||1==a&&n===i-1&&n===r+1?"":t.slice(n,i)};var i=function(t,e,n){return t.substr(e,n)}}).call(this,n(71))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.paletteToRGBA=function(t,e){const n=new Uint8Array(4*t.length),r=t.length;for(let i=0;i<r;++i)n[4*i]=e[3*t[i]],n[4*i+1]=e[3*t[i]+1],n[4*i+2]=e[3*t[i]+2],n[4*i+3]=255;return n},e.paletteWithLastTransToRGBA=function(t,e){const n=new Uint8Array(4*t.length),r=t.length;for(let i=0;i<r;++i)255===t[i]?n[4*i+3]=0:(n[4*i]=e[3*t[i]],n[4*i+1]=e[3*t[i]+1],n[4*i+2]=e[3*t[i]+2],n[4*i+3]=255);return n}},function(f,d,h){"use strict";function p(t){Ni=t}function g(t){return t*Fi}function m(t,e){return o(t-e)<=Ci*l(1,o(t),o(e))}function v(){var t=new Ni(4);return Ni!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function y(t){var e=new Ni(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function b(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function _(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function x(t,e,n,r){var i=new Ni(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function w(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function E(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function S(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function O(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function T(t){return t[0]*t[3]-t[2]*t[1]}function k(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*f,t[3]=i*c+a*f,t}function j(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],c=s(n),f=u(n);return t[0]=r*f+o*c,t[1]=i*f+a*c,t[2]=r*-c+o*f,t[3]=i*-c+a*f,t}function A(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function R(t,e){var n=s(e),r=u(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function I(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function L(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function P(t){return r(i(t[0],2)+i(t[1],2)+i(t[2],2)+i(t[3],2))}function M(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function C(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function N(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function B(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function F(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=e[0],u=e[1],c=e[2],f=e[3];return o(n-s)<=Ci*l(1,o(n),o(s))&&o(r-u)<=Ci*l(1,o(r),o(u))&&o(i-c)<=Ci*l(1,o(i),o(c))&&o(a-f)<=Ci*l(1,o(a),o(f))}function D(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function U(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function W(){var t=new Ni(6);return Ni!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function V(t){var e=new Ni(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function z(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function q(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function G(t,e,n,r,i,o){var a=new Ni(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function X(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function H(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function K(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1],l=n[2],d=n[3],h=n[4],p=n[5];return t[0]=r*c+o*f,t[1]=i*c+a*f,t[2]=r*l+o*d,t[3]=i*l+a*d,t[4]=r*h+o*p+s,t[5]=i*h+a*p+u,t}function Y(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],c=e[4],f=e[5],l=s(n),d=u(n);return t[0]=r*d+o*l,t[1]=i*d+a*l,t[2]=r*-l+o*d,t[3]=i*-l+a*d,t[4]=c,t[5]=f,t}function Z(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*f,t[3]=a*f,t[4]=s,t[5]=u,t}function Q(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*f+s,t[5]=i*c+a*f+u,t}function J(t,e){var n=s(e),r=u(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function tt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function et(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function nt(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function rt(t){return r(i(t[0],2)+i(t[1],2)+i(t[2],2)+i(t[3],2)+i(t[4],2)+i(t[5],2)+1)}function it(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ot(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function at(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function st(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function ut(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function ct(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=e[0],f=e[1],d=e[2],h=e[3],p=e[4],g=e[5];return o(n-c)<=Ci*l(1,o(n),o(c))&&o(r-f)<=Ci*l(1,o(r),o(f))&&o(i-d)<=Ci*l(1,o(i),o(d))&&o(a-h)<=Ci*l(1,o(a),o(h))&&o(s-p)<=Ci*l(1,o(s),o(p))&&o(u-g)<=Ci*l(1,o(u),o(g))}function ft(){var t=new Ni(9);return Ni!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function lt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function dt(t){var e=new Ni(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ht(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function pt(t,e,n,r,i,o,a,s,u){var c=new Ni(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=s,c[8]=u,c}function gt(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function mt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function vt(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function yt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=f*a-s*c,d=-f*o+s*u,h=c*o-a*u,p=n*l+r*d+i*h;return p?(p=1/p,t[0]=l*p,t[1]=(-f*r+i*c)*p,t[2]=(s*r-i*a)*p,t[3]=d*p,t[4]=(f*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=h*p,t[7]=(-c*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null}function bt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8];return t[0]=a*f-s*c,t[1]=i*c-r*f,t[2]=r*s-i*a,t[3]=s*u-o*f,t[4]=n*f-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t}function _t(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)}function xt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=n[0],h=n[1],p=n[2],g=n[3],m=n[4],v=n[5],y=n[6],b=n[7],_=n[8];return t[0]=d*r+h*a+p*c,t[1]=d*i+h*s+p*f,t[2]=d*o+h*u+p*l,t[3]=g*r+m*a+v*c,t[4]=g*i+m*s+v*f,t[5]=g*o+m*u+v*l,t[6]=y*r+b*a+_*c,t[7]=y*i+b*s+_*f,t[8]=y*o+b*u+_*l,t}function wt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=n[0],h=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=d*r+h*a+c,t[7]=d*i+h*s+f,t[8]=d*o+h*u+l,t}function Et(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],c=e[4],f=e[5],l=e[6],d=e[7],h=e[8],p=s(n),g=u(n);return t[0]=g*r+p*a,t[1]=g*i+p*c,t[2]=g*o+p*f,t[3]=g*a-p*r,t[4]=g*c-p*i,t[5]=g*f-p*o,t[6]=l,t[7]=d,t[8]=h,t}function St(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ot(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Tt(t,e){var n=s(e),r=u(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function jt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function At(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,l=r*s,d=i*a,h=i*s,p=i*u,g=o*a,m=o*s,v=o*u;return t[0]=1-l-p,t[3]=f-v,t[6]=d+m,t[1]=f+v,t[4]=1-c-p,t[7]=h-g,t[2]=d-m,t[5]=h+g,t[8]=1-c-l,t}function Rt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=n*s-r*a,b=n*u-i*a,_=n*c-o*a,x=r*u-i*s,w=r*c-o*s,E=i*c-o*u,S=f*g-l*p,O=f*m-d*p,T=f*v-h*p,k=l*m-d*g,j=l*v-h*g,A=d*v-h*m,R=y*A-b*j+_*k+x*T-w*O+E*S;return R?(R=1/R,t[0]=(s*A-u*j+c*k)*R,t[1]=(u*T-a*A-c*O)*R,t[2]=(a*j-s*T+c*S)*R,t[3]=(i*j-r*A-o*k)*R,t[4]=(n*A-i*T+o*O)*R,t[5]=(r*T-n*j-o*S)*R,t[6]=(g*E-m*w+v*x)*R,t[7]=(m*_-p*E-v*b)*R,t[8]=(p*w-g*_+v*y)*R,t):null}function It(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Lt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Pt(t){return r(i(t[0],2)+i(t[1],2)+i(t[2],2)+i(t[3],2)+i(t[4],2)+i(t[5],2)+i(t[6],2)+i(t[7],2)+i(t[8],2))}function Mt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Ct(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Bt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ft(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Dt(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],d=t[8],h=e[0],p=e[1],g=e[2],m=e[3],v=e[4],y=e[5],b=e[6],_=e[7],x=e[8];return o(n-h)<=Ci*l(1,o(n),o(h))&&o(r-p)<=Ci*l(1,o(r),o(p))&&o(i-g)<=Ci*l(1,o(i),o(g))&&o(a-m)<=Ci*l(1,o(a),o(m))&&o(s-v)<=Ci*l(1,o(s),o(v))&&o(u-y)<=Ci*l(1,o(u),o(y))&&o(c-b)<=Ci*l(1,o(c),o(b))&&o(f-_)<=Ci*l(1,o(f),o(_))&&o(d-x)<=Ci*l(1,o(d),o(x))}function Ut(){var t=new Ni(16);return Ni!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Wt(t){var e=new Ni(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function zt(t,e,n,r,i,o,a,s,u,c,f,l,d,h,p,g){var m=new Ni(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=i,m[5]=o,m[6]=a,m[7]=s,m[8]=u,m[9]=c,m[10]=f,m[11]=l,m[12]=d,m[13]=h,m[14]=p,m[15]=g,m}function qt(t,e,n,r,i,o,a,s,u,c,f,l,d,h,p,g,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=f,t[10]=l,t[11]=d,t[12]=h,t[13]=p,t[14]=g,t[15]=m,t}function Gt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xt(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Ht(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=n*s-r*a,b=n*u-i*a,_=n*c-o*a,x=r*u-i*s,w=r*c-o*s,E=i*c-o*u,S=f*g-l*p,O=f*m-d*p,T=f*v-h*p,k=l*m-d*g,j=l*v-h*g,A=d*v-h*m,R=y*A-b*j+_*k+x*T-w*O+E*S;return R?(R=1/R,t[0]=(s*A-u*j+c*k)*R,t[1]=(i*j-r*A-o*k)*R,t[2]=(g*E-m*w+v*x)*R,t[3]=(d*w-l*E-h*x)*R,t[4]=(u*T-a*A-c*O)*R,t[5]=(n*A-i*T+o*O)*R,t[6]=(m*_-p*E-v*b)*R,t[7]=(f*E-d*_+h*b)*R,t[8]=(a*j-s*T+c*S)*R,t[9]=(r*T-n*j-o*S)*R,t[10]=(p*w-g*_+v*y)*R,t[11]=(l*_-f*w-h*y)*R,t[12]=(s*O-a*k-u*S)*R,t[13]=(n*k-r*O+i*S)*R,t[14]=(g*b-p*x-m*y)*R,t[15]=(f*x-l*b+d*y)*R,t):null}function $t(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],g=e[13],m=e[14],v=e[15];return t[0]=s*(d*v-h*m)-l*(u*v-c*m)+g*(u*h-c*d),t[1]=-(r*(d*v-h*m)-l*(i*v-o*m)+g*(i*h-o*d)),t[2]=r*(u*v-c*m)-s*(i*v-o*m)+g*(i*c-o*u),t[3]=-(r*(u*h-c*d)-s*(i*h-o*d)+l*(i*c-o*u)),t[4]=-(a*(d*v-h*m)-f*(u*v-c*m)+p*(u*h-c*d)),t[5]=n*(d*v-h*m)-f*(i*v-o*m)+p*(i*h-o*d),t[6]=-(n*(u*v-c*m)-a*(i*v-o*m)+p*(i*c-o*u)),t[7]=n*(u*h-c*d)-a*(i*h-o*d)+f*(i*c-o*u),t[8]=a*(l*v-h*g)-f*(s*v-c*g)+p*(s*h-c*l),t[9]=-(n*(l*v-h*g)-f*(r*v-o*g)+p*(r*h-o*l)),t[10]=n*(s*v-c*g)-a*(r*v-o*g)+p*(r*c-o*s),t[11]=-(n*(s*h-c*l)-a*(r*h-o*l)+f*(r*c-o*s)),t[12]=-(a*(l*m-d*g)-f*(s*m-u*g)+p*(s*d-u*l)),t[13]=n*(l*m-d*g)-f*(r*m-i*g)+p*(r*d-i*l),t[14]=-(n*(s*m-u*g)-a*(r*m-i*g)+p*(r*u-i*s)),t[15]=n*(s*d-u*l)-a*(r*d-i*l)+f*(r*u-i*s),t}function Kt(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],d=t[11],h=t[12],p=t[13],g=t[14],m=t[15];return(e*a-n*o)*(l*m-d*g)-(e*s-r*o)*(f*m-d*p)+(e*u-i*o)*(f*g-l*p)+(n*s-r*a)*(c*m-d*h)-(n*u-i*a)*(c*g-l*h)+(r*u-i*s)*(c*p-f*h)}function Yt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=e[9],h=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*s+x*l+w*g,t[1]=b*i+_*u+x*d+w*m,t[2]=b*o+_*c+x*h+w*v,t[3]=b*a+_*f+x*p+w*y,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*s+x*l+w*g,t[5]=b*i+_*u+x*d+w*m,t[6]=b*o+_*c+x*h+w*v,t[7]=b*a+_*f+x*p+w*y,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*s+x*l+w*g,t[9]=b*i+_*u+x*d+w*m,t[10]=b*o+_*c+x*h+w*v,t[11]=b*a+_*f+x*p+w*y,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*s+x*l+w*g,t[13]=b*i+_*u+x*d+w*m,t[14]=b*o+_*c+x*h+w*v,t[15]=b*a+_*f+x*p+w*y,t}function Zt(t,e,n){var r=n[0],i=n[1],o=n[2],a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,d=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(a=e[0],s=e[1],u=e[2],c=e[3],f=e[4],l=e[5],d=e[6],h=e[7],p=e[8],g=e[9],m=e[10],v=e[11],t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=f,t[5]=l,t[6]=d,t[7]=h,t[8]=p,t[9]=g,t[10]=m,t[11]=v,t[12]=a*r+f*i+p*o+e[12],t[13]=s*r+l*i+g*o+e[13],t[14]=u*r+d*i+m*o+e[14],t[15]=c*r+h*i+v*o+e[15]),t}function Qt(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,n,i){var o=i[0],a=i[1],c=i[2],f=r(o*o+a*a+c*c),l=void 0,d=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,_=void 0,x=void 0,w=void 0,E=void 0,S=void 0,O=void 0,T=void 0,k=void 0,j=void 0,A=void 0,R=void 0,I=void 0,L=void 0,P=void 0,M=void 0;return f<Ci?null:(o*=f=1/f,a*=f,c*=f,l=s(n),h=1-(d=u(n)),p=e[0],g=e[1],m=e[2],v=e[3],y=e[4],b=e[5],_=e[6],x=e[7],w=e[8],E=e[9],S=e[10],O=e[11],T=o*o*h+d,k=a*o*h+c*l,j=c*o*h-a*l,A=o*a*h-c*l,R=a*a*h+d,I=c*a*h+o*l,L=o*c*h+a*l,P=a*c*h-o*l,M=c*c*h+d,t[0]=p*T+y*k+w*j,t[1]=g*T+b*k+E*j,t[2]=m*T+_*k+S*j,t[3]=v*T+x*k+O*j,t[4]=p*A+y*R+w*I,t[5]=g*A+b*R+E*I,t[6]=m*A+_*R+S*I,t[7]=v*A+x*R+O*I,t[8]=p*L+y*P+w*M,t[9]=g*L+b*P+E*M,t[10]=m*L+_*P+S*M,t[11]=v*L+x*P+O*M,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function te(t,e,n){var r=s(n),i=u(n),o=e[4],a=e[5],c=e[6],f=e[7],l=e[8],d=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+d*r,t[6]=c*i+h*r,t[7]=f*i+p*r,t[8]=l*i-o*r,t[9]=d*i-a*r,t[10]=h*i-c*r,t[11]=p*i-f*r,t}function ee(t,e,n){var r=s(n),i=u(n),o=e[0],a=e[1],c=e[2],f=e[3],l=e[8],d=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=a*i-d*r,t[2]=c*i-h*r,t[3]=f*i-p*r,t[8]=o*r+l*i,t[9]=a*r+d*i,t[10]=c*r+h*i,t[11]=f*r+p*i,t}function ne(t,e,n){var r=s(n),i=u(n),o=e[0],a=e[1],c=e[2],f=e[3],l=e[4],d=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+d*r,t[2]=c*i+h*r,t[3]=f*i+p*r,t[4]=l*i-o*r,t[5]=d*i-a*r,t[6]=h*i-c*r,t[7]=p*i-f*r,t}function re(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ie(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function oe(t,e,n){var i=n[0],o=n[1],a=n[2],c=r(i*i+o*o+a*a),f=void 0,l=void 0,d=void 0;return c<Ci?null:(i*=c=1/c,o*=c,a*=c,f=s(e),d=1-(l=u(e)),t[0]=i*i*d+l,t[1]=o*i*d+a*f,t[2]=a*i*d-o*f,t[3]=0,t[4]=i*o*d-a*f,t[5]=o*o*d+l,t[6]=a*o*d+i*f,t[7]=0,t[8]=i*a*d+o*f,t[9]=o*a*d-i*f,t[10]=a*a*d+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ae(t,e){var n=s(e),r=u(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function se(t,e){var n=s(e),r=u(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ue(t,e){var n=s(e),r=u(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ce(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,f=r*s,l=r*u,d=r*c,h=i*u,p=i*c,g=o*c,m=a*s,v=a*u,y=a*c;return t[0]=1-(h+g),t[1]=l+y,t[2]=d-v,t[3]=0,t[4]=l-y,t[5]=1-(f+g),t[6]=p+m,t[7]=0,t[8]=d+v,t[9]=p-m,t[10]=1-(f+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function fe(t,e){var n=new Ni(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=r*r+i*i+o*o+a*a;return 0<l?(n[0]=2*(s*a+f*r+u*o-c*i)/l,n[1]=2*(u*a+f*i+c*r-s*o)/l,n[2]=2*(c*a+f*o+s*i-u*r)/l):(n[0]=2*(s*a+f*r+u*o-c*i),n[1]=2*(u*a+f*i+c*r-s*o),n[2]=2*(c*a+f*o+s*i-u*r)),ce(t,e,n),t}function le(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function de(t,e){var n=e[0],i=e[1],o=e[2],a=e[4],s=e[5],u=e[6],c=e[8],f=e[9],l=e[10];return t[0]=r(n*n+i*i+o*o),t[1]=r(a*a+s*s+u*u),t[2]=r(c*c+f*f+l*l),t}function he(t,e){var n=e[0]+e[5]+e[10],i=0;return 0<n?(i=2*r(n+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&&e[0]>e[10]?(i=2*r(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*r(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*r(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t}function pe(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,f=a+a,l=i*u,d=i*c,h=i*f,p=o*c,g=o*f,m=a*f,v=s*u,y=s*c,b=s*f,_=r[0],x=r[1],w=r[2];return t[0]=(1-(p+m))*_,t[1]=(d+b)*_,t[2]=(h-y)*_,t[3]=0,t[4]=(d-b)*x,t[5]=(1-(l+m))*x,t[6]=(g+v)*x,t[7]=0,t[8]=(h+y)*w,t[9]=(g-v)*w,t[10]=(1-(l+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ge(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,f=a+a,l=s+s,d=o*c,h=o*f,p=o*l,g=a*f,m=a*l,v=s*l,y=u*c,b=u*f,_=u*l,x=r[0],w=r[1],E=r[2],S=i[0],O=i[1],T=i[2],k=(1-(g+v))*x,j=(h+_)*x,A=(p-b)*x,R=(h-_)*w,I=(1-(d+v))*w,L=(m+y)*w,P=(p+b)*E,M=(m-y)*E,C=(1-(d+g))*E;return t[0]=k,t[1]=j,t[2]=A,t[3]=0,t[4]=R,t[5]=I,t[6]=L,t[7]=0,t[8]=P,t[9]=M,t[10]=C,t[11]=0,t[12]=n[0]+S-(k*S+R*O+P*T),t[13]=n[1]+O-(j*S+I*O+M*T),t[14]=n[2]+T-(A*S+L*O+C*T),t[15]=1,t}function me(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,l=r*s,d=i*a,h=i*s,p=i*u,g=o*a,m=o*s,v=o*u;return t[0]=1-l-p,t[1]=f+v,t[2]=d-m,t[3]=0,t[4]=f-v,t[5]=1-c-p,t[6]=h+g,t[7]=0,t[8]=d+m,t[9]=h-g,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function ye(t,e,n,r,i){var o,a=1/Si(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function be(t,e,n,r){var i=Si(e.upDegrees*c/180),o=Si(e.downDegrees*c/180),a=Si(e.leftDegrees*c/180),s=Si(e.rightDegrees*c/180),u=2/(a+s),f=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*f*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function _e(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}function xe(t,e,n,i){var a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,d=void 0,h=void 0,p=void 0,g=void 0,m=e[0],v=e[1],y=e[2],b=i[0],_=i[1],x=i[2],w=n[0],E=n[1],S=n[2];return o(m-w)<Ci&&o(v-E)<Ci&&o(y-S)<Ci?Gt(t):(g=1/r((d=m-w)*d+(h=v-E)*h+(p=y-S)*p),(g=r((a=_*(p*=g)-x*(h*=g))*a+(s=x*(d*=g)-b*p)*s+(u=b*h-_*d)*u))?(a*=g=1/g,s*=g,u*=g):(a=0,s=0,u=0),(g=r((c=h*u-p*s)*c+(f=p*a-d*u)*f+(l=d*s-h*a)*l))?(c*=g=1/g,f*=g,l*=g):(c=0,f=0,l=0),t[0]=a,t[1]=c,t[2]=d,t[3]=0,t[4]=s,t[5]=f,t[6]=h,t[7]=0,t[8]=u,t[9]=l,t[10]=p,t[11]=0,t[12]=-(a*m+s*v+u*y),t[13]=-(c*m+f*v+l*y),t[14]=-(d*m+h*v+p*y),t[15]=1,t)}function we(t,e,n,i){var o=e[0],a=e[1],s=e[2],u=i[0],c=i[1],f=i[2],l=o-n[0],d=a-n[1],h=s-n[2],p=l*l+d*d+h*h;0<p&&(l*=p=1/r(p),d*=p,h*=p);var g=c*h-f*d,m=f*l-u*h,v=u*d-c*l;return 0<(p=g*g+m*m+v*v)&&(g*=p=1/r(p),m*=p,v*=p),t[0]=g,t[1]=m,t[2]=v,t[3]=0,t[4]=d*v-h*m,t[5]=h*g-l*v,t[6]=l*m-d*g,t[7]=0,t[8]=l,t[9]=d,t[10]=h,t[11]=0,t[12]=o,t[13]=a,t[14]=s,t[15]=1,t}function Ee(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Se(t){return r(i(t[0],2)+i(t[1],2)+i(t[2],2)+i(t[3],2)+i(t[4],2)+i(t[5],2)+i(t[6],2)+i(t[7],2)+i(t[8],2)+i(t[9],2)+i(t[10],2)+i(t[11],2)+i(t[12],2)+i(t[13],2)+i(t[14],2)+i(t[15],2))}function Oe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Te(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function ke(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function je(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ae(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Re(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],d=t[8],h=t[9],p=t[10],g=t[11],m=t[12],v=t[13],y=t[14],b=t[15],_=e[0],x=e[1],w=e[2],E=e[3],S=e[4],O=e[5],T=e[6],k=e[7],j=e[8],A=e[9],R=e[10],I=e[11],L=e[12],P=e[13],M=e[14],C=e[15];return o(n-_)<=Ci*l(1,o(n),o(_))&&o(r-x)<=Ci*l(1,o(r),o(x))&&o(i-w)<=Ci*l(1,o(i),o(w))&&o(a-E)<=Ci*l(1,o(a),o(E))&&o(s-S)<=Ci*l(1,o(s),o(S))&&o(u-O)<=Ci*l(1,o(u),o(O))&&o(c-T)<=Ci*l(1,o(c),o(T))&&o(f-k)<=Ci*l(1,o(f),o(k))&&o(d-j)<=Ci*l(1,o(d),o(j))&&o(h-A)<=Ci*l(1,o(h),o(A))&&o(p-R)<=Ci*l(1,o(p),o(R))&&o(g-I)<=Ci*l(1,o(g),o(I))&&o(m-L)<=Ci*l(1,o(m),o(L))&&o(v-P)<=Ci*l(1,o(v),o(P))&&o(y-M)<=Ci*l(1,o(y),o(M))&&o(b-C)<=Ci*l(1,o(b),o(C))}function Ie(){var t=new Ni(3);return Ni!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Le(t){var e=new Ni(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Pe(t){var e=t[0],n=t[1],i=t[2];return r(e*e+n*n+i*i)}function Me(t,e,n){var r=new Ni(3);return r[0]=t,r[1]=e,r[2]=n,r}function Ce(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ne(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Be(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Fe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function De(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ue(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function We(t,e){return t[0]=n(e[0]),t[1]=n(e[1]),t[2]=n(e[2]),t}function Ve(t,n){return t[0]=e(n[0]),t[1]=e(n[1]),t[2]=e(n[2]),t}function ze(t,e,n){return t[0]=a(e[0],n[0]),t[1]=a(e[1],n[1]),t[2]=a(e[2],n[2]),t}function qe(t,e,n){return t[0]=l(e[0],n[0]),t[1]=l(e[1],n[1]),t[2]=l(e[2],n[2]),t}function Ge(e,n){return e[0]=t(n[0]),e[1]=t(n[1]),e[2]=t(n[2]),e}function Xe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function He(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function $e(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return r(n*n+i*i+o*o)}function Ke(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Ye(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function Ze(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Qe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Je(t,e){var n=e[0],i=e[1],o=e[2],a=n*n+i*i+o*o;return 0<a&&(a=1/r(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function tn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function en(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function nn(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function rn(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*f,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*f,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*f,t}function on(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,f=3*o*s,l=3*u*a,d=u*o;return t[0]=e[0]*c+n[0]*f+r[0]*l+i[0]*d,t[1]=e[1]*c+n[1]*f+r[1]*l+i[1]*d,t[2]=e[2]*c+n[2]*f+r[2]*l+i[2]*d,t}function an(t,e){e=e||1;var n=2*Bi()*c,i=2*Bi()-1,o=r(1-i*i)*e;return t[0]=u(n)*o,t[1]=s(n)*o,t[2]=i*e,t}function sn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function un(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function cn(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=i*c-o*u,l=o*s-r*c,d=r*u-i*s,h=i*d-o*l,p=o*f-r*d,g=r*l-i*f,m=2*a;return f*=m,l*=m,d*=m,h*=2,p*=2,g*=2,t[0]=s+f+h,t[1]=u+l+p,t[2]=c+d+g,t}function fn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*u(r)-i[2]*s(r),o[2]=i[1]*s(r)+i[2]*u(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function ln(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*s(r)+i[0]*u(r),o[1]=i[1],o[2]=i[2]*u(r)-i[0]*s(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function dn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*u(r)-i[1]*s(r),o[1]=i[0]*s(r)+i[1]*u(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function hn(t,e){var n=Me(t[0],t[1],t[2]),r=Me(e[0],e[1],e[2]);Je(n,n),Je(r,r);var i=tn(n,r);return 1<i?0:-1>i?c:Ei(i)}function pn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function gn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function mn(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],u=e[2];return o(n-a)<=Ci*l(1,o(n),o(a))&&o(r-s)<=Ci*l(1,o(r),o(s))&&o(i-u)<=Ci*l(1,o(i),o(u))}function vn(){var t=new Ni(4);return Ni!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function yn(t){var e=new Ni(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function bn(t,e,n,r){var i=new Ni(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function _n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function xn(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function wn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function En(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Sn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function On(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Tn(t,e){return t[0]=n(e[0]),t[1]=n(e[1]),t[2]=n(e[2]),t[3]=n(e[3]),t}function kn(t,n){return t[0]=e(n[0]),t[1]=e(n[1]),t[2]=e(n[2]),t[3]=e(n[3]),t}function jn(t,e,n){return t[0]=a(e[0],n[0]),t[1]=a(e[1],n[1]),t[2]=a(e[2],n[2]),t[3]=a(e[3],n[3]),t}function An(t,e,n){return t[0]=l(e[0],n[0]),t[1]=l(e[1],n[1]),t[2]=l(e[2],n[2]),t[3]=l(e[3],n[3]),t}function Rn(e,n){return e[0]=t(n[0]),e[1]=t(n[1]),e[2]=t(n[2]),e[3]=t(n[3]),e}function In(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Ln(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function Pn(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return r(n*n+i*i+o*o+a*a)}function Mn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function Cn(t){var e=t[0],n=t[1],i=t[2],o=t[3];return r(e*e+n*n+i*i+o*o)}function Nn(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function Bn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Fn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Dn(t,e){var n=e[0],i=e[1],o=e[2],a=e[3],s=n*n+i*i+o*o+a*a;return 0<s&&(s=1/r(s),t[0]=n*s,t[1]=i*s,t[2]=o*s,t[3]=a*s),t}function Un(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Wn(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function Vn(t,e){var n,i,o,a,s,u;e=e||1;do{s=(n=2*Bi()-1)*n+(i=2*Bi()-1)*i}while(1<=s);do{u=(o=2*Bi()-1)*o+(a=2*Bi()-1)*a}while(1<=u);var c=r((1-s)/u);return t[0]=e*n,t[1]=e*i,t[2]=e*o*c,t[3]=e*a*c,t}function zn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function qn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*o-u*i,l=c*i+u*r-a*o,d=c*o+a*i-s*r,h=-a*r-s*i-u*o;return t[0]=f*c+h*-a+l*-u-d*-s,t[1]=l*c+h*-s+d*-a-f*-u,t[2]=d*c+h*-u+f*-s-l*-a,t[3]=e[3],t}function Gn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Xn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Hn(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=e[0],u=e[1],c=e[2],f=e[3];return o(n-s)<=Ci*l(1,o(n),o(s))&&o(r-u)<=Ci*l(1,o(r),o(u))&&o(i-c)<=Ci*l(1,o(i),o(c))&&o(a-f)<=Ci*l(1,o(a),o(f))}function $n(){var t=new Ni(4);return Ni!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Kn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Yn(t,e,n){var r=s(n*=.5);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=u(n),t}function Zn(t,e){var n=2*Ei(e[3]),r=s(n/2);return r>Ci?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Qn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,t}function Jn(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],c=s(n),f=u(n);return t[0]=r*f+a*c,t[1]=i*f+o*c,t[2]=o*f-i*c,t[3]=a*f-r*c,t}function tr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],c=s(n),f=u(n);return t[0]=r*f-o*c,t[1]=i*f+a*c,t[2]=o*f+r*c,t[3]=a*f-i*c,t}function er(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],c=s(n),f=u(n);return t[0]=r*f+i*c,t[1]=i*f-r*c,t[2]=o*f+a*c,t[3]=a*f-o*c,t}function nr(t,e){var n=e[0],i=e[1],a=e[2];return t[0]=n,t[1]=i,t[2]=a,t[3]=r(o(1-n*n-i*i-a*a)),t}function rr(t,e,n,r){var i=e[0],o=e[1],a=e[2],u=e[3],c=n[0],f=n[1],l=n[2],d=n[3],h=void 0,p=void 0,g=void 0,m=void 0,v=void 0;return 0>(p=i*c+o*f+a*l+u*d)&&(p=-p,c=-c,f=-f,l=-l,d=-d),1-p>Ci?(h=Ei(p),g=s(h),m=s((1-r)*h)/g,v=s(r*h)/g):(m=1-r,v=r),t[0]=m*i+v*c,t[1]=m*o+v*f,t[2]=m*a+v*l,t[3]=m*u+v*d,t}function ir(t){var e=Bi(),n=Bi(),i=Bi(),o=r(1-e),a=r(e);return t[0]=o*s(2*c*n),t[1]=o*u(2*c*n),t[2]=a*s(2*c*i),t[3]=a*u(2*c*i),t}function or(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function ar(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function sr(t,e){var n=e[0]+e[4]+e[8],i=void 0;if(0<n)i=r(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var a=(o+1)%3,s=(o+2)%3;i=r(e[3*o+o]-e[3*a+a]-e[3*s+s]+1),t[o]=.5*i,i=.5/i,t[3]=(e[3*a+s]-e[3*s+a])*i,t[a]=(e[3*a+o]+e[3*o+a])*i,t[s]=(e[3*s+o]+e[3*o+s])*i}return t}function ur(t,e,n,r){var i=.5*c/180;n*=i,r*=i;var o=s(e*=i),a=u(e),f=s(n),l=u(n),d=s(r),h=u(r);return t[0]=o*l*h-a*f*d,t[1]=a*f*h+o*l*d,t[2]=a*l*d-o*f*h,t[3]=a*l*h+o*f*d,t}function cr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function fr(){var t=new Ni(8);return Ni!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function lr(t){var e=new Ni(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function dr(t,e,n,r,i,o,a,s){var u=new Ni(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u}function hr(t,e,n,r,i,o,a){var s=new Ni(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*i,c=.5*o,f=.5*a;return s[4]=u*r+c*n-f*e,s[5]=c*r+f*t-u*n,s[6]=f*r+u*e-c*t,s[7]=-u*t-c*e-f*n,s}function pr(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+i*u-o*s,t[5]=i*c+o*a-r*u,t[6]=o*c+r*s-i*a,t[7]=-r*a-i*s-o*u,t}function gr(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function mr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function vr(t,e){var n=$n();he(n,e);var r=new Ni(3);return le(r,e),pr(t,n,r),t}function yr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function br(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function _r(t,e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t}function xr(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}function wr(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Er(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+o*a+r*u-i*s),t[1]=2*(r*c+o*s+i*a-n*u),t[2]=2*(i*c+o*u+n*s-r*a),t}function Sr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],f=e[4],l=e[5],d=e[6],h=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*c-o*u+f,t[5]=a*u+o*s-r*c+l,t[6]=a*c+r*u-i*s+d,t[7]=-r*s-i*u-o*c+h,t}function Or(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*a+f*r+u*o-c*i,d=u*a+f*i+c*r-s*o,h=c*a+f*o+s*i-u*r,p=f*a-s*r-u*i-c*o;return Jn(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+p*r+d*o-h*i,t[5]=d*a+p*i+h*r-l*o,t[6]=h*a+p*o+l*i-d*r,t[7]=p*a-l*r-d*i-h*o,t}function Tr(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*a+f*r+u*o-c*i,d=u*a+f*i+c*r-s*o,h=c*a+f*o+s*i-u*r,p=f*a-s*r-u*i-c*o;return tr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+p*r+d*o-h*i,t[5]=d*a+p*i+h*r-l*o,t[6]=h*a+p*o+l*i-d*r,t[7]=p*a-l*r-d*i-h*o,t}function kr(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*a+f*r+u*o-c*i,d=u*a+f*i+c*r-s*o,h=c*a+f*o+s*i-u*r,p=f*a-s*r-u*i-c*o;return er(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+p*r+d*o-h*i,t[5]=d*a+p*i+h*r-l*o,t[6]=h*a+p*o+l*i-d*r,t[7]=p*a-l*r-d*i-h*o,t}function jr(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=e[3];return t[0]=s*a+f*r+u*o-c*i,t[1]=u*a+f*i+c*r-s*o,t[2]=c*a+f*o+s*i-u*r,t[3]=f*a-s*r-u*i-c*o,s=e[4],u=e[5],c=e[6],f=e[7],t[4]=s*a+f*r+u*o-c*i,t[5]=u*a+f*i+c*r-s*o,t[6]=c*a+f*o+s*i-u*r,t[7]=f*a-s*r-u*i-c*o,t}function Ar(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,s=n[4],u=n[5],c=n[6],f=n[7],t[4]=r*f+a*s+i*c-o*u,t[5]=i*f+a*u+o*s-r*c,t[6]=o*f+a*c+r*u-i*s,t[7]=a*f-r*s-i*u-o*c,t}function Rr(t,e,n,i){if(o(i)<Ci)return yr(t,e);var a=r(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),c=s(i*=.5),f=c*n[0]/a,l=c*n[1]/a,d=c*n[2]/a,h=u(i),p=e[0],g=e[1],m=e[2],v=e[3];t[0]=p*h+v*f+g*d-m*l,t[1]=g*h+v*l+m*f-p*d,t[2]=m*h+v*d+p*l-g*f,t[3]=v*h-p*f-g*l-m*d;var y=e[4],b=e[5],_=e[6],x=e[7];return t[4]=y*h+x*f+b*d-_*l,t[5]=b*h+x*l+_*f-y*d,t[6]=_*h+x*d+y*l-b*f,t[7]=x*h-y*f-b*l-_*d,t}function Ir(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Lr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[4],u=n[5],c=n[6],f=n[7],l=e[4],d=e[5],h=e[6],p=e[7],g=n[0],m=n[1],v=n[2],y=n[3];return t[0]=r*y+a*g+i*v-o*m,t[1]=i*y+a*m+o*g-r*v,t[2]=o*y+a*v+r*m-i*g,t[3]=a*y-r*g-i*m-o*v,t[4]=r*f+a*s+i*c-o*u+l*y+p*g+d*v-h*m,t[5]=i*f+a*u+o*s-r*c+d*y+p*m+h*g-l*v,t[6]=o*f+a*c+r*u-i*s+h*y+p*v+l*m-d*g,t[7]=a*f-r*s-i*u-o*c+p*y-l*g-d*m-h*v,t}function Pr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}function Mr(t,e,n,r){var i=1-r;return 0>Lo(e,n)&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function Cr(t,e){var n=Co(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Nr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}function Br(t,e){var n=Co(e);if(0<n){n=r(n);var i=e[0]/n,o=e[1]/n,a=e[2]/n,s=e[3]/n,u=e[4],c=e[5],f=e[6],l=e[7],d=i*u+o*c+a*f+s*l;t[0]=i,t[1]=o,t[2]=a,t[3]=s,t[4]=(u-i*d)/n,t[5]=(c-o*d)/n,t[6]=(f-a*d)/n,t[7]=(l-s*d)/n}return t}function Fr(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Dr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Ur(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],d=e[0],h=e[1],p=e[2],g=e[3],m=e[4],v=e[5],y=e[6],b=e[7];return o(n-d)<=Ci*l(1,o(n),o(d))&&o(r-h)<=Ci*l(1,o(r),o(h))&&o(i-p)<=Ci*l(1,o(i),o(p))&&o(a-g)<=Ci*l(1,o(a),o(g))&&o(s-m)<=Ci*l(1,o(s),o(m))&&o(u-v)<=Ci*l(1,o(u),o(v))&&o(c-y)<=Ci*l(1,o(c),o(y))&&o(f-b)<=Ci*l(1,o(f),o(b))}function Wr(){var t=new Ni(2);return Ni!=Float32Array&&(t[0]=0,t[1]=0),t}function Vr(t){var e=new Ni(2);return e[0]=t[0],e[1]=t[1],e}function zr(t,e){var n=new Ni(2);return n[0]=t,n[1]=e,n}function qr(t,e){return t[0]=e[0],t[1]=e[1],t}function Gr(t,e,n){return t[0]=e,t[1]=n,t}function Xr(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Hr(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function $r(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function Kr(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Yr(t,e){return t[0]=n(e[0]),t[1]=n(e[1]),t}function Zr(t,n){return t[0]=e(n[0]),t[1]=e(n[1]),t}function Qr(t,e,n){return t[0]=a(e[0],n[0]),t[1]=a(e[1],n[1]),t}function Jr(t,e,n){return t[0]=l(e[0],n[0]),t[1]=l(e[1],n[1]),t}function ti(e,n){return e[0]=t(n[0]),e[1]=t(n[1]),e}function ei(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function ni(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function ri(t,e){var n=e[0]-t[0],i=e[1]-t[1];return r(n*n+i*i)}function ii(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function oi(t){var e=t[0],n=t[1];return r(e*e+n*n)}function ai(t){var e=t[0],n=t[1];return e*e+n*n}function si(t,e){return t[0]=-e[0],t[1]=-e[1],t}function ui(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function ci(t,e){var n=e[0],i=e[1],o=n*n+i*i;return 0<o&&(o=1/r(o),t[0]=e[0]*o,t[1]=e[1]*o),t}function fi(t,e){return t[0]*e[0]+t[1]*e[1]}function li(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function di(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function hi(t,e){e=e||1;var n=2*Bi()*c;return t[0]=u(n)*e,t[1]=s(n)*e,t}function pi(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function gi(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function mi(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function vi(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function yi(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=s(r),c=u(r);return t[0]=i*c-o*a+n[0],t[1]=i*a+o*c+n[1],t}function bi(t,e){var n=t[0],i=t[1],o=e[0],a=e[1],s=n*n+i*i;0<s&&(s=1/r(s));var u=o*o+a*a;0<u&&(u=1/r(u));var f=(n*o+i*a)*s*u;return 1<f?0:-1>f?c:Ei(f)}function _i(t){return"vec2("+t[0]+", "+t[1]+")"}function xi(t,e){return t[0]===e[0]&&t[1]===e[1]}function wi(t,e){var n=t[0],r=t[1],i=e[0],a=e[1];return o(n-i)<=Ci*l(1,o(n),o(i))&&o(r-a)<=Ci*l(1,o(r),o(a))}var Ei=Math.acos,Si=Math.tan;h.r(d);var Oi={};h.r(Oi),h.d(Oi,"EPSILON",function(){return Ci}),h.d(Oi,"ARRAY_TYPE",function(){return Ni}),h.d(Oi,"RANDOM",function(){return Bi}),h.d(Oi,"setMatrixArrayType",function(){return p}),h.d(Oi,"toRadian",function(){return g}),h.d(Oi,"equals",function(){return m});var Ti={};h.r(Ti),h.d(Ti,"create",function(){return v}),h.d(Ti,"clone",function(){return y}),h.d(Ti,"copy",function(){return b}),h.d(Ti,"identity",function(){return _}),h.d(Ti,"fromValues",function(){return x}),h.d(Ti,"set",function(){return w}),h.d(Ti,"transpose",function(){return E}),h.d(Ti,"invert",function(){return S}),h.d(Ti,"adjoint",function(){return O}),h.d(Ti,"determinant",function(){return T}),h.d(Ti,"multiply",function(){return k}),h.d(Ti,"rotate",function(){return j}),h.d(Ti,"scale",function(){return A}),h.d(Ti,"fromRotation",function(){return R}),h.d(Ti,"fromScaling",function(){return I}),h.d(Ti,"str",function(){return L}),h.d(Ti,"frob",function(){return P}),h.d(Ti,"LDU",function(){return M}),h.d(Ti,"add",function(){return C}),h.d(Ti,"subtract",function(){return N}),h.d(Ti,"exactEquals",function(){return B}),h.d(Ti,"equals",function(){return F}),h.d(Ti,"multiplyScalar",function(){return D}),h.d(Ti,"multiplyScalarAndAdd",function(){return U}),h.d(Ti,"mul",function(){return Di}),h.d(Ti,"sub",function(){return Ui});var ki={};h.r(ki),h.d(ki,"create",function(){return W}),h.d(ki,"clone",function(){return V}),h.d(ki,"copy",function(){return z}),h.d(ki,"identity",function(){return q}),h.d(ki,"fromValues",function(){return G}),h.d(ki,"set",function(){return X}),h.d(ki,"invert",function(){return H}),h.d(ki,"determinant",function(){return $}),h.d(ki,"multiply",function(){return K}),h.d(ki,"rotate",function(){return Y}),h.d(ki,"scale",function(){return Z}),h.d(ki,"translate",function(){return Q}),h.d(ki,"fromRotation",function(){return J}),h.d(ki,"fromScaling",function(){return tt}),h.d(ki,"fromTranslation",function(){return et}),h.d(ki,"str",function(){return nt}),h.d(ki,"frob",function(){return rt}),h.d(ki,"add",function(){return it}),h.d(ki,"subtract",function(){return ot}),h.d(ki,"multiplyScalar",function(){return at}),h.d(ki,"multiplyScalarAndAdd",function(){return st}),h.d(ki,"exactEquals",function(){return ut}),h.d(ki,"equals",function(){return ct}),h.d(ki,"mul",function(){return Wi}),h.d(ki,"sub",function(){return Vi});var ji={};h.r(ji),h.d(ji,"create",function(){return ft}),h.d(ji,"fromMat4",function(){return lt}),h.d(ji,"clone",function(){return dt}),h.d(ji,"copy",function(){return ht}),h.d(ji,"fromValues",function(){return pt}),h.d(ji,"set",function(){return gt}),h.d(ji,"identity",function(){return mt}),h.d(ji,"transpose",function(){return vt}),h.d(ji,"invert",function(){return yt}),h.d(ji,"adjoint",function(){return bt}),h.d(ji,"determinant",function(){return _t}),h.d(ji,"multiply",function(){return xt}),h.d(ji,"translate",function(){return wt}),h.d(ji,"rotate",function(){return Et}),h.d(ji,"scale",function(){return St}),h.d(ji,"fromTranslation",function(){return Ot}),h.d(ji,"fromRotation",function(){return Tt}),h.d(ji,"fromScaling",function(){return kt}),h.d(ji,"fromMat2d",function(){return jt}),h.d(ji,"fromQuat",function(){return At}),h.d(ji,"normalFromMat4",function(){return Rt}),h.d(ji,"projection",function(){return It}),h.d(ji,"str",function(){return Lt}),h.d(ji,"frob",function(){return Pt}),h.d(ji,"add",function(){return Mt}),h.d(ji,"subtract",function(){return Ct}),h.d(ji,"multiplyScalar",function(){return Nt}),h.d(ji,"multiplyScalarAndAdd",function(){return Bt}),h.d(ji,"exactEquals",function(){return Ft}),h.d(ji,"equals",function(){return Dt}),h.d(ji,"mul",function(){return zi}),h.d(ji,"sub",function(){return qi});var Ai={};h.r(Ai),h.d(Ai,"create",function(){return Ut}),h.d(Ai,"clone",function(){return Wt}),h.d(Ai,"copy",function(){return Vt}),h.d(Ai,"fromValues",function(){return zt}),h.d(Ai,"set",function(){return qt}),h.d(Ai,"identity",function(){return Gt}),h.d(Ai,"transpose",function(){return Xt}),h.d(Ai,"invert",function(){return Ht}),h.d(Ai,"adjoint",function(){return $t}),h.d(Ai,"determinant",function(){return Kt}),h.d(Ai,"multiply",function(){return Yt}),h.d(Ai,"translate",function(){return Zt}),h.d(Ai,"scale",function(){return Qt}),h.d(Ai,"rotate",function(){return Jt}),h.d(Ai,"rotateX",function(){return te}),h.d(Ai,"rotateY",function(){return ee}),h.d(Ai,"rotateZ",function(){return ne}),h.d(Ai,"fromTranslation",function(){return re}),h.d(Ai,"fromScaling",function(){return ie}),h.d(Ai,"fromRotation",function(){return oe}),h.d(Ai,"fromXRotation",function(){return ae}),h.d(Ai,"fromYRotation",function(){return se}),h.d(Ai,"fromZRotation",function(){return ue}),h.d(Ai,"fromRotationTranslation",function(){return ce}),h.d(Ai,"fromQuat2",function(){return fe}),h.d(Ai,"getTranslation",function(){return le}),h.d(Ai,"getScaling",function(){return de}),h.d(Ai,"getRotation",function(){return he}),h.d(Ai,"fromRotationTranslationScale",function(){return pe}),h.d(Ai,"fromRotationTranslationScaleOrigin",function(){return ge}),h.d(Ai,"fromQuat",function(){return me}),h.d(Ai,"frustum",function(){return ve}),h.d(Ai,"perspective",function(){return ye}),h.d(Ai,"perspectiveFromFieldOfView",function(){return be}),h.d(Ai,"ortho",function(){return _e}),h.d(Ai,"lookAt",function(){return xe}),h.d(Ai,"targetTo",function(){return we}),h.d(Ai,"str",function(){return Ee}),h.d(Ai,"frob",function(){return Se}),h.d(Ai,"add",function(){return Oe}),h.d(Ai,"subtract",function(){return Te}),h.d(Ai,"multiplyScalar",function(){return ke}),h.d(Ai,"multiplyScalarAndAdd",function(){return je}),h.d(Ai,"exactEquals",function(){return Ae}),h.d(Ai,"equals",function(){return Re}),h.d(Ai,"mul",function(){return Gi}),h.d(Ai,"sub",function(){return Xi});var Ri={};h.r(Ri),h.d(Ri,"create",function(){return Ie}),h.d(Ri,"clone",function(){return Le}),h.d(Ri,"length",function(){return Pe}),h.d(Ri,"fromValues",function(){return Me}),h.d(Ri,"copy",function(){return Ce}),h.d(Ri,"set",function(){return Ne}),h.d(Ri,"add",function(){return Be}),h.d(Ri,"subtract",function(){return Fe}),h.d(Ri,"multiply",function(){return De}),h.d(Ri,"divide",function(){return Ue}),h.d(Ri,"ceil",function(){return We}),h.d(Ri,"floor",function(){return Ve}),h.d(Ri,"min",function(){return ze}),h.d(Ri,"max",function(){return qe}),h.d(Ri,"round",function(){return Ge}),h.d(Ri,"scale",function(){return Xe}),h.d(Ri,"scaleAndAdd",function(){return He}),h.d(Ri,"distance",function(){return $e}),h.d(Ri,"squaredDistance",function(){return Ke}),h.d(Ri,"squaredLength",function(){return Ye}),h.d(Ri,"negate",function(){return Ze}),h.d(Ri,"inverse",function(){return Qe}),h.d(Ri,"normalize",function(){return Je}),h.d(Ri,"dot",function(){return tn}),h.d(Ri,"cross",function(){return en}),h.d(Ri,"lerp",function(){return nn}),h.d(Ri,"hermite",function(){return rn}),h.d(Ri,"bezier",function(){return on}),h.d(Ri,"random",function(){return an}),h.d(Ri,"transformMat4",function(){return sn}),h.d(Ri,"transformMat3",function(){return un}),h.d(Ri,"transformQuat",function(){return cn}),h.d(Ri,"rotateX",function(){return fn}),h.d(Ri,"rotateY",function(){return ln}),h.d(Ri,"rotateZ",function(){return dn}),h.d(Ri,"angle",function(){return hn}),h.d(Ri,"str",function(){return pn}),h.d(Ri,"exactEquals",function(){return gn}),h.d(Ri,"equals",function(){return mn}),h.d(Ri,"sub",function(){return Hi}),h.d(Ri,"mul",function(){return $i}),h.d(Ri,"div",function(){return Ki}),h.d(Ri,"dist",function(){return Yi}),h.d(Ri,"sqrDist",function(){return Zi}),h.d(Ri,"len",function(){return Qi}),h.d(Ri,"sqrLen",function(){return Ji}),h.d(Ri,"forEach",function(){return to});var Ii={};h.r(Ii),h.d(Ii,"create",function(){return vn}),h.d(Ii,"clone",function(){return yn}),h.d(Ii,"fromValues",function(){return bn}),h.d(Ii,"copy",function(){return _n}),h.d(Ii,"set",function(){return xn}),h.d(Ii,"add",function(){return wn}),h.d(Ii,"subtract",function(){return En}),h.d(Ii,"multiply",function(){return Sn}),h.d(Ii,"divide",function(){return On}),h.d(Ii,"ceil",function(){return Tn}),h.d(Ii,"floor",function(){return kn}),h.d(Ii,"min",function(){return jn}),h.d(Ii,"max",function(){return An}),h.d(Ii,"round",function(){return Rn}),h.d(Ii,"scale",function(){return In}),h.d(Ii,"scaleAndAdd",function(){return Ln}),h.d(Ii,"distance",function(){return Pn}),h.d(Ii,"squaredDistance",function(){return Mn}),h.d(Ii,"length",function(){return Cn}),h.d(Ii,"squaredLength",function(){return Nn}),h.d(Ii,"negate",function(){return Bn}),h.d(Ii,"inverse",function(){return Fn}),h.d(Ii,"normalize",function(){return Dn}),h.d(Ii,"dot",function(){return Un}),h.d(Ii,"lerp",function(){return Wn}),h.d(Ii,"random",function(){return Vn}),h.d(Ii,"transformMat4",function(){return zn}),h.d(Ii,"transformQuat",function(){return qn}),h.d(Ii,"str",function(){return Gn}),h.d(Ii,"exactEquals",function(){return Xn}),h.d(Ii,"equals",function(){return Hn}),h.d(Ii,"sub",function(){return eo}),h.d(Ii,"mul",function(){return no}),h.d(Ii,"div",function(){return ro}),h.d(Ii,"dist",function(){return io}),h.d(Ii,"sqrDist",function(){return oo}),h.d(Ii,"len",function(){return ao}),h.d(Ii,"sqrLen",function(){return so}),h.d(Ii,"forEach",function(){return uo});var Li={};h.r(Li),h.d(Li,"create",function(){return $n}),h.d(Li,"identity",function(){return Kn}),h.d(Li,"setAxisAngle",function(){return Yn}),h.d(Li,"getAxisAngle",function(){return Zn}),h.d(Li,"multiply",function(){return Qn}),h.d(Li,"rotateX",function(){return Jn}),h.d(Li,"rotateY",function(){return tr}),h.d(Li,"rotateZ",function(){return er}),h.d(Li,"calculateW",function(){return nr}),h.d(Li,"slerp",function(){return rr}),h.d(Li,"random",function(){return ir}),h.d(Li,"invert",function(){return or}),h.d(Li,"conjugate",function(){return ar}),h.d(Li,"fromMat3",function(){return sr}),h.d(Li,"fromEuler",function(){return ur}),h.d(Li,"str",function(){return cr}),h.d(Li,"clone",function(){return co}),h.d(Li,"fromValues",function(){return fo}),h.d(Li,"copy",function(){return lo}),h.d(Li,"set",function(){return ho}),h.d(Li,"add",function(){return po}),h.d(Li,"mul",function(){return go}),h.d(Li,"scale",function(){return mo}),h.d(Li,"dot",function(){return vo}),h.d(Li,"lerp",function(){return yo}),h.d(Li,"length",function(){return bo}),h.d(Li,"len",function(){return _o}),h.d(Li,"squaredLength",function(){return xo}),h.d(Li,"sqrLen",function(){return wo}),h.d(Li,"normalize",function(){return Eo}),h.d(Li,"exactEquals",function(){return So}),h.d(Li,"equals",function(){return Oo}),h.d(Li,"rotationTo",function(){return To}),h.d(Li,"sqlerp",function(){return ko}),h.d(Li,"setAxes",function(){return jo});var Pi={};h.r(Pi),h.d(Pi,"create",function(){return fr}),h.d(Pi,"clone",function(){return lr}),h.d(Pi,"fromValues",function(){return dr}),h.d(Pi,"fromRotationTranslationValues",function(){return hr}),h.d(Pi,"fromRotationTranslation",function(){return pr}),h.d(Pi,"fromTranslation",function(){return gr}),h.d(Pi,"fromRotation",function(){return mr}),h.d(Pi,"fromMat4",function(){return vr}),h.d(Pi,"copy",function(){return yr}),h.d(Pi,"identity",function(){return br}),h.d(Pi,"set",function(){return _r}),h.d(Pi,"getReal",function(){return Ao}),h.d(Pi,"getDual",function(){return xr}),h.d(Pi,"setReal",function(){return Ro}),h.d(Pi,"setDual",function(){return wr}),h.d(Pi,"getTranslation",function(){return Er}),h.d(Pi,"translate",function(){return Sr}),h.d(Pi,"rotateX",function(){return Or}),h.d(Pi,"rotateY",function(){return Tr}),h.d(Pi,"rotateZ",function(){return kr}),h.d(Pi,"rotateByQuatAppend",function(){return jr}),h.d(Pi,"rotateByQuatPrepend",function(){return Ar}),h.d(Pi,"rotateAroundAxis",function(){return Rr}),h.d(Pi,"add",function(){return Ir}),h.d(Pi,"multiply",function(){return Lr}),h.d(Pi,"mul",function(){return Io}),h.d(Pi,"scale",function(){return Pr}),h.d(Pi,"dot",function(){return Lo}),h.d(Pi,"lerp",function(){return Mr}),h.d(Pi,"invert",function(){return Cr}),h.d(Pi,"conjugate",function(){return Nr}),h.d(Pi,"length",function(){return Po}),h.d(Pi,"len",function(){return Mo}),h.d(Pi,"squaredLength",function(){return Co}),h.d(Pi,"sqrLen",function(){return No}),h.d(Pi,"normalize",function(){return Br}),h.d(Pi,"str",function(){return Fr}),h.d(Pi,"exactEquals",function(){return Dr}),h.d(Pi,"equals",function(){return Ur});var Mi={};h.r(Mi),h.d(Mi,"create",function(){return Wr}),h.d(Mi,"clone",function(){return Vr}),h.d(Mi,"fromValues",function(){return zr}),h.d(Mi,"copy",function(){return qr}),h.d(Mi,"set",function(){return Gr}),h.d(Mi,"add",function(){return Xr}),h.d(Mi,"subtract",function(){return Hr}),h.d(Mi,"multiply",function(){return $r}),h.d(Mi,"divide",function(){return Kr}),h.d(Mi,"ceil",function(){return Yr}),h.d(Mi,"floor",function(){return Zr}),h.d(Mi,"min",function(){return Qr}),h.d(Mi,"max",function(){return Jr}),h.d(Mi,"round",function(){return ti}),h.d(Mi,"scale",function(){return ei}),h.d(Mi,"scaleAndAdd",function(){return ni}),h.d(Mi,"distance",function(){return ri}),h.d(Mi,"squaredDistance",function(){return ii}),h.d(Mi,"length",function(){return oi}),h.d(Mi,"squaredLength",function(){return ai}),h.d(Mi,"negate",function(){return si}),h.d(Mi,"inverse",function(){return ui}),h.d(Mi,"normalize",function(){return ci}),h.d(Mi,"dot",function(){return fi}),h.d(Mi,"cross",function(){return li}),h.d(Mi,"lerp",function(){return di}),h.d(Mi,"random",function(){return hi}),h.d(Mi,"transformMat2",function(){return pi}),h.d(Mi,"transformMat2d",function(){return gi}),h.d(Mi,"transformMat3",function(){return mi}),h.d(Mi,"transformMat4",function(){return vi}),h.d(Mi,"rotate",function(){return yi}),h.d(Mi,"angle",function(){return bi}),h.d(Mi,"str",function(){return _i}),h.d(Mi,"exactEquals",function(){return xi}),h.d(Mi,"equals",function(){return wi}),h.d(Mi,"len",function(){return Bo}),h.d(Mi,"sub",function(){return Fo}),h.d(Mi,"mul",function(){return Do}),h.d(Mi,"div",function(){return Uo}),h.d(Mi,"dist",function(){return Wo}),h.d(Mi,"sqrDist",function(){return Vo}),h.d(Mi,"sqrLen",function(){return zo}),h.d(Mi,"forEach",function(){return qo});var Ci=1e-6,Ni="undefined"==typeof Float32Array?Array:Float32Array,Bi=Math.random,Fi=c/180,Di=k,Ui=N,Wi=K,Vi=ot,zi=xt,qi=Ct,Gi=Yt,Xi=Te,Hi=Fe,$i=De,Ki=Ue,Yi=$e,Zi=Ke,Qi=Pe,Ji=Ye,to=function(){var t=Ie();return function(e,n,r,i,o,s){var u,c;for(n||(n=3),r||(r=0),c=i?a(i*n+r,e.length):e.length,u=r;u<c;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,s),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),eo=En,no=Sn,ro=On,io=Pn,oo=Mn,ao=Cn,so=Nn,uo=function(){var t=vn();return function(e,n,r,i,o,s){var u,c;for(n||(n=4),r||(r=0),c=i?a(i*n+r,e.length):e.length,u=r;u<c;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,s),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),co=yn,fo=bn,lo=_n,ho=xn,po=wn,go=Qn,mo=In,vo=Un,yo=Wn,bo=Cn,_o=bo,xo=Nn,wo=xo,Eo=Dn,So=Xn,Oo=Hn,To=function(){var t=Ie(),e=Me(1,0,0),n=Me(0,1,0);return function(r,i,o){var a=tn(i,o);return-.999999>a?(en(t,e,i),1e-6>Qi(t)&&en(t,n,i),Je(t,t),Yn(r,t,Math.PI),r):.999999<a?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(en(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+a,Eo(r,r))}}(),ko=function(){var t=$n(),e=$n();return function(n,r,i,o,a,s){return rr(t,r,a,s),rr(e,i,o,s),rr(n,t,e,2*s*(1-s)),n}}(),jo=function(){var t=ft();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],Eo(e,sr(e,t))}}(),Ao=lo,Ro=lo,Io=Lr,Lo=vo,Po=bo,Mo=Po,Co=xo,No=Co,Bo=oi,Fo=Hr,Do=$r,Uo=Kr,Wo=ri,Vo=ii,zo=ai,qo=function(){var t=Wr();return function(e,n,r,i,o,s){var u,c;for(n||(n=2),r||(r=0),c=i?a(i*n+r,e.length):e.length,u=r;u<c;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,s),e[u]=t[0],e[u+1]=t[1];return e}}();h.d(d,"glMatrix",function(){return Oi}),h.d(d,"mat2",function(){return Ti}),h.d(d,"mat2d",function(){return ki}),h.d(d,"mat3",function(){return ji}),h.d(d,"mat4",function(){return Ai}),h.d(d,"quat",function(){return Li}),h.d(d,"quat2",function(){return Pi}),h.d(d,"vec2",function(){return Mi}),h.d(d,"vec3",function(){return Ri}),h.d(d,"vec4",function(){return Ii})},function(t){function e(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===e||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(){h&&l&&(h=!1,l.length?d=l.concat(d):p=-1,d.length&&o())}function o(){if(!h){var t=r(i);h=!0;for(var e=d.length;e;){for(l=d,d=[];++p<e;)l&&l[p].run();p=-1,e=d.length}l=null,h=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function s(){}var u,c,f=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:e}catch(t){u=e}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var l,d=[],h=!1,p=-1;f.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new a(t,e)),1!==d.length||h||r(o)},a.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=s,f.addListener=s,f.once=s,f.off=s,f.removeListener=s,f.removeAllListeners=s,f.emit=s,f.prependListener=s,f.prependOnceListener=s,f.listeners=function(){return[]},f.binding=function(){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(22),o=n(67),a=n(121),s=n(34);e.SettingsButton=class extends r.Component{constructor(){super(...arguments),this.onFreeModeClick=()=>{this.props.game.mode===o.PlayerMode.FREE||(this.props.game.changeMode(o.PlayerMode.FREE),this.props.game.player.pause())},this.onReplayModeClick=()=>{this.props.game.mode===o.PlayerMode.REPLAY||this.props.game.changeMode(o.PlayerMode.REPLAY)},this.toggleMenu=()=>{this.setState({isOpen:!this.state.isOpen})}}render(){const t=!!this.props.game.player.replay;return r.h("div",{class:a.SettingsButtonStyle.settings},r.h("div",{class:i.classes(s.ControlsStyle.button,a.SettingsButtonStyle.button),onClick:this.toggleMenu},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#ffffff",d:"M23.9 10.7c0-0.3-0.4-0.6-0.8-0.6 -1.1 0-2.1-0.6-2.5-1.6 -0.4-1-0.1-2.2 0.7-3 0.3-0.2 0.3-0.6 0.1-0.9 -0.6-0.7-1.2-1.4-1.9-1.9 -0.3-0.2-0.7-0.2-0.9 0.1 -0.7 0.8-2 1.1-3 0.7 -1-0.4-1.7-1.5-1.6-2.6 0-0.4-0.2-0.7-0.6-0.7 -0.9-0.1-1.8-0.1-2.7 0C10.4 0.1 10.1 0.4 10.1 0.8 10.1 1.9 9.5 2.9 8.5 3.3 7.5 3.7 6.2 3.4 5.5 2.6c-0.2-0.3-0.6-0.3-0.9-0.1 -0.7 0.6-1.4 1.2-1.9 1.9C2.4 4.8 2.5 5.2 2.7 5.4c0.8 0.8 1.1 2 0.7 3 -0.4 1-1.4 1.6-2.6 1.6 -0.4 0-0.7 0.2-0.7 0.6 -0.1 0.9-0.1 1.8 0 2.7 0 0.3 0.4 0.6 0.8 0.6 1 0 2 0.6 2.5 1.6 0.4 1 0.2 2.2-0.7 3 -0.3 0.2-0.3 0.6-0.1 0.9 0.6 0.7 1.2 1.4 1.9 1.9 0.3 0.2 0.7 0.2 0.9-0.1 0.7-0.8 2-1.1 3-0.7 1 0.4 1.7 1.5 1.6 2.6 0 0.4 0.2 0.7 0.6 0.7C11.1 24 11.5 24 12 24c0.4 0 0.9 0 1.3-0.1 0.3 0 0.6-0.3 0.6-0.7 0-1.1 0.6-2.1 1.6-2.6 1-0.4 2.3-0.1 3 0.7 0.2 0.3 0.6 0.3 0.9 0.1 0.7-0.6 1.4-1.2 1.9-1.9 0.2-0.3 0.2-0.7-0.1-0.9 -0.8-0.8-1.1-2-0.7-3 0.4-1 1.4-1.6 2.5-1.6l0.1 0c0.3 0 0.7-0.2 0.7-0.6C24 12.5 24 11.6 23.9 10.7zM12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6c3.3 0 6 2.7 6 6S15.3 18 12 18zM12 16"}))),r.h("div",{class:this.state.isOpen?a.SettingsButtonStyle.menuOpen:a.SettingsButtonStyle.menu},r.h("span",{class:a.SettingsButtonStyle.menuItemTitle},"Mode"),t?r.h("span",{class:this.props.game.mode===o.PlayerMode.REPLAY?a.SettingsButtonStyle.menuItemSelected:a.SettingsButtonStyle.menuItem,onClick:this.onReplayModeClick},"Replay"):r.h("span",null),r.h("span",{class:this.props.game.mode===o.PlayerMode.FREE?a.SettingsButtonStyle.menuItemSelected:a.SettingsButtonStyle.menuItem,onClick:this.onFreeModeClick},"Free")))}}},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=window;let i;"undefined"!=typeof performance&&(performance.now?i=()=>r.performance.now():r.performance.mozNow?i=()=>r.performance.mozNow():r.performance.msNow?i=()=>r.performance.msNow():r.performance.oNow?i=()=>r.performance.oNow():r.performance.webkitNow?i=()=>r.performance.webkitNow():Date.now&&(i=()=>Date.now())),n.now=i||(()=>(new Date).getTime()),n.formatTime=t=>{const n=e(t/60),r=e(t-60*n);return(10>n?"0"+n:n.toString())+":"+(10>r?"0"+r:r.toString())}},function(t,n,r){"use strict";function i(t,e){let n={},r=t.readBits(3),i=[];for(let e=0;e<r;++e)i.push(t.readBits(8));let o=!1;for(let a=0;a<r;++a){for(let r,s=0;8>s;++s){if((r=s+8*a)===e.length){o=!0;break}if(i[a]&1<<s)if(e[r].flags&c)if(e[r].flags&v){let i=t.readBits(1)?-1:1,o=t.readBits(e[r].bits-1),a=e[r].divisor;n[e[r].name]=i*o/a}else{let i=t.readBits(e[r].bits),o=e[r].divisor;n[e[r].name]=i/o}else if(e[r].flags&f)if(e[r].flags&v){let i=t.readBits(1)?-1:1,o=t.readBits(e[r].bits-1),a=e[r].divisor;n[e[r].name]=i*o/a}else{let i=t.readBits(e[r].bits),o=e[r].divisor;n[e[r].name]=i/o}else if(e[r].flags&d)if(e[r].flags&v){let i=t.readBits(1)?-1:1,o=t.readBits(e[r].bits-1),a=e[r].divisor;n[e[r].name]=i*o/a}else{let i=t.readBits(e[r].bits),o=e[r].divisor;n[e[r].name]=i/o}else if(e[r].flags&l||e[r].flags&p||e[r].flags&g)if(e[r].flags&v){let i=t.readBits(1)?-1:1,o=t.readBits(e[r].bits-1),a=e[r].divisor;n[e[r].name]=i*o/a}else{let i=t.readBits(e[r].bits),o=e[r].divisor;n[e[r].name]=i/o}else if(e[r].flags&h){let i=t.readBits(e[r].bits),o=360/(1<<e[r].bits);n[e[r].name]=i*o}else e[r].flags&m&&(n[e[r].name]=t.readString())}if(o)break}return n}function o(t){let e=t.readBits(1),n=t.readBits(1);if(!e&&!n)return 0;let r=t.readBits(1),i=0,o=0;e&&(i=t.readBits(12)),n&&(o=t.readBits(3));let a=i+o/32;return r&&(a=-a),a}Object.defineProperty(n,"__esModule",{value:!0});const a=r(68),s=r(105),u=r(52),c=1,f=2,l=4,d=8,h=16,p=32,g=64,m=128,v=-2147483648;class y{static bad(){throw new Error("Invalid message type")}static nop(){return null}static disconnect(t){return{reason:t.str()}}static event(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell();let o=[],a=r.readBits(5);for(let t,e=0;e<a;++e){if((t={}).index=r.readBits(10),r.readBits(1)){t.packetIndex=r.readBits(11),r.readBits(1)&&(t.delta=i(r,n.event_t))}r.readBits(1)&&(t.fireTime=r.readBits(16)),o.push(t)}return 0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{events:o}}static version(t){return{version:t.ui()}}static setView(t){return{entityIndex:t.s()}}static sound(t){let n=new s.BitStream(t.data.buffer);n.index=8*t.tell();let r=n.readBits(9),i=1;0!=(1&r)&&(i=n.readBits(8)/255);let a=1;0!=(2&r)&&(a=n.readBits(8)/64);let u,c=n.readBits(3),f=n.readBits(11);u=0==(4&r)?n.readBits(8):n.readBits(16);let l,d,h,p=n.readBits(1),g=n.readBits(1),m=n.readBits(1);p&&(l=o(n)),g&&(d=o(n)),m&&(h=o(n));let v=1;return 0!=(8&r)&&(v=n.readBits(8)),0<n.index%8?t.seek(e(n.index/8)+1):t.seek(n.index/8),{flags:r,volume:i,attenuation:a,channel:c,entityIndex:f,soundIndex:u,xPosition:l,yPosition:d,zPosition:h,pitch:v}}static time(t){return{time:t.f()}}static print(t){return{message:t.str()}}static stuffText(t){return{commands:t.str().split(";").map(t=>{let e=t.split(/\s*("[^"]+"|[^\s"]+)/).map(t=>t.replace(/^"(.*)"$/,"$1").trim()).filter(t=>t);return{func:e[0],params:e.slice(1)}})}}static setAngle(t){return{pitch:t.s(),yaw:t.s(),roll:t.s()}}static serverInfo(t){let e={protocol:t.i(),spawnCount:t.i(),mapCrc:t.i(),clientDllHash:t.arrx(16,u.ReaderDataType.UByte),maxPlayers:t.ub(),playerIndex:t.ub(),isDeathmatch:t.ub(),gameDir:t.str(),hostName:t.str(),mapFileName:t.str(),mapCycle:t.str()};return t.skip(1),e}static lightStyle(t){return{index:t.ub(),lightInfo:t.str()}}static updateUserInfo(t){return{clientIndex:t.ub(),clientUserId:t.ui(),clientUserInfo:t.str(),clientCdKeyHash:t.arrx(16,u.ReaderDataType.UByte)}}static deltaDescription(t,n){let r={name:t.str(),fields:[]},o=new s.BitStream(t.data.buffer),a=t.us();o.index=8*t.tell();for(let t=0;t<a;++t)r.fields.push(i(o,n.delta_description_t));return n[r.name]=r.fields,0<o.index%8?t.seek(e(o.index/8)+1):t.seek(o.index/8),r}static clientData(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell(),r.readBits(1)&&(r.index+=8);let o=i(r,n.clientdata_t),a=n.weapon_data_t;for(;r.readBits(1);)r.index+=6,i(r,a);return 0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{clientData:o}}static stopSound(t){return{entityIndex:t.s()}}static pings(t){let n=new s.BitStream(t.data.buffer);n.index=8*t.tell();let r=[];for(;n.readBits(1);)r.push({slot:n.readBits(8),ping:n.readBits(8),loss:n.readBits(8)});return 0<n.index%8?t.seek(e(n.index/8)+1):t.seek(n.index/8),r}static particle(t){return{position:[t.s()/8,t.s()/8,t.s()/8],direction:[t.b(),t.b(),t.b()],count:t.ub(),color:t.ub()}}static damage(){return null}static spawnStatic(t){let e={modelIndex:t.s(),sequence:t.b(),frame:t.b(),colorMap:t.s(),skin:t.b(),position:[],rotation:[]};return e.position[0]=t.s()/8,e.rotation[0]=1.40625*t.b(),e.position[1]=t.s()/8,e.rotation[1]=1.40625*t.b(),e.position[2]=t.s()/8,e.rotation[2]=1.40625*t.b(),e.renderMode=t.b(),e.renderMode&&(e.renderAmt=t.b(),e.renderColor=[t.ub(),t.ub(),t.ub()],e.renderFx=t.b()),e}static eventReliable(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell();let o,a=r.readBits(10),u=i(r,n.event_t),c=r.readBits(1);return c&&(o=r.readBits(16)),0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{eventIndex:a,eventData:u,delayBit:c,delay:o}}static spawnBaseLine(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell();let o=[];for(;;){let t,e=r.readBits(11);if(2047===e)break;t=1&r.readBits(2)?0<e&&32>=e?"entity_state_player_t":"entity_state_t":"custom_entity_state_t",o[e]=i(r,n[t])}if(31!==r.readBits(5))throw new Error("Bad spawnbaseline");let a=r.readBits(6),u=[];for(let t=0;t<a;++t)u.push(i(r,n.entity_state_t));return 0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{entities:o,extraData:u}}static tempEntity(t){let e={};switch(t.ub()){case 0:t.skip(24);break;case 1:t.skip(20);break;case 2:t.skip(6);break;case 3:t.skip(11);break;case 4:t.skip(6);break;case 5:t.skip(10);break;case 6:t.skip(12);break;case 7:t.skip(17);break;case 8:t.skip(16);break;case 9:case 10:case 11:t.skip(6);break;case 12:t.skip(8);break;case 13:t.skip(8),t.s()&&t.skip(2);break;case 14:t.skip(9);break;case 15:t.skip(19);break;case 17:t.skip(10);break;case 18:t.skip(16);break;case 19:case 20:case 21:t.skip(24);break;case 22:t.skip(10);break;case 23:t.skip(11);break;case 24:t.skip(16);break;case 25:t.skip(19);break;case 27:t.skip(12);break;case 28:t.skip(16);break;case 29:e.channel=t.b(),e.x=t.s(),e.y=t.s(),e.effect=t.b(),e.textColor=[t.ub(),t.ub(),t.ub(),t.ub()],e.effectColor=[t.ub(),t.ub(),t.ub(),t.ub()],e.fadeInTime=t.s(),e.fadeOutTime=t.s(),e.holdTime=t.s(),e.effect&&(e.effectTime=t.s()),e.message=t.str();break;case 30:case 31:t.skip(17);break;case 99:t.skip(2);break;case 100:t.skip(10);break;case 101:t.skip(14);break;case 102:t.skip(12);break;case 103:t.skip(14);break;case 104:t.skip(9);break;case 105:t.skip(5);break;case 106:t.skip(17);break;case 107:t.skip(13);break;case 108:t.skip(24);break;case 109:t.skip(9);break;case 110:t.skip(17);break;case 111:t.skip(7);break;case 112:t.skip(10);break;case 113:case 114:t.skip(19);break;case 115:t.skip(12);break;case 116:case 117:t.skip(7);break;case 118:t.skip(9);break;case 119:t.skip(16);break;case 120:t.skip(18);break;case 121:t.skip(5);break;case 122:t.skip(10);break;case 123:t.skip(9);break;case 124:t.skip(7);break;case 125:t.skip(1);break;case 126:t.skip(18);break;case 127:t.skip(15);break;default:throw new Error("Unknown temp entity type")}return e}static setPause(t){return{isPaused:t.b()}}static signOnNum(t){return{sign:t.b()}}static centerPrint(t){return{message:t.str()}}static killedMonster(){return null}static foundSecret(){return null}static spawnStaticSound(t){return{position:[t.s()/8,t.s()/8,t.s()/8],soundIndex:t.us(),volume:t.ub()/255,attenuation:t.ub()/64,entityIndex:t.us(),pitch:t.ub(),flags:t.ub()}}static intermission(){return null}static finale(t){return{text:t.str()}}static cdTrack(t){return{track:t.b(),loopTrack:t.b()}}static restore(t){let e=t.str(),n=t.ub(),r=[];for(let e=0;e<n;++e)r.push(t.str());return{saveName:e,maps:r}}static cutscene(t){return{text:t.str()}}static weaponAnim(t){return{sequenceNumber:t.b(),weaponModelBodyGroup:t.b()}}static decalName(t){return{positionIndex:t.ub(),decalName:t.str()}}static roomType(t){return{type:t.us()}}static addAngle(t){return{angleToAdd:t.s()/(360/65536)}}static newUserMsg(t){return{index:t.ub(),size:t.b(),name:t.nstr(16)}}static packetEntities(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell();let o=[];r.readBits(16);for(let t,e=0;0!==(t=r.readBits(16));){if(r.index-=16,r.readBits(1))e++;else{r.readBits(1)?e=r.readBits(11):e+=r.readBits(6)}let t=r.readBits(1);r.readBits(1)&&(r.index+=6);let a="entity_state_t";0<e&&32>=e?a="entity_state_player_t":t&&(a="custom_entity_state_t"),o.push(i(r,n[a]))}return 0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{entityStates:o}}static deltaPacketEntities(t,n){let r=new s.BitStream(t.data.buffer);r.index=8*t.tell(),r.readBits(16),r.index+=8;let o=[],a=0;for(;;){if(0===r.readBits(16))break;r.index-=16;let t=r.readBits(1);if(r.readBits(1)?a=r.readBits(11):a+=r.readBits(6),t)continue;let e=r.readBits(1),s="entity_state_t";0<a&&32>a?s="entity_state_player_t":e&&(s="custom_entity_state_t"),o[a]=i(r,n[s])}return 0<r.index%8?t.seek(e(r.index/8)+1):t.seek(r.index/8),{entityStates:o}}static choke(){return null}static resourceList(t){let n=new s.BitStream(t.data.buffer);n.index=8*t.tell();let r=[],i=n.readBits(12);for(let t,e=0;e<i;++e){(t={}).type=n.readBits(4),t.name=n.readString(),t.index=n.readBits(12),t.size=n.readBits(24),4&n.readBits(3)&&(n.index+=128),n.readBits(1)&&(n.index+=256),r.push(t)}if(n.readBits(1))for(;n.readBits(1);){let t=n.readBits(1)?5:10;n.index+=t}return 0<n.index%8?t.seek(e(n.index/8)+1):t.seek(n.index/8),r}static newMoveVars(t){return{gravity:t.f(),stopSpeed:t.f(),maxSpeed:t.f(),spectatorMaxSpeed:t.f(),acceleration:t.f(),airAcceleration:t.f(),waterAcceleration:t.f(),friction:t.f(),edgeFriction:t.f(),waterFriction:t.f(),entityGravity:t.f(),bounce:t.f(),stepSize:t.f(),maxVelocity:t.f(),zMax:t.f(),waveHeight:t.f(),footsteps:t.b(),rollAngle:t.f(),rollSpeed:t.f(),skyColor:[t.f(),t.f(),t.f()],skyVec:[t.f(),t.f(),t.f()],skyName:t.str()}}static resourceRequest(t){let e={spawnCount:t.i()};return t.skip(4),e}static customization(t){let e,n=t.ub(),r=t.ub(),i=t.str(),o=t.us(),a=t.ui(),s=t.ub();return 4&s&&(e=[t.i(),t.i(),t.i(),t.i()]),{playerIndex:n,type:r,name:i,index:o,downloadSize:a,flags:s,md5hash:e}}static crosshairAngle(t){return{pitch:t.b(),yaw:t.b()}}static soundFade(t){return{initialPercent:t.ub(),holdTime:t.ub(),fadeOutTime:t.ub(),fadeInTime:t.ub()}}static fileTxferFailed(t){return{filename:t.str()}}static hltv(t){return{mode:t.ub()}}static director(t){let e=t.ub();return{flag:t.ub(),message:t.nstr(e-1)}}static voiceInit(t){return{codecName:t.str(),quality:t.b()}}static voiceData(t){let e=t.ub(),n=t.us();return{playerIndex:e,data:t.arrx(n,u.ReaderDataType.UByte)}}static sendExtraInfo(t){return{fallbackDir:t.str(),canCheat:t.ub()}}static timeScale(t){return{timeScale:t.f()}}static resourceLocation(t){return{url:t.str()}}static sendCvarValue(t){return{name:t.str()}}static sendCvarValue2(t){return{requestId:t.ui(),name:t.str()}}static read(t,e,n){if(!y.handlers[e])return null;try{return y.handlers[e](t,n)}catch(e){return null}}}y.handlers=[y.bad,y.nop,y.disconnect,y.event,y.version,y.setView,y.sound,y.time,y.print,y.stuffText,y.setAngle,y.serverInfo,y.lightStyle,y.updateUserInfo,y.deltaDescription,y.clientData,y.stopSound,y.pings,y.particle,y.damage,y.spawnStatic,y.eventReliable,y.spawnBaseLine,y.tempEntity,y.setPause,y.signOnNum,y.centerPrint,y.killedMonster,y.foundSecret,y.spawnStaticSound,y.intermission,y.finale,y.cdTrack,y.restore,y.cutscene,y.weaponAnim,y.decalName,y.roomType,y.addAngle,y.newUserMsg,y.packetEntities,y.deltaPacketEntities,y.choke,y.resourceList,y.newMoveVars,y.resourceRequest,y.customization,y.crosshairAngle,y.soundFade,y.fileTxferFailed,y.hltv,y.director,y.voiceInit,y.voiceData,y.sendExtraInfo,y.timeScale,y.resourceLocation,y.sendCvarValue,y.sendCvarValue2],n.FrameDataReader=y,function(t){let e;!function(t){t[t.BAD=0]="BAD",t[t.NOP=1]="NOP",t[t.DISCONNECT=2]="DISCONNECT",t[t.EVENT=3]="EVENT",t[t.VERSION=4]="VERSION",t[t.SETVIEW=5]="SETVIEW",t[t.SOUND=6]="SOUND",t[t.TIME=7]="TIME",t[t.PRINT=8]="PRINT",t[t.STUFFTEXT=9]="STUFFTEXT",t[t.SETANGLE=10]="SETANGLE",t[t.SERVERINFO=11]="SERVERINFO",t[t.LIGHTSTYLE=12]="LIGHTSTYLE",t[t.UPDATEUSERINFO=13]="UPDATEUSERINFO",t[t.DELTADESCRIPTION=14]="DELTADESCRIPTION",t[t.CLIENTDATA=15]="CLIENTDATA",t[t.STOPSOUND=16]="STOPSOUND",t[t.PINGS=17]="PINGS",t[t.PARTICLE=18]="PARTICLE",t[t.DAMAGE=19]="DAMAGE",t[t.SPAWNSTATIC=20]="SPAWNSTATIC",t[t.EVENT_RELIABLE=21]="EVENT_RELIABLE",t[t.SPAWNBASELINE=22]="SPAWNBASELINE",t[t.TEMPENTITY=23]="TEMPENTITY",t[t.SETPAUSE=24]="SETPAUSE",t[t.SIGNONNUM=25]="SIGNONNUM",t[t.CENTERPRINT=26]="CENTERPRINT",t[t.KILLEDMONSTER=27]="KILLEDMONSTER",t[t.FOUNDSECRET=28]="FOUNDSECRET",t[t.SPAWNSTATICSOUND=29]="SPAWNSTATICSOUND",t[t.INTERMISSION=30]="INTERMISSION",t[t.FINALE=31]="FINALE",t[t.CDTRACK=32]="CDTRACK",t[t.RESTORE=33]="RESTORE",t[t.CUTSCENE=34]="CUTSCENE",t[t.WEAPONANIM=35]="WEAPONANIM",t[t.DECALNAME=36]="DECALNAME",t[t.ROOMTYPE=37]="ROOMTYPE",t[t.ADDANGLE=38]="ADDANGLE",t[t.NEWUSERMSG=39]="NEWUSERMSG",t[t.PACKETENTITIES=40]="PACKETENTITIES",t[t.DELTAPACKETENTITIES=41]="DELTAPACKETENTITIES",t[t.CHOKE=42]="CHOKE",t[t.RESOURCELIST=43]="RESOURCELIST",t[t.NEWMOVEVARS=44]="NEWMOVEVARS",t[t.RESOURCEREQUEST=45]="RESOURCEREQUEST",t[t.CUSTOMIZATION=46]="CUSTOMIZATION",t[t.CROSSHAIRANGLE=47]="CROSSHAIRANGLE",t[t.SOUNDFADE=48]="SOUNDFADE",t[t.FILETXFERFAILED=49]="FILETXFERFAILED",t[t.HLTV=50]="HLTV",t[t.DIRECTOR=51]="DIRECTOR",t[t.VOICEINIT=52]="VOICEINIT",t[t.VOICEDATA=53]="VOICEDATA",t[t.SENDEXTRAINFO=54]="SENDEXTRAINFO",t[t.TIMESCALE=55]="TIMESCALE",t[t.RESOURCELOCATION=56]="RESOURCELOCATION",t[t.SENDCVARVALUE=57]="SENDCVARVALUE",t[t.SENDCVARVALUE2=58]="SENDCVARVALUE2"}(e=t.SVC||(t.SVC={}))}(y||(y={})),n.FrameDataReader=y;const b=t=>{return"HLDEMO"===t.nstr(8)},_=t=>({demoProtocol:t.ui(),netProtocol:t.ui(),mapName:t.nstr(260),modName:t.nstr(260),mapCrc:t.i(),dirOffset:t.ui()}),x=(t,e)=>{t.seek(e);let n=t.ui(),r=[];for(let e=0;e<n;++e)r.push({id:t.ui(),name:t.nstr(64),flags:t.ui(),cdTrack:t.i(),time:t.f(),frames:t.ui(),offset:t.ui(),length:t.ui()});return r},w=(t,e,n)=>{let r={type:t.ub(),time:t.f(),tick:t.ui()};switch(r.type){case 0:case 1:t.skip(4),r.camera={position:[t.f(),t.f(),t.f()],orientation:[t.f(),t.f(),t.f()]},t.skip(436),r.data=((t,e,n)=>{let r=t.ui(),i=t.tell()+r,o=[];for(;t.tell()<i;){let r=t.ub();if(1===r)continue;if(64<=r){n[r]&&-1<n[r].size?t.skip(n[r].size):t.skip(t.ub());continue}let a=y.read(t,r,e);a?(39===r&&(n[a.index]=a),o.push({type:r,data:a})):t.seek(i)}return t.seek(i),o})(t,e,n);break;case 2:break;case 3:r.command=t.nstr(64);break;case 4:t.skip(32);break;case 5:break;case 6:t.skip(84);break;case 7:t.skip(8);break;case 8:r.sound={channel:t.i(),sample:t.nstr(t.ui()),attenuation:t.f(),volume:t.f(),flags:t.ui(),pitch:t.i()};break;case 9:t.skip(t.ui());break;default:r.error=!0}return r},E=()=>Object.assign({},{delta_description_t:[{name:"flags",bits:32,divisor:1,flags:d},{name:"name",bits:8,divisor:1,flags:m},{name:"offset",bits:16,divisor:1,flags:d},{name:"size",bits:8,divisor:1,flags:d},{name:"bits",bits:8,divisor:1,flags:d},{name:"divisor",bits:32,divisor:4e3,flags:l},{name:"preMultiplier",bits:32,divisor:4e3,flags:l}]});class S{constructor(t=null){t?(this.cameraPos=JSON.parse(JSON.stringify(t.cameraPos)),this.cameraRot=JSON.parse(JSON.stringify(t.cameraRot)),this.entities=JSON.parse(JSON.stringify(t.entities))):(this.cameraPos=[0,0,0],this.cameraRot=[0,0,0],this.entities=[])}feedFrame(t){switch(t.type){case 0:case 1:this.cameraPos[0]=t.camera.position[0],this.cameraPos[1]=t.camera.position[1],this.cameraPos[2]=t.camera.position[2],this.cameraRot[0]=t.camera.orientation[0],this.cameraRot[1]=t.camera.orientation[1],this.cameraRot[2]=t.camera.orientation[2]}}clone(){return new S(this)}}n.ReplayState=S;class O{constructor(t,e){this.header=t,this.mapName=this.header.mapName,this.directories=e}static parseFromArrayBuffer(t){let e=new u.Reader(t);if("HLDEMO"!==e.nstr(8))throw new Error("Invalid replay format");let n={};n.demoProtocol=e.ui(),n.netProtocol=e.ui(),n.mapName=e.nstr(260),n.modName=e.nstr(260),n.mapCrc=e.i(),n.dirOffset=e.ui(),e.seek(n.dirOffset);let r=e.ui(),i=[];for(let t=0;t<r;++t)i.push({id:e.ui(),name:e.nstr(64),flags:e.ui(),cdTrack:e.i(),time:e.f(),frames:e.ui(),offset:e.ui(),length:e.ui(),macros:[]});for(let t=0;t<i.length;++t){e.seek(i[t].offset);for(let n=!1;!n;){let r={type:e.b(),time:e.f(),frame:e.ui()};switch(r.type){case 0:case 1:e.skip(4),r.camera={position:[e.f(),e.f(),e.f()],orientation:[e.f(),e.f(),e.f()]},e.skip(436),e.skip(e.ui());break;case 2:break;case 3:r.command=e.nstr(64);break;case 4:e.skip(32);break;case 5:n=!0;break;case 6:e.skip(84);break;case 7:e.skip(8);break;case 8:e.skip(4),e.skip(e.ui()+16);break;case 9:e.skip(e.ui());break;default:{const t=(+(e.tell()-9)).toString(16),n=[`Unexpected macro (${r.type})`,` at offset = ${t}.`].join("");throw new Error(n)}}i[t].macros.push(r)}}return new O(n,i)}static parseFullFromArrayBuffer(t){let e=new u.Reader(t);if("HLDEMO"!==e.nstr(8))throw new Error("Invalid replay format");let n={};n.demoProtocol=e.ui(),n.netProtocol=e.ui(),n.mapName=e.nstr(260),n.modName=e.nstr(260),n.mapCrc=e.i(),n.dirOffset=e.ui(),e.seek(n.dirOffset);let r=e.ui(),i=[];for(let t=0;t<r;++t)i.push({id:e.ui(),name:e.nstr(64),flags:e.ui(),cdTrack:e.i(),time:e.f(),frames:e.ui(),offset:e.ui(),length:e.ui(),macros:[]});let o={delta_description_t:[{name:"flags",bits:32,divisor:1,flags:d},{name:"name",bits:8,divisor:1,flags:m},{name:"offset",bits:16,divisor:1,flags:d},{name:"size",bits:8,divisor:1,flags:d},{name:"bits",bits:8,divisor:1,flags:d},{name:"divisor",bits:32,divisor:4e3,flags:l},{name:"preMultiplier",bits:32,divisor:4e3,flags:l}]},a=[];for(let t=0;t<i.length;++t){e.seek(i[t].offset);for(let n=!1;!n;){let r={type:e.b(),time:e.f(),frame:e.ui()};switch(r.type){case 0:case 1:{e.skip(4),r.camera={position:[e.f(),e.f(),e.f()],orientation:[e.f(),e.f(),e.f()],forward:[e.f(),e.f(),e.f()],right:[e.f(),e.f(),e.f()],up:[e.f(),e.f(),e.f()]},r.RefParams={frametime:e.f(),time:e.f(),intermission:e.i(),paused:e.i(),spectator:e.i(),onground:e.i(),waterlevel:e.i(),velocity:[e.f(),e.f(),e.f()],origin:[e.f(),e.f(),e.f()],viewHeight:[e.f(),e.f(),e.f()],idealPitch:e.f(),viewAngles:[e.f(),e.f(),e.f()],health:e.i(),crosshairAngle:[e.f(),e.f(),e.f()],viewSize:e.f(),punchAngle:[e.f(),e.f(),e.f()],maxClients:e.i(),viewEntity:e.i(),playerCount:e.i(),maxEntities:e.i(),demoPlayback:e.i(),hardware:e.i(),smoothing:e.i(),ptr_cmd:e.i(),ptr_movevars:e.i(),viewport:[e.i(),e.i(),e.i(),e.i()],nextView:e.i(),onlyClientDraw:e.i()},r.UserCmd={lerp_msec:e.s(),msec:e.ub(),UNUSED1:e.ub(),viewAngles:[e.f(),e.f(),e.f()],forwardMove:e.f(),sideMove:e.f(),upMove:e.f(),lightLevel:e.b(),UNUSED2:e.ub(),buttons:e.us(),impulse:e.b(),weaponSelect:e.b(),UNUSED:e.s(),impactIndex:e.i(),impactPosition:[e.f(),e.f(),e.f()]},r.MoveVars={gravity:e.f(),stopSpeed:e.f(),maxSpeed:e.f(),spectatorMaxSpeed:e.f(),acceleration:e.f(),airAcceleration:e.f(),waterAcceleration:e.f(),friction:e.f(),edgeFriction:e.f(),waterFriction:e.f(),entityGravity:e.f(),bounce:e.f(),stepSize:e.f(),maxVelocity:e.f(),zMax:e.f(),waveHeight:e.f(),footsteps:e.i(),skyName:e.nstr(32),rollAngle:e.f(),rollSpeed:e.f(),skyColor:[e.f(),e.f(),e.f()],skyVec:[e.f(),e.f(),e.f()]},r.view=[e.f(),e.f(),e.f()],r.viewModel=e.i(),r.incoming_sequence=e.i(),r.incoming_acknowledged=e.i(),r.incoming_reliable_acknowledged=e.i(),r.incoming_reliable_sequence=e.i(),r.outgoing_sequence=e.i(),r.reliable_sequence=e.i(),r.last_reliable_sequence=e.i();let t=e.ui()+e.tell();for(r.frameData=[];e.tell()<t;){let n=e.ub();if(1===n)continue;if(64<=n){a[n]&&-1<a[n].size?e.skip(a[n].size):e.skip(e.ub());continue}let i=y.read(e,n,o);i?(39===n&&(a[i.index]=i),r.frameData.push({type:n,frameData:i})):e.seek(t)}e.seek(t);break}case 2:break;case 3:r.command=e.nstr(64);break;case 4:r.clientData={position:[e.f(),e.f(),e.f()],rotation:[e.f(),e.f(),e.f()],weaponFlags:e.ui(),fov:e.f()};break;case 5:n=!0;break;case 6:r.event={flags:e.ui(),index:e.ui(),delay:e.f(),args:{flags:e.ui(),entityIndex:e.ui(),position:[e.f(),e.f(),e.f()],rotation:[e.f(),e.f(),e.f()],velocity:[e.f(),e.f(),e.f()],ducking:e.ui(),fparam1:e.f(),fparam2:e.f(),iparam1:e.i(),iparam2:e.i(),bparam1:e.i(),bparam2:e.i()}};break;case 7:r.weaponAnimation={animation:e.i(),body:e.i()};break;case 8:r.sound={channel:e.i(),sample:e.nstr(e.ui()),attenuation:e.f(),volume:e.f(),flags:e.ui(),pitch:e.i()};break;case 9:e.skip(e.ui());break;default:{const t=(+(e.tell()-9)).toString(16),n=[`Unexpected macro (${r.type})`,` at offset = ${t}.`].join("");throw new Error(n)}}i[t].macros.push(r)}}return new O(n,i)}static parseIntoChunks(t){let e=new u.Reader(t);if(!b(e))throw new Error("Invalid replay file format");let n,r,i,o,a,s=[],c=E(),f=[],l=_(e),d=x(e,l.dirOffset),h=new S;for(a=d[0].offset+d[0].length,e.seek(d[0].offset);e.tell()<a;){let t=w(e,c,f);if(h.feedFrame(t),t.error)throw new Error("Encountered error while reading replay");if(2>t.type){let e=t.data.find(t=>t.type===y.SVC.SERVERINFO);e&&(n=new k(e.data.mapFileName),s.push(n));let r=t.data.find(t=>t.type===y.SVC.RESOURCELIST);r&&n&&n.setResources(r.data)}}if(!(n instanceof k))throw new Error("Error while parsing replay.");for(o=e.tell(),r=new T(h,0),n.addChunk(r),a=d[1].offset+d[1].length,e.seek(d[1].offset);;){let t=e.tell();if(t>=a){let n=i.time-r.startTime;r.timeLength=n;let a=t-o;e.seek(o),r.setData(e.arrx(a,u.ReaderDataType.UByte)),e.seek(t);break}let l=w(e,c,f);if(h.feedFrame(l),i=l,l.error)throw new Error("Encountered error while reading replay");if(2>l.type){let a=l.data.find(t=>t.type===y.SVC.SERVERINFO);if(a){n=new k(a.data.mapFileName),s.push(n);let c=i.time-r.startTime;r.timeLength=c;let f=t-o,d=e.tell();e.seek(o),r.setData(e.arrx(f,u.ReaderDataType.UByte)),e.seek(d),o=t,r=new T(h,l.time),n.addChunk(r)}let c=l.data.find(t=>t.type===y.SVC.RESOURCELIST);if(c&&n.setResources(c.data),a)continue;for(let t,e=0;e<l.data.length;++e)if((t=l.data[e]).type===y.SVC.SOUND||t.type===y.SVC.SPAWNSTATICSOUND){let e=n.resources.sounds.find(e=>e.index===t.data.soundIndex);e&&(e.used=!0)}else if(t.type===y.SVC.STUFFTEXT){let e=n.resources.sounds,r=t.data.commands;for(let t=0;t<r.length;++t){let n=r[t],i=n.func;if(("speak"===i||"spk"===i)&&1===n.params.length){let t=n.params[0]+".wav",r=e.find(e=>e.name===t);r&&(r.used=!0)}}}}else if(8===l.type){let t=n.resources.sounds.find(t=>t.name===l.sound.sample);t&&(t.used=!0)}if(r.startTime+10<l.time){let i=t-o,a=e.tell();e.seek(o),r.setData(e.arrx(i,u.ReaderDataType.UByte)),e.seek(a),o=t,r=new T(h,l.time),n.addChunk(r)}}return{length:d[1].time,maps:s,deltaDecoders:c,customMessages:f}}static readHeader(t){return _(t)}static readDirectories(t,e){return x(t,e)}static readFrame(t,e,n){return w(t,e,n)}static readFrameData(t,e,n){return w(t,e,n)}}n.Replay=O;class T{constructor(t,e){this.state=t.clone(),this.startTime=e,this.timeLength=10,this.data=null,this.reader=null}setData(t){this.data=new Uint8Array(t.length);for(let e=0;e<t.length;++e)this.data[e]=t[e];this.reader=new u.Reader(this.data.buffer)}}n.ReplayChunk=T;class k{constructor(t){this.name=a.basename(t,".bsp"),this.chunks=[],this.resources={sounds:[],skins:[],models:[],decals:[],custom:[],events:[]}}setResources(t){t.forEach(t=>{switch(t.type){case 0:t.used=!1,this.resources.sounds.push(t);break;case 1:this.resources.skins.push(t);break;case 2:this.resources.models.push(t);break;case 3:this.resources.decals.push(t);break;case 4:this.resources.custom.push(t);break;case 5:this.resources.events.push(t)}})}addChunk(t){this.chunks.push(t)}}n.ReplayMap=k},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(54),i=window,o=new(i.AudioContext||i.webkitAudioContext);e.SoundSystem=class{constructor(){this.context=o,this.events=new r.EventEmitter;const t=parseFloat(localStorage.getItem("volume")||"0.3");localStorage.setItem("volume",t.toString()),this.channels=[],this.preMuteVolume=1,this.masterGain=this.context.createGain(),this.masterGain.gain.value=t,this.masterGain.connect(this.context.destination);for(let t=0;8>t;++t)this.channels.push({source:null,gain:this.context.createGain()}),this.channels[t].gain.connect(this.masterGain)}static getContext(){return o}play(t,e,n){this.stop(e);const r=this.channels[e].gain;r.gain.value=l(0,a(1,n));const i=this.context.createBufferSource();i.buffer=t.buffer,i.connect(r),i.start(0),this.channels[e].source=i}stop(t){const e=this.channels[t].source;e&&e.stop(0)}getVolume(){return this.masterGain.gain.value}setVolume(t){const e=this.masterGain.gain.value;0<e&&0===t&&(this.preMuteVolume=e),this.masterGain.gain.value=t,localStorage.setItem("volume",t.toString()),this.events.emit("volumeChange",t)}toggleMute(){0===this.getVolume()?this.setVolume(this.preMuteVolume):this.setVolume(0)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(52),i=n(69);var o;!function(t){t[t.VP_PARALLEL_UPRIGHT=0]="VP_PARALLEL_UPRIGHT",t[t.FACING_UPRIGHT=1]="FACING_UPRIGHT",t[t.VP_PARALLEL=2]="VP_PARALLEL",t[t.ORIENTED=3]="ORIENTED",t[t.VP_PARALLEL_ORIENTED=4]="VP_PARALLEL_ORIENTED"}(e.SpriteType||(e.SpriteType={})),function(t){t[t.SPR_NORMAL=0]="SPR_NORMAL",t[t.SPR_ADDITIVE=1]="SPR_ADDITIVE",t[t.SPR_INDEXALPHA=2]="SPR_INDEXALPHA",t[t.SPR_ALPHTEST=3]="SPR_ALPHTEST"}(o=e.SpriteAlphaType||(e.SpriteAlphaType={})),function(t){t[t.SYNCHRONIZED=0]="SYNCHRONIZED",t[t.RANDOM=1]="RANDOM"}(e.SpriteSyncType||(e.SpriteSyncType={}));class a{constructor(t,e){this.header=t,this.frames=e}static parse(t){const e=new r.Reader(t);if("IDSP"!==e.nstr(4))throw new Error("Invalid sprite file format");const n={version:e.i(),type:e.i(),alphaType:e.i(),radius:e.f(),width:e.i(),height:e.i(),frameCount:e.i(),beamLength:e.f(),syncType:e.i()},s=e.s(),u=e.arrx(3*s,r.ReaderDataType.UByte),c=[];for(let t=0;t<n.frameCount;++t){const t={group:e.i(),position:[e.i(),e.i()],width:e.i(),height:e.i(),data:new Uint8Array(n.width*n.height*4)},a=e.arrx(n.width*n.height,r.ReaderDataType.UByte);t.data=n.alphaType===o.SPR_ALPHTEST?i.paletteWithLastTransToRGBA(a,u):i.paletteToRGBA(a,u),c.push(t)}return new a(n,c)}}e.Sprite=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(22),o=n(79),a=n(122),s=n(34);e.FullscreenButton=class extends r.Component{constructor(){super(...arguments),this.state={isInFullscreen:!1},this.onClick=()=>{o.Fullscreen.isInFullscreen()?o.Fullscreen.exit():o.Fullscreen.enter(this.props.root)},this.onFullscreen=()=>{this.setState({isInFullscreen:o.Fullscreen.isInFullscreen()})}}componentDidMount(){o.Fullscreen.onChange(this.onFullscreen)}componentWillUnmount(){o.Fullscreen.onChangeRemove(this.onFullscreen)}render(){return r.h("div",{class:i.classes(s.ControlsStyle.button,a.FullscreenButtonStyle.button),onClick:this.onClick},this.state.isInFullscreen?r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 22 L22 22 L22 0 L14 0 L14 14 L0 14 M42 0 L42 22 L64 22 L64 14 L50 14 L50 0 M14 50 L0 50 L0 42 L22 42 L22 64 L14 64 M42 64 L42 42 L64 42 L64 50 L50 50 L50 64 Z"})):r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 22 L8 22 L8 8 L22 8 L22 0 L0 0 M42 0 L42 8 L56 8 L56 22 L64 22 L64 0 M0 64 L0 42 L8 42 L8 56 L22 56 L22 64 M64 64 L42 64 L42 56 L56 56 L56 42 L64 42 Z"})))}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=[{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",change:"fullscreenchange",error:"fullscreenerror"},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",change:"mozfullscreenchange",error:"mozfullscreenerror"},{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",change:"webkitfullscreenchange",error:"webkitfullscreenerror"},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",change:"MSFullscreenChange",error:"MSFullscreenError"}];let r=0;const i=document;for(let t=0;t<n.length;++t)if(void 0!==i[n[t].enabled]){r=t;break}class o{static element(){return i[n[r].element]}static enabled(){return i[n[r].enabled]}static isInFullscreen(){return null!==o.element()}static enter(t){t[n[r].request]()}static exit(){i[n[r].exit]()}static onChange(t){return window.addEventListener(n[r].change,t)}static onChangeRemove(t){window.removeEventListener(n[r].change,t)}static onError(t){return window.addEventListener(n[r].error,t)}}e.Fullscreen=o},function(t,r,i){"use strict";function o(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Z,this.__views__=[]}function s(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function u(t){if(Object(m.a)(t)&&!Object(x.a)(t)&&!(t instanceof Q)){if(t instanceof it)return t;if(st.call(t,"__wrapped__"))return at(t)}return new it(t)}function c(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(ue);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(c.Cache||se.a),n}function f(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new se.a;++e<n;)this.add(t[e])}function d(t,e){return null!=t&&e in Object(t)}function h(t,e,n){var r=Dt(t,Li,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=h.placeholder,r}function p(t,e,n){var r=Dt(t,Mi,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=p.placeholder,r}i.r(r);var g=i(9),m=i(3),v=function(t){return"symbol"==typeof t||Object(m.a)(t)&&"[object Symbol]"==Object(g.a)(t)},y=function(t){return"number"==typeof t?t:v(t)?NaN:+t},b=i(15),_=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},x=i(0),w=1/0,E=b.a?b.a.prototype:void 0,S=E?E.toString:void 0,O=function t(e){if("string"==typeof e)return e;if(Object(x.a)(e))return _(e,t)+"";if(v(e))return S?S.call(e):"";var n=e+"";return"0"==n&&1/e==-w?"-0":n},T=function(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=O(n),r=O(r)):(n=y(n),r=y(r)),i=t(n,r)}return i}},k=T(function(t,e){return t+e},0),j=i(2),A=/^\s+|\s+$/g,R=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,L=/^0o[0-7]+$/i,P=parseInt,M=function(t){if("number"==typeof t)return t;if(v(t))return NaN;if(Object(j.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(j.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(A,"");var n=I.test(t);return n||L.test(t)?P(t.slice(2),n?2:8):R.test(t)?NaN:+t},C=function(t){return t?(t=M(t))===1/0||t===-1/0?17976931348623157e292*(0>t?-1:1):t==t?t:0:0===t?t:0},N=function(t){var e=C(t),n=e%1;return e==e?n?e-n:e:0},B=function(t,e){if("function"!=typeof e)throw new TypeError("Expected a function");return t=N(t),function(){if(1>--t)return e.apply(this,arguments)}},F=i(6),D=i(26),U=i(5),W=Object(D.a)(U.a,"WeakMap"),V=W&&new W,z=V?function(t,e){return V.set(t,e),t}:F.a,q=i(28),G=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Object(q.a)(t.prototype),r=t.apply(n,e);return Object(j.a)(r)?r:n}},X=i(12),H=function(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=l(o-a,0),f=Array(u+c),d=!r;++s<u;)f[s]=e[s];for(;++i<a;)(d||i<o)&&(f[n[i]]=t[i]);for(;c--;)f[s++]=t[i++];return f},$=function(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,f=l(o-s,0),d=Array(f+c),h=!r;++i<f;)d[i]=t[i];for(var p=i;++u<c;)d[p+u]=e[u];for(;++a<s;)(h||i<o)&&(d[p+n[a]]=t[i++]);return d},K=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r},Y=function(){},Z=4294967295;o.prototype=Object(q.a)(Y.prototype),o.prototype.constructor=o;var Q=o,J=function(){},tt=V?function(t){return V.get(t)}:J,et={},nt=Object.prototype.hasOwnProperty,rt=function(t){for(var e=t.name+"",n=et[e],r=nt.call(et,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e};s.prototype=Object(q.a)(Y.prototype),s.prototype.constructor=s;var it=s,ot=i(11),at=function(t){if(t instanceof Q)return t.clone();var e=new it(t.__wrapped__,t.__chain__);return e.__actions__=Object(ot.a)(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},st=Object.prototype.hasOwnProperty;u.prototype=Y.prototype,u.prototype.constructor=u;var ut=u,ct=function(t){var e=rt(t),n=ut[e];if("function"!=typeof n||!(e in Q.prototype))return!1;if(t===n)return!0;var r=tt(n);return!!r&&t===r[0]},ft=i(55),lt=Object(ft.a)(z),dt=/\{\n\/\* \[wrapped with (.+)\] \*/,ht=/,? & /,pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gt=i(48),mt=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},vt=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1},yt=function(t){return t!=t},bt=function(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):vt(t,yt,n)},_t=function(t,e){return!!(null==t?0:t.length)&&-1<bt(t,e,0)},xt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],wt=function(t,e,n){var r=e+"";return Object(gt.a)(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(1<n?"& ":"")+e[r],e=e.join(2<n?", ":" "),t.replace(pt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return mt(xt,function(n){var r="_."+n[0];e&n[1]&&!_t(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(dt);return e?e[1].split(ht):[]}(r),n)))},Et=function(t,e,n,r,i,o,a,s,u,c){var f=8&e;e|=f?32:64,4&(e&=~(f?64:32))||(e&=-4);var l=[t,e,i,f?o:void 0,f?a:void 0,f?void 0:o,f?void 0:a,s,u,c],d=n.apply(void 0,l);return ct(t)&&lt(d,l),d.placeholder=r,wt(d,t,e)},St=function(t){return t.placeholder},Ot=i(19),Tt=function(t,e){for(var n=t.length,r=a(e.length,n),i=Object(ot.a)(t);r--;){var o=e[r];t[r]=Object(Ot.a)(o,n)?i[o]:void 0}return t},kt="__lodash_placeholder__",jt=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];(a===e||a===kt)&&(t[n]=kt,o[i++]=n)}return o},At=1,Rt=2,It=8,Lt=16,Pt=128,Mt=512,Ct=function t(e,n,r,i,o,a,s,u,c,f){var l=n&Pt,d=n&At,h=n&Rt,p=n&(It|Lt),g=n&Mt,m=h?void 0:G(e);return function v(){for(var y=arguments.length,b=Array(y),_=y;_--;)b[_]=arguments[_];if(p)var x=St(v),w=K(b,x);if(i&&(b=H(b,i,o,p)),a&&(b=$(b,a,s,p)),y-=w,p&&y<f){var E=jt(b,x);return Et(e,n,t,v.placeholder,r,b,E,u,c,f-y)}var S=d?r:this,O=h?S[e]:e;return y=b.length,u?b=Tt(b,u):g&&1<y&&b.reverse(),l&&c<y&&(b.length=c),this&&this!==U.a&&this instanceof v&&(O=m||G(O)),O.apply(S,b)}},Nt="__lodash_placeholder__",Bt=function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?H(c,u,e[4]):u,t[4]=c?jt(t[3],Nt):e[4]}return(u=e[5])&&(c=t[5],t[5]=c?$(c,u,e[6]):u,t[6]=c?jt(t[5],Nt):e[6]),(u=e[7])&&(t[7]=u),128&r&&(t[8]=null==t[8]?e[8]:a(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},Ft=l,Dt=function(t,e,n,r,i,o,a,s){var u=2&e;if(!u&&"function"!=typeof t)throw new TypeError("Expected a function");var c=r?r.length:0;if(c||(e&=-97,r=i=void 0),a=void 0===a?a:Ft(N(a),0),s=void 0===s?s:N(s),c-=i?i.length:0,64&e){var f=r,l=i;r=i=void 0}var d=u?void 0:tt(t),h=[t,e,n,r,i,f,l,o,a,s];if(d&&Bt(h,d),t=h[0],e=h[1],n=h[2],r=h[3],i=h[4],!(s=h[9]=void 0===h[9]?u?0:t.length:Ft(h[9]-c,0))&&24&e&&(e&=-25),e&&1!=e)p=8==e||16==e?function(t,e,n){var r=G(t);return function i(){for(var o=arguments.length,a=Array(o),s=o,u=St(i);s--;)a[s]=arguments[s];var c=3>o&&a[0]!==u&&a[o-1]!==u?[]:jt(a,u);if((o-=c.length)<n)return Et(t,e,Ct,i.placeholder,void 0,a,c,void 0,void 0,n-o);var f=this&&this!==U.a&&this instanceof i?r:t;return Object(X.a)(f,this,a)}}(t,e,s):32!=e&&33!=e||i.length?Ct.apply(void 0,h):function(t,e,n,r){var i=1&e,o=G(t);return function e(){for(var a=-1,s=arguments.length,u=-1,c=r.length,f=Array(c+s),l=this&&this!==U.a&&this instanceof e?o:t;++u<c;)f[u]=r[u];for(;s--;)f[u++]=arguments[++a];return Object(X.a)(l,i?n:this,f)}}(t,e,n,r);else var p=function(t,e,n){var r=1&e,i=G(t);return function e(){return(this&&this!==U.a&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return wt((d?z:lt)(p,h),t,e)},Ut=function(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,Dt(t,128,void 0,void 0,void 0,void 0,e)},Wt=i(31),Vt=i(17),zt=i(29),qt=i(7),Gt=i(32),Xt=i(62),Ht=i(61),$t=Object(Ht.a)(Object.keys,Object),Kt=Object.prototype.hasOwnProperty,Yt=function(t){if(!Object(Gt.a)(t))return $t(t);var e=[];for(var n in Object(t))Kt.call(t,n)&&"constructor"!=n&&e.push(n);return e},Zt=function(t){return Object(qt.a)(t)?Object(Xt.a)(t):Yt(t)},Qt=Object.prototype.hasOwnProperty,Jt=Object(zt.a)(function(t,e){if(Object(Gt.a)(e)||Object(qt.a)(e))Object(Vt.a)(e,Zt(e),t);else for(var n in e)Qt.call(e,n)&&Object(Wt.a)(t,n,e[n])}),te=i(10),ee=Object(zt.a)(function(t,e){Object(Vt.a)(e,Object(te.a)(e),t)}),ne=Object(zt.a)(function(t,e,n,r){Object(Vt.a)(e,Object(te.a)(e),t,r)}),re=Object(zt.a)(function(t,e,n,r){Object(Vt.a)(e,Zt(e),t,r)}),ie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oe=/^\w*$/,ae=function(t,e){if(Object(x.a)(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!v(t))||oe.test(t)||!ie.test(t)||null!=e&&t in Object(e)},se=i(41),ue="Expected a function";c.Cache=se.a;var ce=c,fe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,le=/\\(\\)?/g,de=function(t){var e=ce(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(fe,function(t,n,r,i){e.push(r?i.replace(le,"$1"):n||t)}),e},function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}(),he=function(t){return null==t?"":O(t)},pe=function(t,e){return Object(x.a)(t)?t:ae(t,e)?[t]:de(he(t))},ge=function(t){if("string"==typeof t||v(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},me=function(t,e){for(var n=0,r=(e=pe(e,t)).length;null!=t&&n<r;)t=t[ge(e[n++])];return n&&n==r?t:void 0},ve=function(t,e,n){var r=null==t?void 0:me(t,e);return void 0===r?n:r},ye=function(t,e){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=null==t?void 0:ve(t,e[n]);return i},be=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},_e=i(24),xe=b.a?b.a.isConcatSpreadable:void 0,we=function(t){return Object(x.a)(t)||Object(_e.a)(t)||!!(xe&&t&&t[xe])},Ee=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=we),o||(o=[]);++a<s;){var u=e[a];0<n&&r(u)?1<n?t(u,n-1,r,i,o):be(o,u):!i&&(o[o.length]=u)}return o},Se=function(t){return(null==t?0:t.length)?Ee(t,1):[]},Oe=i(57),Te=function(t){return Object(gt.a)(Object(Oe.a)(t,void 0,Se),t+"")},ke=Te(ye),je=i(1),Ae=i(27),Re=function(t){if(!Object(m.a)(t))return!1;var e=Object(g.a)(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Object(Ae.a)(t)},Ie=Object(je.a)(function(t,e){try{return Object(X.a)(t,void 0,e)}catch(e){return Re(e)?e:new Error(e)}}),Le=function(t,e){var n;if("function"!=typeof e)throw new TypeError("Expected a function");return t=N(t),function(){return 0<--t&&(n=e.apply(this,arguments)),1>=t&&(e=void 0),n}},Pe=Object(je.a)(function(t,e,n){var r=1;if(n.length){var i=jt(n,St(Pe));r|=32}return Dt(t,r,e,n,i)});Pe.placeholder={};var Me=Pe,Ce=i(18),Ne=Te(function(t,e){return mt(e,function(e){e=ge(e),Object(Ce.a)(t,e,Me(t[e],t))}),t}),Be=Object(je.a)(function(t,e,n){var r=3;if(n.length){var i=jt(n,St(Be));r|=32}return Dt(e,r,t,n,i)});Be.placeholder={};var Fe=Be,De=function(t,e,n){var r=-1,i=t.length;0>e&&(e=-e>i?0:i+e),0>(n=n>i?i:n)&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o},Ue=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:De(t,e,n)},We=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff\ufe0e\ufe0f]/,Ve=function(t){return We.test(t)},ze=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,qe=function(t){return Ve(t)?function(t){return t.match(ze)||[]}(t):function(t){return t.split("")}(t)},Ge=function(t){return function(e){e=he(e);var n=Ve(e)?qe(e):void 0,r=n?n[0]:e.charAt(0),i=n?Ue(n,1).join(""):e.slice(1);return r[t]()+i}},Xe=Ge("toUpperCase"),He=function(t){return Xe(he(t).toLowerCase())},$e=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},Ke=function(t){return function(e){return null==t?void 0:t[e]}},Ye=Ke({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qe=/[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]/g,Je=function(t){return(t=he(t))&&t.replace(Ze,Ye).replace(Qe,"")},tn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nn="a-z\\xdf-\\xf6\\xf8-\\xff",rn="A-Z\\xc0-\\xd6\\xd8-\\xde",on="\\d+",an="["+nn+"]",sn="[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000"+on+"\\u2700-\\u27bf"+nn+rn+"]",un="["+rn+"]",cn="(?:['’](?:d|ll|m|re|s|t|ve))?",fn="(?:['’](?:D|LL|M|RE|S|T|VE))?",ln="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",dn="[\\ufe0e\\ufe0f]?",hn=RegExp([un+"?"+an+"+"+cn+"(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)","(?:"+un+"|"+sn+")+"+fn+"(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)",un+"?(?:"+an+"|"+sn+")+"+cn,un+"+"+fn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",on,"(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+(dn+ln)+"(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+dn+ln+")*"].join("|"),"g"),pn=function(t,e,n){return t=he(t),void 0===(e=n?void 0:e)?function(t){return en.test(t)}(t)?function(t){return t.match(hn)||[]}(t):function(t){return t.match(tn)||[]}(t):t.match(e)||[]},gn=/['’]/g,mn=function(t){return function(e){return $e(pn(Je(e).replace(gn,"")),t,"")}},vn=mn(function(t,e,n){return e=e.toLowerCase(),t+(n?He(e):e)}),yn=function(){if(!arguments.length)return[];var t=arguments[0];return Object(x.a)(t)?t:[t]},bn=U.a.isFinite,_n=function(t){var e=Math[t];return function(t,n){if(t=M(t),(n=null==n?0:a(N(n),292))&&bn(t)){var r=(he(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return+((r=(he(i)+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}},xn=_n("ceil"),wn=function(t){var e=ut(t);return e.__chain__=!0,e},En=i(8),Sn=function(t,e,r){e=(r?Object(En.a)(t,e,r):void 0===e)?1:l(N(e),0);var i=null==t?0:t.length;if(!i||1>e)return[];for(var o=0,a=0,s=Array(n(i/e));o<i;)s[a++]=De(t,o,o+=e);return s},On=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t},Tn=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=M(n))==n?n:0),void 0!==e&&(e=(e=M(e))==e?e:0),On(M(t),e,n)},kn=i(33),jn=function(t,e){return t&&Object(Vt.a)(e,Zt(e),t)},An=function(t,e){return t&&Object(Vt.a)(e,Object(te.a)(e),t)},Rn=i(59),In=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o},Ln=function(){return[]},Pn=Object.prototype.propertyIsEnumerable,Mn=Object.getOwnPropertySymbols,Cn=Mn?function(t){return null==t?[]:(t=Object(t),In(Mn(t),function(e){return Pn.call(t,e)}))}:Ln,Nn=function(t,e){return Object(Vt.a)(t,Cn(t),e)},Bn=i(38),Fn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)be(e,Cn(t)),t=Object(Bn.a)(t);return e}:Ln,Dn=function(t,e){return Object(Vt.a)(t,Fn(t),e)},Un=function(t,e,n){var r=e(t);return Object(x.a)(t)?r:be(r,n(t))},Wn=function(t){return Un(t,Zt,Cn)},Vn=function(t){return Un(t,te.a,Fn)},zn=Object(D.a)(U.a,"DataView"),qn=i(40),Gn=Object(D.a)(U.a,"Promise"),Xn=Object(D.a)(U.a,"Set"),Hn=i(35),$n="[object Map]",Kn="[object Promise]",Yn="[object Set]",Zn="[object WeakMap]",Qn="[object DataView]",Jn=Object(Hn.a)(zn),tr=Object(Hn.a)(qn.a),er=Object(Hn.a)(Gn),nr=Object(Hn.a)(Xn),rr=Object(Hn.a)(W),ir=g.a;(zn&&ir(new zn(new ArrayBuffer(1)))!=Qn||qn.a&&ir(new qn.a)!=$n||Gn&&ir(Gn.resolve())!=Kn||Xn&&ir(new Xn)!=Yn||W&&ir(new W)!=Zn)&&(ir=function(t){var e=Object(g.a)(t),n="[object Object]"==e?t.constructor:void 0,r=n?Object(Hn.a)(n):"";if(r)switch(r){case Jn:return Qn;case tr:return $n;case er:return Kn;case nr:return Yn;case rr:return Zn}return e});var or=ir,ar=Object.prototype.hasOwnProperty,sr=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ar.call(t,"index")&&(n.index=t.index,n.input=t.input),n},ur=i(45),cr=/\w*$/,fr=b.a?b.a.prototype:void 0,lr=fr?fr.valueOf:void 0,dr=i(60),hr=function(t,e,n){var r=t.constructor;return"[object ArrayBuffer]"===e?Object(ur.a)(t):"[object Boolean]"===e||"[object Date]"===e?new r(+t):"[object DataView]"===e?function(t,e){var n=e?Object(ur.a)(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n):"[object Float32Array]"===e||"[object Float64Array]"===e||"[object Int8Array]"===e||"[object Int16Array]"===e||"[object Int32Array]"===e||"[object Uint8Array]"===e||"[object Uint8ClampedArray]"===e||"[object Uint16Array]"===e||"[object Uint32Array]"===e?Object(dr.a)(t,n):"[object Map]"===e?new r:"[object Number]"===e||"[object String]"===e?new r(t):"[object RegExp]"===e?function(t){var e=new t.constructor(t.source,cr.exec(t));return e.lastIndex=t.lastIndex,e}(t):"[object Set]"===e?new r:"[object Symbol]"===e?function(t){return lr?Object(lr.call(t)):{}}(t):void 0},pr=i(63),gr=i(21),mr=i(13),vr=i(20),yr=vr.a&&vr.a.isMap,br=yr?Object(mr.a)(yr):function(t){return Object(m.a)(t)&&"[object Map]"==or(t)},_r=vr.a&&vr.a.isSet,xr=_r?Object(mr.a)(_r):function(t){return Object(m.a)(t)&&"[object Set]"==or(t)},wr=1,Er=2,Sr=4,Or="[object Arguments]",Tr="[object Function]",kr="[object GeneratorFunction]",jr="[object Object]",Ar={};Ar[Or]=Ar["[object Array]"]=Ar["[object ArrayBuffer]"]=Ar["[object DataView]"]=Ar["[object Boolean]"]=Ar["[object Date]"]=Ar["[object Float32Array]"]=Ar["[object Float64Array]"]=Ar["[object Int8Array]"]=Ar["[object Int16Array]"]=Ar["[object Int32Array]"]=Ar["[object Map]"]=Ar["[object Number]"]=Ar[jr]=Ar["[object RegExp]"]=Ar["[object Set]"]=Ar["[object String]"]=Ar["[object Symbol]"]=Ar["[object Uint8Array]"]=Ar["[object Uint8ClampedArray]"]=Ar["[object Uint16Array]"]=Ar["[object Uint32Array]"]=!0,Ar["[object Error]"]=Ar[Tr]=Ar["[object WeakMap]"]=!1;var Rr=function t(e,n,r,i,o,a){var s,u=n&wr,c=n&Er;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!Object(j.a)(e))return e;var f=Object(x.a)(e);if(f){if(s=sr(e),!u)return Object(ot.a)(e,s)}else{var l=or(e),d=l==Tr||l==kr;if(Object(gr.a)(e))return Object(Rn.a)(e,u);if(l==jr||l==Or||d&&!o){if(s=c||d?{}:Object(pr.a)(e),!u)return c?Dn(e,An(s,e)):Nn(e,jn(s,e))}else{if(!Ar[l])return o?e:{};s=hr(e,l,u)}}a||(a=new kn.a);var h=a.get(e);if(h)return h;a.set(e,s),xr(e)?e.forEach(function(i){s.add(t(i,n,r,i,e,a))}):br(e)&&e.forEach(function(i,o){s.set(o,t(i,n,r,o,e,a))});var p=n&Sr?c?Vn:Wn:c?keysIn:Zt,g=f?void 0:p(e);return mt(g||e,function(i,o){g&&(i=e[o=i]),Object(Wt.a)(s,o,t(i,n,r,o,e,a))}),s},Ir=function(t){return Rr(t,4)},Lr=function(t){return Rr(t,5)},Pr=function(t,e){return Rr(t,5,e="function"==typeof e?e:void 0)},Mr=function(t,e){return Rr(t,4,e="function"==typeof e?e:void 0)},Cr=function(){return new it(this.value(),this.__chain__)},Nr=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Br=function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return be(Object(x.a)(n)?Object(ot.a)(n):[n],Ee(e,1))};f.prototype.add=f.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},f.prototype.has=function(t){return this.__data__.has(t)};var Fr=f,Dr=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Ur=function(t,e){return t.has(e)},Wr=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var f=-1,l=!0,d=2&n?new Fr:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var h=t[f],p=e[f];if(r)var g=a?r(p,h,f,e,t,o):r(h,p,f,t,e,o);if(void 0!==g){if(g)continue;l=!1;break}if(d){if(!Dr(e,function(t,e){if(!Ur(d,e)&&(h===t||i(h,t,n,r,o)))return d.push(e)})){l=!1;break}}else if(h!==p&&!i(h,p,n,r,o)){l=!1;break}}return o.delete(t),o.delete(e),l},Vr=i(51),zr=i(14),qr=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n},Gr=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},Xr=b.a?b.a.prototype:void 0,Hr=Xr?Xr.valueOf:void 0,$r=1,Kr=Object.prototype.hasOwnProperty,Yr=i(25),Zr="[object Arguments]",Qr="[object Array]",Jr="[object Object]",ti=Object.prototype.hasOwnProperty,ei=function(t,e,n,r,i,o){var a=Object(x.a)(t),s=Object(x.a)(e),u=a?Qr:or(t),c=s?Qr:or(e),f=(u=u==Zr?Jr:u)==Jr,l=(c=c==Zr?Jr:c)==Jr,d=u==c;if(d&&Object(gr.a)(t)){if(!Object(gr.a)(e))return!1;a=!0,f=!1}if(d&&!f)return o||(o=new kn.a),a||Object(Yr.a)(t)?Wr(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Vr.a(t),new Vr.a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(zr.a)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=qr;case"[object Set]":var u=1&r;if(s||(s=Gr),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var f=Wr(s(t),s(e),r,i,o,a);return a.delete(t),f;case"[object Symbol]":if(Hr)return Hr.call(t)==Hr.call(e)}return!1}(t,e,u,n,r,i,o);if(!(1&n)){var h=f&&ti.call(t,"__wrapped__"),p=l&&ti.call(e,"__wrapped__");if(h||p){var g=h?t.value():t,m=p?e.value():e;return o||(o=new kn.a),i(g,m,n,r,o)}}return!!d&&(o||(o=new kn.a),function(t,e,n,r,i,o){var a=n&$r,s=Wn(t),u=s.length;if(u!=Wn(e).length&&!a)return!1;for(var c,f=u;f--;)if(c=s[f],a?!(c in e):!Kr.call(e,c))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var d=!0;o.set(t,e),o.set(e,t);for(var h=a;++f<u;){var p=t[c=s[f]],g=e[c];if(r)var m=a?r(g,p,c,e,t,o):r(p,g,c,t,e,o);if(void 0===m?p!==g&&!i(p,g,n,r,o):!m){d=!1;break}h||(h="constructor"==c)}if(d&&!h){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,r,i,o))},ni=function t(e,n,r,i,o){return!(e!==n)||(null!=e&&null!=n&&(Object(m.a)(e)||Object(m.a)(n))?ei(e,n,r,i,t,o):e!=e&&n!=n)},ri=1,ii=2,oi=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],f=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var l=new kn.a;if(r)var d=r(c,f,u,t,e,l);if(void 0===d?!ni(f,c,ri|ii,r,l):!d)return!1}}return!0},ai=function(t){return t==t&&!Object(j.a)(t)},si=function(t){for(var e=Zt(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ai(i)]}return e},ui=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},ci=function(t){var e=si(t);return 1==e.length&&e[0][2]?ui(e[0][0],e[0][1]):function(n){return n===t||oi(n,t,e)}},fi=i(30),li=function(t,e,n){for(var r,i=-1,o=(e=pe(e,t)).length,a=!1;++i<o&&(r=ge(e[i]),a=null!=t&&n(t,r));)t=t[r];return a||++i!=o?a:!!(o=null==t?0:t.length)&&Object(fi.a)(o)&&Object(Ot.a)(r,o)&&(Object(x.a)(t)||Object(_e.a)(t))},di=function(t,e){return null!=t&&li(t,e,d)},hi=function(t,e){return ae(t)&&ai(e)?ui(ge(t),e):function(n){var r=ve(n,t);return void 0===r&&r===e?di(n,t):ni(e,r,3)}},pi=function(t){return function(e){return null==e?void 0:e[t]}},gi=function(t){return ae(t)?pi(ge(t)):function(t){return function(e){return me(e,t)}}(t)},mi=function(t){return"function"==typeof t?t:null==t?F.a:"object"==typeof t?Object(x.a)(t)?hi(t[0],t[1]):ci(t):gi(t)},vi=function(t){var e=null==t?0:t.length;return t=e?_(t,function(t){if("function"!=typeof t[1])throw new TypeError("Expected a function");return[mi(t[0]),t[1]]}):[],Object(je.a)(function(n){for(var r,i=-1;++i<e;)if(r=t[i],Object(X.a)(r[0],this,n))return Object(X.a)(r[1],this,n)})},yi=function(t,e,n){var r=n.length;if(null==t)return!r;for(t=Object(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0},bi=function(t){return function(t){var e=Zt(t);return function(n){return yi(n,t,e)}}(Rr(t,1))},_i=function(t,e){return null==e||yi(t,e,Zt(e))},xi=i(36),wi=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r},Ei=i(44),Si=function(t,e){return t&&Object(Ei.a)(t,e,Zt)},Oi=function(t,e){return function(n,r){if(null==n)return n;if(!Object(qt.a)(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}},Ti=Oi(Si),ki=function(t,e,n,r){return Ti(t,function(t,i,o){e(r,t,n(t),o)}),r},ji=function(t,e){return function(n,r){var i=Object(x.a)(n)?wi:ki,o=e?e():{};return i(n,t,mi(r),o)}},Ai=Object.prototype.hasOwnProperty,Ri=ji(function(t,e,n){Ai.call(t,n)?++t[n]:Object(Ce.a)(t,n,1)}),Ii=function(t,e){var n=Object(q.a)(t);return null==e?n:jn(n,e)},Li=8;h.placeholder={};var Pi=h,Mi=16;p.placeholder={};var Ci=p,Ni=function(){return U.a.Date.now()},Bi="Expected a function",Fi=l,Di=a,Ui=function(t,e,n){function r(e){var n=u,r=c;return u=c=void 0,p=e,l=t.apply(r,n)}function i(t){var n=t-h;return void 0===h||n>=e||0>n||m&&t-p>=f}function o(){var t=Ni();return i(t)?a(t):void(d=setTimeout(o,function(t){var n=e-(t-h);return m?Di(n,f-(t-p)):n}(t)))}function a(t){return d=void 0,v&&u?r(t):(u=c=void 0,l)}function s(){var t=Ni(),n=i(t);if(u=arguments,c=this,h=t,n){if(void 0===d)return function(t){return p=t,d=setTimeout(o,e),g?r(t):l}(h);if(m)return clearTimeout(d),d=setTimeout(o,e),r(h)}return void 0===d&&(d=setTimeout(o,e)),l}var u,c,f,l,d,h,p=0,g=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError(Bi);return e=M(e)||0,Object(j.a)(n)&&(g=!!n.leading,f=(m="maxWait"in n)?Fi(M(n.maxWait)||0,e):f,v="trailing"in n?!!n.trailing:v),s.cancel=function(){void 0!==d&&clearTimeout(d),p=0,u=h=c=d=void 0},s.flush=function(){return void 0===d?l:a(Ni())},s},Wi=function(t,e){return null==t||t!=t?e:t},Vi=Object.prototype,zi=Vi.hasOwnProperty,qi=Object(je.a)(function(t,e){t=Object(t);var n=-1,r=e.length,i=2<r?e[2]:void 0;for(i&&Object(En.a)(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=Object(te.a)(o),s=-1,u=a.length;++s<u;){var c=a[s],f=t[c];(void 0===f||Object(zr.a)(f,Vi[c])&&!zi.call(t,c))&&(t[c]=o[c])}return t}),Gi=qi,Xi=i(53),Hi=function(t,e,n){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout(function(){t.apply(void 0,n)},e)},$i=Object(je.a)(function(t,e){return Hi(t,1,e)}),Ki=$i,Yi=Object(je.a)(function(t,e,n){return Hi(t,M(e)||0,n)}),Zi=Yi,Qi=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},Ji=function(t,e,n,r){var i=-1,o=_t,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=_(e,Object(mr.a)(n))),r?(o=Qi,a=!1):e.length>=200&&(o=Ur,a=!1,e=new Fr(e));t:for(;++i<s;){var f=t[i],l=null==n?f:n(f);if(f=r||0!==f?f:0,a&&l==l){for(var d=c;d--;)if(e[d]===l)continue t;u.push(f)}else o(e,l,r)||u.push(f)}return u},to=i(4),eo=Object(je.a)(function(t,e){return Object(to.a)(t)?Ji(t,Ee(e,1,to.a,!0)):[]}),no=eo,ro=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},io=Object(je.a)(function(t,e){var n=ro(e);return Object(to.a)(n)&&(n=void 0),Object(to.a)(t)?Ji(t,Ee(e,1,to.a,!0),mi(n)):[]}),oo=io,ao=Object(je.a)(function(t,e){var n=ro(e);return Object(to.a)(n)&&(n=void 0),Object(to.a)(t)?Ji(t,Ee(e,1,to.a,!0),void 0,n):[]}),so=ao,uo=T(function(t,e){return t/e},1),co=uo,fo=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:N(e),De(t,0>e?0:e,r)):[]},lo=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:N(e),De(t,0,0>(e=r-e)?0:e)):[]},ho=function(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?De(t,r?0:o,r?o+1:i):De(t,r?o+1:0,r?i:o)},po=function(t,e){return t&&t.length?ho(t,mi(e),!0,!0):[]},go=function(t,e){return t&&t.length?ho(t,mi(e),!0):[]},mo=function(t){return"function"==typeof t?t:F.a},vo=function(t,e){return(Object(x.a)(t)?mt:Ti)(t,mo(e))},yo=function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t},bo=i(58),_o=Object(bo.a)(!0),xo=_o,wo=function(t,e){return t&&xo(t,e,Zt)},Eo=Oi(wo,!0),So=Eo,Oo=function(t,e){return(Object(x.a)(t)?yo:So)(t,mo(e))},To=function(t,e,n){t=he(t),e=O(e);var r=t.length,i=n=void 0===n?r:On(N(n),0,r);return 0<=(n-=e.length)&&t.slice(n,i)==e},ko=function(t){return function(e){var n=or(e);return"[object Map]"==n?qr(e):"[object Set]"==n?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(e):function(t,e){return _(e,function(e){return[e,t[e]]})}(e,t(e))}},jo=ko(Zt),Ao=jo,Ro=ko(te.a),Io=Ro,Lo=Ke({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Po=/[&<>"']/g,Mo=RegExp(Po.source),Co=function(t){return(t=he(t))&&Mo.test(t)?t.replace(Po,Lo):t},No=/[\\^$.*+?()[\]{}|]/g,Bo=RegExp(No.source),Fo=function(t){return(t=he(t))&&Bo.test(t)?t.replace(No,"\\$&"):t},Do=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0},Uo=function(t,e){var n=!0;return Ti(t,function(t,r,i){return n=!!e(t,r,i)}),n},Wo=function(t,e,n){var r=Object(x.a)(t)?Do:Uo;return n&&Object(En.a)(t,e,n)&&(e=void 0),r(t,mi(e))},Vo=function(t){return t?On(N(t),0,4294967295):0},zo=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Object(En.a)(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for(0>(n=N(n))&&(n=-n>i?0:i+n),0>(r=void 0===r||r>i?i:N(r))&&(r+=i),r=n>r?0:Vo(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},qo=function(t,e){var n=[];return Ti(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n},Go=function(t,e){return(Object(x.a)(t)?In:qo)(t,mi(e))},Xo=function(t){return function(e,n,r){var i=Object(e);if(!Object(qt.a)(e)){var o=mi(n);e=Zt(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return-1<a?i[o?e[a]:a]:void 0}},Ho=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:N(n);return 0>i&&(i=l(r+i,0)),vt(t,mi(e),i)},$o=Xo(Ho),Ko=$o,Yo=function(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r},Zo=function(t,e){return Yo(t,mi(e),Si)},Qo=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=N(n),i=0>n?l(r+i,0):a(i,r-1)),vt(t,mi(e),i,!0)},Jo=Xo(Qo),ta=Jo,ea=function(t,e){return Yo(t,mi(e),wo)},na=function(t){return t&&t.length?t[0]:void 0},ra=function(t,e){var n=-1,r=Object(qt.a)(t)?Array(t.length):[];return Ti(t,function(t,i,o){r[++n]=e(t,i,o)}),r},ia=function(t,e){return(Object(x.a)(t)?_:ra)(t,mi(e))},oa=function(t,e){return Ee(ia(t,e),1)},aa=function(t,e){return Ee(ia(t,e),1/0)},sa=function(t,e,n){return n=void 0===n?1:N(n),Ee(ia(t,e),n)},ua=function(t){return(null==t?0:t.length)?Ee(t,1/0):[]},ca=function(t,e){return(null==t?0:t.length)?(e=void 0===e?1:N(e),Ee(t,e)):[]},fa=function(t){return Dt(t,512)},la=_n("floor"),da=function(t){return Te(function(e){var n=e.length,r=n,i=it.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!a&&"wrapper"==rt(o))var a=new it([],!0)}for(r=a?r:n;++r<n;){o=e[r];var s=rt(o),u="wrapper"==s?tt(o):void 0;a=u&&ct(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[rt(u[0])].apply(a,u[3]):1==o.length&&ct(o)?a[s]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Object(x.a)(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})},ha=da(),pa=da(!0),ga=function(t,e){return null==t?t:Object(Ei.a)(t,mo(e),te.a)},ma=function(t,e){return null==t?t:xo(t,mo(e),te.a)},va=function(t,e){return t&&Si(t,mo(e))},ya=function(t,e){return t&&wo(t,mo(e))},ba=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},_a=i(16),xa=function(t,e){return In(e,function(e){return Object(_a.a)(t[e])})},wa=function(t){return null==t?[]:xa(t,Zt(t))},Ea=function(t){return null==t?[]:xa(t,Object(te.a)(t))},Sa=Object.prototype.hasOwnProperty,Oa=ji(function(t,e,n){Sa.call(t,n)?t[n].push(e):Object(Ce.a)(t,n,[e])}),Ta=function(t,e){return t>e},ka=function(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=M(e),n=M(n)),t(e,n)}},ja=ka(Ta),Aa=ka(function(t,e){return t>=e}),Ra=Object.prototype.hasOwnProperty,Ia=function(t,e){return null!=t&&Ra.call(t,e)},La=function(t,e){return null!=t&&li(t,e,Ia)},Pa=function(t,e,n){return e=C(e),void 0===n?(n=e,e=0):n=C(n),function(t,e,n){return t>=a(e,n)&&t<l(e,n)}(t=M(t),e,n)},Ma=function(t){return"string"==typeof t||!Object(x.a)(t)&&Object(m.a)(t)&&"[object String]"==Object(g.a)(t)},Ca=function(t,e){return _(e,function(e){return t[e]})},Na=function(t){return null==t?[]:Ca(t,Zt(t))},Ba=function(t,e,n,r){t=Object(qt.a)(t)?t:Na(t),n=n&&!r?N(n):0;var i=t.length;return 0>n&&(n=l(i+n,0)),Ma(t)?n<=i&&-1<t.indexOf(e,n):!!i&&-1<bt(t,e,n)},Fa=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:N(n);return 0>i&&(i=l(r+i,0)),bt(t,e,i)},Da=function(t){return(null==t?0:t.length)?De(t,0,-1):[]},Ua=function(t,e,n){for(var r=n?Qi:_t,i=t[0].length,o=t.length,s=o,u=Array(o),c=1/0,f=[];s--;){var l=t[s];s&&e&&(l=_(l,Object(mr.a)(e))),c=a(l.length,c),u[s]=!n&&(e||120<=i&&120<=l.length)?new Fr(s&&l):void 0}l=t[0];var d=-1,h=u[0];t:for(;++d<i&&f.length<c;){var p=l[d],g=e?e(p):p;if(p=n||0!==p?p:0,h?!Ur(h,g):!r(f,g,n)){for(s=o;--s;){var m=u[s];if(m?!Ur(m,g):!r(t[s],g,n))continue t}h&&h.push(g),f.push(p)}}return f},Wa=function(t){return Object(to.a)(t)?t:[]},Va=Object(je.a)(function(t){var e=_(t,Wa);return e.length&&e[0]===t[0]?Ua(e):[]}),za=Object(je.a)(function(t){var e=ro(t),n=_(t,Wa);return e===ro(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?Ua(n,mi(e)):[]}),qa=Object(je.a)(function(t){var e=ro(t),n=_(t,Wa);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?Ua(n,void 0,e):[]}),Ga=function(t,e){return function(n,r){return function(t,e,n,r){return Si(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}},Xa=Object.prototype.toString,Ha=Ga(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Xa.call(e)),t[e]=n},Object(xi.a)(F.a)),$a=Object.prototype,Ka=$a.hasOwnProperty,Ya=$a.toString,Za=Ga(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ya.call(e)),Ka.call(t,e)?t[e].push(n):t[e]=[n]},mi),Qa=function(t,e){return 2>e.length?t:me(t,De(e,0,-1))},Ja=function(t,e,n){e=pe(e,t);var r=null==(t=Qa(t,e))?t:t[ge(ro(e))];return null==r?void 0:Object(X.a)(r,t,n)},ts=Object(je.a)(Ja),es=Object(je.a)(function(t,e,n){var r=-1,i=Object(qt.a)(t)?Array(t.length):[];return Ti(t,function(t){i[++r]="function"==typeof e?Object(X.a)(e,t,n):Ja(t,e,n)}),i}),ns=vr.a&&vr.a.isArrayBuffer,rs=ns?Object(mr.a)(ns):function(t){return Object(m.a)(t)&&"[object ArrayBuffer]"==Object(g.a)(t)},is=function(t){return!0===t||!1===t||Object(m.a)(t)&&"[object Boolean]"==Object(g.a)(t)},os=vr.a&&vr.a.isDate,as=os?Object(mr.a)(os):function(t){return Object(m.a)(t)&&"[object Date]"==Object(g.a)(t)},ss=function(t){return Object(m.a)(t)&&1===t.nodeType&&!Object(Ae.a)(t)},us=Object.prototype.hasOwnProperty,cs=function(t){if(null==t)return!0;if(Object(qt.a)(t)&&(Object(x.a)(t)||"string"==typeof t||"function"==typeof t.splice||Object(gr.a)(t)||Object(Yr.a)(t)||Object(_e.a)(t)))return!t.length;var e=or(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Object(Gt.a)(t))return!Yt(t).length;for(var n in t)if(us.call(t,n))return!1;return!0},fs=function(t,e){return ni(t,e)},ls=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?ni(t,e,void 0,n):!!r},ds=U.a.isFinite,hs=function(t){return"number"==typeof t&&ds(t)},ps=function(t){return"number"==typeof t&&t==N(t)},gs=function(t,e){return t===e||oi(t,e,si(e))},ms=function(t,e,n){return n="function"==typeof n?n:void 0,oi(t,e,si(e),n)},vs=function(t){return"number"==typeof t||Object(m.a)(t)&&"[object Number]"==Object(g.a)(t)},ys=function(t){return vs(t)&&t!=+t},bs=i(65),_s=i(50),xs=i(37),ws=_s.a?_a.a:xs.a,Es=function(t){if(ws(t))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Object(bs.a)(t)},Ss=function(t){return null==t},Os=function(t){return null===t},Ts=vr.a&&vr.a.isRegExp,ks=Ts?Object(mr.a)(Ts):function(t){return Object(m.a)(t)&&"[object RegExp]"==Object(g.a)(t)},js=9007199254740991,As=function(t){return ps(t)&&t>=-js&&t<=js},Rs=function(t){return void 0===t},Is=function(t){return Object(m.a)(t)&&"[object WeakMap]"==or(t)},Ls=function(t){return Object(m.a)(t)&&"[object WeakSet]"==Object(g.a)(t)},Ps=function(t){return mi("function"==typeof t?t:Rr(t,1))},Ms=Array.prototype.join,Cs=function(t,e){return null==t?"":Ms.call(t,e)},Ns=mn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Bs=ji(function(t,e,n){Object(Ce.a)(t,n,e)}),Fs=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=0>(i=N(n))?l(r+i,0):a(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):vt(t,yt,i,!0)},Ds=mn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Us=Ge("toLowerCase"),Ws=function(t,e){return t<e},Vs=ka(Ws),zs=ka(function(t,e){return t<=e}),qs=function(t,e){var n={};return e=mi(e),Si(t,function(t,r,i){Object(Ce.a)(n,e(t,r,i),t)}),n},Gs=function(t,e){var n={};return e=mi(e),Si(t,function(t,r,i){Object(Ce.a)(n,r,e(t,r,i))}),n},Xs=function(t){return ci(Rr(t,1))},Hs=function(t,e){return hi(t,Rr(e,1))},$s=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!v(a):n(a,s)))var s=a,u=o}return u},Ks=function(t){return t&&t.length?$s(t,F.a,Ta):void 0},Ys=function(t,e){return t&&t.length?$s(t,mi(e),Ta):void 0},Zs=function(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n},Qs=function(t,e){var n=null==t?0:t.length;return n?Zs(t,e)/n:NaN},Js=function(t){return Qs(t,F.a)},tu=function(t,e){return Qs(t,mi(e))},eu=i(47),nu=Object(zt.a)(function(t,e,n){Object(eu.a)(t,e,n)}),ru=i(43),iu=Object(je.a)(function(t,e){return function(n){return Ja(n,t,e)}}),ou=Object(je.a)(function(t,e){return function(n){return Ja(t,n,e)}}),au=function(t){return t&&t.length?$s(t,F.a,Ws):void 0},su=function(t,e){return t&&t.length?$s(t,mi(e),Ws):void 0},uu=function(t,e,n){var r=Zt(e),i=xa(e,r),o=!(Object(j.a)(n)&&"chain"in n&&!n.chain),a=Object(_a.a)(t);return mt(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Object(ot.a)(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,be([this.value()],arguments))})}),t},cu=T(function(t,e){return t*e},1),fu=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}},lu=b.a?b.a.iterator:void 0,du=function(t){if(!t)return[];if(Object(qt.a)(t))return Ma(t)?qe(t):Object(ot.a)(t);if(lu&&t[lu])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[lu]());var e=or(t);return("[object Map]"==e?qr:"[object Set]"==e?Gr:Na)(t)},hu=function(){void 0===this.__values__&&(this.__values__=du(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},pu=function(t,e){var n=t.length;if(n)return e+=0>e?n:0,Object(Ot.a)(e,n)?t[e]:void 0},gu=function(t,e){return t&&t.length?pu(t,N(e)):void 0},mu=function(t){return t=N(t),Object(je.a)(function(e){return pu(e,t)})},vu=function(t,e){return e=pe(e,t),null==(t=Qa(t,e))||delete t[ge(ro(e))]},yu=function(t){return Object(Ae.a)(t)?void 0:t},bu=Te(function(t,e){var n={};if(null==t)return n;var r=!1;e=_(e,function(e){return e=pe(e,t),r||(r=1<e.length),e}),Object(Vt.a)(t,Vn(t),n),r&&(n=Rr(n,7,yu));for(var i=e.length;i--;)vu(n,e[i]);return n}),_u=function(t,e,n,r){if(!Object(j.a)(t))return t;for(var i=-1,o=(e=pe(e,t)).length,a=t;null!=a&&++i<o;){var s=ge(e[i]),u=n;if(i!=o-1){var c=a[s];void 0===(u=r?r(c,s,a):void 0)&&(u=Object(j.a)(c)?c:Object(Ot.a)(e[i+1])?[]:{})}Object(Wt.a)(a,s,u),a=a[s]}return t},xu=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=me(t,a);n(s,a)&&_u(o,pe(a,t),s)}return o},wu=function(t,e){if(null==t)return{};var n=_(Vn(t),function(t){return[t]});return e=mi(e),xu(t,n,function(t,n){return e(t,n[0])})},Eu=function(t,e){return wu(t,fu(mi(e)))},Su=function(t){return Le(2,t)},Ou=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=v(t),a=void 0!==e,s=null===e,u=e==e,c=v(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0},Tu=function(t,e,n){var r=-1;return e=_(e.length?e:[F.a],Object(mr.a)(mi)),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(ra(t,function(t){return{criteria:_(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Ou(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)})},ku=function(t,e,n,r){return null==t?[]:(Object(x.a)(e)||(e=null==e?[]:[e]),n=r?void 0:n,Object(x.a)(n)||(n=null==n?[]:[n]),Tu(t,e,n))},ju=function(t){return Te(function(e){return e=_(e,Object(mr.a)(mi)),Object(je.a)(function(n){var r=this;return t(e,function(t){return Object(X.a)(t,r,n)})})})},Au=ju(_),Ru=(0,je.a)(function(t,e){var n=(e=1==e.length&&Object(x.a)(e[0])?_(e[0],Object(mr.a)(mi)):_(Ee(e,1),Object(mr.a)(mi))).length;return Object(je.a)(function(r){for(var i=-1,o=a(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Object(X.a)(t,this,r)})}),Iu=ju(Do),Lu=ju(Dr),Pu=function(t,n){var r="";if(!t||1>n||n>9007199254740991)return r;do{n%2&&(r+=t),(n=e(n/2))&&(t+=t)}while(n);return r},Mu=pi("length"),Cu=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Nu=function(t){return Ve(t)?function(t){for(var e=Cu.lastIndex=0;Cu.test(t);)++e;return e}(t):Mu(t)},Bu=function(t,e){var r=(e=void 0===e?" ":O(e)).length;if(2>r)return r?Pu(e,t):e;var i=Pu(e,n(t/Nu(e)));return Ve(e)?Ue(qe(i),0,t).join(""):i.slice(0,t)},Fu=function(t,r,i){t=he(t);var o=(r=N(r))?Nu(t):0;if(!r||o>=r)return t;var a=(r-o)/2;return Bu(e(a),i)+t+Bu(n(a),i)},Du=function(t,e,n){t=he(t);var r=(e=N(e))?Nu(t):0;return e&&r<e?t+Bu(e-r,n):t},Uu=function(t,e,n){t=he(t);var r=(e=N(e))?Nu(t):0;return e&&r<e?Bu(e-r,n)+t:t},Wu=/^\s+/,Vu=U.a.parseInt,zu=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Vu(he(t).replace(Wu,""),e||0)},qu=Object(je.a)(function(t,e){var n=jt(e,St(qu));return Dt(t,32,void 0,e,n)});qu.placeholder={};var Gu=qu,Xu=Object(je.a)(function(t,e){var n=jt(e,St(Xu));return Dt(t,64,void 0,e,n)});Xu.placeholder={};var Hu=Xu,$u=ji(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Ku=$u,Yu=Te(function(t,e){return null==t?{}:function(t,e){return xu(t,e,function(e,n){return di(t,n)})}(t,e)}),Zu=Yu,Qu=function(t){for(var e,n,r=this;r instanceof Y;){(n=at(r)).__index__=0,n.__values__=void 0,e?i.__wrapped__=n:e=n;var i=n;r=r.__wrapped__}return i.__wrapped__=t,e},Ju=function(t){return function(e){return null==t?void 0:me(t,e)}},tc=function(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1},ec=Array.prototype,nc=ec.splice,rc=function(t,e,n,r){var i=r?tc:bt,o=-1,a=e.length,s=t;for(t===e&&(e=Object(ot.a)(e)),n&&(s=_(t,Object(mr.a)(n)));++o<a;)for(var u=0,c=e[o],f=n?n(c):c;-1<(u=i(s,f,u,r));)s!==t&&nc.call(s,u,1),nc.call(t,u,1);return t},ic=function(t,e){return t&&t.length&&e&&e.length?rc(t,e):t},oc=Object(je.a)(ic),ac=oc,sc=function(t,e,n){return t&&t.length&&e&&e.length?rc(t,e,mi(n)):t},uc=function(t,e,n){return t&&t.length&&e&&e.length?rc(t,e,void 0,n):t},cc=Array.prototype.splice,fc=function(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Object(Ot.a)(i)?cc.call(t,i,1):vu(t,i)}}return t},lc=Te(function(t,e){var n=null==t?0:t.length,r=ye(t,e);return fc(t,_(e,function(t){return Object(Ot.a)(t,n)?+t:t}).sort(Ou)),r}),dc=Math.random,hc=function(t,n){return t+e(dc()*(n-t+1))},pc=parseFloat,gc=Math.random,mc=function(t,e,n){if(n&&"boolean"!=typeof n&&Object(En.a)(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=C(t),void 0===e?(e=t,t=0):e=C(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=gc();return a(t+i*(e-t+pc("1e-"+((i+"").length-1))),e)}return hc(t,e)},vc=function(t,e,r,i){for(var o=-1,a=l(n((e-t)/(r||1)),0),s=Array(a);a--;)s[i?a:++o]=t,t+=r;return s},yc=function(t){return function(e,n,r){return r&&"number"!=typeof r&&Object(En.a)(e,n,r)&&(n=r=void 0),e=C(e),void 0===n?(n=e,e=0):n=C(n),r=void 0===r?e<n?1:-1:C(r),vc(e,n,r,t)}},bc=yc(),_c=yc(!0),xc=Te(function(t,e){return Dt(t,256,void 0,void 0,void 0,e)}),wc=function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n},Ec=function(t,e,n){var r=Object(x.a)(t)?$e:wc,i=3>arguments.length;return r(t,mi(e),n,i,Ti)},Sc=function(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n},Oc=function(t,e,n){var r=Object(x.a)(t)?Sc:wc,i=3>arguments.length;return r(t,mi(e),n,i,So)},Tc=function(t,e){return(Object(x.a)(t)?In:qo)(t,fu(mi(e)))},kc=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=mi(e);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return fc(t,i),n},jc=function(t,e,n){return e=(n?Object(En.a)(t,e,n):void 0===e)?1:N(e),Pu(he(t),e)},Ac=function(){var t=arguments,e=he(t[0]);return 3>t.length?e:e.replace(t[1],t[2])},Rc=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=void 0===e?e:N(e),Object(je.a)(t,e)},Ic=function(t,e,n){var r=-1,i=(e=pe(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[ge(e[r])];void 0===o&&(r=i,o=n),t=Object(_a.a)(o)?o.call(t):o}return t},Lc=Array.prototype.reverse,Pc=function(t){return null==t?t:Lc.call(t)},Mc=_n("round"),Cc=function(t){var e=t.length;return e?t[hc(0,e-1)]:void 0},Nc=function(t){return Cc(Na(t))},Bc=function(t){return(Object(x.a)(t)?Cc:Nc)(t)},Fc=function(t,e){var n=-1,r=t.length;for(e=void 0===e?r:e;++n<e;){var i=hc(n,r-1),o=t[i];t[i]=t[n],t[n]=o}return t.length=e,t},Dc=function(t,e){return Fc(Object(ot.a)(t),On(e,0,t.length))},Uc=function(t,e){var n=Na(t);return Fc(n,On(e,0,n.length))},Wc=function(t,e,n){return e=(n?Object(En.a)(t,e,n):void 0===e)?1:N(e),(Object(x.a)(t)?Dc:Uc)(t,e)},Vc=function(t,e,n){return null==t?t:_u(t,e,n)},zc=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:_u(t,e,n,r)},qc=function(t){return Fc(Object(ot.a)(t))},Gc=function(t){return Fc(Na(t))},Xc=function(t){return(Object(x.a)(t)?qc:Gc)(t)},Hc=function(t){if(null==t)return 0;if(Object(qt.a)(t))return Ma(t)?Nu(t):t.length;var e=or(t);return"[object Map]"==e||"[object Set]"==e?t.size:Yt(t).length},$c=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Object(En.a)(t,e,n)?(e=0,n=r):(e=null==e?0:N(e),n=void 0===n?r:N(n)),De(t,e,n)):[]},Kc=mn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Yc=function(t,e){var n;return Ti(t,function(t,r,i){return!(n=e(t,r,i))}),!!n},Zc=function(t,e,n){var r=Object(x.a)(t)?Dr:Yc;return n&&Object(En.a)(t,e,n)&&(e=void 0),r(t,mi(e))},Qc=Object(je.a)(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&Object(En.a)(t,e[0],e[1])?e=[]:2<n&&Object(En.a)(e[0],e[1],e[2])&&(e=[e[0]]),Tu(t,Ee(e,1),[])}),Jc=function(t,n,r,i){n=r(n);for(var o=0,s=null==t?0:t.length,u=n!=n,c=null===n,f=v(n),l=void 0===n;o<s;){var d=e((o+s)/2),h=r(t[d]),p=void 0!==h,g=null===h,m=h==h,y=v(h);if(u)var b=i||m;else b=l?m&&(i||p):c?m&&p&&(i||!g):f?m&&p&&!g&&(i||!y):!(g||y)&&(i?h<=n:h<n);b?o=d+1:s=d}return a(s,4294967294)},tf=function(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!v(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Jc(t,e,F.a,n)},ef=function(t,e){return tf(t,e)},nf=function(t,e,n){return Jc(t,e,mi(n))},rf=function(t,e){var n=null==t?0:t.length;if(n){var r=tf(t,e);if(r<n&&Object(zr.a)(t[r],e))return r}return-1},of=function(t,e){return tf(t,e,!0)},af=function(t,e,n){return Jc(t,e,mi(n),!0)},sf=function(t,e){if(null==t?0:t.length){var n=tf(t,e,!0)-1;if(Object(zr.a)(t[n],e))return n}return-1},uf=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Object(zr.a)(s,u)){var u=s;o[i++]=0===a?0:a}}return o},cf=function(t){return t&&t.length?uf(t):[]},ff=function(t,e){return t&&t.length?uf(t,mi(e)):[]},lf=function(t,e,n){return n&&"number"!=typeof n&&Object(En.a)(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=he(t))&&("string"==typeof e||null!=e&&!ks(e))&&(!(e=O(e))&&Ve(t))?Ue(qe(t),0,n):t.split(e,n):[]},df=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=null==e?0:l(N(e),0),Object(je.a)(function(n){var r=n[e],i=Ue(n,0,e);return r&&be(i,r),Object(X.a)(t,this,i)})},hf=mn(function(t,e,n){return t+(n?" ":"")+Xe(e)}),pf=function(t,e,n){return t=he(t),n=null==n?0:On(N(n),0,t.length),e=O(e),t.slice(n,n+e.length)==e},gf=function(){return{}},mf=function(){return""},vf=function(){return!0},yf=T(function(t,e){return t-e},0),bf=function(t){return t&&t.length?Zs(t,F.a):0},_f=function(t,e){return t&&t.length?Zs(t,mi(e)):0},xf=function(t){var e=null==t?0:t.length;return e?De(t,1,e):[]},wf=function(t,e,n){return t&&t.length?(e=n||void 0===e?1:N(e),De(t,0,0>e?0:e)):[]},Ef=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:N(e),De(t,0>(e=r-e)?0:e,r)):[]},Sf=function(t,e){return t&&t.length?ho(t,mi(e),!1,!0):[]},Of=function(t,e){return t&&t.length?ho(t,mi(e)):[]},Tf=function(t,e){return e(t),t},kf=Object.prototype,jf=kf.hasOwnProperty,Af=function(t,e,n,r){return void 0===t||Object(zr.a)(t,kf[n])&&!jf.call(r,n)?e:t},Rf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},If=function(t){return"\\"+Rf[t]},Lf=/<%=([\s\S]+?)%>/g,Pf={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Lf,variable:"",imports:{_:{escape:Co}}},Mf=/\b__p \+= '';/g,Cf=/\b(__p \+=) '' \+/g,Nf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Bf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ff=/($^)/,Df=/['\n\r\u2028\u2029\\]/g,Uf=Object.prototype.hasOwnProperty,Wf=function(t,e,n){var r=Pf.imports._.templateSettings||Pf;n&&Object(En.a)(t,e,n)&&(e=void 0),t=he(t),e=ne({},e,r,Af);var i,o,a=ne({},e.imports,r.imports,Af),s=Zt(a),u=Ca(a,s),c=0,f=e.interpolate||Ff,l="__p += '",d=RegExp((e.escape||Ff).source+"|"+f.source+"|"+(f===Lf?Bf:Ff).source+"|"+(e.evaluate||Ff).source+"|$","g"),h=Uf.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/[\r\n]/g," ")+"\n":"";t.replace(d,function(e,n,r,a,s,u){return r||(r=a),l+=t.slice(c,u).replace(Df,If),n&&(i=!0,l+="' +\n__e("+n+") +\n'"),s&&(o=!0,l+="';\n"+s+";\n__p += '"),r&&(l+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),l+="';\n";var p=Uf.call(e,"variable")&&e.variable;p||(l="with (obj) {\n"+l+"\n}\n"),l=(o?l.replace(Mf,""):l).replace(Cf,"$1").replace(Nf,"$1;"),l="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var g=Ie(function(){return Function(s,h+"return "+l).apply(void 0,u)});if(g.source=l,Re(g))throw g;return g},Vf="Expected a function",zf=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError(Vf);return Object(j.a)(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ui(t,e,{leading:r,maxWait:e,trailing:i})},qf=function(t,e){return e(t)},Gf=i(46),Xf=4294967295,Hf=function(t,e){if(1>(t=N(t))||t>9007199254740991)return[];var n=Xf,r=a(t,Xf);e=mo(e),t-=Xf;for(var i=Object(Gf.a)(r,e);++n<t;)e(n);return i},$f=function(){return this},Kf=function(t,e){var n=t;return n instanceof Q&&(n=n.value()),$e(e,function(t,e){return e.func.apply(e.thisArg,be([t],e.args))},n)},Yf=function(){return Kf(this.__wrapped__,this.__actions__)},Zf=function(t){return he(t).toLowerCase()},Qf=function(t){return Object(x.a)(t)?_(t,ge):v(t)?[t]:Object(ot.a)(de(he(t)))},Jf=i(42),tl=9007199254740991,el=function(t){return t?On(N(t),-tl,tl):0===t?t:0},nl=function(t){return he(t).toUpperCase()},rl=function(t,e,n){var r=Object(x.a)(t),i=r||Object(gr.a)(t)||Object(Yr.a)(t);if(e=mi(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Object(j.a)(t)&&Object(_a.a)(o)?Object(q.a)(Object(Bn.a)(t)):{}}return(i?mt:Si)(t,function(t,r,i){return e(n,t,r,i)}),n},il=function(t,e){for(var n=t.length;n--&&-1<bt(e,t[n],0););return n},ol=function(t,e){for(var n=-1,r=t.length;++n<r&&-1<bt(e,t[n],0););return n},al=/^\s+|\s+$/g,sl=function(t,e,n){if((t=he(t))&&(n||void 0===e))return t.replace(al,"");if(!t||!(e=O(e)))return t;var r=qe(t),i=qe(e),o=ol(r,i),a=il(r,i)+1;return Ue(r,o,a).join("")},ul=/\s+$/,cl=function(t,e,n){if((t=he(t))&&(n||void 0===e))return t.replace(ul,"");if(!t||!(e=O(e)))return t;var r=qe(t),i=il(r,qe(e))+1;return Ue(r,0,i).join("")},fl=/^\s+/,ll=function(t,e,n){if((t=he(t))&&(n||void 0===e))return t.replace(fl,"");if(!t||!(e=O(e)))return t;var r=qe(t),i=ol(r,qe(e));return Ue(r,i).join("")},dl=30,hl="...",pl=/\w*$/,gl=function(t,e){var n=dl,r=hl;if(Object(j.a)(e)){var i="separator"in e?e.separator:i;n="length"in e?N(e.length):n,r="omission"in e?O(e.omission):r}var o=(t=he(t)).length;if(Ve(t)){var a=qe(t);o=a.length}if(n>=o)return t;var s=n-Nu(r);if(1>s)return r;var u=a?Ue(a,0,s).join(""):t.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),ks(i)){if(t.slice(s).search(i)){var c,f=u;for(i.global||(i=RegExp(i.source,he(pl.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var l=c.index;u=u.slice(0,void 0===l?s:l)}}else if(t.indexOf(O(i),s)!=s){var d=u.lastIndexOf(i);-1<d&&(u=u.slice(0,d))}return u+r},ml=function(t){return Ut(t,1)},vl=Ke({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),yl=/&(?:amp|lt|gt|quot|#39);/g,bl=RegExp(yl.source),_l=function(t){return(t=he(t))&&bl.test(t)?t.replace(yl,vl):t},xl=Xn&&1/Gr(new Xn([,-0]))[1]==1/0?function(t){return new Xn(t)}:J,wl=function(t,e,n){var r=-1,i=_t,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Qi;else if(o>=200){var c=e?null:xl(t);if(c)return Gr(c);a=!1,i=Ur,u=new Fr}else u=e?[]:s;t:for(;++r<o;){var f=t[r],l=e?e(f):f;if(f=n||0!==f?f:0,a&&l==l){for(var d=u.length;d--;)if(u[d]===l)continue t;e&&u.push(l),s.push(f)}else i(u,l,n)||(u!==s&&u.push(l),s.push(f))}return s},El=Object(je.a)(function(t){return wl(Ee(t,1,to.a,!0))}),Sl=Object(je.a)(function(t){var e=ro(t);return Object(to.a)(e)&&(e=void 0),wl(Ee(t,1,to.a,!0),mi(e))}),Ol=Object(je.a)(function(t){var e=ro(t);return e="function"==typeof e?e:void 0,wl(Ee(t,1,to.a,!0),void 0,e)}),Tl=function(t){return t&&t.length?wl(t):[]},kl=function(t,e){return t&&t.length?wl(t,mi(e)):[]},jl=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?wl(t,void 0,e):[]},Al=0,Rl=function(t){var e=++Al;return he(t)+e},Il=function(t,e){return!(null!=t)||vu(t,e)},Ll=function(t){if(!t||!t.length)return[];var e=0;return t=In(t,function(t){if(Object(to.a)(t))return e=l(t.length,e),!0}),Object(Gf.a)(e,function(e){return _(t,pi(e))})},Pl=function(t,e){if(!t||!t.length)return[];var n=Ll(t);return null==e?n:_(n,function(t){return Object(X.a)(e,void 0,t)})},Ml=function(t,e,n,r){return _u(t,e,n(me(t,e)),r)},Cl=function(t,e,n){return null==t?t:Ml(t,e,mo(n))},Nl=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Ml(t,e,mo(n),r)},Bl=mn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Fl=function(t){return null==t?[]:Ca(t,Object(te.a)(t))},Dl=Object(je.a)(function(t,e){return Object(to.a)(t)?Ji(t,e):[]}),Ul=function(t,e){return Gu(mo(e),t)},Wl=Te(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return ye(e,t)};return!(1<e||this.__actions__.length)&&r instanceof Q&&Object(Ot.a)(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:qf,args:[i],thisArg:void 0}),new it(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(void 0),t})):this.thru(i)}),Vl=function(){return wn(this)},zl=function(){var t=this.__wrapped__;if(t instanceof Q){var e=t;return this.__actions__.length&&(e=new Q(this)),(e=e.reverse()).__actions__.push({func:qf,args:[Pc],thisArg:void 0}),new it(e,this.__chain__)}return this.thru(Pc)},ql=function(t,e,n){var r=t.length;if(2>r)return r?wl(t[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Ji(o[i]||a,t[s],e,n));return wl(Ee(o,1),e,n)},Gl=Object(je.a)(function(t){return ql(In(t,to.a))}),Xl=Object(je.a)(function(t){var e=ro(t);return Object(to.a)(e)&&(e=void 0),ql(In(t,to.a),mi(e))}),Hl=Object(je.a)(function(t){var e=ro(t);return e="function"==typeof e?e:void 0,ql(In(t,to.a),void 0,e)}),$l=Object(je.a)(Ll),Kl=function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a},Yl=function(t,e){return Kl(t||[],e||[],Wt.a)},Zl=function(t,e){return Kl(t||[],e||[],_u)},Ql=Object(je.a)(function(t){var e=t.length,n=1<e?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Pl(t,n)}),Jl={chunk:Sn,compact:Nr,concat:Br,difference:no,differenceBy:oo,differenceWith:so,drop:fo,dropRight:lo,dropRightWhile:po,dropWhile:go,fill:zo,findIndex:Ho,findLastIndex:Qo,first:na,flatten:Se,flattenDeep:ua,flattenDepth:ca,fromPairs:ba,head:na,indexOf:Fa,initial:Da,intersection:Va,intersectionBy:za,intersectionWith:qa,join:Cs,last:ro,lastIndexOf:Fs,nth:gu,pull:ac,pullAll:ic,pullAllBy:sc,pullAllWith:uc,pullAt:lc,remove:kc,reverse:Pc,slice:$c,sortedIndex:ef,sortedIndexBy:nf,sortedIndexOf:rf,sortedLastIndex:of,sortedLastIndexBy:af,sortedLastIndexOf:sf,sortedUniq:cf,sortedUniqBy:ff,tail:xf,take:wf,takeRight:Ef,takeRightWhile:Sf,takeWhile:Of,union:El,unionBy:Sl,unionWith:Ol,uniq:Tl,uniqBy:kl,uniqWith:jl,unzip:Ll,unzipWith:Pl,without:Dl,xor:Gl,xorBy:Xl,xorWith:Hl,zip:$l,zipObject:Yl,zipObjectDeep:Zl,zipWith:Ql},td={countBy:Ri,each:vo,eachRight:Oo,every:Wo,filter:Go,find:Ko,findLast:ta,flatMap:oa,flatMapDeep:aa,flatMapDepth:sa,forEach:vo,forEachRight:Oo,groupBy:Oa,includes:Ba,invokeMap:es,keyBy:Bs,map:ia,orderBy:ku,partition:Ku,reduce:Ec,reduceRight:Oc,reject:Tc,sample:Bc,sampleSize:Wc,shuffle:Xc,size:Hc,some:Zc,sortBy:Qc},ed={after:B,ary:Ut,before:Le,bind:Me,bindKey:Fe,curry:Pi,curryRight:Ci,debounce:Ui,defer:Ki,delay:Zi,flip:fa,memoize:ce,negate:fu,once:Su,overArgs:Ru,partial:Gu,partialRight:Hu,rearg:xc,rest:Rc,spread:df,throttle:zf,unary:ml,wrap:Ul},nd={castArray:yn,clone:Ir,cloneDeep:Lr,cloneDeepWith:Pr,cloneWith:Mr,conformsTo:_i,eq:zr.a,gt:ja,gte:Aa,isArguments:_e.a,isArray:x.a,isArrayBuffer:rs,isArrayLike:qt.a,isArrayLikeObject:to.a,isBoolean:is,isBuffer:gr.a,isDate:as,isElement:ss,isEmpty:cs,isEqual:fs,isEqualWith:ls,isError:Re,isFinite:hs,isFunction:_a.a,isInteger:ps,isLength:fi.a,isMap:br,isMatch:gs,isMatchWith:ms,isNaN:ys,isNative:Es,isNil:Ss,isNull:Os,isNumber:vs,isObject:j.a,isObjectLike:m.a,isPlainObject:Ae.a,isRegExp:ks,isSafeInteger:As,isSet:xr,isString:Ma,isSymbol:v,isTypedArray:Yr.a,isUndefined:Rs,isWeakMap:Is,isWeakSet:Ls,lt:Vs,lte:zs,toArray:du,toFinite:C,toInteger:N,toLength:Vo,toNumber:M,toPlainObject:Jf.a,toSafeInteger:el,toString:he},rd={add:k,ceil:xn,divide:co,floor:la,max:Ks,maxBy:Ys,mean:Js,meanBy:tu,min:au,minBy:su,multiply:cu,round:Mc,subtract:yf,sum:bf,sumBy:_f},id=Tn,od=Pa,ad=mc,sd={assign:Jt,assignIn:ee,assignInWith:ne,assignWith:re,at:ke,create:Ii,defaults:Gi,defaultsDeep:Xi.default,entries:Ao,entriesIn:Io,extend:ee,extendWith:ne,findKey:Zo,findLastKey:ea,forIn:ga,forInRight:ma,forOwn:va,forOwnRight:ya,functions:wa,functionsIn:Ea,get:ve,has:La,hasIn:di,invert:Ha,invertBy:Za,invoke:ts,keys:Zt,keysIn:te.a,mapKeys:qs,mapValues:Gs,merge:nu,mergeWith:ru.a,omit:bu,omitBy:Eu,pick:Zu,pickBy:wu,result:Ic,set:Vc,setWith:zc,toPairs:Ao,toPairsIn:Io,transform:rl,unset:Il,update:Cl,updateWith:Nl,values:Na,valuesIn:Fl},ud={at:Wl,chain:wn,commit:Cr,lodash:ut,next:hu,plant:Qu,reverse:zl,tap:Tf,thru:qf,toIterator:$f,toJSON:Yf,value:Yf,valueOf:Yf,wrapperChain:Vl},cd={camelCase:vn,capitalize:He,deburr:Je,endsWith:To,escape:Co,escapeRegExp:Fo,kebabCase:Ns,lowerCase:Ds,lowerFirst:Us,pad:Fu,padEnd:Du,padStart:Uu,parseInt:zu,repeat:jc,replace:Ac,snakeCase:Kc,split:lf,startCase:hf,startsWith:pf,template:Wf,templateSettings:Pf,toLower:Zf,toUpper:nl,trim:sl,trimEnd:cl,trimStart:ll,truncate:gl,unescape:_l,upperCase:Bl,upperFirst:Xe,words:pn},fd={attempt:Ie,bindAll:Ne,cond:vi,conforms:bi,constant:xi.a,defaultTo:Wi,flow:ha,flowRight:pa,identity:F.a,iteratee:Ps,matches:Xs,matchesProperty:Hs,method:iu,methodOf:ou,mixin:uu,noop:J,nthArg:mu,over:Au,overEvery:Iu,overSome:Lu,property:gi,propertyOf:Ju,range:bc,rangeRight:_c,stubArray:Ln,stubFalse:xs.a,stubObject:gf,stubString:mf,stubTrue:vf,times:Hf,toPath:Qf,uniqueId:Rl},ld=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=a(e,t+s);break;case"takeRight":t=l(t,e-s)}}return{start:t,end:e}},dd=4294967295,hd=Array.prototype,pd=Object.prototype.hasOwnProperty,gd=b.a?b.a.iterator:void 0,md=a,vd=function(t){return function(e,n,r){if(null==r){var i=Object(j.a)(n),o=i&&Zt(n),a=o&&o.length&&xa(n,o);(a?a.length:i)||(r=n,n=e,e=this)}return t(e,n,r)}}(uu);
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ut.after=ed.after,ut.ary=ed.ary,ut.assign=sd.assign,ut.assignIn=sd.assignIn,ut.assignInWith=sd.assignInWith,ut.assignWith=sd.assignWith,ut.at=sd.at,ut.before=ed.before,ut.bind=ed.bind,ut.bindAll=fd.bindAll,ut.bindKey=ed.bindKey,ut.castArray=nd.castArray,ut.chain=ud.chain,ut.chunk=Jl.chunk,ut.compact=Jl.compact,ut.concat=Jl.concat,ut.cond=fd.cond,ut.conforms=fd.conforms,ut.constant=fd.constant,ut.countBy=td.countBy,ut.create=sd.create,ut.curry=ed.curry,ut.curryRight=ed.curryRight,ut.debounce=ed.debounce,ut.defaults=sd.defaults,ut.defaultsDeep=sd.defaultsDeep,ut.defer=ed.defer,ut.delay=ed.delay,ut.difference=Jl.difference,ut.differenceBy=Jl.differenceBy,ut.differenceWith=Jl.differenceWith,ut.drop=Jl.drop,ut.dropRight=Jl.dropRight,ut.dropRightWhile=Jl.dropRightWhile,ut.dropWhile=Jl.dropWhile,ut.fill=Jl.fill,ut.filter=td.filter,ut.flatMap=td.flatMap,ut.flatMapDeep=td.flatMapDeep,ut.flatMapDepth=td.flatMapDepth,ut.flatten=Jl.flatten,ut.flattenDeep=Jl.flattenDeep,ut.flattenDepth=Jl.flattenDepth,ut.flip=ed.flip,ut.flow=fd.flow,ut.flowRight=fd.flowRight,ut.fromPairs=Jl.fromPairs,ut.functions=sd.functions,ut.functionsIn=sd.functionsIn,ut.groupBy=td.groupBy,ut.initial=Jl.initial,ut.intersection=Jl.intersection,ut.intersectionBy=Jl.intersectionBy,ut.intersectionWith=Jl.intersectionWith,ut.invert=sd.invert,ut.invertBy=sd.invertBy,ut.invokeMap=td.invokeMap,ut.iteratee=fd.iteratee,ut.keyBy=td.keyBy,ut.keys=Zt,ut.keysIn=sd.keysIn,ut.map=td.map,ut.mapKeys=sd.mapKeys,ut.mapValues=sd.mapValues,ut.matches=fd.matches,ut.matchesProperty=fd.matchesProperty,ut.memoize=ed.memoize,ut.merge=sd.merge,ut.mergeWith=sd.mergeWith,ut.method=fd.method,ut.methodOf=fd.methodOf,ut.mixin=vd,ut.negate=fu,ut.nthArg=fd.nthArg,ut.omit=sd.omit,ut.omitBy=sd.omitBy,ut.once=ed.once,ut.orderBy=td.orderBy,ut.over=fd.over,ut.overArgs=ed.overArgs,ut.overEvery=fd.overEvery,ut.overSome=fd.overSome,ut.partial=ed.partial,ut.partialRight=ed.partialRight,ut.partition=td.partition,ut.pick=sd.pick,ut.pickBy=sd.pickBy,ut.property=fd.property,ut.propertyOf=fd.propertyOf,ut.pull=Jl.pull,ut.pullAll=Jl.pullAll,ut.pullAllBy=Jl.pullAllBy,ut.pullAllWith=Jl.pullAllWith,ut.pullAt=Jl.pullAt,ut.range=fd.range,ut.rangeRight=fd.rangeRight,ut.rearg=ed.rearg,ut.reject=td.reject,ut.remove=Jl.remove,ut.rest=ed.rest,ut.reverse=Jl.reverse,ut.sampleSize=td.sampleSize,ut.set=sd.set,ut.setWith=sd.setWith,ut.shuffle=td.shuffle,ut.slice=Jl.slice,ut.sortBy=td.sortBy,ut.sortedUniq=Jl.sortedUniq,ut.sortedUniqBy=Jl.sortedUniqBy,ut.split=cd.split,ut.spread=ed.spread,ut.tail=Jl.tail,ut.take=Jl.take,ut.takeRight=Jl.takeRight,ut.takeRightWhile=Jl.takeRightWhile,ut.takeWhile=Jl.takeWhile,ut.tap=ud.tap,ut.throttle=ed.throttle,ut.thru=qf,ut.toArray=nd.toArray,ut.toPairs=sd.toPairs,ut.toPairsIn=sd.toPairsIn,ut.toPath=fd.toPath,ut.toPlainObject=nd.toPlainObject,ut.transform=sd.transform,ut.unary=ed.unary,ut.union=Jl.union,ut.unionBy=Jl.unionBy,ut.unionWith=Jl.unionWith,ut.uniq=Jl.uniq,ut.uniqBy=Jl.uniqBy,ut.uniqWith=Jl.uniqWith,ut.unset=sd.unset,ut.unzip=Jl.unzip,ut.unzipWith=Jl.unzipWith,ut.update=sd.update,ut.updateWith=sd.updateWith,ut.values=sd.values,ut.valuesIn=sd.valuesIn,ut.without=Jl.without,ut.words=cd.words,ut.wrap=ed.wrap,ut.xor=Jl.xor,ut.xorBy=Jl.xorBy,ut.xorWith=Jl.xorWith,ut.zip=Jl.zip,ut.zipObject=Jl.zipObject,ut.zipObjectDeep=Jl.zipObjectDeep,ut.zipWith=Jl.zipWith,ut.entries=sd.toPairs,ut.entriesIn=sd.toPairsIn,ut.extend=sd.assignIn,ut.extendWith=sd.assignInWith,vd(ut,ut),ut.add=rd.add,ut.attempt=fd.attempt,ut.camelCase=cd.camelCase,ut.capitalize=cd.capitalize,ut.ceil=rd.ceil,ut.clamp=id,ut.clone=nd.clone,ut.cloneDeep=nd.cloneDeep,ut.cloneDeepWith=nd.cloneDeepWith,ut.cloneWith=nd.cloneWith,ut.conformsTo=nd.conformsTo,ut.deburr=cd.deburr,ut.defaultTo=fd.defaultTo,ut.divide=rd.divide,ut.endsWith=cd.endsWith,ut.eq=nd.eq,ut.escape=cd.escape,ut.escapeRegExp=cd.escapeRegExp,ut.every=td.every,ut.find=td.find,ut.findIndex=Jl.findIndex,ut.findKey=sd.findKey,ut.findLast=td.findLast,ut.findLastIndex=Jl.findLastIndex,ut.findLastKey=sd.findLastKey,ut.floor=rd.floor,ut.forEach=td.forEach,ut.forEachRight=td.forEachRight,ut.forIn=sd.forIn,ut.forInRight=sd.forInRight,ut.forOwn=sd.forOwn,ut.forOwnRight=sd.forOwnRight,ut.get=sd.get,ut.gt=nd.gt,ut.gte=nd.gte,ut.has=sd.has,ut.hasIn=sd.hasIn,ut.head=Jl.head,ut.identity=F.a,ut.includes=td.includes,ut.indexOf=Jl.indexOf,ut.inRange=od,ut.invoke=sd.invoke,ut.isArguments=nd.isArguments,ut.isArray=x.a,ut.isArrayBuffer=nd.isArrayBuffer,ut.isArrayLike=nd.isArrayLike,ut.isArrayLikeObject=nd.isArrayLikeObject,ut.isBoolean=nd.isBoolean,ut.isBuffer=nd.isBuffer,ut.isDate=nd.isDate,ut.isElement=nd.isElement,ut.isEmpty=nd.isEmpty,ut.isEqual=nd.isEqual,ut.isEqualWith=nd.isEqualWith,ut.isError=nd.isError,ut.isFinite=nd.isFinite,ut.isFunction=nd.isFunction,ut.isInteger=nd.isInteger,ut.isLength=nd.isLength,ut.isMap=nd.isMap,ut.isMatch=nd.isMatch,ut.isMatchWith=nd.isMatchWith,ut.isNaN=nd.isNaN,ut.isNative=nd.isNative,ut.isNil=nd.isNil,ut.isNull=nd.isNull,ut.isNumber=nd.isNumber,ut.isObject=j.a,ut.isObjectLike=nd.isObjectLike,ut.isPlainObject=nd.isPlainObject,ut.isRegExp=nd.isRegExp,ut.isSafeInteger=nd.isSafeInteger,ut.isSet=nd.isSet,ut.isString=nd.isString,ut.isSymbol=nd.isSymbol,ut.isTypedArray=nd.isTypedArray,ut.isUndefined=nd.isUndefined,ut.isWeakMap=nd.isWeakMap,ut.isWeakSet=nd.isWeakSet,ut.join=Jl.join,ut.kebabCase=cd.kebabCase,ut.last=ro,ut.lastIndexOf=Jl.lastIndexOf,ut.lowerCase=cd.lowerCase,ut.lowerFirst=cd.lowerFirst,ut.lt=nd.lt,ut.lte=nd.lte,ut.max=rd.max,ut.maxBy=rd.maxBy,ut.mean=rd.mean,ut.meanBy=rd.meanBy,ut.min=rd.min,ut.minBy=rd.minBy,ut.stubArray=fd.stubArray,ut.stubFalse=fd.stubFalse,ut.stubObject=fd.stubObject,ut.stubString=fd.stubString,ut.stubTrue=fd.stubTrue,ut.multiply=rd.multiply,ut.nth=Jl.nth,ut.noop=fd.noop,ut.now={now:Ni}.now,ut.pad=cd.pad,ut.padEnd=cd.padEnd,ut.padStart=cd.padStart,ut.parseInt=cd.parseInt,ut.random=ad,ut.reduce=td.reduce,ut.reduceRight=td.reduceRight,ut.repeat=cd.repeat,ut.replace=cd.replace,ut.result=sd.result,ut.round=rd.round,ut.sample=td.sample,ut.size=td.size,ut.snakeCase=cd.snakeCase,ut.some=td.some,ut.sortedIndex=Jl.sortedIndex,ut.sortedIndexBy=Jl.sortedIndexBy,ut.sortedIndexOf=Jl.sortedIndexOf,ut.sortedLastIndex=Jl.sortedLastIndex,ut.sortedLastIndexBy=Jl.sortedLastIndexBy,ut.sortedLastIndexOf=Jl.sortedLastIndexOf,ut.startCase=cd.startCase,ut.startsWith=cd.startsWith,ut.subtract=rd.subtract,ut.sum=rd.sum,ut.sumBy=rd.sumBy,ut.template=cd.template,ut.times=fd.times,ut.toFinite=nd.toFinite,ut.toInteger=N,ut.toLength=nd.toLength,ut.toLower=cd.toLower,ut.toNumber=nd.toNumber,ut.toSafeInteger=nd.toSafeInteger,ut.toString=nd.toString,ut.toUpper=cd.toUpper,ut.trim=cd.trim,ut.trimEnd=cd.trimEnd,ut.trimStart=cd.trimStart,ut.truncate=cd.truncate,ut.unescape=cd.unescape,ut.uniqueId=fd.uniqueId,ut.upperCase=cd.upperCase,ut.upperFirst=cd.upperFirst,ut.each=td.forEach,ut.eachRight=td.forEachRight,ut.first=Jl.head,vd(ut,function(){var t={};return Si(ut,function(e,n){pd.call(ut.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),ut.VERSION="4.17.15",(ut.templateSettings=cd.templateSettings).imports._=ut,mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){ut[t].placeholder=ut}),mt(["drop","take"],function(t,e){Q.prototype[t]=function(n){n=void 0===n?1:l(N(n),0);var r=this.__filtered__&&!e?new Q(this):this.clone();return r.__filtered__?r.__takeCount__=md(n,r.__takeCount__):r.__views__.push({size:md(n,dd),type:t+(0>r.__dir__?"Right":"")}),r},Q.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),mt(["filter","map","takeWhile"],function(t,e){var n=e+1;Q.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:mi(t),type:n}),e.__filtered__=e.__filtered__||1==n||3==n,e}}),mt(["head","last"],function(t,e){var n="take"+(e?"Right":"");Q.prototype[t]=function(){return this[n](1).value()[0]}}),mt(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Q.prototype[t]=function(){return this.__filtered__?new Q(this):this[n](1)}}),Q.prototype.compact=function(){return this.filter(F.a)},Q.prototype.find=function(t){return this.filter(t).head()},Q.prototype.findLast=function(t){return this.reverse().find(t)},Q.prototype.invokeMap=Object(je.a)(function(t,e){return"function"==typeof t?new Q(this):this.map(function(n){return Ja(n,t,e)})}),Q.prototype.reject=function(t){return this.filter(fu(mi(t)))},Q.prototype.slice=function(t,e){t=N(t);var n=this;return n.__filtered__&&(0<t||0>e)?new Q(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=0>(e=N(e))?n.dropRight(-e):n.take(e-t)),n)},Q.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Q.prototype.toArray=function(){return this.take(dd)},Si(Q.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=ut[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(ut.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof Q,u=a[0],c=s||Object(x.a)(e),f=function(t){var e=i.apply(ut,be([t],a));return r&&l?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(s=c=!1);var l=this.__chain__,d=!!this.__actions__.length,h=o&&!l,p=s&&!d;if(!o&&c){e=p?e:new Q(this);var g=t.apply(e,a);return g.__actions__.push({func:qf,args:[f],thisArg:void 0}),new it(g,l)}return h&&p?t.apply(this,a):(g=this.thru(f),h?r?g.value()[0]:g.value():g)})}),mt(["pop","push","shift","sort","splice","unshift"],function(t){var e=hd[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);ut.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Object(x.a)(i)?i:[],t)}return this[n](function(n){return e.apply(Object(x.a)(n)?n:[],t)})}}),Si(Q.prototype,function(t,e){var n=ut[e];if(n){var r=n.name+"";pd.call(et,r)||(et[r]=[]),et[r].push({name:e,func:n})}}),et[Ct(void 0,2).name]=[{name:"wrapper",func:void 0}],Q.prototype.clone=function(){var t=new Q(this.__wrapped__);return t.__actions__=Object(ot.a)(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Object(ot.a)(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Object(ot.a)(this.__views__),t},Q.prototype.reverse=function(){if(this.__filtered__){var t=new Q(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Q.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Object(x.a)(t),r=0>e,i=n?t.length:0,o=ld(0,i,this.__views__),s=o.start,u=o.end,c=u-s,f=r?u:s-1,l=this.__iteratees__,d=l.length,h=0,p=a(c,this.__takeCount__);if(!n||!r&&i==c&&p==c)return Kf(t,this.__actions__);var g=[];t:for(;c--&&h<p;){for(var m=-1,v=t[f+=e];++m<d;){var y=l[m],b=y.iteratee,_=y.type,w=b(v);if(2==_)v=w;else if(!w){if(1==_)continue t;break t}}g[h++]=v}return g},ut.prototype.at=ud.at,ut.prototype.chain=ud.wrapperChain,ut.prototype.commit=ud.commit,ut.prototype.next=ud.next,ut.prototype.plant=ud.plant,ut.prototype.reverse=ud.reverse,ut.prototype.toJSON=ut.prototype.valueOf=ut.prototype.value=ud.value,ut.prototype.first=ut.prototype.head,gd&&(ut.prototype[gd]=ud.toIterator),i.d(r,"add",function(){return k}),i.d(r,"after",function(){return B}),i.d(r,"ary",function(){return Ut}),i.d(r,"assign",function(){return Jt}),i.d(r,"assignIn",function(){return ee}),i.d(r,"assignInWith",function(){return ne}),i.d(r,"assignWith",function(){return re}),i.d(r,"at",function(){return ke}),i.d(r,"attempt",function(){return Ie}),i.d(r,"before",function(){return Le}),i.d(r,"bind",function(){return Me}),i.d(r,"bindAll",function(){return Ne}),i.d(r,"bindKey",function(){return Fe}),i.d(r,"camelCase",function(){return vn}),i.d(r,"capitalize",function(){return He}),i.d(r,"castArray",function(){return yn}),i.d(r,"ceil",function(){return xn}),i.d(r,"chain",function(){return wn}),i.d(r,"chunk",function(){return Sn}),i.d(r,"clamp",function(){return Tn}),i.d(r,"clone",function(){return Ir}),i.d(r,"cloneDeep",function(){return Lr}),i.d(r,"cloneDeepWith",function(){return Pr}),i.d(r,"cloneWith",function(){return Mr}),i.d(r,"commit",function(){return Cr}),i.d(r,"compact",function(){return Nr}),i.d(r,"concat",function(){return Br}),i.d(r,"cond",function(){return vi}),i.d(r,"conforms",function(){return bi}),i.d(r,"conformsTo",function(){return _i}),i.d(r,"constant",function(){return xi.a}),i.d(r,"countBy",function(){return Ri}),i.d(r,"create",function(){return Ii}),i.d(r,"curry",function(){return Pi}),i.d(r,"curryRight",function(){return Ci}),i.d(r,"debounce",function(){return Ui}),i.d(r,"deburr",function(){return Je}),i.d(r,"defaultTo",function(){return Wi}),i.d(r,"defaults",function(){return Gi}),i.d(r,"defaultsDeep",function(){return Xi.default}),i.d(r,"defer",function(){return Ki}),i.d(r,"delay",function(){return Zi}),i.d(r,"difference",function(){return no}),i.d(r,"differenceBy",function(){return oo}),i.d(r,"differenceWith",function(){return so}),i.d(r,"divide",function(){return co}),i.d(r,"drop",function(){return fo}),i.d(r,"dropRight",function(){return lo}),i.d(r,"dropRightWhile",function(){return po}),i.d(r,"dropWhile",function(){return go}),i.d(r,"each",function(){return vo}),i.d(r,"eachRight",function(){return Oo}),i.d(r,"endsWith",function(){return To}),i.d(r,"entries",function(){return Ao}),i.d(r,"entriesIn",function(){return Io}),i.d(r,"eq",function(){return zr.a}),i.d(r,"escape",function(){return Co}),i.d(r,"escapeRegExp",function(){return Fo}),i.d(r,"every",function(){return Wo}),i.d(r,"extend",function(){return ee}),i.d(r,"extendWith",function(){return ne}),i.d(r,"fill",function(){return zo}),i.d(r,"filter",function(){return Go}),i.d(r,"find",function(){return Ko}),i.d(r,"findIndex",function(){return Ho}),i.d(r,"findKey",function(){return Zo}),i.d(r,"findLast",function(){return ta}),i.d(r,"findLastIndex",function(){return Qo}),i.d(r,"findLastKey",function(){return ea}),i.d(r,"first",function(){return na}),i.d(r,"flatMap",function(){return oa}),i.d(r,"flatMapDeep",function(){return aa}),i.d(r,"flatMapDepth",function(){return sa}),i.d(r,"flatten",function(){return Se}),i.d(r,"flattenDeep",function(){return ua}),i.d(r,"flattenDepth",function(){return ca}),i.d(r,"flip",function(){return fa}),i.d(r,"floor",function(){return la}),i.d(r,"flow",function(){return ha}),i.d(r,"flowRight",function(){return pa}),i.d(r,"forEach",function(){return vo}),i.d(r,"forEachRight",function(){return Oo}),i.d(r,"forIn",function(){return ga}),i.d(r,"forInRight",function(){return ma}),i.d(r,"forOwn",function(){return va}),i.d(r,"forOwnRight",function(){return ya}),i.d(r,"fromPairs",function(){return ba}),i.d(r,"functions",function(){return wa}),i.d(r,"functionsIn",function(){return Ea}),i.d(r,"get",function(){return ve}),i.d(r,"groupBy",function(){return Oa}),i.d(r,"gt",function(){return ja}),i.d(r,"gte",function(){return Aa}),i.d(r,"has",function(){return La}),i.d(r,"hasIn",function(){return di}),i.d(r,"head",function(){return na}),i.d(r,"identity",function(){return F.a}),i.d(r,"inRange",function(){return Pa}),i.d(r,"includes",function(){return Ba}),i.d(r,"indexOf",function(){return Fa}),i.d(r,"initial",function(){return Da}),i.d(r,"intersection",function(){return Va}),i.d(r,"intersectionBy",function(){return za}),i.d(r,"intersectionWith",function(){return qa}),i.d(r,"invert",function(){return Ha}),i.d(r,"invertBy",function(){return Za}),i.d(r,"invoke",function(){return ts}),i.d(r,"invokeMap",function(){return es}),i.d(r,"isArguments",function(){return _e.a}),i.d(r,"isArray",function(){return x.a}),i.d(r,"isArrayBuffer",function(){return rs}),i.d(r,"isArrayLike",function(){return qt.a}),i.d(r,"isArrayLikeObject",function(){return to.a}),i.d(r,"isBoolean",function(){return is}),i.d(r,"isBuffer",function(){return gr.a}),i.d(r,"isDate",function(){return as}),i.d(r,"isElement",function(){return ss}),i.d(r,"isEmpty",function(){return cs}),i.d(r,"isEqual",function(){return fs}),i.d(r,"isEqualWith",function(){return ls}),i.d(r,"isError",function(){return Re}),i.d(r,"isFinite",function(){return hs}),i.d(r,"isFunction",function(){return _a.a}),i.d(r,"isInteger",function(){return ps}),i.d(r,"isLength",function(){return fi.a}),i.d(r,"isMap",function(){return br}),i.d(r,"isMatch",function(){return gs}),i.d(r,"isMatchWith",function(){return ms}),i.d(r,"isNaN",function(){return ys}),i.d(r,"isNative",function(){return Es}),i.d(r,"isNil",function(){return Ss}),i.d(r,"isNull",function(){return Os}),i.d(r,"isNumber",function(){return vs}),i.d(r,"isObject",function(){return j.a}),i.d(r,"isObjectLike",function(){return m.a}),i.d(r,"isPlainObject",function(){return Ae.a}),i.d(r,"isRegExp",function(){return ks}),i.d(r,"isSafeInteger",function(){return As}),i.d(r,"isSet",function(){return xr}),i.d(r,"isString",function(){return Ma}),i.d(r,"isSymbol",function(){return v}),i.d(r,"isTypedArray",function(){return Yr.a}),i.d(r,"isUndefined",function(){return Rs}),i.d(r,"isWeakMap",function(){return Is}),i.d(r,"isWeakSet",function(){return Ls}),i.d(r,"iteratee",function(){return Ps}),i.d(r,"join",function(){return Cs}),i.d(r,"kebabCase",function(){return Ns}),i.d(r,"keyBy",function(){return Bs}),i.d(r,"keys",function(){return Zt}),i.d(r,"keysIn",function(){return te.a}),i.d(r,"last",function(){return ro}),i.d(r,"lastIndexOf",function(){return Fs}),i.d(r,"lodash",function(){return ut}),i.d(r,"lowerCase",function(){return Ds}),i.d(r,"lowerFirst",function(){return Us}),i.d(r,"lt",function(){return Vs}),i.d(r,"lte",function(){return zs}),i.d(r,"map",function(){return ia}),i.d(r,"mapKeys",function(){return qs}),i.d(r,"mapValues",function(){return Gs}),i.d(r,"matches",function(){return Xs}),i.d(r,"matchesProperty",function(){return Hs}),i.d(r,"max",function(){return Ks}),i.d(r,"maxBy",function(){return Ys}),i.d(r,"mean",function(){return Js}),i.d(r,"meanBy",function(){return tu}),i.d(r,"memoize",function(){return ce}),i.d(r,"merge",function(){return nu}),i.d(r,"mergeWith",function(){return ru.a}),i.d(r,"method",function(){return iu}),i.d(r,"methodOf",function(){return ou}),i.d(r,"min",function(){return au}),i.d(r,"minBy",function(){return su}),i.d(r,"mixin",function(){return uu}),i.d(r,"multiply",function(){return cu}),i.d(r,"negate",function(){return fu}),i.d(r,"next",function(){return hu}),i.d(r,"noop",function(){return J}),i.d(r,"now",function(){return Ni}),i.d(r,"nth",function(){return gu}),i.d(r,"nthArg",function(){return mu}),i.d(r,"omit",function(){return bu}),i.d(r,"omitBy",function(){return Eu}),i.d(r,"once",function(){return Su}),i.d(r,"orderBy",function(){return ku}),i.d(r,"over",function(){return Au}),i.d(r,"overArgs",function(){return Ru}),i.d(r,"overEvery",function(){return Iu}),i.d(r,"overSome",function(){return Lu}),i.d(r,"pad",function(){return Fu}),i.d(r,"padEnd",function(){return Du}),i.d(r,"padStart",function(){return Uu}),i.d(r,"parseInt",function(){return zu}),i.d(r,"partial",function(){return Gu}),i.d(r,"partialRight",function(){return Hu}),i.d(r,"partition",function(){return Ku}),i.d(r,"pick",function(){return Zu}),i.d(r,"pickBy",function(){return wu}),i.d(r,"plant",function(){return Qu}),i.d(r,"property",function(){return gi}),i.d(r,"propertyOf",function(){return Ju}),i.d(r,"pull",function(){return ac}),i.d(r,"pullAll",function(){return ic}),i.d(r,"pullAllBy",function(){return sc}),i.d(r,"pullAllWith",function(){return uc}),i.d(r,"pullAt",function(){return lc}),i.d(r,"random",function(){return mc}),i.d(r,"range",function(){return bc}),i.d(r,"rangeRight",function(){return _c}),i.d(r,"rearg",function(){return xc}),i.d(r,"reduce",function(){return Ec}),i.d(r,"reduceRight",function(){return Oc}),i.d(r,"reject",function(){return Tc}),i.d(r,"remove",function(){return kc}),i.d(r,"repeat",function(){return jc}),i.d(r,"replace",function(){return Ac}),i.d(r,"rest",function(){return Rc}),i.d(r,"result",function(){return Ic}),i.d(r,"reverse",function(){return Pc}),i.d(r,"round",function(){return Mc}),i.d(r,"sample",function(){return Bc}),i.d(r,"sampleSize",function(){return Wc}),i.d(r,"set",function(){return Vc}),i.d(r,"setWith",function(){return zc}),i.d(r,"shuffle",function(){return Xc}),i.d(r,"size",function(){return Hc}),i.d(r,"slice",function(){return $c}),i.d(r,"snakeCase",function(){return Kc}),i.d(r,"some",function(){return Zc}),i.d(r,"sortBy",function(){return Qc}),i.d(r,"sortedIndex",function(){return ef}),i.d(r,"sortedIndexBy",function(){return nf}),i.d(r,"sortedIndexOf",function(){return rf}),i.d(r,"sortedLastIndex",function(){return of}),i.d(r,"sortedLastIndexBy",function(){return af}),i.d(r,"sortedLastIndexOf",function(){return sf}),i.d(r,"sortedUniq",function(){return cf}),i.d(r,"sortedUniqBy",function(){return ff}),i.d(r,"split",function(){return lf}),i.d(r,"spread",function(){return df}),i.d(r,"startCase",function(){return hf}),i.d(r,"startsWith",function(){return pf}),i.d(r,"stubArray",function(){return Ln}),i.d(r,"stubFalse",function(){return xs.a}),i.d(r,"stubObject",function(){return gf}),i.d(r,"stubString",function(){return mf}),i.d(r,"stubTrue",function(){return vf}),i.d(r,"subtract",function(){return yf}),i.d(r,"sum",function(){return bf}),i.d(r,"sumBy",function(){return _f}),i.d(r,"tail",function(){return xf}),i.d(r,"take",function(){return wf}),i.d(r,"takeRight",function(){return Ef}),i.d(r,"takeRightWhile",function(){return Sf}),i.d(r,"takeWhile",function(){return Of}),i.d(r,"tap",function(){return Tf}),i.d(r,"template",function(){return Wf}),i.d(r,"templateSettings",function(){return Pf}),i.d(r,"throttle",function(){return zf}),i.d(r,"thru",function(){return qf}),i.d(r,"times",function(){return Hf}),i.d(r,"toArray",function(){return du}),i.d(r,"toFinite",function(){return C}),i.d(r,"toInteger",function(){return N}),i.d(r,"toIterator",function(){return $f}),i.d(r,"toJSON",function(){return Yf}),i.d(r,"toLength",function(){return Vo}),i.d(r,"toLower",function(){return Zf}),i.d(r,"toNumber",function(){return M}),i.d(r,"toPairs",function(){return Ao}),i.d(r,"toPairsIn",function(){return Io}),i.d(r,"toPath",function(){return Qf}),i.d(r,"toPlainObject",function(){return Jf.a}),i.d(r,"toSafeInteger",function(){return el}),i.d(r,"toString",function(){return he}),i.d(r,"toUpper",function(){return nl}),i.d(r,"transform",function(){return rl}),i.d(r,"trim",function(){return sl}),i.d(r,"trimEnd",function(){return cl}),i.d(r,"trimStart",function(){return ll}),i.d(r,"truncate",function(){return gl}),i.d(r,"unary",function(){return ml}),i.d(r,"unescape",function(){return _l}),i.d(r,"union",function(){return El}),i.d(r,"unionBy",function(){return Sl}),i.d(r,"unionWith",function(){return Ol}),i.d(r,"uniq",function(){return Tl}),i.d(r,"uniqBy",function(){return kl}),i.d(r,"uniqWith",function(){return jl}),i.d(r,"uniqueId",function(){return Rl}),i.d(r,"unset",function(){return Il}),i.d(r,"unzip",function(){return Ll}),i.d(r,"unzipWith",function(){return Pl}),i.d(r,"update",function(){return Cl}),i.d(r,"updateWith",function(){return Nl}),i.d(r,"upperCase",function(){return Bl}),i.d(r,"upperFirst",function(){return Xe}),i.d(r,"value",function(){return Yf}),i.d(r,"valueOf",function(){return Yf}),i.d(r,"values",function(){return Na}),i.d(r,"valuesIn",function(){return Fl}),i.d(r,"without",function(){return Dl}),i.d(r,"words",function(){return pn}),i.d(r,"wrap",function(){return Ul}),i.d(r,"wrapperAt",function(){return Wl}),i.d(r,"wrapperChain",function(){return Vl}),i.d(r,"wrapperCommit",function(){return Cr}),i.d(r,"wrapperLodash",function(){return ut}),i.d(r,"wrapperNext",function(){return hu}),i.d(r,"wrapperPlant",function(){return Qu}),i.d(r,"wrapperReverse",function(){return zl}),i.d(r,"wrapperToIterator",function(){return $f}),i.d(r,"wrapperValue",function(){return Yf}),i.d(r,"xor",function(){return Gl}),i.d(r,"xorBy",function(){return Xl}),i.d(r,"xorWith",function(){return Hl}),i.d(r,"zip",function(){return $l}),i.d(r,"zipObject",function(){return Yl}),i.d(r,"zipObjectDeep",function(){return Zl}),i.d(r,"zipWith",function(){return Ql}),i.d(r,"default",function(){return ut})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(53),i=n(92),o=n(67);class a{constructor(t,e){const n="string"==typeof e?e:"",a=r.default(e,{paths:{base:`${n}`,replays:`${n}/replays`,maps:`${n}/maps`,wads:`${n}/wads`,skies:`${n}/skies`,sounds:`${n}/sounds`}});this.game=new o.Game(a),this.interface=new i.PlayerInterface(this.game),this.interface.draw(t),this.game.draw()}load(t){this.game.load(t)}setTitle(t){this.game.setTitle(t)}getTitle(){return this.game.getTitle()}}a.VERSION="0.7.0",e.HLViewer=a,window.HLViewer=a},,,,,,,,,,function(t){var e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(93);e.PlayerInterface=class{constructor(t){this.game=t}getRootNode(){return this.rootNode}draw(t){const e=document.querySelector(t);e&&(this.rootNode=e,r.render(r.h(i.Root,{game:this.game,root:this.rootNode}),e))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(94),o=n(96),a=n(123),s=n(79),u=n(67),c=n(137);e.Root=class extends r.Component{constructor(t){super(t),this.fadeOut=0,this.onPointerLockChange=()=>{this.props.game.pointerLocked=!(document.pointerLockElement!==this.props.root)},this.onContextMenu=t=>{t.preventDefault()},this.onWindowClick=()=>{this.setState({isActive:!1})},this.onRootClick=t=>{t.stopPropagation(),this.setState({isActive:!0}),this.fadeReset()},this.onKeyDown=t=>{if(this.state.isActive){const e=this.props.game;switch(t.which){case 70:s.Fullscreen.isInFullscreen()?s.Fullscreen.exit():s.Fullscreen.enter(this.props.root),this.fadeReset();break;case 77:e.soundSystem.toggleMute(),this.fadeReset();break;case 38:e.soundSystem.setVolume(e.soundSystem.getVolume()+.05),this.fadeReset();break;case 40:e.soundSystem.setVolume(e.soundSystem.getVolume()-.05),this.fadeReset();break;case 74:case 37:e.player.seek(e.player.currentTime-5),this.fadeReset();break;case 76:case 39:e.player.seek(e.player.currentTime+5),this.fadeReset();break;case 75:case 32:if(this.props.game.mode!==u.PlayerMode.REPLAY)return;!e.player.isPlaying||e.player.isPaused?e.player.play():e.player.pause()}}},this.onModeChange=()=>{this.forceUpdate()},this.onLoadStart=()=>{this.setState({isLoading:!0})},this.onLoadEnd=()=>{this.setState({isLoading:!1})},this.onTitleChange=t=>{this.setState({title:t})},this.onMouseEnter=()=>{this.setState({isMouseOver:!0}),this.fadeReset()},this.onMouseMove=()=>{this.state.isMouseOver&&!s.Fullscreen.isInFullscreen()&&this.fadeReset()},this.onMouseLeave=()=>{this.setState({isMouseOver:!1,isVisible:!1}),clearTimeout(this.fadeOut),this.fadeOut=0},this.fadeReset=()=>{this.state.isVisible||this.setState({isVisible:!0}),clearTimeout(this.fadeOut),this.fadeOut=setTimeout(()=>{this.setState({isVisible:!1}),this.fadeOut=0},5e3)},this.onScreenClick=()=>{switch(this.props.game.mode){case u.PlayerMode.REPLAY:{const t=this.props.game.player;!t.isPlaying||t.isPaused?t.play():t.pause();break}case u.PlayerMode.FREE:this.props.root.requestPointerLock()}},this.onScreenDblClick=()=>{s.Fullscreen.isInFullscreen()?s.Fullscreen.exit():s.Fullscreen.enter(this.props.root)},this.state={title:t.game.title,isActive:!1,isLoading:!1,isMouseOver:!1,isVisible:!1}}componentDidMount(){if(this.node){const t=this.props.game,e=this.props.root;this.node.appendChild(t.getCanvas()),t.on("loadstart",this.onLoadStart),t.on("load",this.onLoadEnd),t.on("modechange",this.onModeChange),t.on("titlechange",this.onTitleChange),e.addEventListener("click",this.onRootClick),window.addEventListener("click",this.onWindowClick),window.addEventListener("keydown",this.onKeyDown),document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),e.addEventListener("mouseover",this.onMouseEnter),e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mouseout",this.onMouseLeave),e.addEventListener("contextmenu",this.onContextMenu)}}componentWillUnmount(){const t=this.props.game,e=this.props.root;t.off("loadstart",this.onLoadStart),t.off("load",this.onLoadEnd),t.off("modechange",this.onModeChange),t.off("titlechange",this.onTitleChange),e.removeEventListener("click",this.onRootClick),window.removeEventListener("click",this.onWindowClick),window.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),e.removeEventListener("mouseover",this.onMouseEnter),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mouseout",this.onMouseLeave),e.removeEventListener("contextmenu",this.onContextMenu)}render(){const t=this.props.game,e=this.state.isVisible;return r.h("div",{class:e?c.RootStyle.rootVisible:c.RootStyle.root},r.h("div",{class:e?c.RootStyle.titleVisible:c.RootStyle.title},this.state.title),r.h(i.Loading,{game:t,visible:this.state.isLoading}),r.h("div",{class:c.RootStyle.screen,ref:t=>this.node=t,onClick:this.onScreenClick,onDblClick:this.onScreenDblClick}),t.mode===u.PlayerMode.FREE?r.h(o.FreeMode,{class:e?c.RootStyle.controlsVisible:c.RootStyle.controls,game:t,root:this.props.root}):r.h(a.ReplayMode,{class:e?c.RootStyle.controlsVisible:c.RootStyle.controls,game:t,root:this.props.root,visible:this.state.isMouseOver}))}}},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const i=r(23),o=r(95),a={replay:"Replay",bsp:"Map",sound:"Sounds",sky:"Skybox",sprite:"Sprites",wad:"Wads"};n.Loading=class extends i.Component{constructor(){super(...arguments),this.state={items:{}},this.onItemLoad=t=>{const e=this.state.items[t.type]?this.state.items[t.type]:[];for(let n=0;n<e.length;++n)if(e[n]===t)return;e.push({name:t.name,progress:0}),this.setState({items:Object.assign({},this.state.items,{[t.type]:e})})},this.onItemProgress=t=>{if(this.state.items[t.type]){const e=this.state.items[t.type];for(let n=0;n<e.length;++n)if(e[n].name===t.name){e[n].progress=t.progress;break}this.forceUpdate()}}}componentDidMount(){const t=this.props.game.loader;t.addLoadStartListener(this.onItemLoad),t.addProgressListener(this.onItemProgress)}componentWillUnmount(){const t=this.props.game.loader;t.removeLoadStartListener(this.onItemLoad),t.removeProgressListener(this.onItemProgress)}formatItem(e,n){e=a[e];const r=t(100*n)+"%";let i=29-e.length-r.length;return 2>i&&(i=9-r.length),`${e}${Array(i).join(".")}${r}`}render(){return i.h("div",{class:this.props.visible?o.LoadingStyle.loading:o.LoadingStyle.loadingHidden},i.h("div",{class:o.LoadingStyle.spinner},i.h("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"80px",height:"80px",viewBox:"0 0 80 80",xmlSpace:"preserve"},i.h("path",{fill:"#ffffff",width:"10px",d:"M40,72C22.4,72,8,57.6,8,40C8,22.4,22.4,8,40,8c17.6,0,32,14.4,32,32c0,1.1-0.9,2-2,2s-2-0.9-2-2c0-15.4-12.6-28-28-28S12,24.6,12,40s12.6,28,28,28c1.1,0,2,0.9,2,2S41.1,72,40,72z"}))),i.h("ul",{class:o.LoadingStyle.log},Object.entries(this.state.items).map(([t,e])=>i.h("li",{key:t,class:o.LoadingStyle.logItem},this.formatItem(t,e.reduce((t,e)=>t+e.progress,0)/e.length)))))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.LoadingStyle=r.stylesheet({loading:Object.assign({},{position:"relative",width:"100%",height:"100%",opacity:1,transition:"opacity 2s ease, z-index 1s linear",zIndex:30}),loadingHidden:Object.assign({},{position:"relative",width:"100%",height:"100%",opacity:1,transition:"opacity 2s ease, z-index 1s linear",zIndex:30},{opacity:0,userSelect:"none",zIndex:0}),spinner:{position:"absolute",left:"50%",top:"50%",marginLeft:"-40px",marginTop:"-40px",animation:"rotate 1s linear 0s infinite",height:"80px",width:"80px",animationName:r.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}})},log:{position:"absolute",background:"rgba(0,0,0,0.4)",padding:"10px",fontFamily:"monospace",margin:"0",top:"16px",right:0,paddingLeft:"16px",listStyle:"none"},logItem:{display:"block"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(22),o=n(97),a=n(34),s=n(73),u=n(78);e.FreeMode=function(t){return r.h("div",{class:i.classes(t.class,o.FreeModeStyle.controls)},r.h("div",{class:a.ControlsStyle.buttons},r.h("div",{class:a.ControlsStyle.left}),r.h("div",{class:a.ControlsStyle.right},r.h(s.SettingsButton,{game:t.game}),r.h(u.FullscreenButton,{active:!1,root:t.root}))))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.FreeModeStyle=r.stylesheet({controls:{height:"44px"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(99);e.Mouse=class{constructor(){this.click=!1,this.leftClick=!1,this.rightClick=!1,this.position=new r.Vector2,this.delta=new r.Vector2}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=class{constructor(){this.x=0,this.y=0}},e.Vector3=class{constructor(){this.x=0,this.y=0,this.z=0}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(54),o=n(68),a=n(101),s=n(75),u=n(106),c=n(107),f=n(108),l=n(109),d=n(77);var h;!function(t){t[t.Loading=1]="Loading",t[t.Skipped=2]="Skipped",t[t.Error=3]="Error",t[t.Done=4]="Done"}(h||(h={}));class p{constructor(t){this.name=t,this.progress=0,this.status=h.Loading,this.data=null}isLoading(){return this.status===h.Loading}skip(){this.status=h.Skipped}isSkipped(){return this.status===h.Skipped}error(){this.status=h.Error}isError(){return this.status===h.Error}done(t){this.status=h.Done,this.data=t}isDone(){return this.status===h.Done}}class g extends p{constructor(){super(...arguments),this.type="replay"}}class m extends p{constructor(){super(...arguments),this.type="bsp"}}class v extends p{constructor(){super(...arguments),this.type="sky"}}class y extends p{constructor(){super(...arguments),this.type="wad"}}class b extends p{constructor(){super(...arguments),this.type="sound"}}class _ extends p{constructor(){super(...arguments),this.type="sprite"}}e.Loader=class{constructor(t){this.sprites={},this.game=t,this.replay=void 0,this.map=void 0,this.skies=[],this.wads=[],this.sounds=[],this.events=new i.EventEmitter,this.events.addListener("error",t=>{console.error(t)})}clear(){this.replay=void 0,this.map=void 0,this.skies.length=0,this.wads.length=0,this.sounds.length=0,this.sprites={}}checkStatus(){if((!this.replay||this.replay.isDone())&&(!this.map||this.map.isDone())){for(let t=0;t<this.skies.length;++t)if(this.skies[t].isLoading())return;for(let t=0;t<this.wads.length;++t)if(this.wads[t].isLoading())return;for(let t=0;t<this.sounds.length;++t)if(this.sounds[t].isLoading())return;const t=Object.entries(this.sprites);for(let e=0;e<t.length;++e)if(t[e][1].isLoading())return;this.events.emit("loadall",this)}}load(t){const e=o.extname(t);".dem"===e?this.loadReplay(t):".bsp"===e?this.loadMap(t):this.events.emit("error","Invalid file extension",t)}loadReplay(t){return r(this,void 0,void 0,function*(){this.replay=new g(t),this.events.emit("loadstart",this.replay);const e=this.game.config.paths.replays,n=yield l.xhr(`${e}/${t}`,{method:"GET",isBinary:!0,progressCallback:(t,e)=>{this.replay&&(this.replay.progress=e),this.events.emit("progress",this.replay)}}).catch(t=>{this.replay&&this.replay.error(),this.events.emit("error",t,this.replay)});if(!this.replay.isError()){const t=yield s.Replay.parseIntoChunks(n);this.replay.done(t),this.loadMap(t.maps[0].name+".bsp"),t.maps[0].resources.sounds.forEach(t=>{t.used&&this.loadSound(t.name,t.index)}),this.events.emit("load",this.replay),this.checkStatus()}})}loadMap(t){return r(this,void 0,void 0,function*(){this.map=new m(t),this.events.emit("loadstart",this.map);const e=this.game.config.paths.maps,n=yield l.xhr(`${e}/${t}`,{method:"GET",isBinary:!0,progressCallback:(t,e)=>{this.map&&(this.map.progress=e),this.events.emit("progress",this.map)}}).catch(t=>{this.map&&this.map.error(),this.events.emit("error",t,this.map)});if(this.map.isError())return;const r=yield a.BspParser.parse(t,n);this.map.done(r),r.entities.map(t=>"string"==typeof t.model&&-1<t.model.indexOf(".spr")?t.model:void 0).filter((t,e,n)=>t&&n.indexOf(t)===e).forEach(t=>this.loadSprite(t));const i=r.entities[0].skyname;if(i&&["bk","dn","ft","lf","rt","up"].map(t=>`${i}${t}`).forEach(t=>this.loadSky(t)),r.textures.find(t=>t.isExternal)){const t=r.entities[0].wad.map(t=>this.loadWad(t));yield Promise.all(t)}this.events.emit("load",this.map),this.checkStatus()})}loadSprite(t){return r(this,void 0,void 0,function*(){const e=new _(t);this.sprites[t]=e,this.events.emit("loadstart",e);const n=yield l.xhr(`${this.game.config.paths.base}/${t}`,{method:"GET",isBinary:!0,progressCallback:(t,n)=>{e.progress=n,this.events.emit("progress",e)}}).catch(t=>{e.error(),this.events.emit("error",t,e),this.checkStatus()});if(!e.isError()){const t=d.Sprite.parse(n);e.done(t),this.events.emit("load",e),this.checkStatus()}})}loadSky(t){return r(this,void 0,void 0,function*(){const e=new v(t);this.skies.push(e),this.events.emit("loadstart",e);const n=this.game.config.paths.skies,r=yield l.xhr(`${n}/${t}.tga`,{method:"GET",isBinary:!0,progressCallback:(t,n)=>{e.progress=n,this.events.emit("progress",e)}}).catch(t=>{e.error(),this.events.emit("error",t,e),this.checkStatus()});if(!e.isError()){const n=c.Tga.parse(r,t);e.done(n),this.events.emit("load",e),this.checkStatus()}})}loadWad(t){return r(this,void 0,void 0,function*(){const e=new y(t);this.wads.push(e),this.events.emit("loadstart",e);const n=this.game.config.paths.wads,r=yield l.xhr(`${n}/${t}`,{method:"GET",isBinary:!0,progressCallback:(t,n)=>{e.progress=n,this.events.emit("progress",e)}}).catch(t=>{e.error(),this.events.emit("error",t,e),this.checkStatus()});if(e.isError())return;const i=yield f.Wad.parse(r);if(e.done(i),!this.map||!this.map.data)return;const o=this.map.data;i.entries.forEach(t=>{"texture"!==t.type||o.textures.forEach(e=>{((t,e)=>t.toLowerCase()===e.toLowerCase())(t.name,e.name)&&(e.width=t.width,e.height=t.height,e.data=t.data)})}),this.events.emit("load",e),this.checkStatus()})}loadSound(t,e){return r(this,void 0,void 0,function*(){const n=new b(t);this.sounds.push(n),this.events.emit("loadstart",n);const r=this.game.config.paths.sounds,i=yield l.xhr(`${r}/${t}`,{method:"GET",isBinary:!0,progressCallback:(t,e)=>{n.progress=e,this.events.emit("progress",n)}}).catch(t=>{n.error(),this.events.emit("error",t,n),this.checkStatus()});if(!n.isError()){const r=yield u.Sound.create(i).catch(t=>{n.error(),this.events.emit("error",t,n),this.checkStatus()});!r||n.isError()||(r.index=e,r.name=t,n.done(r),this.events.emit("load",n),this.checkStatus())}})}addLoadStartListener(t){this.events.addListener("loadstart",t)}removeLoadStartListener(t){this.events.removeListener("loadstart",t)}addProgressListener(t){this.events.addListener("progress",t)}removeProgressListener(t){this.events.removeListener("progress",t)}}},function(t,e,n){"use strict";function r(t,e,n,r,i,a,s,u){const c=[];for(let f=0;f<t.length;++f){const l=t[f],d=[],h=new Float32Array(3),p=new Float32Array(3),g=new Float32Array(3),m=new Float32Array(2),v=new Float32Array(2),y=new Float32Array(2),b=new Float32Array(2),_=new Float32Array(2),x=new Float32Array(2);let w=0===f?[0,0,0]:[0,0,0].map((t,e)=>(l.maxs[e]-l.mins[e])/2+l.mins[e]);for(let t=l.firstFace;t<l.firstFace+l.faceCount;++t){const c={buffer:new Float32Array(21*(e[t].edgeCount-2)),textureIndex:-1},f=a[e[t].textureInfo],l=s[f.textureIndex],E=r.slice(e[t].firstEdge,e[t].firstEdge+e[t].edgeCount),S=n[o(E[0])][0<E[0]?0:1];h[0]=i[S][0],h[1]=i[S][1],h[2]=i[S][2],m[0]=h[0]*f.s[0]+h[1]*f.s[1]+h[2]*f.s[2]+f.sShift,m[1]=h[0]*f.t[0]+h[1]*f.t[1]+h[2]*f.t[2]+f.tShift,b[0]=0,b[1]=0;const O=n[o(E[1])][0<E[1]?0:1];p[0]=i[O][0],p[1]=i[O][1],p[2]=i[O][2],v[0]=p[0]*f.s[0]+p[1]*f.s[1]+p[2]*f.s[2]+f.sShift,v[1]=p[0]*f.t[0]+p[1]*f.t[1]+p[2]*f.t[2]+f.tShift,_[0]=0,_[1]=.999;let T=0;for(let r=2;r<e[t].edgeCount;++r){const t=n[o(E[r])][0<E[r]?0:1];g[0]=i[t][0],g[1]=i[t][1],g[2]=i[t][2],y[0]=g[0]*f.s[0]+g[1]*f.s[1]+g[2]*f.s[2]+f.sShift,y[1]=g[0]*f.t[0]+g[1]*f.t[1]+g[2]*f.t[2]+f.tShift,x[0]=.999,x[1]=.999,c.buffer[T++]=h[0],c.buffer[T++]=h[1],c.buffer[T++]=h[2],c.buffer[T++]=m[0],c.buffer[T++]=m[1],c.buffer[T++]=b[0],c.buffer[T++]=b[1],c.buffer[T++]=p[0],c.buffer[T++]=p[1],c.buffer[T++]=p[2],c.buffer[T++]=v[0],c.buffer[T++]=v[1],c.buffer[T++]=_[0],c.buffer[T++]=_[1],c.buffer[T++]=g[0],c.buffer[T++]=g[1],c.buffer[T++]=g[2],c.buffer[T++]=y[0],c.buffer[T++]=y[1],c.buffer[T++]=x[0],c.buffer[T++]=x[1],p[0]=g[0],p[1]=g[1],p[2]=g[2],v[0]=y[0],v[1]=y[1],_[0]=x[0],_[1]=x[1]}(0===f.flags||-65536===f.flags)&&u.processFace(c.buffer,f,e[t].lightmapOffset),c.textureIndex=f.textureIndex;for(let t=0;t<c.buffer.length/7;++t)c.buffer[7*t]-=w[0],c.buffer[7*t+1]-=w[1],c.buffer[7*t+2]-=w[2],c.buffer[7*t+3]/=l.width,c.buffer[7*t+4]/=l.height;d.push(c)}c.push({origin:w,faces:d})}return c}Object.defineProperty(e,"__esModule",{value:!0});const i=n(68),a=n(102),s=n(52),u=n(103),c=n(69),f=n(104);var l;e.parseModels=r,function(t){t[t.Entities=0]="Entities",t[t.Planes=1]="Planes",t[t.Textures=2]="Textures",t[t.Vertices=3]="Vertices",t[t.Visibility=4]="Visibility",t[t.Nodes=5]="Nodes",t[t.TexInfo=6]="TexInfo",t[t.Faces=7]="Faces",t[t.Lighting=8]="Lighting",t[t.ClipNodes=9]="ClipNodes",t[t.Leaves=10]="Leaves",t[t.MarkSurfaces=11]="MarkSurfaces",t[t.Edges=12]="Edges",t[t.SurfEdges=13]="SurfEdges",t[t.Models=14]="Models"}(l=e.BspLumpIndex||(e.BspLumpIndex={})),e.BspParser=class{static parse(t,e){const n=new s.Reader(e);if(30!==n.ui())throw new Error("Invalid map version");const i=[];for(let t=0;15>t;++t)i.push({offset:n.ui(),length:n.ui()});const o=this.loadEntities(n,i[l.Entities].offset,i[l.Entities].length),a=this.loadTextures(n,i[l.Textures].offset),c=this.loadModels(n,i[l.Models].offset,i[l.Models].length),d=this.loadFaces(n,i[l.Faces].offset,i[l.Faces].length),h=this.loadEdges(n,i[l.Edges].offset,i[l.Edges].length),p=this.loadSurfEdges(n,i[l.SurfEdges].offset,i[l.SurfEdges].length),g=this.loadVertices(n,i[l.Vertices].offset,i[l.Vertices].length),m=this.loadTexInfo(n,i[l.TexInfo].offset,i[l.TexInfo].length),v=this.loadLightmap(n,i[l.Lighting].offset,i[l.Lighting].length),y=u.BspLightmapParser.init(v),b=r(c,d,h,p,g,m,a,y);return new f.Bsp(t,o,a,b,{width:u.BspLightmapParser.TEXTURE_SIZE,height:u.BspLightmapParser.TEXTURE_SIZE,data:y.getTexture()})}static loadFaces(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/20;++e)r.push({plane:t.us(),planeSide:t.us(),firstEdge:t.ui(),edgeCount:t.us(),textureInfo:t.us(),styles:[t.ub(),t.ub(),t.ub(),t.ub()],lightmapOffset:t.ui()});return r}static loadModels(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/64;++e)r.push({mins:[t.f(),t.f(),t.f()],maxs:[t.f(),t.f(),t.f()],origin:[t.f(),t.f(),t.f()],headNodes:[t.i(),t.i(),t.i(),t.i()],visLeaves:t.i(),firstFace:t.i(),faceCount:t.i()});return r}static loadEdges(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/4;++e)r.push([t.us(),t.us()]);return r}static loadSurfEdges(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/4;++e)r.push(t.i());return r}static loadVertices(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/12;++e)r.push([t.f(),t.f(),t.f()]);return r}static loadTexInfo(t,e,n){t.seek(e);const r=[];for(let e=0;e<n/40;++e)r.push({s:[t.f(),t.f(),t.f()],sShift:t.f(),t:[t.f(),t.f(),t.f()],tShift:t.f(),textureIndex:t.i(),flags:t.i()});return r}static loadLightmap(t,e,n){return t.seek(e),t.arrx(n,s.ReaderDataType.UByte)}static loadTextureData(t){const e=t.nstr(16),n=t.ui(),r=t.ui(),i=!t.ui();if(i){const t=new Uint8Array(4);return t[0]=t[1]=t[2]=t[3]=255,{name:e,width:n,height:r,data:t,isExternal:i}}{t.skip(12);const o=n*r,a=t.arrx(o,s.ReaderDataType.UByte);t.skip(o/64*21),t.skip(2);const u=t.arrx(768,s.ReaderDataType.UByte);return{name:e,width:n,height:r,data:"{"===e[0]?c.paletteWithLastTransToRGBA(a,u):c.paletteToRGBA(a,u),isExternal:i}}}static loadTextures(t,e){t.seek(e);const n=t.ui(),r=[];for(let e=0;e<n;++e)r.push(t.ui());const i=[];for(let o=0;o<n;++o)4294967295===r[o]?i.push({name:"ERROR404",width:1,height:1,data:new Uint8Array([0,255,0,255]),isExternal:!1}):(t.seek(e+r[o]),i.push(this.loadTextureData(t)));return i}static loadEntities(t,e,n){t.seek(e);const r=a.vdf(t.nstr(n)),o=["origin","angles","_diffuse_light","_light","rendercolor","avelocity"],s=["renderamt","rendermode","scale"],u=r[0];return"worldspawn"===u.classname&&(u.model="*0",u.wad=u.wad||"",u.wad=u.wad.split(";").filter(t=>t.length).map(t=>t.replace(/\\/g,"/")).map(t=>i.basename(t))),r.forEach(t=>{var e=Number.parseFloat;t.model&&(void 0===t.renderamt&&(t.renderamt=0),void 0===t.rendermode&&(t.rendermode=0),void 0===t.renderfx&&(t.renderfx=0),void 0===t.rendercolor&&(t.rendercolor="0 0 0")),o.forEach(n=>{t[n]&&(t[n]=t[n].split(" ").map(t=>e(t)))}),s.forEach(n=>{t[n]&&(t[n]=e(t[n]))})}),r}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.vdf=function(t){let e=0,n="",r="";const i=[];for(let o=0;o<t.length;++o){const a=t[o];switch(e){case 0:if(/\s/.test(a))continue;if("{"!==a)return[];i.push({}),e=1;break;case 1:if(/\s/.test(a))continue;if("}"===a)e=0;else{if('"'!==a)return[];n="",e=2}break;case 2:'"'===a?e=3:n+=a;break;case 3:if(/\s/.test(a))continue;'"'===a&&(r="",e=4);break;case 4:'"'===a?(i[i.length-1][n]=r,e=1):r+=a}}return i}},function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});class i{constructor(t){this.block=new Uint16Array(i.TEXTURE_SIZE),this.lightmap=t,this.texture=new Uint8Array(i.TEXTURE_SIZE*i.TEXTURE_SIZE*4),this.texture[this.texture.length-4]=255,this.texture[this.texture.length-3]=255,this.texture[this.texture.length-2]=255,this.texture[this.texture.length-1]=255}static init(t){return new i(t)}getTexture(){return this.texture}processFace(t,e,n){const r=this.getDimensions(t),o=this.readLightmap(n,r.width,r.height);if(o)for(let n,a=0;a<t.length/7;++a){n=t[7*a]*e.s[0]+t[7*a+1]*e.s[1]+t[7*a+2]*e.s[2]+e.sShift-r.minU,n+=16*o.x+8,n/=16*i.TEXTURE_SIZE;let s=t[7*a]*e.t[0]+t[7*a+1]*e.t[1]+t[7*a+2]*e.t[2]+e.tShift-r.minV;s+=16*o.y+8,s/=16*i.TEXTURE_SIZE,t[7*a+5]=n,t[7*a+6]=s}}getDimensions(t){let r=e(t[3]),i=e(t[4]),o=e(t[3]),a=e(t[4]);for(let n=1;n<t.length/7;++n)e(t[7*n+3])<r&&(r=e(t[7*n+3])),e(t[7*n+4])<i&&(i=e(t[7*n+4])),e(t[7*n+3])>o&&(o=e(t[7*n+3])),e(t[7*n+4])>a&&(a=e(t[7*n+4]));return{width:n(o/16)-e(r/16)+1,height:n(a/16)-e(i/16)+1,minU:e(r),minV:e(i)}}readLightmap(t,n,r){if(0>=r||0>=n)return null;const o=this.findFreeSpace(n,r);if(o){const s=[o.x,o.y],u=[n,r],c=[i.TEXTURE_SIZE,i.TEXTURE_SIZE];for(let i=0;i<n*r;++i){const n=s[1]*c[0]+s[0]+c[0]*e(i/u[0])+i%u[0];this.texture[4*n]=a(255,2*this.lightmap[t+3*i]),this.texture[4*n+1]=a(255,2*this.lightmap[t+3*i+1]),this.texture[4*n+2]=a(255,2*this.lightmap[t+3*i+2]),this.texture[4*n+3]=255}}return o}findFreeSpace(t,e){let n=0,r=0,o=i.TEXTURE_SIZE;for(let e=0;e<this.block.length-t;++e){let i,a=0;for(i=0;i<t&&!(this.block[e+i]>=o);++i)this.block[e+i]>a&&(a=this.block[e+i]);i===t&&(n=e,r=o=a)}if(o+e>i.TEXTURE_SIZE)return null;for(let r=0;r<t;++r)this.block[n+r]=o+e;return{x:n,y:r}}}i.TEXTURE_SIZE=1024,r.BspLightmapParser=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bsp=class{constructor(t,e,n,r,i){this.skies=[],this.sprites={},this.name=t,this.entities=e,this.textures=n,this.models=r,this.lightmap=i}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t){this.view=new Uint8Array(t,0,t.byteLength)}getBits(t,e,n=!1){if(e>8*this.view.length-t)throw new Error("Bits out of bounds");let r=0;for(let n=0;n<e;){const i=e-n,o=7&t,s=this.view[t>>3],u=a(i,8-o);r|=(s>>o&(1<<u)-1)<<n,t+=u,n+=u}return n?(32!==e&&r&1<<e-1&&(r|=-1^(1<<e)-1),r):r>>>0}getInt8(t){return this.getBits(t,8,!0)}getUint8(t){return this.getBits(t,8,!1)}getInt16(t){return this.getBits(t,16,!0)}getUint16(t){return this.getBits(t,16,!1)}getInt32(t){return this.getBits(t,32,!0)}getUint32(t){return this.getBits(t,32,!1)}getFloat32(t){return n.scratch.setUint32(0,this.getUint32(t)),n.scratch.getFloat32(0)}getFloat64(t){return n.scratch.setUint32(0,this.getUint32(t)),n.scratch.setUint32(4,this.getUint32(t+32)),n.scratch.getFloat64(0)}}n.scratch=new DataView(new ArrayBuffer(8)),e.BitView=n,e.BitStream=class{constructor(t){this.view=new n(t),this.index=0}readBits(t,e=!1){const n=this.view.getBits(this.index,t,e);return this.index+=t,n}readInt8(){const t=this.view.getInt8(this.index);return this.index+=8,t}readUint8(){const t=this.view.getUint8(this.index);return this.index+=8,t}readInt16(){const t=this.view.getInt16(this.index);return this.index+=16,t}readUint16(){const t=this.view.getUint16(this.index);return this.index+=16,t}readInt32(){const t=this.view.getInt32(this.index);return this.index+=32,t}readUint32(){const t=this.view.getUint32(this.index);return this.index+=32,t}readFloat32(){const t=this.view.getFloat32(this.index);return this.index+=32,t}readFloat64(){const t=this.view.getFloat64(this.index);return this.index+=64,t}readString(t=0,e=!1){let n=0;const r=[];for(let e=!0;!t||t&&n<t;){const i=this.readUint8();if(0===i&&(e=!1,!t))break;e&&r.push(i),n++}const i=f.apply(null,r);if(!e)return i;try{return decodeURIComponent(i)}catch(e){return i}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(76);class i{constructor(t){this.index=-1,this.name="",this.buffer=t}static create(t){return new Promise((e,n)=>{r.SoundSystem.getContext().decodeAudioData(t,t=>{e(new i(t))},t=>{n(t)})})}}e.Sound=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(52);class i{constructor(t,e,n,r){this.name=t,this.width=e,this.height=n,this.data=r}static parse(t,e){let n=new r.Reader(t),o={idLength:n.ub(),colorMapType:n.ub(),imageType:n.ub(),colorMap:{firstEntryIndex:n.us(),length:n.us(),size:n.ub()},image:{xOrigin:n.us(),yOrigin:n.us(),width:n.us(),height:n.us(),depth:n.ub(),descriptor:n.ub()}};if(o.idLength&&n.arrx(o.idLength,r.ReaderDataType.UByte),o.colorMapType)throw new Error("Not implemented");let a,s=o.image.width,u=o.image.height,c=s*u;if(2===o.imageType){let t=c*o.image.depth/8;if(a=n.arrx(t,r.ReaderDataType.UByte),24===o.image.depth){let t=new Uint8Array(4*c);for(let e=0;e<u;++e)for(let n,r=0;r<s;++r)t[4*(n=(u-1-e)*s+r)]=a[3*(e*s+r)+2],t[4*n+1]=a[3*(e*s+r)+1],t[4*n+2]=a[3*(e*s+r)],t[4*n+3]=255;a=t}else if(32===o.image.depth){let t=new Uint8Array(4*c);for(let e=0;e<u;++e)for(let n,r=0;r<s;++r)t[4*(n=(u-1-e)*s+r)]=a[4*(e*s+r)+2],t[4*n+1]=a[4*(e*s+r)+1],t[4*n+2]=a[4*(e*s+r)],t[4*n+3]=255;a=t}}else if(10===o.imageType&&(a=new Uint8Array(4*c),24===o.image.depth))for(let t=0;t<u;++t)for(let e,r=0;r<s;)if(128&(e=n.ub())){e=1+(127&e);for(let i,o=n.ub(),c=n.ub(),f=n.ub();r<s&&e;)a[4*(i=(u-1-t)*s+r)]=f,a[4*i+1]=c,a[4*i+2]=o,a[4*i+3]=255,++r,--e}else for(e=1+(127&e);r<s&&e;){let i=(u-1-t)*s+r;a[4*i+2]=n.ub(),a[4*i+1]=n.ub(),a[4*i]=n.ub(),a[4*i+3]=255,++r,--e}return new i(e,o.image.width,o.image.height,a)}}e.Tga=i},function(t,e,n){"use strict";function r(t,e){switch(t.seek(e.offset),e.type){case 64:return function(t){const e=t.nstr(16),n=t.ui(),r=t.ui();t.skip(16);const a=n*r,s=t.arrx(a,i.ReaderDataType.UByte);t.skip(a/64*21),t.skip(2);const u=t.arrx(768,i.ReaderDataType.UByte);return{type:"decal",name:e,width:n,height:r,data:"{"===e[0]?o.paletteWithLastTransToRGBA(s,u):o.paletteToRGBA(s,u)}}(t);case 66:return function(t,e){return{type:"cache",name:e.name}}(0,e);case 67:return function(t){const e=t.nstr(16),n=t.ui(),r=t.ui();t.skip(16);const a=n*r,s=t.arrx(a,i.ReaderDataType.UByte);t.skip(a/64*21),t.skip(2);const u=t.arrx(768,i.ReaderDataType.UByte);return{type:"texture",name:e,width:n,height:r,data:"{"===e[0]?o.paletteWithLastTransToRGBA(s,u):o.paletteToRGBA(s,u)}}(t);case 70:return function(t,e){const n=t.ui(),r=t.ui(),a=t.ui(),s=t.ui(),u=[];for(let e=0;256>e;++e)u.push({offset:t.us(),width:t.us()});const c=t.arrx(n*r,i.ReaderDataType.UByte);t.skip(2);const f=t.arrx(768,i.ReaderDataType.UByte);return{type:"font",name:e.name,width:n,height:r,rowCount:a,rowHeight:s,glyphs:u,data:o.paletteToRGBA(c,f)}}(t,e);default:return function(t,e){return{type:"unknown",name:e.name,data:t.arrx(e.length,t.ub.bind(t))}}(t,e)}}Object.defineProperty(e,"__esModule",{value:!0});const i=n(52),o=n(69);class a{constructor(t){this.entries=t}static parse(t){const e=new i.Reader(t);if("WAD3"!==e.nstr(4))throw new Error("Invalid WAD file format");const n=e.ui(),o=e.ui();e.seek(o);const s=[];for(let t=0;t<n;++t){const t={offset:e.ui(),diskLength:e.ui(),length:e.ui(),type:e.b(),isCompressed:e.b(),name:""};e.skip(2),t.name=e.nstr(16),s.push(t)}const u=s.map(t=>r(e,t));return new a(u)}}e.Wad=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xhr=function(t,e){let n=e.method||"GET",r=e.isBinary,i=e.progressCallback;if(!t)throw new Error("Url parameter missing");return new Promise((e,o)=>{let s=new XMLHttpRequest;r&&(s.responseType="arraybuffer"),r&&i&&s.addEventListener("progress",t=>{if(t.lengthComputable)i(s,t.loaded/t.total);else{let e=s.getResponseHeader("content-length"),n=0;e&&(n=parseFloat(e));let r=s.getResponseHeader("content-encoding");if(n&&r&&-1<r.indexOf("gzip")){n*=4;let e=a(.99,t.loaded/n);i(s,e)}else i(s,0)}}),s.addEventListener("readystatechange",t=>{4!==t.target.readyState||(200===t.target.status?(i&&i(s,1),e(t.target.response)):o({status:t.target.status}))}),s.open(n,t,!0),s.send()})}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(){this.keys=new Uint8Array(256);for(let t=0;256>t;++t)this.keys[0]=0}}e.Keyboard=n,function(t){let e;!function(t){t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.CTRL=17]="CTRL",t[t.ALT=18]="ALT",t[t.SPACE=32]="SPACE"}(e=t.KEYS||(t.KEYS={}))}(n||(n={})),e.Keyboard=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(70),i=n(54),o=n(75),s=(t,e)=>{t.camera.position[0]=e.cameraPos[0],t.camera.position[1]=e.cameraPos[1],t.camera.position[2]=e.cameraPos[2],t.camera.rotation[0]=r.glMatrix.toRadian(e.cameraRot[0]),t.camera.rotation[1]=r.glMatrix.toRadian(e.cameraRot[1]),t.camera.rotation[2]=r.glMatrix.toRadian(e.cameraRot[2])};e.ReplayPlayer=class{constructor(t){this.currentMap=0,this.currentChunk=0,this.currentTime=0,this.currentTick=0,this.isPlaying=!1,this.isPaused=!1,this.speed=1,this.reset(),this.game=t,this.state=new o.ReplayState,this.replay=null,this.events=new i.EventEmitter}reset(){if(this.currentMap=0,this.currentChunk=0,this.currentTime=0,this.currentTick=0,this.isPlaying=!1,this.isPaused=!1,this.speed=1,this.replay){let t=this.replay.maps[0].chunks[0];t.reader.seek(0),this.state=t.state.clone()}}on(t,e){return this.events.on(t,e)}off(t,e){this.events.removeListener(t,e)}changeReplay(t){this.replay=t,this.reset()}play(){this.isPlaying?this.isPaused&&(this.isPaused=!1):this.isPlaying=!0,this.events.emit("play")}pause(){this.isPlaying&&(this.isPaused=!0),this.events.emit("pause")}stop(){this.reset(),this.events.emit("stop")}speedUp(){this.speed=a(2*this.speed,4)}speedDown(){this.speed=l(this.speed/2,.25)}seek(t){let e=l(0,a(this.replay.length,t)),n=this.replay.maps;for(let t,r=0;r<n.length;++r){t=n[r].chunks;for(let n=0;n<t.length;++n){let i=t[n],a=i.startTime,u=a+i.timeLength;if(e>=a&&e<u){this.currentMap=r,this.currentChunk=n,this.currentTime=e,this.state=i.state.clone();let t=this.replay.deltaDecoders,a=this.replay.customMessages,u=i.reader;for(u.seek(0);;){let n=u.tell(),r=o.Replay.readFrame(u,t,a);if(!(r.time<=e)){u.seek(n);break}this.state.feedFrame(r),this.currentTick=r.tick}return void s(this.game,this.state)}}}}seekByPercent(t){t=l(0,a(t,100))/100,t*=this.replay.length,this.seek(t)}update(t){if(!this.isPlaying||this.isPaused)return;let e=this.replay.deltaDecoders,n=this.replay.customMessages,r=this.replay.maps[this.currentMap],i=r.chunks[this.currentChunk],a=i.reader,u=this.currentTime+t*this.speed,c=!1;for(;;){let t=a.tell();if(t>=i.data.length){if(this.currentChunk!==r.chunks.length-1)this.currentChunk++,i=r.chunks[this.currentChunk];else{if(this.currentMap===this.replay.maps.length-1){c=!0;break}this.currentChunk=0,this.currentMap++,i=(r=this.replay.maps[this.currentMap]).chunks[this.currentChunk]}(a=i.reader).seek(0),t=0;continue}let s=this.game.sounds,f=o.Replay.readFrame(a,e,n);if(2>f.type)for(let t,e=0;e<f.data.length;++e)if(6===(t=f.data[e]).type){let e=t.data,n=s.find(t=>t.index===e.soundIndex);if(n&&"common/null.wav"!==n.name){let t=e.channel,r=e.volume;this.game.soundSystem.play(n,t,r)}}else if(29===t.type){let e=t.data,n=s.find(t=>t.index===e.soundIndex);n&&n.name}else 9===t.type&&t.data.commands.forEach(t=>{switch(t.func){case"speak":case"spk":case"play":{let e=t.params[0]+".wav",n=s.find(t=>t.name===e);if(!n)return;this.game.soundSystem.play(n,1,.7);break}case"playvol":{let e,n=t.params[0]+".wav";e=isNaN(t.params[1])?1:parseFloat(t.params[1]);let r=s.find(t=>t.name===n);if(!r)return;this.game.soundSystem.play(r,1,e);break}}});else if(8===f.type){let t=f.sound.sample,e=s.find(e=>e.name===t);if(e&&"common/null.wav"!==e.name){let t=f.sound.channel,n=f.sound.volume;this.game.soundSystem.play(e,t,n)}}if(!(f.time<=u)){a.seek(t);break}this.state.feedFrame(f),this.currentTick=f.tick}s(this.game,this.state),this.currentTime=u,c&&this.stop()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(70);class i{constructor(t){this.projectionMatrix=r.mat4.create(),this.fov=r.glMatrix.toRadian(60),this.near=1,this.far=8192,this.viewMatrix=r.mat4.create(),this.position=r.vec3.create(),this.rotation=r.vec3.create(),this.aspect=t,this.updateProjectionMatrix()}static init(t){return new i(t)}updateProjectionMatrix(){r.mat4.perspective(this.projectionMatrix,this.fov,this.aspect,this.near,this.far)}updateViewMatrix(){r.mat4.identity(this.viewMatrix),r.mat4.rotateX(this.viewMatrix,this.viewMatrix,this.rotation[0]-c/2),r.mat4.rotateZ(this.viewMatrix,this.viewMatrix,c/2-this.rotation[1]),r.mat4.translate(this.viewMatrix,this.viewMatrix,[-this.position[0],-this.position[1],-this.position[2]])}}e.Camera=i},function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.VERTEX=0]="VERTEX",t[t.FRAGMENT=1]="FRAGMENT"}(n=e.ShaderType||(e.ShaderType={}));class r{static init(t){const e=t.getContext("webgl",{alpha:!1});return e?new r(e):(console.log("contextn't"),null)}constructor(t){this.gl=t}createProgram(t){const e=this.gl;var r=e.createProgram();if(!r)return console.error("gl.createProgramn't"),null;const i=this.createShader({source:t.vertexShaderSrc,type:n.VERTEX});if(!i)return console.error("Failed to compile vertex shader"),null;const o=this.createShader({source:t.fragmentShaderSrc,type:n.FRAGMENT});if(!o)return console.error("Failed to compile fragment shader"),null;if(e.attachShader(r,i),e.attachShader(r,o),e.linkProgram(r),e.validateProgram(r),!e.getProgramParameter(r,e.LINK_STATUS)){e.deleteProgram(r),e.deleteShader(i),e.deleteShader(o);const t=e.getProgramInfoLog(r);return console.debug(`Could not initialize shader: ${t}`),null}if(!e.getProgramParameter(r,e.VALIDATE_STATUS)){e.deleteProgram(r),e.deleteShader(i),e.deleteShader(o);const t=e.getProgramInfoLog(r);return console.debug(`Could not initialize shader: ${t}`),null}e.useProgram(r);const a={};for(let n=0;n<t.attributeNames.length;++n){const i=t.attributeNames[n],o=e.getAttribLocation(r,i);if(-1===o)return console.error(`gl.getAttribLocation't named "${i}"`),e.deleteProgram(r),null;a[i]=o}const s={};for(let n=0;n<t.uniformNames.length;++n){const i=t.uniformNames[n],o=e.getUniformLocation(r,i);if(null===o)return console.error(`gl.getUniformLocation't named "${i}"`),e.deleteProgram(r),null;s[i]=o}return{handle:r,attributes:a,uniforms:s}}createShader(t){const e=this.gl,r=t.type===n.VERTEX?e.createShader(e.VERTEX_SHADER):e.createShader(e.FRAGMENT_SHADER);return r?(e.shaderSource(r,t.source),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.debug(e.getShaderInfoLog(r)),e.deleteShader(r),null)):(console.error("Failed to create shader program"),null)}getAnisotropyExtension(){return this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")}getMaxAnisotropy(t){return this.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}}e.Context=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t){this.draw=()=>{const t=this.context.gl;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},this.context=t.context}static init(t){const e=t.gl;return e.clearColor(0,0,0,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.CULL_FACE),e.cullFace(e.FRONT),new n({context:t})}}e.Renderer=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(116);class i{constructor(t){this.isReady=!1,this.context=t.context,this.shader=t.shader}static init(t){const e=r.SkyShader.init(t);return e?new i({context:t,shader:e}):(console.error("skyscenen't"),null)}changeMap(t){if(6!==t.skies.length)return void(this.isReady=!1);const e=this.context.gl,n=e.createBuffer(),r=e.createBuffer(),i=e.createTexture();if(!n||!r||!i)throw new Error("shouldnt happen");const o=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),a=new Float32Array([-1,-1,1,.499,.001,1,-1,1,.499,.249,1,1,1,.001,.249,-1,1,1,.001,.001,-1,-1,-1,.499,.749,-1,1,-1,.001,.749,1,1,-1,.001,.501,1,-1,-1,.499,.501,-1,1,-1,.501,.749,-1,1,1,.501,.501,1,1,1,.999,.501,1,1,-1,.999,.749,-1,-1,-1,.999,.249,1,-1,-1,.501,.249,1,-1,1,.501,.001,-1,-1,1,.999,.001,1,-1,-1,.499,.499,1,1,-1,.001,.499,1,1,1,.001,.251,1,-1,1,.499,.251,-1,-1,-1,.501,.499,-1,-1,1,.501,.251,-1,1,1,.999,.251,-1,1,-1,.999,.499].map((t,e)=>3>e%5?4096*t:t));e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),e.enableVertexAttribArray(0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r),e.bufferData(e.ELEMENT_ARRAY_BUFFER,o,e.STATIC_DRAW);const s=document.createElement("canvas");s.width=512,s.height=1024;const u=s.getContext("2d");if(!u)throw new Error("sky ctx fail");const c={up:[0,0],rt:[0,256],dn:[0,512],ft:[256,0],lf:[256,256],bk:[256,512]};t.skies.forEach(t=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("Runtime error.");e.width=t.width,e.height=t.height;const r=n.getImageData(0,0,e.width,e.height);for(let e=0;e<t.data.length;++e)r.data[e]=t.data[e];n.putImageData(r,0,0);const i=t.name.slice(-2),o=c[i]?c[i]:[];if(!u)throw new Error("Runtime error.");u.drawImage(e,o[0],o[1])});const f=u.getImageData(0,0,512,1024).data;e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,512,1024,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(f)),e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);const l=this.context.getAnisotropyExtension();l&&e.texParameteri(e.TEXTURE_2D,l.TEXTURE_MAX_ANISOTROPY_EXT,this.context.getMaxAnisotropy(l)),this.vertexBuffer=n,this.indexBuffer=r,this.texture=i,this.isReady=!0}draw(t){if(this.isReady){const e=this.context.gl,n=this.shader;n.useProgram(e),e.bindTexture(e.TEXTURE_2D,this.texture),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.enableVertexAttribs(e),n.setVertexAttribPointers(e),n.setDiffuse(e,0);const r=t.position[0],i=t.position[1],o=t.position[2];t.position[0]=0,t.position[1]=0,t.position[2]=0,t.updateViewMatrix(),t.position[0]=r,t.position[1]=i,t.position[2]=o,n.setViewMatrix(e,t.viewMatrix),n.setProjectionMatrix(e,t.projectionMatrix),e.drawElements(e.TRIANGLES,36,e.UNSIGNED_BYTE,0),e.clear(e.DEPTH_BUFFER_BIT)}}}e.SkyScene=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n="#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D diffuse;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  vec4 diffuseColor = texture2D(diffuse, vTexCoord);\n  gl_FragColor = vec4(diffuseColor.rgb, 1.0);\n}",r="#ifdef GL_ES\nprecision highp float;\n#endif\n\nattribute vec3 position;\nattribute vec2 texCoord;\n\nvarying vec2 vTexCoord;\n\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n  vTexCoord = texCoord;\n  gl_Position = projectionMatrix * viewMatrix * vec4(position, 1);\n}";class i{static init(t){const e=t.createProgram({vertexShaderSrc:r,fragmentShaderSrc:n,attributeNames:["position","texCoord"],uniformNames:["viewMatrix","projectionMatrix","diffuse"]});return e?new i(e):(console.error("Failed to create sky shader program"),null)}constructor(t){this.program=t.handle,this.aPosition=t.attributes.position,this.aTexCoord=t.attributes.texCoord,this.uViewMx=t.uniforms.viewMatrix,this.uProjectionMx=t.uniforms.projectionMatrix,this.uDiffuse=t.uniforms.diffuse}useProgram(t){t.useProgram(this.program)}setViewMatrix(t,e){t.uniformMatrix4fv(this.uViewMx,!1,e)}setProjectionMatrix(t,e){t.uniformMatrix4fv(this.uProjectionMx,!1,e)}setDiffuse(t,e){t.uniform1i(this.uDiffuse,e)}enableVertexAttribs(t){t.enableVertexAttribArray(this.aPosition),t.enableVertexAttribArray(this.aTexCoord)}setVertexAttribPointers(t){t.vertexAttribPointer(this.aPosition,3,t.FLOAT,!1,20,0),t.vertexAttribPointer(this.aTexCoord,2,t.FLOAT,!1,20,12)}}e.SkyShader=i},function(t,e,n){"use strict";var o=Math.atan2;Object.defineProperty(e,"__esModule",{value:!0});const a=n(70),s=n(80),u=n(118),f=n(119),l=n(77),d=n(120);class h{constructor(t){this.modelMatrix=a.mat4.create(),this.sceneInfo={length:0,data:new Float32Array(0),models:[]},this.textures=[],this.sprites={},this.lightmap=null,this.buffer=t.buffer,this.context=t.context,this.shader=t.shader}static init(t){const e=u.MainShader.init(t);if(!e)return console.error("shadern't"),null;e.useProgram(t.gl);const n=t.gl.createBuffer();return n?new h({buffer:n,context:t,shader:e}):(console.error("buffern't"),null)}changeMap(t){this.fillBuffer(t),this.loadTextures(t),this.loadSpriteTextures(t),this.loadLightmap(t),this.bsp=t}fillBuffer(t){const e=this.context.gl,n=t.models,r=["aaatrigger","clip","null","hint","nodraw","invisible","skip","trigger","sky","fog"];let i=0;for(let e=0;e<n.length;++e){const o=n[e];for(let e=0;e<o.faces.length;++e){const n=t.textures[o.faces[e].textureIndex];-1<r.indexOf(n.name)||(i+=o.faces[e].buffer.length)}}const o={length:i+=42,data:new Float32Array(i),models:[]};let a=0;for(let e=0;e<t.models.length;++e){const n=t.models[e],i={origin:n.origin,offset:a,length:0,isTransparent:!1,faces:[]};for(let e=0;e<n.faces.length;++e){const s=t.textures[n.faces[e].textureIndex];if(-1<r.indexOf(s.name))continue;const u={offset:a,length:0,textureIndex:-1};for(let t=0;t<n.faces[e].buffer.length;++t)o.data[a++]=n.faces[e].buffer[t];i.isTransparent||"{"!==t.textures[n.faces[e].textureIndex].name[0]||(i.isTransparent=!0),u.textureIndex=n.faces[e].textureIndex,u.length=a-u.offset,i.faces.push(u)}i.length=a-i.offset,o.models.push(i)}o.models.push({origin:[0,0,0],offset:a,length:4,isTransparent:!1,faces:[{offset:a,length:4,textureIndex:0}]}),o.data[a++]=-.5,o.data[a++]=0,o.data[a++]=-.5,o.data[a++]=1,o.data[a++]=1,o.data[a++]=0,o.data[a++]=0,o.data[a++]=.5,o.data[a++]=0,o.data[a++]=.5,o.data[a++]=0,o.data[a++]=0,o.data[a++]=0,o.data[a++]=0,o.data[a++]=-.5,o.data[a++]=0,o.data[a++]=.5,o.data[a++]=1,o.data[a++]=0,o.data[a++]=0,o.data[a++]=0,o.data[a++]=-.5,o.data[a++]=0,o.data[a++]=-.5,o.data[a++]=1,o.data[a++]=1,o.data[a++]=0,o.data[a++]=0,o.data[a++]=.5,o.data[a++]=0,o.data[a++]=-.5,o.data[a++]=0,o.data[a++]=1,o.data[a++]=0,o.data[a++]=0,o.data[a++]=.5,o.data[a++]=0,o.data[a++]=.5,o.data[a++]=0,o.data[a++]=0,o.data[a++]=0,o.data[a++]=0,a=0;const u=s.cloneDeep(o);for(let t=0;t<u.models.length;++t){const e=u.models[t];e.faces.sort((t,e)=>t.textureIndex-e.textureIndex);for(let t=0;t<e.faces.length;++t){const n=e.faces[t],r=a;for(let t=0;t<n.length;++t)u.data[a]=o.data[n.offset+t],a+=1;n.offset=r}const n=[];let r=-1;for(let t=0;t<e.faces.length;++t){const i=e.faces[t];i.textureIndex===r?n[n.length-1].length+=i.length:(n.push({offset:i.offset,length:i.length,textureIndex:i.textureIndex}),r=i.textureIndex)}e.faces=n}this.sceneInfo=u,e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.sceneInfo.data,e.STATIC_DRAW)}loadTextures(t){const e=this.context.gl;for(let n=0;n<t.textures.length;++n){const r=e.createTexture();if(!r)throw new Error("fatal error");const i=t.textures[n];if(!d.isPowerOfTwo(i.width)||!d.isPowerOfTwo(i.height)){const t=i.width,e=i.height,n=d.nextPowerOfTwo(i.width),r=d.nextPowerOfTwo(i.height);i.data=d.resizeTexture(i.data,t,e,n,r),i.width=n,i.height=r}e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,i.width,i.height,0,e.RGBA,e.UNSIGNED_BYTE,i.data),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.generateMipmap(e.TEXTURE_2D);const o=this.context.getAnisotropyExtension();o&&e.texParameteri(e.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,this.context.getMaxAnisotropy(o)),this.textures.push({name:i.name,width:i.width,height:i.height,data:i.data,handle:r})}}loadSpriteTextures(t){const e=this.context.gl;for(const[n,r]of Object.entries(t.sprites)){const t=e.createTexture();if(!t)throw new Error("fatal error");const i=r.frames[0];if(!d.isPowerOfTwo(i.width)||!d.isPowerOfTwo(i.height)){const t=i.width,e=i.height,n=d.nextPowerOfTwo(i.width),r=d.nextPowerOfTwo(i.height);i.data=d.resizeTexture(i.data,t,e,n,r),i.width=n,i.height=r}e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,i.width,i.height,0,e.RGBA,e.UNSIGNED_BYTE,i.data),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.generateMipmap(e.TEXTURE_2D);const o=this.context.getAnisotropyExtension();o&&e.texParameteri(e.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,this.context.getMaxAnisotropy(o)),this.textures.push({name:n,width:i.width,height:i.height,data:i.data,handle:t}),this.sprites[n]=r}}loadLightmap(t){const e=this.context.gl,n=e.createTexture();if(!n)throw new Error("fatal error");e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.lightmap.width,t.lightmap.height,0,e.RGBA,e.UNSIGNED_BYTE,t.lightmap.data),e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),this.lightmap={data:t.lightmap.data,handle:n}}draw(t,e){if(this.bsp&&this.lightmap){const n=this.context.gl,r=this.shader;r.useProgram(n),t.updateProjectionMatrix(),t.updateViewMatrix(),r.setViewMatrix(n,t.viewMatrix),r.setProjectionMatrix(n,t.projectionMatrix),n.bindBuffer(n.ARRAY_BUFFER,this.buffer),r.enableVertexAttribs(n),r.setVertexAttribPointers(n),r.setDiffuse(n,0),r.setLightmap(n,1),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,this.lightmap.handle),n.activeTexture(n.TEXTURE0);const i=[],o=[];for(let t=1;t<e.length;++t){const n=e[t];if(n.model)if(n.rendermode&&n.rendermode!=f.RenderMode.Normal&&n.rendermode!=f.RenderMode.Solid)n.rendermode,f.RenderMode.Additive,o.push(n);else{if("*"===n.model[0]){if(this.sceneInfo.models[parseInt(n.model.substr(1))].isTransparent){o.push(n);continue}}else if(-1<n.model.indexOf(".spr")){o.push(n);continue}i.push(n)}}r.setOpacity(n,1),this.renderWorldSpawn(),this.renderOpaqueEntities(t,i),o.length&&(n.depthMask(!1),this.renderTransparentEntities(o,t),n.depthMask(!0))}}renderWorldSpawn(){const t=this.sceneInfo.models[0],e=this.context.gl;a.mat4.identity(this.modelMatrix),this.shader.setModelMatrix(e,this.modelMatrix);for(let n=0;n<t.faces.length;++n){const r=t.faces[n];e.bindTexture(e.TEXTURE_2D,this.textures[r.textureIndex].handle),e.drawArrays(e.TRIANGLES,r.offset/7,r.length/7)}}renderOpaqueEntities(t,e){const n=this.context.gl,s=this.shader,u=this.modelMatrix;for(let d=0;d<e.length;++d){const h=e[d],p=parseInt(h.model.substr(1)),g=this.sceneInfo.models[p];if(g){const t=h.angles||[0,0,0],e=h.origin?a.vec3.fromValues(h.origin[0],h.origin[1],h.origin[2]):a.vec3.create();a.vec3.add(e,e,g.origin),a.mat4.identity(u),a.mat4.translate(u,u,e),a.mat4.rotateZ(u,u,t[1]*c/180),a.mat4.rotateX(this.modelMatrix,this.modelMatrix,t[2]*c/180),s.setModelMatrix(n,this.modelMatrix);for(let t=0;t<g.faces.length;++t){const e=g.faces[t];n.bindTexture(n.TEXTURE_2D,this.textures[e.textureIndex].handle),n.drawArrays(n.TRIANGLES,e.offset/7,e.length/7)}}else if(-1<h.model.indexOf(".spr")){const e=this.textures.find(t=>t.name===h.model),d=this.sprites[h.model];if(e&&d){const p=h.origin?a.vec3.fromValues(h.origin[0],h.origin[1],h.origin[2]):a.vec3.create(),g=a.vec3.fromValues(e.width,1,e.height),m=h.angles?a.vec3.fromValues(h.angles[0],h.angles[2],h.angles[1]):a.vec3.create();switch(a.vec3.scale(g,g,h.scale||1),a.mat4.identity(u),a.mat4.translate(u,u,p),d.header.type){case l.SpriteType.VP_PARALLEL_UPRIGHT:case l.SpriteType.FACING_UPRIGHT:a.mat4.rotateZ(u,u,t.rotation[1]+c/2);break;case l.SpriteType.VP_PARALLEL:a.mat4.rotateZ(u,u,o(p[1]-t.position[1],p[0]-t.position[0])+c/2),a.mat4.rotateX(u,u,o(t.position[2]-p[2],r(i(t.position[0]-p[0],2)+i(t.position[1]-p[1],2))));break;case l.SpriteType.ORIENTED:a.mat4.rotateY(u,u,m[0]*c/180+c),a.mat4.rotateZ(u,u,m[1]*c/180+c),a.mat4.rotateX(u,u,m[2]*c/180-c/2);break;case l.SpriteType.VP_PARALLEL_ORIENTED:a.mat4.rotateY(u,u,m[0]*c/180+c),a.mat4.rotateZ(u,u,m[1]*c/180+c);break;default:throw new Error("Invalid sprite type")}switch(a.mat4.scale(u,u,g),s.setModelMatrix(n,u),s.setOpacity(n,(h.renderamt||255)/255),h.rendermode||f.RenderMode.Normal){case f.RenderMode.Normal:s.setOpacity(n,1),n.bindTexture(n.TEXTURE_2D,e.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Color:case f.RenderMode.Texture:s.setOpacity(n,(h.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,e.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Glow:n.blendFunc(n.SRC_ALPHA,n.DST_ALPHA),s.setOpacity(n,(h.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,e.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA);break;case f.RenderMode.Solid:s.setOpacity(n,(h.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,e.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Additive:n.blendFunc(n.SRC_ALPHA,n.DST_ALPHA),s.setOpacity(n,(h.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,e.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA)}}}}}renderTransparentEntities(t,e){const n=this.context.gl,s=this.shader,u=this.modelMatrix,d=t.map((t,n)=>({index:n,distance:a.vec3.dist(e.position,t.origin||[0,0,0])})).sort((t,e)=>t.distance-e.distance);for(let h=0;h<d.length;++h){const p=t[d[h].index],g=parseInt(p.model.substr(1)),m=this.sceneInfo.models[g];if(m){const t=p.angles||[0,0,0],e=p.origin||[0,0,0];switch(e[0]+=m.origin[0],e[1]+=m.origin[1],e[2]+=m.origin[2],a.mat4.identity(u),a.mat4.translate(u,u,e),a.mat4.rotateZ(u,u,t[1]*c/180),a.mat4.rotateX(this.modelMatrix,this.modelMatrix,t[2]*c/180),s.setModelMatrix(n,this.modelMatrix),p.rendermode||f.RenderMode.Normal){case f.RenderMode.Normal:s.setOpacity(n,1);for(let t=0;t<m.faces.length;++t){const e=m.faces[t];n.bindTexture(n.TEXTURE_2D,this.textures[e.textureIndex].handle),n.drawArrays(n.TRIANGLES,e.offset/7,e.length/7)}break;case f.RenderMode.Color:case f.RenderMode.Texture:case f.RenderMode.Glow:case f.RenderMode.Solid:s.setOpacity(n,(p.renderamt||255)/255);for(let t=0;t<m.faces.length;++t){const e=m.faces[t];n.bindTexture(n.TEXTURE_2D,this.textures[e.textureIndex].handle),n.drawArrays(n.TRIANGLES,e.offset/7,e.length/7)}break;case f.RenderMode.Additive:n.blendFunc(n.SRC_ALPHA,n.DST_ALPHA),s.setOpacity(n,(p.renderamt||255)/255);for(let t=0;t<m.faces.length;++t){const e=m.faces[t];n.bindTexture(n.TEXTURE_2D,this.textures[e.textureIndex].handle),n.drawArrays(n.TRIANGLES,e.offset/7,e.length/7)}n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA)}}else if(-1<p.model.indexOf(".spr")){const t=this.textures.find(t=>t.name===p.model),d=this.sprites[p.model];if(t&&d){const h=p.origin?a.vec3.fromValues(p.origin[0],p.origin[1],p.origin[2]):a.vec3.create(),g=a.vec3.fromValues(t.width,1,t.height),m=p.angles?a.vec3.fromValues(p.angles[0],p.angles[2],p.angles[1]):a.vec3.create();switch(a.vec3.scale(g,g,p.scale||1),a.mat4.identity(u),a.mat4.translate(u,u,h),d.header.type){case l.SpriteType.VP_PARALLEL_UPRIGHT:case l.SpriteType.FACING_UPRIGHT:a.mat4.rotateZ(u,u,e.rotation[1]+c/2);break;case l.SpriteType.VP_PARALLEL:a.mat4.rotateZ(u,u,o(h[1]-e.position[1],h[0]-e.position[0])+c/2),a.mat4.rotateX(u,u,o(e.position[2]-h[2],r(i(e.position[0]-h[0],2)+i(e.position[1]-h[1],2))));break;case l.SpriteType.ORIENTED:a.mat4.rotateY(u,u,m[0]*c/180+c),a.mat4.rotateZ(u,u,m[1]*c/180+c),a.mat4.rotateX(u,u,m[2]*c/180-c/2);break;case l.SpriteType.VP_PARALLEL_ORIENTED:a.mat4.rotateY(u,u,m[0]*c/180+c),a.mat4.rotateZ(u,u,m[1]*c/180+c);break;default:throw new Error("Invalid sprite type")}switch(a.mat4.scale(u,u,g),s.setModelMatrix(n,u),s.setOpacity(n,(p.renderamt||255)/255),p.rendermode||f.RenderMode.Normal){case f.RenderMode.Normal:s.setOpacity(n,1),n.bindTexture(n.TEXTURE_2D,t.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Color:case f.RenderMode.Texture:s.setOpacity(n,(p.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,t.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Glow:n.blendFunc(n.SRC_ALPHA,n.DST_ALPHA),s.setOpacity(n,(p.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,t.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA);break;case f.RenderMode.Solid:s.setOpacity(n,(p.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,t.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6);break;case f.RenderMode.Additive:n.blendFunc(n.SRC_ALPHA,n.DST_ALPHA),s.setOpacity(n,(p.renderamt||255)/255),n.bindTexture(n.TEXTURE_2D,t.handle),n.drawArrays(n.TRIANGLES,this.sceneInfo.models[this.sceneInfo.models.length-1].offset/7,6),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA)}}}}}}e.WorldScene=h},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n="#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D diffuse;\nuniform sampler2D lightmap;\nuniform float opacity;\n\nvarying vec2 vTexCoord;\nvarying vec2 vLightmapCoord;\n\nvoid main(void) {\n  vec4 diffuseColor = texture2D(diffuse, vTexCoord);\n  vec4 lightColor = texture2D(lightmap, vLightmapCoord);\n\n  gl_FragColor = vec4(diffuseColor.rgb * lightColor.rgb, diffuseColor.a * opacity);\n}",r="#ifdef GL_ES\nprecision highp float;\n#endif\n\nattribute vec3 position;\nattribute vec2 texCoord;\nattribute vec2 texCoord2;\n\nvarying vec2 vTexCoord;\nvarying vec2 vLightmapCoord;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n  vTexCoord = texCoord;\n  vLightmapCoord = texCoord2;\n\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1);\n}";class i{static init(t){const e=t.createProgram({vertexShaderSrc:r,fragmentShaderSrc:n,attributeNames:["position","texCoord","texCoord2"],uniformNames:["modelMatrix","viewMatrix","projectionMatrix","diffuse","lightmap","opacity"]});return e?new i(e):(console.log("programn't"),null)}constructor(t){this.program=t.handle,this.aPosition=t.attributes.position,this.aTexCoord=t.attributes.texCoord,this.aTexCoord2=t.attributes.texCoord2,this.uModelMx=t.uniforms.modelMatrix,this.uViewMx=t.uniforms.viewMatrix,this.uProjectionMx=t.uniforms.projectionMatrix,this.uDiffuse=t.uniforms.diffuse,this.uLightmap=t.uniforms.lightmap,this.uOpacity=t.uniforms.opacity}useProgram(t){t.useProgram(this.program)}setModelMatrix(t,e){t.uniformMatrix4fv(this.uModelMx,!1,e)}setViewMatrix(t,e){t.uniformMatrix4fv(this.uViewMx,!1,e)}setProjectionMatrix(t,e){t.uniformMatrix4fv(this.uProjectionMx,!1,e)}setDiffuse(t,e){t.uniform1i(this.uDiffuse,e)}setLightmap(t,e){t.uniform1i(this.uLightmap,e)}setOpacity(t,e){t.uniform1f(this.uOpacity,e)}enableVertexAttribs(t){t.enableVertexAttribArray(this.aPosition),t.enableVertexAttribArray(this.aTexCoord),t.enableVertexAttribArray(this.aTexCoord2)}setVertexAttribPointers(t){t.vertexAttribPointer(this.aPosition,3,t.FLOAT,!1,28,0),t.vertexAttribPointer(this.aTexCoord,2,t.FLOAT,!1,28,12),t.vertexAttribPointer(this.aTexCoord2,2,t.FLOAT,!1,28,20)}}e.MainShader=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.No=0]="No",t[t.Yes=1]="Yes"}(e.WorldSpawnStartDark||(e.WorldSpawnStartDark={})),function(t){t[t.No=0]="No",t[t.Yes=1]="Yes"}(e.WorldSpawnGameTitle||(e.WorldSpawnGameTitle={})),function(t){t[t.No=0]="No",t[t.Yes=1]="Yes"}(e.WorldSpawnNewUnit||(e.WorldSpawnNewUnit={})),function(t){t[t.FewestPlayers=0]="FewestPlayers",t[t.FirstTeam=1]="FirstTeam"}(e.WorldSpawnDefaultTeam||(e.WorldSpawnDefaultTeam={})),function(t){t[t.No=0]="No",t[t.Walk=1]="Walk",t[t.Run=2]="Run",t[t.Instantaneous=4]="Instantaneous",t[t.No_TurnToFace=5]="No_TurnToFace"}(e.AiScriptedSequenceMoveTo||(e.AiScriptedSequenceMoveTo={})),function(t){t[t.DefaultAI=0]="DefaultAI",t[t.Ambush=1]="Ambush"}(e.AiScriptedSequenceFinishSchedule||(e.AiScriptedSequenceFinishSchedule={})),function(t){t[t.Repeatable=4]="Repeatable",t[t.LeaveCorpse=8]="LeaveCorpse"}(e.AiScriptedSequenceSpawnflags||(e.AiScriptedSequenceSpawnflags={})),function(t){t[t.None=0]="None",t[t.HugeMachine=1]="HugeMachine",t[t.BigMachine=2]="BigMachine",t[t.Machine=3]="Machine",t[t.SlowFadeIn=4]="SlowFadeIn",t[t.FadeIn=5]="FadeIn",t[t.QuickFadeIn=6]="QuickFadeIn",t[t.SlowPulse=7]="SlowPulse",t[t.Pulse=8]="Pulse",t[t.QuickPulse=9]="QuickPulse",t[t.SlowOscillator=10]="SlowOscillator",t[t.Oscillator=11]="Oscillator",t[t.QuickOscillator=12]="QuickOscillator",t[t.GrungePitch=13]="GrungePitch",t[t.VeryLowPitch=14]="VeryLowPitch",t[t.LowPitch=15]="LowPitch",t[t.HighPitch=16]="HighPitch",t[t.VeryHighPitch=17]="VeryHighPitch",t[t.ScreamingPitch=18]="ScreamingPitch",t[t.OscillateSpinUpDown=19]="OscillateSpinUpDown",t[t.PulseSpinUpDown=20]="PulseSpinUpDown",t[t.RandomPitch=21]="RandomPitch",t[t.RandomPitchFast=22]="RandomPitchFast",t[t.IncrementalSpinup=23]="IncrementalSpinup",t[t.Alien=24]="Alien",t[t.Bizzare=25]="Bizzare",t[t.PlanetX=26]="PlanetX",t[t.Haunted=27]="Haunted"}(e.AmbientGenericPreset||(e.AmbientGenericPreset={})),function(t){t[t.PlayEverywhere=1]="PlayEverywhere",t[t.SmallRadius=2]="SmallRadius",t[t.MediumRadius=4]="MediumRadius",t[t.LargeRadius=8]="LargeRadius",t[t.StartSilent=16]="StartSilent",t[t.NotToggled=32]="NotToggled"}(e.AmbientGenericSpawnFlags||(e.AmbientGenericSpawnFlags={})),function(t){t[t.UseActivates=1]="UseActivates",t[t.StartOn=2]="StartOn"}(e.ButtonTargetSpawnFlags||(e.ButtonTargetSpawnFlags={})),function(t){t[t.NoTrigger=0]="NoTrigger",t[t.SeePlayerMadAtPlayer=1]="SeePlayerMadAtPlayer",t[t.TakeDamage=2]="TakeDamage",t[t.HalfHealthRemaining=3]="HalfHealthRemaining",t[t.Death=4]="Death",t[t.HearWorld=7]="HearWorld",t[t.HearPlayer=8]="HearPlayer",t[t.HearCombat=9]="HearCombat",t[t.SeePlayerUnconditional=10]="SeePlayerUnconditional",t[t.SeePlayerNotInCombat=11]="SeePlayerNotInCombat"}(e.CyclerWeaponTriggerCondition||(e.CyclerWeaponTriggerCondition={})),function(t){t[t.StartOn=1]="StartOn",t[t.Toggle=2]="Toggle",t[t.RandomStrike=4]="RandomStrike",t[t.Ring=8]="Ring",t[t.StartSparks=16]="StartSparks",t[t.EndSparks=32]="EndSparks",t[t.DecalEnd=64]="DecalEnd",t[t.FadeStart=128]="FadeStart",t[t.FadeEnd=256]="FadeEnd"}(e.EnvBeamSpawnFlags||(e.EnvBeamSpawnFlags={})),function(t){t[t.Normal=0]="Normal",t[t.EmbeddedFix=1]="EmbeddedFix",t[t.OpaqueBlockLight=2]="OpaqueBlockLight",t[t.OpaqueEmbeddedFix=3]="OpaqueEmbeddedFix",t[t.OpaqueConcaveFix=6]="OpaqueConcaveFix"}(e.ZHLTLightFlags||(e.ZHLTLightFlags={})),function(t){t[t.Normal=0]="Normal",t[t.SlowPulse=1]="SlowPulse",t[t.FastPulse=2]="FastPulse",t[t.SlowWidePulse=3]="SlowWidePulse",t[t.FastWidePulse=4]="FastWidePulse",t[t.SlowFadeAway=5]="SlowFadeAway",t[t.FastFadeAway=6]="FastFadeAway",t[t.SlowBecomeSolid=7]="SlowBecomeSolid",t[t.FastBecomeSolid=8]="FastBecomeSolid",t[t.SlowStrobe=9]="SlowStrobe",t[t.FastStrobe=10]="FastStrobe",t[t.FasterStrobe=11]="FasterStrobe",t[t.SlowFlicker=12]="SlowFlicker",t[t.FastFlicker=13]="FastFlicker",t[t.ConstantGlow=14]="ConstantGlow",t[t.DistortModels=15]="DistortModels",t[t.HologramDistort=16]="HologramDistort"}(e.RenderEffect||(e.RenderEffect={})),function(t){t[t.Normal=0]="Normal",t[t.Color=1]="Color",t[t.Texture=2]="Texture",t[t.Glow=3]="Glow",t[t.Solid=4]="Solid",t[t.Additive=5]="Additive"}(e.RenderMode||(e.RenderMode={}));const n=t=>t.split(" ").map(t=>parseFloat(t)),r={worldspawn:t=>({classname:"worldspawn",wad:t.wad.split(";").filter(t=>t.length).map(t=>t.replace(/\\/g,"/")),mapversion:parseInt(t.mapversion),skyname:t.skyname,maxRange:parseFloat(t.MaxRange)||8192,message:t.message||"",sounds:parseInt(t.sounds)||0,light:parseInt(t.light)||0,waveHeight:parseFloat(t.WaveHeight)||0,startDark:parseInt(t.startdark)||0,newUnit:parseInt(t.newunit)||0,defaultTeam:parseInt(t.defaultteam)||0,gameTitle:parseInt(t.gametitle)||0}),aiscripted_sequence:t=>({classname:"aiscripted_sequence",spawnflags:parseInt(t.spawnflags),m_iszEntity:t.m_iszEntity,m_iszPlay:t.m_iszPlay||"",m_flRadius:parseInt(t.m_flRadius)||512,m_flRepeat:parseInt(t.m_flRepeat)||0,m_fMoveTo:parseInt(t.m_fMoveTo)||0,m_iFinishSchedule:parseInt(t.m_iFinishSchedule)||0}),ambient_generic:t=>({classname:"ambient_generic",origin:n(t.origin),targetName:t.targetname,message:t.message,health:parseInt(t.health)||10,preset:parseInt(t.preset)||0,startVolume:parseInt(t.volstart)||0,fadeIn:parseInt(t.fadein),fadeOut:parseInt(t.fadeout),pitch:parseInt(t.pitch),pitchStart:parseInt(t.pitchstart),spinUp:parseInt(t.spinup),spinDown:parseInt(t.spindown),lfoType:parseInt(t.lfotype),lfoRate:parseInt(t.lforate),lfoModPitch:parseInt(t.lfomodpitch),lfoModVolume:parseInt(t.lfomodvolume),cSpinUp:parseInt(t.cspinup),spawnFlags:parseInt(t.spawnflags)}),ammo_357:t=>({classname:"ammo_357",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_9mmAR:t=>({classname:"ammo_9mmAR",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_9mmbox:t=>({classname:"ammo_9mmbox",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_9mmclip:t=>({classname:"ammo_9mmclip",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_ARgrenades:t=>({classname:"ammo_ARgrenades",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_buckshot:t=>({classname:"ammo_buckshot",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_crossbow:t=>({classname:"ammo_crossbow",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_gaussclip:t=>({classname:"ammo_gaussclip",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),ammo_rpgclip:t=>({classname:"ammo_rpgclip",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname||"",delay:parseInt(t.delay)||0,killTarget:t.killtarget||"",spawnFlags:t.spawnflags||0}),button_target:t=>({classname:"button_target",target:t.target,master:t.master,renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0"),zhltLightFlags:parseInt(t.zhlt_lightflags)||0,lightOrigin:t.light_origin,spawnFlags:parseInt(t.spawnflags)||1}),cycler:t=>({classname:"cycler",origin:n(t.origin),angles:n(t.angles),targetName:t.targetname,model:t.model,sequence:t.sequence||"",renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0")}),cycler_sprite:t=>({classname:"cycler_sprite",origin:n(t.origin),angles:n(t.angles),targetName:t.targetname,model:t.model,framerate:parseInt(t.framerate||"10"),renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0")}),cyclear_weapon:t=>({classname:"cycler_weapon",origin:n(t.origin),angles:n(t.angles),target:t.target,targetName:t.targetname,triggerTarget:t.TriggerTarget||"",triggerCondition:parseInt(t.TriggerCondition)||0,model:t.model,sequence:t.sequence,renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0")}),cyclear_wreckage:t=>({classname:"cycler_wreckage",origin:n(t.origin),angles:n(t.angles),targetName:t.targetname,model:t.model,framerate:parseInt(t.framerate)||10,scale:parseFloat(t.scale)||1,renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0")}),env_beam:t=>({classname:"env_beam",renderEffect:parseInt(t.renderfx)||0,renderMode:parseInt(t.rendermode)||0,renderAmmount:parseInt(t.renderamt)||255,renderColor:n(t.rendercolor||"0 0 0"),radius:parseFloat(t.Radius)||256,life:parseInt(t.life)||1,boltWidth:parseInt(t.BoltWidth)||20,noiseAmplitude:parseInt(t.NoiseAmplitude)||0,texture:t.texture||"sprites/laserbeam.spr",textureScroll:parseInt(t.TextureScroll)||35,frameRate:parseInt(t.framerate)||0,frameStart:parseInt(t.framestart)||0,strikeTime:parseInt(t.StrikeTime)||1,damage:parseInt(t.damage)||1,spawnFlags:parseInt(t.spawnflags)})};e.BspEntityParser=class{static parse(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];i.classname||e.push({classname:"!",data:i}),r[i.classname]?e.push(r[i.classname](i)):e.push({classname:"?",originalClassname:i.classname,data:i})}return e}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resizeTexture=(t,e,n,r,i)=>{const o=document.createElement("canvas"),a=o.getContext("2d");if(!a)throw new Error("Runtime error.");o.width=e,o.height=n;const s=document.createElement("canvas"),u=s.getContext("2d");if(!u)throw new Error("Runtime error.");s.width=r,s.height=i;const c=a.createImageData(e,n);for(let r=0;r<e*n*4;r+=4)c.data[r]=t[r],c.data[r+1]=t[r+1],c.data[r+2]=t[r+2],c.data[r+3]=t[r+3];return a.putImageData(c,0,0),u.drawImage(o,0,0,r,i),new Uint8Array(u.getImageData(0,0,r,i).data)},e.isPowerOfTwo=t=>0==(t&t-1),e.nextPowerOfTwo=t=>{--t;for(let e=1;32>e;e<<=1)t|=t>>e;return t+1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.SettingsButtonStyle=r.stylesheet({settings:{position:"relative"},menu:Object.assign({},{display:"none",position:"absolute",left:"-38px",bottom:"48px",padding:"2px 6px",fontSize:"14px",backgroundColor:"rgba(0, 0, 0, 0.4)",flexFlow:"column",minWidth:"100px"}),menuOpen:Object.assign({},{display:"none",position:"absolute",left:"-38px",bottom:"48px",padding:"2px 6px",fontSize:"14px",backgroundColor:"rgba(0, 0, 0, 0.4)",flexFlow:"column",minWidth:"100px"},{display:"flex"}),menuItemTitle:{padding:"6px 4px",borderBottom:"1px solid white",fontWeight:"bold"},menuItem:Object.assign({},{cursor:"pointer",margin:"4px 0",padding:"4px",$nest:{"&:last-child":{marginTop:0},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}}),menuItemSelected:Object.assign({},{cursor:"pointer",margin:"4px 0",padding:"4px",$nest:{"&:last-child":{marginTop:0},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}},{backgroundColor:"rgba(255, 255, 255, 0.2) !important"}),button:{width:"32px",height:"32px",padding:"5px"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.FullscreenButtonStyle=r.stylesheet({button:{width:"30px",minWidth:"30px",height:"30px",padding:"5px"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(124),o=n(126),a=n(128),s=n(130),u=n(131),c=n(132),f=n(134),l=n(135),d=n(73),h=n(78),p=n(34);e.ReplayMode=class extends r.Component{constructor(){super(...arguments),this.onPlayClick=()=>{this.props.game.player.play()},this.onPauseClick=()=>{this.props.game.player.pause()},this.onSpeedDown=()=>{this.props.game.player.speedDown()},this.onSpeedUp=()=>{this.props.game.player.speedUp()},this.onVolumeClick=()=>{this.props.game.soundSystem.toggleMute()},this.onPlayStateChange=()=>{this.forceUpdate()}}componentDidMount(){this.props.game.player.on("play",this.onPlayStateChange),this.props.game.player.on("pause",this.onPlayStateChange),this.props.game.player.on("stop",this.onPlayStateChange)}componentWillUnmount(){this.props.game.player.off("play",this.onPlayStateChange),this.props.game.player.off("pause",this.onPlayStateChange),this.props.game.player.off("stop",this.onPlayStateChange)}render(){const t=this.props.game,e=t.player,n=e.isPlaying,g=e.isPaused;return r.h("div",{class:this.props.class},r.h(o.TimeLine,{game:t}),r.h("div",{class:p.ControlsStyle.buttons},r.h("div",{class:p.ControlsStyle.left},r.h(l.SpeedDownButton,{onClick:this.onSpeedDown}),g||!n?r.h(s.PlayButton,{onClick:this.onPlayClick}):r.h(u.PauseButton,{onClick:this.onPauseClick}),r.h(f.SpeedUpButton,{onClick:this.onSpeedUp}),r.h(c.VolumeButton,{onClick:this.onVolumeClick}),r.h(a.VolumeControl,{game:t}),r.h(i.Time,{player:e})),r.h("div",{class:p.ControlsStyle.right},r.h(d.SettingsButton,{game:t}),r.h(h.FullscreenButton,{active:!0,root:this.props.root}))))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(74),o=n(125);e.Time=class extends r.Component{constructor(){super(...arguments),this.onPlay=()=>{this.setState({isPlaying:!0},this.update)},this.onPauseOrStop=()=>{this.setState({isPlaying:!1})},this.update=()=>{this.state.isPlaying&&(this.forceUpdate(),setTimeout(this.update,100))}}componentDidMount(){this.props.player.events.on("play",this.onPlay),this.props.player.events.on("pause",this.onPauseOrStop),this.props.player.events.on("stop",this.onPauseOrStop)}componentWillUnmount(){this.props.player.events.removeListener("play",this.onPlay),this.props.player.events.removeListener("pause",this.onPauseOrStop),this.props.player.events.removeListener("stop",this.onPauseOrStop)}render(){const t=i.formatTime(this.props.player.currentTime),e=i.formatTime(this.props.player.replay.length);return r.h("div",{class:o.Time.time},t," / ",e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.Time=r.stylesheet({time:{fontFamily:"'Roboto', Arial, Helvetica, sans-serif",fontSize:"10pt"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(127);e.TimeLine=class extends r.Component{constructor(t){super(t),this.onPostUpdate=()=>{const t=this.props.game.player;this.setState({progress:t.currentTime/t.replay.length})},this.onClick=t=>{const e=t.currentTarget.getClientRects()[0],n=1-(e.right-t.pageX)/(e.right-e.left);this.props.game.player.seekByPercent(100*n),this.props.game.player.pause()},this.onMouseEnter=()=>{this.setState({ghostKnobActive:!0})},this.onMouseMove=t=>{if(this.state.ghostKnobActive){const e=t.currentTarget.getClientRects()[0],n=1-(e.right-t.pageX)/(e.right-e.left);this.setState({ghostKnobPos:100*n+"%"})}},this.onMouseLeave=()=>{this.setState({ghostKnobActive:!1})},this.state={progress:0,ghostKnobActive:!1,ghostKnobPos:"0%"}}componentDidMount(){this.props.game.on("postupdate",this.onPostUpdate)}componentWillUnmount(){this.props.game.off("postupdate",this.onPostUpdate)}render(){const t=100*this.state.progress;return r.h("div",{class:i.TimeLine.timeline,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},r.h("div",{class:i.TimeLine.ghostLine}),r.h("div",{class:i.TimeLine.line,style:{right:100-t+"%"}}),r.h("div",{class:i.TimeLine.knob,style:{left:t+"%"}}),r.h("div",{class:i.TimeLine.ghostKnob,style:{left:this.state.ghostKnobPos}}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.TimeLine=r.stylesheet({timeline:{display:"flex",alignItems:"center",position:"relative",height:"26px",cursor:"pointer"},line:{height:"4px",backgroundColor:"#fff",position:"absolute",left:"0",right:"0",borderRadius:"2px"},ghostLine:{height:"4px",backgroundColor:"rgba(255, 255, 255, 0.5)",position:"absolute",left:"0",right:"0",borderRadius:"2px"},knob:{position:"absolute",width:"12px",height:"12px",backgroundColor:"#fff",borderRadius:"6px",left:"100%",marginLeft:"-6px"},ghostKnob:{position:"absolute",width:"8px",height:"8px",backgroundColor:"#fff",boxSizing:"border-box",borderRadius:"8px",left:"0",marginLeft:"-4px",display:"none",$nest:{"&:hover":{display:"block"}}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(129);e.VolumeControl=class extends r.Component{constructor(t){super(t),this.onVolumeChange=()=>{this.setState({volume:this.props.game.soundSystem.getVolume()})},this.onClick=t=>{const e=t.currentTarget.getClientRects()[0],n=1-(e.right-t.pageX)/(e.right-e.left);this.props.game.soundSystem.setVolume(n)},this.onMouseEnter=()=>{this.setState({ghostKnobActive:!0})},this.onMouseMove=t=>{if(this.state.ghostKnobActive){const e=t.currentTarget.getClientRects()[0],n=1-(e.right-t.pageX)/(e.right-e.left),r=a(95,l(5,100*n))+"%";this.setState({ghostKnobPos:r})}},this.onMouseLeave=()=>{this.setState({ghostKnobActive:!1})},this.state={volume:t.game.soundSystem.getVolume(),ghostKnobActive:!1,ghostKnobPos:"5%"}}componentDidMount(){this.props.game.soundSystem.events.on("volumeChange",this.onVolumeChange)}componentWillUnmount(){this.props.game.soundSystem.events.removeListener("volumeChange",this.onVolumeChange)}render(){const t=100*this.state.volume,e=a(95,l(5,t))+"%",n=a(95,l(5,100-t))+"%";return r.h("div",{class:i.VolumeControl.control,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},r.h("div",{class:i.VolumeControl.ghostLine}),r.h("div",{class:i.VolumeControl.line,style:{right:n}}),r.h("div",{class:i.VolumeControl.knob,style:{left:e}}),r.h("div",{class:i.VolumeControl.ghostKnob,style:{left:this.state.ghostKnobPos}}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.VolumeControl=r.stylesheet({control:{display:"flex",alignItems:"center",position:"relative",width:"80px",height:"26px",marginLeft:"6px",marginRight:"14px",cursor:"pointer"},line:{height:"4px",backgroundColor:"#fff",position:"absolute",left:"0",right:"0",borderRadius:"2px"},ghostLine:{height:"4px",backgroundColor:"rgba(255, 255, 255, 0.5)",position:"absolute",left:"0",right:"0",borderRadius:"2px"},knob:{position:"absolute",width:"12px",height:"12px",backgroundColor:"#fff",borderRadius:"6px",left:"100%",marginLeft:"-6px"},ghostKnob:{position:"absolute",width:"8px",height:"8px",backgroundColor:"#fff",boxSizing:"border-box",borderRadius:"8px",left:"0",marginLeft:"-4px",display:"none",$nest:{"&:hover":{display:"block"}}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(34);e.PlayButton=function(t){return r.h("div",{class:i.ControlsStyle.button,onClick:t.onClick},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 0 L0 64 L64 32 Z"})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(34);e.PauseButton=function(t){return r.h("div",{class:i.ControlsStyle.button,onClick:t.onClick},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 0 L0 64 L20 64 L20 0 M44 0 L64 0 L64 64 L44 64 Z"})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(22),o=n(133),a=n(34);e.VolumeButton=function(t){return r.h("div",{class:i.classes(a.ControlsStyle.button,o.VolumeButton.button),onClick:t.onClick},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"currentcolor"},r.h("path",{d:"M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.VolumeButton=r.stylesheet({button:{width:"28px",height:"28px",padding:"2px",marginRight:"5px"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(34);e.SpeedUpButton=function(t){return r.h("div",{class:i.ControlsStyle.button,onClick:t.onClick},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 0 L0 64 L32 32 L32 64 L64 32 L32 0 L32 32 Z"})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(23),i=n(22),o=n(136),a=n(34);e.SpeedDownButton=function(t){return r.h("div",{class:i.classes(a.ControlsStyle.button,o.SpeedDownButtonStyle.button),onClick:t.onClick},r.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",fill:"currentcolor"},r.h("path",{d:"M0 0 L0 64 L32 32 L32 64 L64 32 L32 0 L32 32 Z"})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.SpeedDownButtonStyle=r.stylesheet({button:{transform:"rotate(180deg)"}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(22);e.RootStyle=r.stylesheet({root:Object.assign({},{position:"relative",color:"white",width:"100%",height:"100%",cursor:"none",userSelect:"none"}),rootVisible:Object.assign({},{position:"relative",color:"white",width:"100%",height:"100%",cursor:"none",userSelect:"none"},{cursor:"default"}),title:Object.assign({},{position:"absolute",top:"20px",left:"0",zIndex:20,padding:"10px 10px 10px 20px",backgroundColor:"rgba(0, 0, 0, 0.4)",fontSize:"13pt",fontFamily:"'Roboto', Arial, Helvetica, sans-serif",opacity:0,transition:"opacity 0.2s"}),titleVisible:Object.assign({},{position:"absolute",top:"20px",left:"0",zIndex:20,padding:"10px 10px 10px 20px",backgroundColor:"rgba(0, 0, 0, 0.4)",fontSize:"13pt",fontFamily:"'Roboto', Arial, Helvetica, sans-serif",opacity:0,transition:"opacity 0.2s"},{opacity:1}),controls:Object.assign({},{zIndex:30,position:"absolute",width:"100%",bottom:0,padding:"0 16px",boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.4)",userSelect:"none",opacity:0,transition:"opacity 0.2s"}),controlsVisible:Object.assign({},{zIndex:30,position:"absolute",width:"100%",bottom:0,padding:"0 16px",boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.4)",userSelect:"none",opacity:0,transition:"opacity 0.2s"},{opacity:1}),screen:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10}})}])});
//# sourceMappingURL=hlviewer.min.js.map